!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=14)}([function(t,e,r){t.exports=r(12)},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.d(e,"a",(function(){return n}))},,function(t,e){
/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/
var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:{},n={};function i(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=h(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null);this._handle=new o(e),this._handle.streamer=this,this._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&c(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1;var n=this._partialLine+t;this._partialLine="";var i=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=i.meta.cursor;this._finished||(this._partialLine=n.substring(s-this._baseIndex),this._baseIndex=s),i&&i.data&&(this._rowCount+=i.data.length);var o=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(c(this._config.chunk)&&!e){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return;i=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!o||!c(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),o||i&&i.meta.paused||this._nextChunk(),i}},this._sendError=function(t){c(this._config.error)&&this._config.error(t)}}function s(t){var e;t=t||{},i.call(this,t),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,r=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(r)}}}function o(t){var e,r,i,s=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,o=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,l=this,f=0,p=0,d=!1,y=!1,g=[],m={data:[],errors:[],meta:{}};if(c(t.step)){var v=t.step;t.step=function(e){if(m=e,_())w();else{if(w(),0===m.data.length)return;f+=e.data.length,t.preview&&f>t.preview?r.abort():v(m,l)}}}function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function w(){if(m&&i&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines)for(var e=0;e<m.data.length;e++)b(m.data[e])&&m.data.splice(e--,1);return _()&&function(){if(!m)return;function e(e){c(t.transformHeader)&&(e=t.transformHeader(e)),g.push(e)}if(Array.isArray(m.data[0])){for(var r=0;_()&&r<m.data.length;r++)m.data[r].forEach(e);m.data.splice(0,1)}else m.data.forEach(e)}(),function(){if(!m||!t.header&&!t.dynamicTyping&&!t.transform)return m;function e(e,r){var n,i=t.header?{}:[];for(n=0;n<e.length;n++){var s=n,o=e[n];t.header&&(s=n>=g.length?"__parsed_extra":g[n]),t.transform&&(o=t.transform(o,s)),o=k(s,o),"__parsed_extra"===s?(i[s]=i[s]||[],i[s].push(o)):i[s]=o}return t.header&&(n>g.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+n,p+r):n<g.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+n,p+r)),i}var r=1;!m.data[0]||Array.isArray(m.data[0])?(m.data=m.data.map(e),r=m.data.length):m.data=e(m.data,0);t.header&&m.meta&&(m.meta.fields=g);return p+=r,m}()}function _(){return t.header&&0===g.length}function k(e,r){return function(e){return t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)}(e)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(s.test(r)?parseFloat(r):o.test(r)?new Date(r):""===r?null:r):r}function x(t,e,r,n){m.errors.push({type:t,code:e,message:r,row:n})}this.parse=function(s,o,l){var f=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var r=new RegExp(a(e)+"([^]*?)"+a(e),"gm"),n=(t=t.replace(r,"")).split("\r"),i=t.split("\n"),s=i.length>1&&i[0].length<n[0].length;if(1===n.length||s)return"\n";for(var o=0,u=0;u<n.length;u++)"\n"===n[u][0]&&o++;return o>=n.length/2?"\r\n":"\r"}(s,f)),i=!1,t.delimiter)c(t.delimiter)&&(t.delimiter=t.delimiter(s),m.meta.delimiter=t.delimiter);else{var p=function(e,r,i,s,o){var a,h,c;o=o||[",","\t","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var l=0;l<o.length;l++){var f=o[l],p=0,d=0,y=0;c=void 0;for(var g=new u({comments:s,delimiter:f,newline:r,preview:10}).parse(e),m=0;m<g.data.length;m++)if(i&&b(g.data[m]))y++;else{var v=g.data[m].length;d+=v,void 0!==c?v>1&&(p+=Math.abs(v-c),c=v):c=0}g.data.length>0&&(d/=g.data.length-y),(void 0===h||p>h)&&d>1.99&&(h=p,a=f)}return t.delimiter=a,{successful:!!a,bestDelimiter:a}}(s,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);p.successful?t.delimiter=p.bestDelimiter:(i=!0,t.delimiter=n.DefaultDelimiter),m.meta.delimiter=t.delimiter}var y=h(t);return t.preview&&t.header&&y.preview++,e=s,r=new u(y),m=r.parse(e,o,l),w(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,r.abort(),e=e.substr(r.getCharIndex())},this.resume=function(){d=!1,l.streamer.parseChunk(e,!0)},this.aborted=function(){return y},this.abort=function(){y=!0,r.abort(),m.meta.aborted=!0,c(t.complete)&&t.complete(m),e=""}}function a(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function u(t){var e,r=(t=t||{}).delimiter,i=t.newline,s=t.comments,o=t.step,u=t.preview,h=t.fastMode,l=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(l=t.escapeChar),("string"!=typeof r||n.BAD_DELIMITERS.indexOf(r)>-1)&&(r=","),s===r)throw new Error("Comment character same as delimiter");!0===s?s="#":("string"!=typeof s||n.BAD_DELIMITERS.indexOf(s)>-1)&&(s=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var f=0,p=!1;this.parse=function(t,n,d){if("string"!=typeof t)throw new Error("Input must be a string");var y=t.length,g=r.length,m=i.length,v=s.length,b=c(o);f=0;var w=[],_=[],k=[],x=0;if(!t)return L();if(h||!1!==h&&-1===t.indexOf(e)){for(var M=t.split(i),S=0;S<M.length;S++){if(k=M[S],f+=k.length,S!==M.length-1)f+=i.length;else if(d)return L();if(!s||k.substr(0,v)!==s){if(b){if(w=[],I(k.split(r)),B(),p)return L()}else I(k.split(r));if(u&&S>=u)return w=w.slice(0,u),L(!0)}}return L()}for(var E,C=t.indexOf(r,f),T=t.indexOf(i,f),A=new RegExp(a(l)+a(e),"g");;)if(t[f]!==e)if(s&&0===k.length&&t.substr(f,v)===s){if(-1===T)return L();f=T+m,T=t.indexOf(i,f),C=t.indexOf(r,f)}else if(-1!==C&&(C<T||-1===T))k.push(t.substring(f,C)),f=C+g,C=t.indexOf(r,f);else{if(-1===T)break;if(k.push(t.substring(f,T)),R(T+m),b&&(B(),p))return L();if(u&&w.length>=u)return L(!0)}else for(E=f,f++;;){if(-1===(E=t.indexOf(e,E+1)))return d||_.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:f}),N();if(E===y-1)return N(t.substring(f,E).replace(A,e));if(e!==l||t[E+1]!==l){if(e===l||0===E||t[E-1]!==l){var O=j(-1===T?C:Math.min(C,T));if(t[E+1+O]===r){k.push(t.substring(f,E).replace(A,e)),f=E+1+O+g,C=t.indexOf(r,f),T=t.indexOf(i,f);break}var P=j(T);if(t.substr(E+1+P,m)===i){if(k.push(t.substring(f,E).replace(A,e)),R(E+1+P+m),C=t.indexOf(r,f),b&&(B(),p))return L();if(u&&w.length>=u)return L(!0);break}_.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:f}),E++}}else E++}return N();function I(t){w.push(t),x=f}function j(e){var r=0;if(-1!==e){var n=t.substring(E+1,e);n&&""===n.trim()&&(r=n.length)}return r}function N(e){return d||(void 0===e&&(e=t.substr(f)),k.push(e),f=y,I(k),b&&B()),L()}function R(e){f=e,I(k),k=[],T=t.indexOf(i,f)}function L(t,e){return{data:e||!1?w[0]:w,errors:_,meta:{delimiter:r,linebreak:i,aborted:p,truncated:!!t,cursor:x+(n||0)}}}function B(){o(L(void 0,!0)),w=[],_=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return f}}function h(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var r in t)e[r]=h(t[r]);return e}function c(t){return"function"==typeof t}t.exports=n,n.parse=function(t,e,r){var i=(e=e||{}).dynamicTyping||!1;c(i)&&(e.dynamicTypingFunction=i,i={});if(e.dynamicTyping=i,e.transform=!!c(e.transform)&&e.transform,e.worker&&n.WORKERS_SUPPORTED){var o=newWorker();return o.userStep=e.step,o.userChunk=e.chunk,o.userComplete=e.complete,o.userError=e.error,e.step=c(e.step),e.chunk=c(e.chunk),e.complete=c(e.complete),e.error=c(e.error),delete e.worker,void o.postMessage({input:t,config:e,workerId:o.id})}var a=null;"string"==typeof t&&(a=new s(e));a||(a=new r(e));return a.stream(t)},n.unparse=function(t,e){var r=!1,i=!0,s=",",o="\r\n",u='"',h=u+u,c=!1,l=null;!function(){if("object"!=typeof e)return;"string"!=typeof e.delimiter||n.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(s=e.delimiter);("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(r=e.quotes);"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines);"string"==typeof e.newline&&(o=e.newline);"string"==typeof e.quoteChar&&(u=e.quoteChar);"boolean"==typeof e.header&&(i=e.header);if(Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(h=e.escapeChar+u)}();var f=new RegExp(a(u),"g");"string"==typeof t&&(t=JSON.parse(t));if(Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return d(null,t,c);if("object"==typeof t[0])return d(l||p(t[0]),t,c)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:p(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),d(t.fields||[],t.data||[],c);throw new Error("Unable to serialize unrecognized input");function p(t){if("object"!=typeof t)return[];var e=[];for(var r in t)e.push(r);return e}function d(t,e,r){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&t.length>0,u=!Array.isArray(e[0]);if(a&&i){for(var h=0;h<t.length;h++)h>0&&(n+=s),n+=y(t[h],h);e.length>0&&(n+=o)}for(var c=0;c<e.length;c++){var l=a?t.length:e[c].length,f=!1,p=a?0===Object.keys(e[c]).length:0===e[c].length;if(r&&!a&&(f="greedy"===r?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===r&&a){for(var d=[],g=0;g<l;g++){var m=u?t[g]:g;d.push(e[c][m])}f=""===d.join("").trim()}if(!f){for(var v=0;v<l;v++){v>0&&!p&&(n+=s);var b=a&&u?t[v]:v;n+=y(e[c][b],v)}c<e.length-1&&(!r||l>0&&!p)&&(n+=o)}}return n}function y(t,e){return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(t=t.toString().replace(f,h),"boolean"==typeof r&&r||Array.isArray(r)&&r[e]||function(t,e){for(var r=0;r<e.length;r++)if(t.indexOf(e[r])>-1)return!0;return!1}(t,n.BAD_DELIMITERS)||t.indexOf(s)>-1||" "===t.charAt(0)||" "===t.charAt(t.length-1)?u+t+u:t)}},n.RECORD_SEP=String.fromCharCode(30),n.UNIT_SEP=String.fromCharCode(31),n.BYTE_ORDER_MARK="\ufeff",n.BAD_DELIMITERS=["\r","\n",'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!1,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=u,n.ParserHandle=o,n.ChunkStreamer=i,n.StringStreamer=s,s.prototype=Object.create(s.prototype),s.prototype.constructor=s},,function(t,e){},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){(function(e){t.exports=function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[o]={exports:{}};e[o][0].call(h.exports,(function(t){return i(e[o][1][t]||t)}),h,h.exports,t,e,r,n)}return r[o].exports}for(var s=!1,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,r,n){(function(e,n){(function(){"use strict";const i=t("events").EventEmitter,s=t("./store"),o=t("./topic-alias-recv"),a=t("./topic-alias-send"),u=t("mqtt-packet"),h=t("./default-message-id-provider"),c=t("readable-stream").Writable,l=t("inherits"),f=t("reinterval"),p=t("rfdc/default"),d=t("./validations"),y=t("xtend"),g=t("debug")("mqttjs:client"),m=e?e.nextTick:function(t){setTimeout(t,0)},v=n.setImmediate||function(t){m(t)},b={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},w=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],_={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function k(t,e){let r;e.properties&&(r=e.properties.topicAlias);let n=e.topic.toString();if(0===n.length){if(void 0===r)return new Error("Unregistered Topic Alias");if(void 0===(n=t.topicAliasSend.getTopicByAlias(r)))return new Error("Unregistered Topic Alias");e.topic=n}r&&delete e.properties.topicAlias}function x(t,e,r){g("sendPacket :: packet: %O",e),g("sendPacket :: emitting `packetsend`"),t.emit("packetsend",e),g("sendPacket :: writing to stream");const n=u.writeToStream(e,t.stream,t.options);g("sendPacket :: writeToStream result %s",n),!n&&r?(g("sendPacket :: handle events on `drain` once through callback."),t.stream.once("drain",r)):r&&(g("sendPacket :: invoking cb"),r())}function M(t,e,r,n){g("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let i,s=e;if("publish"===s.cmd&&(s=p(e),i=k(t,s)))return r&&r(i);t.outgoingStore.put(s,(function(i){if(i)return r&&r(i);n(),x(t,e,r)}))}function S(t){g("nop ::",t)}function E(t,e){let r;const n=this;if(!(this instanceof E))return new E(t,e);for(r in this.options=e||{},b)void 0===this.options[r]?this.options[r]=b[r]:this.options[r]=e[r];g("MqttClient :: options.protocol",e.protocol),g("MqttClient :: options.protocolVersion",e.protocolVersion),g("MqttClient :: options.username",e.username),g("MqttClient :: options.keepalive",e.keepalive),g("MqttClient :: options.reconnectPeriod",e.reconnectPeriod),g("MqttClient :: options.rejectUnauthorized",e.rejectUnauthorized),g("MqttClient :: options.topicAliasMaximum",e.topicAliasMaximum),this.options.clientId="string"==typeof e.clientId?e.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),g("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===e.protocolVersion&&e.customHandleAcks?e.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=t,this.messageIdProvider=void 0===this.options.messageIdProvider?new h:this.options.messageIdProvider,this.outgoingStore=e.outgoingStore||new s,this.incomingStore=e.incomingStore||new s,this.queueQoSZero=void 0===e.queueQoSZero||e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,e.topicAliasMaximum>0&&(e.topicAliasMaximum>65535?g("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new o(e.topicAliasMaximum)),this.on("connect",(function(){const t=this.queue;g("connect :: sending queued packets"),function e(){const r=t.shift();g("deliver :: entry %o",r);let i=null;if(!r)return void n._resubscribe();i=r.packet,g("deliver :: call _sendPacket for %o",i);let s=!0;i.messageId&&0!==i.messageId&&(n.messageIdProvider.register(i.messageId)||(s=!1)),s?n._sendPacket(i,(function(t){r.cb&&r.cb(t),e()})):(g("messageId: %d has already used. The message is skipped and removed.",i.messageId),e())}()})),this.on("close",(function(){g("close :: connected set to `false`"),this.connected=!1,g("close :: clearing connackTimer"),clearTimeout(this.connackTimer),g("close :: clearing ping timer"),null!==n.pingTimer&&(n.pingTimer.clear(),n.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),g("close :: calling _setupReconnect"),this._setupReconnect()})),i.call(this),g("MqttClient :: setting up stream"),this._setupStream()}l(E,i),E.prototype._setupStream=function(){const t=this,e=new c,r=u.parser(this.options);let n=null;const i=[];function s(){if(i.length)m(o);else{const t=n;n=null,t()}}function o(){g("work :: getting next packet in queue");const e=i.shift();if(e)g("work :: packet pulled from queue"),t._handlePacket(e,s);else{g("work :: no packets in queue");const t=n;n=null,g("work :: done flag is %s",!!t),t&&t()}}g("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),g("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),r.on("packet",(function(t){g("parser :: on packet push to packets array."),i.push(t)})),e._write=function(t,e,i){n=i,g("writable stream :: parsing buffer"),r.parse(t),o()},g("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",(function(e){g("streamErrorHandler :: error",e.message),w.includes(e.code)?(g("streamErrorHandler :: emitting error"),t.emit("error",e)):S(e)})),this.stream.on("close",(function(){var e;g("(%s)stream :: on close",t.options.clientId),(e=t.outgoing)&&(g("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(e).forEach((function(t){e[t].volatile&&"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])}))),g("stream: emit close to MqttClient"),t.emit("close")})),g("_setupStream: sending packet `connect`");const a=Object.create(this.options);if(a.cmd="connect",this.topicAliasRecv&&(a.properties||(a.properties={}),this.topicAliasRecv&&(a.properties.topicAliasMaximum=this.topicAliasRecv.max)),x(this,a),r.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return t.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&x(this,y({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){g("!!connectTimeout hit!! Calling _cleanUp with force `true`"),t._cleanUp(!0)}),this.options.connectTimeout)},E.prototype._handlePacket=function(t,e){const r=this.options;if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<t.length)return this.emit("error",new Error("exceeding packets size "+t.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(g("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"auth":this._handleAuth(t),e();break;case"pingresp":this._handlePingresp(t),e();break;case"disconnect":this._handleDisconnect(t),e()}},E.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},E.prototype.publish=function(t,e,r,n){g("publish :: message `%s` to topic `%s`",e,t);const i=this.options;if("function"==typeof r&&(n=r,r=null),r=y({qos:0,retain:!1,dup:!1},r),this._checkDisconnecting(n))return this;const s=this,o=function(){let o=0;if((1===r.qos||2===r.qos)&&null===(o=s._nextId()))return g("No messageId left"),!1;const a={cmd:"publish",topic:t,payload:e,qos:r.qos,retain:r.retain,messageId:o,dup:r.dup};switch(5===i.protocolVersion&&(a.properties=r.properties),g("publish :: qos",r.qos),r.qos){case 1:case 2:s.outgoing[a.messageId]={volatile:!1,cb:n||S},g("MqttClient:publish: packet cmd: %s",a.cmd),s._sendPacket(a,void 0,r.cbStorePut);break;default:g("MqttClient:publish: packet cmd: %s",a.cmd),s._sendPacket(a,n,r.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!o())&&this._storeProcessingQueue.push({invoke:o,cbStorePut:r.cbStorePut,callback:n}),this},E.prototype.subscribe=function(){const t=this,e=new Array(arguments.length);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];const r=[];let n=e.shift();const i=n.resubscribe;let s=e.pop()||S,o=e.pop();const a=this.options.protocolVersion;delete n.resubscribe,"string"==typeof n&&(n=[n]),"function"!=typeof s&&(o=s,s=S);const u=d.validateTopics(n);if(null!==u)return v(s,new Error("Invalid topic "+u)),this;if(this._checkDisconnecting(s))return g("subscribe: discconecting true"),this;const h={qos:0};if(5===a&&(h.nl=!1,h.rap=!1,h.rh=0),o=y(h,o),Array.isArray(n)?n.forEach((function(e){if(g("subscribe: array topic %s",e),!Object.prototype.hasOwnProperty.call(t._resubscribeTopics,e)||t._resubscribeTopics[e].qos<o.qos||i){const t={topic:e,qos:o.qos};5===a&&(t.nl=o.nl,t.rap=o.rap,t.rh=o.rh,t.properties=o.properties),g("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),r.push(t)}})):Object.keys(n).forEach((function(e){if(g("subscribe: object topic %s",e),!Object.prototype.hasOwnProperty.call(t._resubscribeTopics,e)||t._resubscribeTopics[e].qos<n[e].qos||i){const t={topic:e,qos:n[e].qos};5===a&&(t.nl=n[e].nl,t.rap=n[e].rap,t.rh=n[e].rh,t.properties=o.properties),g("subscribe: pushing `%s` to subs list",t),r.push(t)}})),!r.length)return s(null,[]),this;const c=function(){const e=t._nextId();if(null===e)return g("No messageId left"),!1;const n={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:e};if(o.properties&&(n.properties=o.properties),t.options.resubscribe){g("subscribe :: resubscribe true");const e=[];r.forEach((function(r){if(t.options.reconnectPeriod>0){const n={qos:r.qos};5===a&&(n.nl=r.nl||!1,n.rap=r.rap||!1,n.rh=r.rh||0,n.properties=r.properties),t._resubscribeTopics[r.topic]=n,e.push(r.topic)}})),t.messageIdToTopic[n.messageId]=e}return t.outgoing[n.messageId]={volatile:!0,cb:function(t,e){if(!t){const t=e.granted;for(let e=0;e<t.length;e+=1)r[e].qos=t[e]}s(t,r)}},g("subscribe :: call _sendPacket"),t._sendPacket(n),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!c())&&this._storeProcessingQueue.push({invoke:c,callback:s}),this},E.prototype.unsubscribe=function(){const t=this,e=new Array(arguments.length);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];let r=e.shift(),n=e.pop()||S,i=e.pop();"string"==typeof r&&(r=[r]),"function"!=typeof n&&(i=n,n=S);const s=d.validateTopics(r);if(null!==s)return v(n,new Error("Invalid topic "+s)),this;if(t._checkDisconnecting(n))return this;const o=function(){const e=t._nextId();if(null===e)return g("No messageId left"),!1;const s={cmd:"unsubscribe",qos:1,messageId:e};return"string"==typeof r?s.unsubscriptions=[r]:Array.isArray(r)&&(s.unsubscriptions=r),t.options.resubscribe&&s.unsubscriptions.forEach((function(e){delete t._resubscribeTopics[e]})),"object"==typeof i&&i.properties&&(s.properties=i.properties),t.outgoing[s.messageId]={volatile:!0,cb:n},g("unsubscribe: call _sendPacket"),t._sendPacket(s),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!o())&&this._storeProcessingQueue.push({invoke:o,callback:n}),this},E.prototype.end=function(t,e,r){const n=this;function i(){g("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,t),n._cleanUp(t,()=>{g("end :: finish :: calling process.nextTick on closeStores"),m(function(){g("end :: closeStores: closing incoming and outgoing stores"),n.disconnected=!0,n.incomingStore.close((function(t){n.outgoingStore.close((function(e){if(g("end :: closeStores: emitting end"),n.emit("end"),r){const n=t||e;g("end :: closeStores: invoking callback with args"),r(n)}}))})),n._deferredReconnect&&n._deferredReconnect()}.bind(n))},e)}return g("end :: (%s)",this.options.clientId),null!=t&&"boolean"==typeof t||(r=e||S,e=t,t=!1,"object"!=typeof e&&(r=e,e=null,"function"!=typeof r&&(r=S))),"object"!=typeof e&&(r=e,e=null),g("end :: cb? %s",!!r),r=r||S,this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?(g("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(g("end :: (%s) :: immediately calling finish",n.options.clientId),i()),this)},E.prototype.removeOutgoingMessage=function(t){const e=this.outgoing[t]?this.outgoing[t].cb:null;return delete this.outgoing[t],this.outgoingStore.del({messageId:t},(function(){e(new Error("Message removed"))})),this},E.prototype.reconnect=function(t){g("client reconnect");const e=this,r=function(){t?(e.options.incomingStore=t.incomingStore,e.options.outgoingStore=t.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new s,e.outgoingStore=e.options.outgoingStore||new s,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this},E.prototype._reconnect=function(){g("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),g("client already connected. disconnecting first.")):(g("_reconnect: calling _setupStream"),this._setupStream())},E.prototype._setupReconnect=function(){const t=this;!t.disconnecting&&!t.reconnectTimer&&t.options.reconnectPeriod>0?(this.reconnecting||(g("_setupReconnect :: emit `offline` state"),this.emit("offline"),g("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),g("_setupReconnect :: setting reconnectTimer for %d ms",t.options.reconnectPeriod),t.reconnectTimer=setInterval((function(){g("reconnectTimer :: reconnect triggered!"),t._reconnect()}),t.options.reconnectPeriod)):g("_setupReconnect :: doing nothing...")},E.prototype._clearReconnect=function(){g("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},E.prototype._cleanUp=function(t,e){const r=arguments[2];if(e&&(g("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",e)),g("_cleanUp :: forced? %s",t),t)0===this.options.reconnectPeriod&&this.options.clean&&(n=this.outgoing)&&(g("flush: queue exists? %b",!!n),Object.keys(n).forEach((function(t){"function"==typeof n[t].cb&&(n[t].cb(new Error("Connection closed")),delete n[t])}))),g("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const t=y({cmd:"disconnect"},r);g("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(t,v.bind(null,this.stream.end.bind(this.stream)))}var n;this.disconnecting||(g("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(g("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(g("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())},E.prototype._sendPacket=function(t,e,r){g("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||S,e=e||S;const n=function(t,e){if(5===t.options.protocolVersion&&"publish"===e.cmd){let r;e.properties&&(r=e.properties.topicAlias);const n=e.topic.toString();if(t.topicAliasSend)if(r){if(0!==n.length&&(g("applyTopicAlias :: register topic: %s - alias: %d",n,r),!t.topicAliasSend.put(n,r)))return g("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}else 0!==n.length&&(t.options.autoAssignTopicAlias?(r=t.topicAliasSend.getAliasByTopic(n))?(e.topic="",e.properties={...e.properties,topicAlias:r},g("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",n,r)):(r=t.topicAliasSend.getLruAlias(),t.topicAliasSend.put(n,r),e.properties={...e.properties,topicAlias:r},g("applyTopicAlias :: auto assign topic: %s - alias: %d",n,r)):t.options.autoUseTopicAlias&&(r=t.topicAliasSend.getAliasByTopic(n))&&(e.topic="",e.properties={...e.properties,topicAlias:r},g("applyTopicAlias :: auto use topic: %s - alias: %d",n,r)));else if(r)return g("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}}(this,t);if(n)e(n);else{if(!this.connected)return"auth"===t.cmd?(this._shiftPingInterval(),void x(this,t,e)):(g("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(t,e,r));switch(this._shiftPingInterval(),t.cmd){case"publish":break;case"pubrel":return void M(this,t,e,r);default:return void x(this,t,e)}switch(t.qos){case 2:case 1:M(this,t,e,r);break;case 0:default:x(this,t,e)}g("_sendPacket :: (%s) ::  end",this.options.clientId)}},E.prototype._storePacket=function(t,e,r){g("_storePacket :: packet: %o",t),g("_storePacket :: cb? %s",!!e),r=r||S;let n=t;if("publish"===n.cmd){const r=k(this,n=p(t));if(r)return e&&e(r)}0===(n.qos||0)&&this.queueQoSZero||"publish"!==n.cmd?this.queue.push({packet:n,cb:e}):n.qos>0?(e=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,(function(t){if(t)return e&&e(t);r()}))):e&&e(new Error("No connection to broker"))},E.prototype._setupPingTimer=function(){g("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=f((function(){t._checkPing()}),1e3*this.options.keepalive))},E.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},E.prototype._checkPing=function(){g("_checkPing :: checking ping..."),this.pingResp?(g("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(g("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},E.prototype._handlePingresp=function(){this.pingResp=!0},E.prototype._handleConnack=function(t){g("_handleConnack");const e=this.options,r=5===e.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));t.properties.topicAliasMaximum>0&&(this.topicAliasSend=new a(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=t.properties.serverKeepAlive,this._shiftPingInterval()),t.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===r)this.reconnecting=!1,this._onConnect(t);else if(r>0){const t=new Error("Connection refused: "+_[r]);t.code=r,this.emit("error",t)}},E.prototype._handleAuth=function(t){const e=this.options.protocolVersion,r=5===e?t.reasonCode:t.returnCode;if(5!==e){const t=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+e);return t.code=r,void this.emit("error",t)}const n=this;this.handleAuth(t,(function(t,e){if(t)n.emit("error",t);else if(24===r)n.reconnecting=!1,n._sendPacket(e);else{const e=new Error("Connection refused: "+_[r]);t.code=r,n.emit("error",e)}}))},E.prototype.handleAuth=function(t,e){e()},E.prototype._handlePublish=function(t,e){g("_handlePublish: packet %o",t),e=void 0!==e?e:S;let r=t.topic.toString();const n=t.payload,i=t.qos,s=t.messageId,o=this,a=this.options,u=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let e;if(t.properties&&(e=t.properties.topicAlias),void 0!==e)if(0===r.length){if(!(e>0&&e<=65535))return g("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));{const t=this.topicAliasRecv.getTopicByAlias(e);if(!t)return g("_handlePublish :: unregistered topic alias. alias: %d",e),void this.emit("error",new Error("Received unregistered Topic Alias"));g("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",r=t,e)}}else{if(!this.topicAliasRecv.put(r,e))return g("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));g("_handlePublish :: registered topic: %s - alias: %d",r,e)}}switch(g("_handlePublish: qos %d",i),i){case 2:a.customHandleAcks(r,n,t,(function(r,n){return r instanceof Error||(n=r,r=null),r?o.emit("error",r):-1===u.indexOf(n)?o.emit("error",new Error("Wrong reason code for pubrec")):void(n?o._sendPacket({cmd:"pubrec",messageId:s,reasonCode:n},e):o.incomingStore.put(t,(function(){o._sendPacket({cmd:"pubrec",messageId:s},e)})))}));break;case 1:a.customHandleAcks(r,n,t,(function(i,a){return i instanceof Error||(a=i,i=null),i?o.emit("error",i):-1===u.indexOf(a)?o.emit("error",new Error("Wrong reason code for puback")):(a||o.emit("message",r,n,t),void o.handleMessage(t,(function(t){if(t)return e&&e(t);o._sendPacket({cmd:"puback",messageId:s,reasonCode:a},e)})))}));break;case 0:this.emit("message",r,n,t),this.handleMessage(t,e);break;default:g("_handlePublish: unknown QoS. Doing nothing.")}},E.prototype.handleMessage=function(t,e){e()},E.prototype._handleAck=function(t){const e=t.messageId,r=t.cmd;let n=null;const i=this.outgoing[e]?this.outgoing[e].cb:null,s=this;let o;if(i){switch(g("_handleAck :: packet type",r),r){case"pubcomp":case"puback":{const r=t.reasonCode;r&&r>0&&16!==r&&((o=new Error("Publish error: "+_[r])).code=r,i(o,t)),delete this.outgoing[e],this.outgoingStore.del(t,i),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue();break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:e};const r=t.reasonCode;r&&r>0&&16!==r?((o=new Error("Publish error: "+_[r])).code=r,i(o,t)):this._sendPacket(n);break}case"suback":delete this.outgoing[e],this.messageIdProvider.deallocate(e);for(let r=0;r<t.granted.length;r++)if(0!=(128&t.granted[r])){const t=this.messageIdToTopic[e];t&&t.forEach((function(t){delete s._resubscribeTopics[t]}))}this._invokeStoreProcessingQueue(),i(null,t);break;case"unsuback":delete this.outgoing[e],this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue(),i(null);break;default:s.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else g("_handleAck :: Server sent an ack in error. Ignoring.")},E.prototype._handlePubrel=function(t,e){g("handling pubrel packet"),e=void 0!==e?e:S;const r=this,n={cmd:"pubcomp",messageId:t.messageId};r.incomingStore.get(t,(function(t,i){t?r._sendPacket(n,e):(r.emit("message",i.topic,i.payload,i),r.handleMessage(i,(function(t){if(t)return e(t);r.incomingStore.del(i,S),r._sendPacket(n,e)})))}))},E.prototype._handleDisconnect=function(t){this.emit("disconnect",t)},E.prototype._nextId=function(){return this.messageIdProvider.allocate()},E.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},E.prototype._resubscribe=function(){g("_resubscribe");const t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&t.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){g("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){const r={};r[t[e]]=this._resubscribeTopics[t[e]],r.resubscribe=!0,this.subscribe(r,{properties:r[t[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},E.prototype._onConnect=function(t){if(this.disconnected)return void this.emit("connect",t);const e=this;this.connackPacket=t,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function r(){let n=e.outgoingStore.createStream();function i(){e._storeProcessing=!1,e._packetIdsDuringStoreProcessing={}}function s(){n.destroy(),n=null,e._flushStoreProcessingQueue(),i()}e.once("close",s),n.on("error",(function(t){i(),e._flushStoreProcessingQueue(),e.removeListener("close",s),e.emit("error",t)})),n.on("end",(function(){let n=!0;for(const t in e._packetIdsDuringStoreProcessing)if(!e._packetIdsDuringStoreProcessing[t]){n=!1;break}n?(i(),e.removeListener("close",s),e._invokeAllStoreProcessingQueue(),e.emit("connect",t)):r()})),function t(){if(!n)return;e._storeProcessing=!0;const r=n.read(1);let i;r?e._packetIdsDuringStoreProcessing[r.messageId]?t():e.disconnecting||e.reconnectTimer?n.destroy&&n.destroy():(i=e.outgoing[r.messageId]?e.outgoing[r.messageId].cb:null,e.outgoing[r.messageId]={volatile:!1,cb:function(e,r){i&&i(e,r),t()}},e._packetIdsDuringStoreProcessing[r.messageId]=!0,e.messageIdProvider.register(r.messageId)?e._sendPacket(r):g("messageId: %d has already used.",r.messageId)):n.once("readable",t)}()}()},E.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const t=this._storeProcessingQueue[0];if(t&&t.invoke())return this._storeProcessingQueue.shift(),!0}return!1},E.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},E.prototype._flushStoreProcessingQueue=function(){for(const t of this._storeProcessingQueue)t.cbStorePut&&t.cbStorePut(new Error("Connection closed")),t.callback&&t.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},r.exports=E}).call(this)}).call(this,t("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(t,e,r){(function(r){(function(){"use strict";const n=t("readable-stream").Transform,i=t("duplexify");let s,o,a,u=!1;e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");const h="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);const c=function(t,e){const r="alis"===t.protocol?"wss":"ws";let n=r+"://"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(n=r+"://"+t.hostname+":"+t.port+t.path),"function"==typeof t.transformWsUrl&&(n=t.transformWsUrl(n,t,e)),n}(e,t);return(s=e.my).connectSocket({url:c,protocols:h}),o=function(){const t=new n;return t._write=function(t,e,r){s.sendSocketMessage({data:t.buffer,success:function(){r()},fail:function(){r(new Error)}})},t._flush=function(t){s.closeSocket({success:function(){t()}})},t}(),a=i.obj(),u||(u=!0,s.onSocketOpen((function(){a.setReadable(o),a.setWritable(o),a.emit("connect")})),s.onSocketMessage((function(t){if("string"==typeof t.data){const e=r.from(t.data,"base64");o.push(e)}else{const e=new FileReader;e.addEventListener("load",(function(){let t=e.result;t=t instanceof ArrayBuffer?r.from(t):r.from(t,"utf8"),o.push(t)})),e.readAsArrayBuffer(t.data)}})),s.onSocketClose((function(){a.end(),a.destroy()})),s.onSocketError((function(t){a.destroy(t)}))),a}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(t,e,r){"use strict";const n=t("net"),i=t("debug")("mqttjs:tcp");e.exports=function(t,e){e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost";const r=e.port,s=e.hostname;return i("port %d and host %s",r,s),n.createConnection(r,s)}},{debug:18,net:16}],4:[function(t,e,r){"use strict";const n=t("tls"),i=t("net"),s=t("debug")("mqttjs:tls");e.exports=function(t,e){e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",0===i.isIP(e.host)&&(e.servername=e.host),e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,s("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);const r=n.connect(e);function o(n){e.rejectUnauthorized&&t.emit("error",n),r.end()}return r.on("secureConnect",(function(){e.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",o)})),r.on("error",o),r}},{debug:18,net:16,tls:16}],5:[function(t,e,n){(function(n,i){(function(){"use strict";const s=t("ws"),o=t("debug")("mqttjs:ws"),a=t("duplexify"),u=t("readable-stream").Transform,h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],c=void 0!==n&&"browser"===n.title||"function"==typeof r;function l(t,e){let r=t.protocol+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}function f(t){const e=t;return t.hostname||(e.hostname="localhost"),t.port||("wss"===t.protocol?e.port=443:e.port=80),t.path||(e.path="/"),t.wsOptions||(e.wsOptions={}),c||"wss"!==t.protocol||h.forEach((function(r){Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,r)&&(e.wsOptions[r]=t[r])})),e}e.exports=c?function(t,e){let r;o("browserStreamBuilder");const n=function(t){const e=f(t);if(e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const t=new URL(document.URL);e.hostname=t.hostname,e.port||(e.port=t.port)}return void 0===e.objectMode&&(e.objectMode=!(!0===e.binary||void 0===e.binary)),e}(e).browserBufferSize||524288,s=e.browserBufferTimeout||1e3,h=!e.objectMode,c=function(t,e){const r="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt",n=l(e,t),i=new WebSocket(n,[r]);return i.binaryType="arraybuffer",i}(t,e),p=function(t,e,r){const n=new u({objectModeMode:t.objectMode});return n._write=e,n._flush=function(t){c.close(),t()},n}(e,(function t(e,r,o){c.bufferedAmount>n&&setTimeout(t,s,e,r,o),h&&"string"==typeof e&&(e=i.from(e,"utf8"));try{c.send(e)}catch(t){return o(t)}o()}));e.objectMode||(p._writev=b),p.on("close",()=>{c.close()});const d=void 0!==c.addEventListener;function y(){r.setReadable(p),r.setWritable(p),r.emit("connect")}function g(){r.end(),r.destroy()}function m(t){r.destroy(t)}function v(t){let e=t.data;e=e instanceof ArrayBuffer?i.from(e):i.from(e,"utf8"),p.push(e)}function b(t,e){const r=new Array(t.length);for(let e=0;e<t.length;e++)"string"==typeof t[e].chunk?r[e]=i.from(t[e],"utf8"):r[e]=t[e].chunk;this._write(i.concat(r),"binary",e)}return c.readyState===c.OPEN?r=p:(r=r=a(void 0,void 0,e),e.objectMode||(r._writev=b),d?c.addEventListener("open",y):c.onopen=y),r.socket=c,d?(c.addEventListener("close",g),c.addEventListener("error",m),c.addEventListener("message",v)):(c.onclose=g,c.onerror=m,c.onmessage=v),r}:function(t,e){o("streamBuilder");const r=f(e),n=l(r,t),i=function(t,e,r){o("createWebSocket"),o("protocol: "+r.protocolId+" "+r.protocolVersion);const n="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";return o("creating new Websocket for url: "+e+" and protocol: "+n),new s(e,[n],r.wsOptions)}(0,n,r),a=s.createWebSocketStream(i,r.wsOptions);return a.url=n,i.on("close",()=>{a.destroy()}),a}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(t,e,r){(function(r){(function(){"use strict";const n=t("readable-stream").Transform,i=t("duplexify");let s,o,a;e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");const u="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);const h=function(t,e){const r="wxs"===t.protocol?"wss":"ws";let n=r+"://"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(n=r+"://"+t.hostname+":"+t.port+t.path),"function"==typeof t.transformWsUrl&&(n=t.transformWsUrl(n,t,e)),n}(e,t);s=wx.connectSocket({url:h,protocols:[u]}),o=function(){const t=new n;return t._write=function(t,e,r){s.send({data:t.buffer,success:function(){r()},fail:function(t){r(new Error(t))}})},t._flush=function(t){s.close({success:function(){t()}})},t}(),(a=i.obj())._destroy=function(t,e){s.close({success:function(){e&&e(t)}})};const c=a.destroy;return a.destroy=function(){a.destroy=c;const t=this;setTimeout((function(){s.close({fail:function(){t._destroy(new Error)}})}),0)}.bind(a),s.onOpen((function(){a.setReadable(o),a.setWritable(o),a.emit("connect")})),s.onMessage((function(t){let e=t.data;e=e instanceof ArrayBuffer?r.from(e):r.from(e,"utf8"),o.push(e)})),s.onClose((function(){a.end(),a.destroy()})),s.onError((function(t){a.destroy(new Error(t.errMsg))})),a}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}n.prototype.allocate=function(){const t=this.nextId++;return 65536===this.nextId&&(this.nextId=1),t},n.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},n.prototype.register=function(t){return!0},n.prototype.deallocate=function(t){},n.prototype.clear=function(){},e.exports=n},{}],8:[function(t,e,r){"use strict";const n=t("xtend"),i=t("readable-stream").Readable,s={objectMode:!0},o={clean:!0};function a(t){if(!(this instanceof a))return new a(t);this.options=t||{},this.options=n(o,t),this._inflights=new Map}a.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},a.prototype.createStream=function(){const t=new i(s),e=[];let r=!1,n=0;return this._inflights.forEach((function(t,r){e.push(t)})),t._read=function(){!r&&n<e.length?this.push(e[n++]):this.push(null)},t.destroy=function(){if(r)return;const t=this;r=!0,setTimeout((function(){t.emit("close")}),0)},t},a.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this},a.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error("missing packet")),this},a.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},e.exports=a},{"readable-stream":69,xtend:81}],9:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.aliasToTopic={},this.max=t}n.prototype.put=function(t,e){return!(0===e||e>this.max||(this.aliasToTopic[e]=t,this.length=Object.keys(this.aliasToTopic).length,0))},n.prototype.getTopicByAlias=function(t){return this.aliasToTopic[t]},n.prototype.clear=function(){this.aliasToTopic={}},e.exports=n},{}],10:[function(t,e,r){"use strict";const n=t("lru-cache"),i=t("number-allocator").NumberAllocator;function s(t){if(!(this instanceof s))return new s(t);t>0&&(this.aliasToTopic=new n({max:t}),this.topicToAlias={},this.numberAllocator=new i(1,t),this.max=t,this.length=0)}s.prototype.put=function(t,e){if(0===e||e>this.max)return!1;const r=this.aliasToTopic.get(e);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(e,t),this.topicToAlias[t]=e,this.numberAllocator.use(e),this.length=this.aliasToTopic.length,!0},s.prototype.getTopicByAlias=function(t){return this.aliasToTopic.get(t)},s.prototype.getAliasByTopic=function(t){const e=this.topicToAlias[t];return void 0!==e&&this.aliasToTopic.get(e),e},s.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},s.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},e.exports=s},{"lru-cache":37,"number-allocator":46}],11:[function(t,e,r){"use strict";function n(t){const e=t.split("/");for(let t=0;t<e.length;t++)if("+"!==e[t]){if("#"===e[t])return t===e.length-1;if(-1!==e[t].indexOf("+")||-1!==e[t].indexOf("#"))return!1}return!0}e.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!n(t[e]))return t[e];return null}}},{}],12:[function(t,e,n){(function(n){(function(){"use strict";const i=t("../client"),s=t("../store"),o=t("url"),a=t("xtend"),u=t("debug")("mqttjs"),h={};function c(t,e){if(u("connecting to an MQTT broker..."),"object"!=typeof t||e||(e=t,t=null),e=e||{},t){const r=o.parse(t,!0);if(null!=r.port&&(r.port=Number(r.port)),null===(e=a(r,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(function(t){let e;t.auth&&((e=t.auth.match(/^(.+):(.+)$/))?(t.username=e[1],t.password=e[2]):t.username=t.auth)}(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}if(!h[e.protocol]){const t=-1!==["mqtts","wss"].indexOf(e.protocol);e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((function(e,r){return(!t||r%2!=0)&&"function"==typeof h[e]}))[0]}if(!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);const r=new i((function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.protocol=e.servers[t._reconnectCount].protocol?e.servers[t._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,t._reconnectCount++),u("calling streambuilder for",e.protocol),h[e.protocol](t,e)}),e);return r.on("error",(function(){})),r}void 0!==n&&"browser"!==n.title||"function"!=typeof r?(h.mqtt=t("./tcp"),h.tcp=t("./tcp"),h.ssl=t("./tls"),h.tls=t("./tls"),h.mqtts=t("./tls")):(h.wx=t("./wx"),h.wxs=t("./wx"),h.ali=t("./ali"),h.alis=t("./ali")),h.ws=t("./ws"),h.wss=t("./ws"),e.exports=c,e.exports.connect=c,e.exports.MqttClient=i,e.exports.Store=s}).call(this)}).call(this,t("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(t,e,r){"use strict";r.byteLength=function(t){var e=h(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){var e,r,n=h(t),o=n[0],a=n[1],u=new s(function(t,e,r){return 3*(e+r)/4-r}(0,o,a)),c=0,l=a>0?o-4:o;for(r=0;r<l;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[c++]=255&e),1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(c(t,o,o+16383>a?a:o+16383));return 1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,s,o=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],14:[function(t,e,r){"use strict";const{Buffer:n}=t("buffer"),i=Symbol.for("BufferList");function s(t){if(!(this instanceof s))return new s(t);s._init.call(this,t)}s._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},s.prototype._new=function(t){return new s(t)},s.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},s.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let t=0;t<e;t++)r+=this._bufs[t].length;return r},s.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},s.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},s.prototype.copy=function(t,e,r,i){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const s=!!t,o=this._offset(r),a=i-r;let u=a,h=s&&e||0,c=o[1];if(0===r&&i===this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,h),h+=this._bufs[e].length;return t}if(u<=this._bufs[o[0]].length-c)return s?this._bufs[o[0]].copy(t,e,c,c+u):this._bufs[o[0]].slice(c,c+u);s||(t=n.allocUnsafe(a));for(let e=o[0];e<this._bufs.length;e++){const r=this._bufs[e].length-c;if(!(u>r)){this._bufs[e].copy(t,h,c,c+u),h+=r;break}this._bufs[e].copy(t,h,c),h+=r,u-=r,c&&(c=0)}return t.length>h?t.slice(0,h):t},s.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!=typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},s.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},s.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},s.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"==typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},s.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},s.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"==typeof e&&(r=e,e=void 0),"function"==typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof t?t=n.from([t]):"string"==typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let s=i[0],o=i[1];for(;s<this._bufs.length;s++){const e=this._bufs[s];for(;o<e.length;)if(e.length-o>=t.length){const r=e.indexOf(t,o);if(-1!==r)return this._reverseOffset([s,r]);o=e.length-t.length+1}else{const e=this._reverseOffset([s,o]);if(this._match(e,t))return e;o++}o=0}return-1},s.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)!function(e){s.prototype[e]=null===t[e]?function(t,r){return this.slice(t,t+r)[e](0,r)}:function(r=0){return this.slice(r,r+t[e])[e](0)}}(e)}(),s.prototype._isBufferList=function(t){return t instanceof s||s.isBufferList(t)},s.isBufferList=function(t){return null!=t&&t[i]},e.exports=s},{buffer:17}],15:[function(t,e,r){"use strict";const n=t("readable-stream").Duplex,i=t("inherits"),s=t("./BufferList");function o(t){if(!(this instanceof o))return new o(t);if("function"==typeof t){this._callback=t;const e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",(function(t){t.on("error",e)})),this.on("unpipe",(function(t){t.removeListener("error",e)})),t=null}s._init.call(this,t),n.call(this)}i(o,n),Object.assign(o.prototype,s.prototype),o.prototype._new=function(t){return new o(t)},o.prototype._write=function(t,e,r){this._appendBuffer(t),"function"==typeof r&&r()},o.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},o.prototype.end=function(t){n.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(t,e){this._bufs.length=0,this.length=0,e(t)},o.prototype._isBufferList=function(t){return t instanceof o||t instanceof s||o.isBufferList(t)},o.isBufferList=s.isBufferList,e.exports=o,e.exports.BufferListStream=o,e.exports.BufferList=s},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(t,e,r){},{}],17:[function(t,e,r){(function(e){(function(){"use strict";var e=t("base64-js"),n=t("ieee754");r.Buffer=o,r.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},r.INSPECT_MAX_BYTES=50;var i=2147483647;function s(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return a(t,e,r)}function a(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|f(t,e),n=s(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=o.prototype,n}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return o.from(n,e,r);var i=function(t){if(o.isBuffer(t)){var e=0|l(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||q(t.length)?s(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),s(t<0?0:0|l(t))}function c(t){for(var e=t.length<0?0:0|l(t.length),r=s(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function f(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(t).length;default:if(i)return n?-1:L(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function d(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),q(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){var s,o=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,u/=2,r/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(s=r;s<a;s++)if(h(t,s)===h(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===u)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var l=!0,f=0;f<u;f++)if(h(t,s+f)!==h(e,f)){l=!1;break}if(l)return s}return-1}function g(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(q(a))return o;t[r+o]=a}return o}function m(t,e,r,n){return D(L(e,t.length-r),t,r,n)}function v(t,e,r,n){return D(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function b(t,e,r,n){return v(t,e,r,n)}function w(t,e,r,n){return D(B(e),t,r,n)}function _(t,e,r,n){return D(function(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function k(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function x(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s,o,a,u,h=t[i],c=null,l=h>239?4:h>223?3:h>191?2:1;if(i+l<=r)switch(l){case 1:h<128&&(c=h);break;case 2:128==(192&(s=t[i+1]))&&(u=(31&h)<<6|63&s)>127&&(c=u);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&(u=(15&h)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(t){var e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=M));return r}(n)}r.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,r){return a(t,e,r)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},o.allocUnsafe=function(t){return h(t)},o.allocUnsafeSlow=function(t){return h(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(U(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),U(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(U(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return E(this,e,r);case"base64":return k(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(U(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(s,a),h=this.slice(n,i),c=t.slice(e,r),l=0;l<u;++l)if(h[l]!==c[l]){s=h[l],a=c[l];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return d(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return d(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":return v(this,t,e,r);case"latin1":case"binary":return b(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function S(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=R(t[s]);return i}function T(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function A(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(t,e,r,i,s){return e=+e,r>>>=0,s||P(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function j(t,e,r,i,s){return e=+e,r>>>=0,s||P(t,0,r,8),n.write(t,e,r,i,52,8),r+8}o.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=o.prototype,n},o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},o.prototype.readInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),n.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),n.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),n.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),n.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return I(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return I(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var s=i-1;s>=0;--s)t[s+e]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:o.from(t,n),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var N=/[^+/0-9A-Za-z-_]/g;function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function L(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function B(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function D(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function q(t){return t!=t}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(t,e,r){(function(n){(function(){r.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&"%c"===t&&(i=++n)}),t.splice(i,0,r)},r.save=function(t){try{t?r.storage.setItem("debug",t):r.storage.removeItem("debug")}catch(t){}},r.load=function(){let t;try{t=r.storage.getItem("debug")}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t},r.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(t){}}(),r.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),e.exports=t("./common")(r);const{formatters:i}=e.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,t("_process"))},{"./common":19,_process:50}],19:[function(t,e,r){e.exports=function(e){function r(t){let e,i,s,o=null;function a(...t){if(!a.enabled)return;const n=a,i=Number(new Date),s=i-(e||i);n.diff=s,n.prev=e,n.curr=i,e=i,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,i)=>{if("%%"===e)return"%";o++;const s=r.formatters[i];if("function"==typeof s){const r=t[o];e=s.call(n,r),t.splice(o,1),o--}return e}),r.formatArgs.call(n,t),(n.log||r.log).apply(n,t)}return a.namespace=t,a.useColors=r.useColors(),a.color=r.selectColor(t),a.extend=n,a.destroy=r.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==r.namespaces&&(i=r.namespaces,s=r.enabled(t)),s),set:t=>{o=t}}),"function"==typeof r.init&&r.init(a),a}function n(t,e){const n=r(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){return t instanceof Error?t.stack||t.message:t},r.disable=function(){const t=[...r.names.map(i),...r.skips.map(i).map(t=>"-"+t)].join(",");return r.enable(""),t},r.enable=function(t){let e;r.save(t),r.namespaces=t,r.names=[],r.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(e=0;e<i;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")))},r.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1},r.humanize=t("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(t=>{r[t]=e[t]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return r.colors[Math.abs(e)%r.colors.length]},r.enable(r.load()),r}},{ms:45}],20:[function(t,e,r){(function(r,n){(function(){var i=t("readable-stream"),s=t("end-of-stream"),o=t("inherits"),a=t("stream-shift"),u=n.from&&n.from!==Uint8Array.from?n.from([0]):new n([0]),h=function(t,e){t._corked?t.once("uncork",e):e()},c=function(t,e){return function(r){r?function(t,e){t._autoDestroy&&t.destroy(e)}(t,"premature close"===r.message?null:r):e&&!t._ended&&t.end()}},l=function(){},f=function(t,e,r){if(!(this instanceof f))return new f(t,e,r);i.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};o(f,i.Duplex),f.obj=function(t,e,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new f(t,e,r)},f.prototype.cork=function(){1==++this._corked&&this.emit("cork")},f.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},f.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)t&&t.destroy&&t.destroy();else if(null!==t&&!1!==t){var e=this,n=s(t,{writable:!0,readable:!1},c(this,this._forwardEnd)),i=function(){var t=e._ondrain;e._ondrain=null,t&&t()};this._unwrite&&r.nextTick(i),this._writable=t,this._writable.on("drain",i),this._unwrite=function(){e._writable.removeListener("drain",i),n()},this.uncork()}else this.end()},f.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();var e,r=this,n=s(t,{writable:!1,readable:!0},c(this)),o=function(){r._forward()},a=function(){r.push(null)};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:(e=t,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on("readable",o),this._readable2.on("end",a),this._unread=function(){r._readable2.removeListener("readable",o),r._readable2.removeListener("end",a),n()},this._forward()}},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=a(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},f.prototype.destroy=function(t,e){if(e||(e=l),this.destroyed)return e(null);this.destroyed=!0;var n=this;r.nextTick((function(){n._destroy(t),e(null)}))},f.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},f.prototype._write=function(t,e,r){if(!this.destroyed)return this._corked?h(this,this._write.bind(this,t,e,r)):t===u?this._finish(r):this._writable?void(!1===this._writable.write(t)?this._ondrain=r:this.destroyed||r()):r()},f.prototype._finish=function(t){var e=this;this.emit("preend"),h(this,(function(){var r,n;n=function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit("prefinish"),h(e,t)},(r=e._forwardEnd&&e._writable)?r._writableState&&r._writableState.finished?n():r._writableState?r.end(n):(r.end(),n()):n()}))},f.prototype.end=function(t,e,r){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this._writableState.destroyed||this.write(u),i.Writable.prototype.end.call(this,r))},e.exports=f}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(t,e,r){(function(r){(function(){var n=t("once"),i=function(){},s=function(t,e,o){if("function"==typeof e)return s(t,null,e);e||(e={}),o=n(o||i);var a=t._writableState,u=t._readableState,h=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,l=!1,f=function(){t.writable||p()},p=function(){c=!1,h||o.call(t)},d=function(){h=!1,c||o.call(t)},y=function(e){o.call(t,e?new Error("exited with error code: "+e):null)},g=function(e){o.call(t,e)},m=function(){r.nextTick(v)},v=function(){if(!l)return(!h||u&&u.ended&&!u.destroyed)&&(!c||a&&a.ended&&!a.destroyed)?void 0:o.call(t,new Error("premature close"))},b=function(){t.req.on("finish",p)};return function(t){return t.setHeader&&"function"==typeof t.abort}(t)?(t.on("complete",p),t.on("abort",m),t.req?b():t.on("request",b)):c&&!a&&(t.on("end",f),t.on("close",f)),function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length}(t)&&t.on("exit",y),t.on("end",d),t.on("finish",p),!1!==e.error&&t.on("error",g),t.on("close",m),function(){l=!0,t.removeListener("complete",p),t.removeListener("abort",m),t.removeListener("request",b),t.req&&t.req.removeListener("finish",p),t.removeListener("end",f),t.removeListener("close",f),t.removeListener("finish",p),t.removeListener("exit",y),t.removeListener("end",d),t.removeListener("error",g),t.removeListener("close",m)}};e.exports=s}).call(this)}).call(this,t("_process"))},{_process:50,once:48}],22:[function(t,e,r){var n=Object.create||function(t){var e=function(){};return e.prototype=t,new e},i=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r},s=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0;var a,u=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),a=0===h.x}catch(t){a=!1}function c(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function l(t,e,r,i){var s,o,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]):(o=t._events=n(null),t._eventsCount=0),a){if("function"==typeof a?a=o[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),!a.warned&&(s=c(t))&&s>0&&a.length>s){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=o[e]=r,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=s.call(f,n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):g(i,i.length):[]}function y(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function g(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}a?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):o.defaultMaxListeners=u,o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(t){var e,r,n,i,s,o,a="error"===t;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(r=o[t]))return!1;var h="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=g(t,n),s=0;s<n;++s)i[s].call(r)}(r,h,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,s=g(t,i),o=0;o<i;++o)s[o].call(r,n)}(r,h,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var s=t.length,o=g(t,s),a=0;a<s;++a)o[a].call(r,n,i)}(r,h,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,s){if(e)t.call(r,n,i,s);else for(var o=t.length,a=g(t,o),u=0;u<o;++u)a[u].call(r,n,i,s)}(r,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),s=1;s<n;s++)i[s-1]=arguments[s];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,s=g(t,i),o=0;o<i;++o)s[o].apply(r,n)}(r,h,this,i)}return!0},o.prototype.addListener=function(t,e){return l(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return l(this,t,e,!0)},o.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},o.prototype.removeListener=function(t,e){var r,i,s,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=n(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,s=o;break}if(s<0)return this;0===s?r.shift():function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,s),1===r.length&&(i[t]=r[0]),i.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.removeAllListeners=function(t){var e,r,s;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=n(null):delete r[t]),this;if(0===arguments.length){var o,a=i(r);for(s=0;s<a.length;++s)"removeListener"!==(o=a[s])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},o.prototype.listenerCount=y,o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(t,e,r){r.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,h=u>>1,c=-7,l=r?i-1:0,f=r?-1:1,p=t[e+l];for(l+=f,s=p&(1<<-c)-1,p>>=-c,c+=a;c>0;s=256*s+t[e+l],l+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+t[e+l],l+=f,c-=8);if(0===s)s=1-h;else{if(s===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=h}return(p?-1:1)*o*Math.pow(2,s-n)},r.write=function(t,e,r,n,i,s){var o,a,u,h=8*s-i-1,c=(1<<h)-1,l=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=c?(a=0,o=c):o+l>=1?(a=(e*u-1)*Math.pow(2,i),o+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;t[r+p]=255&o,p+=d,o/=256,h-=8);t[r+p-d]|=128*y}},{}],24:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},{}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=t,this.value=e}return t.prototype.rotateLeft=function(){var t=this.parent,e=this.brother,r=this.leftChild,n=this.rightChild;if(!n)throw new Error("unknown error");var i=n.leftChild,s=n.rightChild;return t&&(t.leftChild===this?t.leftChild=n:t.rightChild===this&&(t.rightChild=n)),n.parent=t,n.brother=e,n.leftChild=this,n.rightChild=s,e&&(e.brother=n),this.parent=n,this.brother=s,this.leftChild=r,this.rightChild=i,s&&(s.parent=n,s.brother=this),r&&(r.parent=this,r.brother=i),i&&(i.parent=this,i.brother=r),n},t.prototype.rotateRight=function(){var t=this.parent,e=this.brother,r=this.leftChild;if(!r)throw new Error("unknown error");var n=this.rightChild,i=r.leftChild,s=r.rightChild;return t&&(t.leftChild===this?t.leftChild=r:t.rightChild===this&&(t.rightChild=r)),r.parent=t,r.brother=e,r.leftChild=i,r.rightChild=this,e&&(e.brother=r),i&&(i.parent=r,i.brother=this),this.parent=r,this.brother=i,this.leftChild=s,this.rightChild=n,s&&(s.parent=this,s.brother=n),n&&(n.parent=this,n.brother=s),r},t.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},t.TreeNodeColorType={red:!0,black:!1},t}();Object.freeze(n),r.default=n},{}],26:[function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function i(t){var e=this;void 0===t&&(t=[]);var r=[],s=0,o=0,a=0,u=0,h=0,c=0;this.size=function(){return c},this.empty=function(){return 0===c},this.clear=function(){s=a=o=u=h=c=0,f.call(this,i.bucketSize),c=0},this.front=function(){return r[s][o]},this.back=function(){return r[a][u]},this.forEach=function(t){if(!this.empty()){var e=0;if(s!==a){for(h=o;h<i.bucketSize;++h)t(r[s][h],e++);for(h=s+1;h<a;++h)for(var n=0;n<i.bucketSize;++n)t(r[h][n],e++);for(h=0;h<=u;++h)t(r[a][h],e++)}else for(var h=o;h<=u;++h)t(r[s][h],e++)}};var l=function(t){var e=s*i.bucketSize+o,r=e+t,n=a*i.bucketSize+u;if(r<e||r>n)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(r/i.bucketSize),curNodePointerIndex:r%i.bucketSize}};this.getElementByPos=function(t){var e=l(t),n=e.curNodeBucketIndex,i=e.curNodePointerIndex;return r[n][i]},this.eraseElementByPos=function(t){var e=this;if(t<0||t>c)throw new Error("pos should more than 0 and less than queue's size");if(0===t)this.popFront();else if(t===this.size())this.popBack();else{for(var r=[],n=t+1;n<c;++n)r.push(this.getElementByPos(n));this.cut(t),this.popBack(),r.forEach((function(t){return e.pushBack(t)}))}},this.eraseElementByValue=function(t){if(!this.empty()){var e=[];this.forEach((function(r){r!==t&&e.push(r)}));for(var r=e.length,n=0;n<r;++n)this.setElementByPos(n,e[n]);this.cut(r-1)}};var f=function(t){for(var e=[],n=t*i.sigma,l=Math.max(Math.ceil(n/i.bucketSize),2),f=0;f<l;++f)e.push(new Array(i.bucketSize));var p=Math.ceil(t/i.bucketSize),d=Math.floor(l/2)-Math.floor(p/2),y=d,g=0;if(this.size())for(f=0;f<p;++f){for(var m=0;m<i.bucketSize;++m)if(e[d+f][m]=this.front(),this.popFront(),this.empty()){y=d+f,g=m;break}if(this.empty())break}r=e,s=d,o=0,a=y,u=g,h=l,c=t};this.pushBack=function(t){this.empty()||(a===h-1&&u===i.bucketSize-1&&f.call(this,this.size()),u<i.bucketSize-1?++u:a<h-1&&(++a,u=0)),++c,r[a][u]=t},this.popBack=function(){this.empty()||(1!==this.size()&&(u>0?--u:s<a&&(--a,u=i.bucketSize-1)),c>0&&--c)},this.setElementByPos=function(t,e){var n=l(t),i=n.curNodeBucketIndex,s=n.curNodePointerIndex;r[i][s]=e},this.insert=function(t,e,r){var n=this;if(void 0===r&&(r=1),0===t)for(;r--;)this.pushFront(e);else if(t===this.size())for(;r--;)this.pushBack(e);else{for(var i=[],s=t;s<c;++s)i.push(this.getElementByPos(s));for(this.cut(t-1),s=0;s<r;++s)this.pushBack(e);i.forEach((function(t){return n.pushBack(t)}))}},this.find=function(t){if(s===a){for(var e=o;e<=u;++e)if(r[s][e]===t)return!0;return!1}for(e=o;e<i.bucketSize;++e)if(r[s][e]===t)return!0;for(e=s+1;e<a;++e)for(var n=0;n<i.bucketSize;++n)if(r[e][n]===t)return!0;for(e=0;e<=u;++e)if(r[a][e]===t)return!0;return!1},this.reverse=function(){for(var t=0,e=c-1;t<e;){var r=this.getElementByPos(t);this.setElementByPos(t,this.getElementByPos(e)),this.setElementByPos(e,r),++t,--e}},this.unique=function(){if(!this.empty()){var t=[],e=this.front();this.forEach((function(r,n){0!==n&&r===e||(t.push(r),e=r)}));for(var r=0;r<c;++r)this.setElementByPos(r,t[r]);this.cut(t.length-1)}},this.sort=function(t){var e=[];this.forEach((function(t){e.push(t)})),e.sort(t);for(var r=0;r<c;++r)this.setElementByPos(r,e[r])},this.pushFront=function(t){this.empty()||(0===s&&0===o&&f.call(this,this.size()),o>0?--o:s>0&&(--s,o=i.bucketSize-1)),++c,r[s][o]=t},this.popFront=function(){this.empty()||(1!==this.size()&&(o<i.bucketSize-1?++o:s<a&&(++s,o=0)),c>0&&--c)},this.shrinkToFit=function(){var t=this,e=[];this.forEach((function(t){e.push(t)}));var n=e.length;r=[];for(var s=Math.ceil(n/i.bucketSize),o=0;o<s;++o)r.push(new Array(i.bucketSize));this.clear(),e.forEach((function(e){return t.pushBack(e)}))},this.cut=function(t){if(t<0)this.clear();else{var e=l(t),r=e.curNodeBucketIndex,n=e.curNodePointerIndex;a=r,u=n,c=t+1}},this[Symbol.iterator]=function(){return function(){var t,e;return n(this,(function(n){switch(n.label){case 0:if(0===c)return[2];if(s!==a)return[3,5];e=o,n.label=1;case 1:return e<=u?[4,r[s][e]]:[3,4];case 2:n.sent(),n.label=3;case 3:return++e,[3,1];case 4:return[2];case 5:e=o,n.label=6;case 6:return e<i.bucketSize?[4,r[s][e]]:[3,9];case 7:n.sent(),n.label=8;case 8:return++e,[3,6];case 9:e=s+1,n.label=10;case 10:if(!(e<a))return[3,15];t=0,n.label=11;case 11:return t<i.bucketSize?[4,r[e][t]]:[3,14];case 12:n.sent(),n.label=13;case 13:return++t,[3,11];case 14:return++e,[3,10];case 15:e=0,n.label=16;case 16:return e<=u?[4,r[a][e]]:[3,19];case 17:n.sent(),n.label=18;case 18:return++e,[3,16];case 19:return[2]}}))}()},function(){var n=i.bucketSize;t.size?n=t.size():t.length&&(n=t.length);var o=n*i.sigma;h=Math.ceil(o/i.bucketSize),h=Math.max(h,3);for(var u=0;u<h;++u)r.push(new Array(i.bucketSize));var c=Math.ceil(n/i.bucketSize);s=Math.floor(h/2)-Math.floor(c/2),a=s,t.forEach((function(t){return e.pushBack(t)}))}(),Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),i.sigma=3,i.bucketSize=5e3,Object.freeze(i),r.default=i},{}],27:[function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=t("../LinkList/LinkList"),o=t("../Map/Map");function a(t,e,r){var u=this;if(void 0===t&&(t=[]),void 0===e&&(e=a.initSize),r=r||function(t){var e,r,n=0,s="";if("number"==typeof t)n=((n=Math.floor(t))<<5)-n,n&=n;else{s="string"!=typeof t?JSON.stringify(t):t;try{for(var o=i(s),a=o.next();!a.done;a=o.next())n=(n<<5)-n+a.value.charCodeAt(0),n&=n}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}}return n^n>>>16},0!=(e&e-1))throw new Error("initBucketNum must be 2 to the power of n");var h=0,c=[],l=Math.max(a.initSize,Math.min(a.maxSize,e));this.size=function(){return h},this.empty=function(){return 0===h},this.clear=function(){h=0,l=e,c=[]},this.forEach=function(t){var e=0;c.forEach((function(r){r.forEach((function(r){t(r,e++)}))}))},this.setElement=function(t,e){var n,u;if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=e){var f=r(t)&l-1;if(c[f]){var p=c[f].size();if(c[f]instanceof s.default){try{for(var d=i(c[f]),y=d.next();!y.done;y=d.next()){var g=y.value;if(g.key===t)return void(g.value=e)}}catch(t){n={error:t}}finally{try{y&&!y.done&&(u=d.return)&&u.call(d)}finally{if(n)throw n.error}}c[f].pushBack({key:t,value:e}),c[f].size()>=a.treeifyThreshold&&(c[f]=new o.default(c[f]))}else c[f].setElement(t,e);var m=c[f].size();h+=m-p}else++h,c[f]=new s.default([{key:t,value:e}]);h>l*a.sigma&&function(t){if(!(t>=a.maxSize)){l=2*t;var e=[];c.forEach((function(n,i){if(!n.empty()){if(n instanceof s.default&&1===n.size()){var u=n.front(),h=u.key,f=u.value;e[r(h)&l-1]=new s.default([{key:h,value:f}])}else if(n instanceof o.default){var p=new s.default,d=new s.default;n.forEach((function(e){0==(r(e.key)&t)?p.pushBack(e):d.pushBack(e)})),p.size()>a.untreeifyThreshold?e[i]=new o.default(p):p.size()&&(e[i]=p),d.size()>a.untreeifyThreshold?e[i+t]=new o.default(d):d.size()&&(e[i+t]=d)}else{var y=new s.default,g=new s.default;n.forEach((function(e){0==(r(e.key)&t)?y.pushBack(e):g.pushBack(e)})),y.size()&&(e[i]=y),g.size()&&(e[i+t]=g)}c[i].clear()}})),c=e}}.call(this,l)}else this.eraseElementByKey(t)},this.getElementByKey=function(t){var e,n,s=r(t)&l-1;if(c[s]){if(c[s]instanceof o.default)return c[s].getElementByKey(t);try{for(var a=i(c[s]),u=a.next();!u.done;u=a.next()){var h=u.value;if(h.key===t)return h.value}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},this.eraseElementByKey=function(t){var e,n,u=r(t)&l-1;if(c[u]){var f=c[u].size();if(c[u]instanceof o.default)c[u].eraseElementByKey(t),c[u].size()<=a.untreeifyThreshold&&(c[u]=new s.default(c[u]));else{var p=-1;try{for(var d=i(c[u]),y=d.next();!y.done;y=d.next())if(++p,y.value.key===t){c[u].eraseElementByPos(p);break}}catch(t){e={error:t}}finally{try{y&&!y.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}}var g=c[u].size();h+=g-f}},this.find=function(t){var e,n,s=r(t)&l-1;if(!c[s])return!1;if(c[s]instanceof o.default)return c[s].find(t);try{for(var a=i(c[s]),u=a.next();!u.done;u=a.next())if(u.value.key===t)return!0}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!1},this[Symbol.iterator]=function(){return function(){var t,e,r,s,o,a;return n(this,(function(n){switch(n.label){case 0:t=0,n.label=1;case 1:if(!(t<l))return[3,10];for(;t<l&&!c[t];)++t;if(t>=l)return[3,10];n.label=2;case 2:n.trys.push([2,7,8,9]),o=void 0,e=i(c[t]),r=e.next(),n.label=3;case 3:return r.done?[3,6]:[4,r.value];case 4:n.sent(),n.label=5;case 5:return r=e.next(),[3,3];case 6:return[3,9];case 7:return s=n.sent(),o={error:s},[3,9];case 8:try{r&&!r.done&&(a=e.return)&&a.call(e)}finally{if(o)throw o.error}return[7];case 9:return++t,[3,1];case 10:return[2]}}))}()},t.forEach((function(t){var e=t.key,r=t.value;return u.setElement(e,r)})),Object.freeze(this)}a.initSize=16,a.maxSize=1<<30,a.sigma=.75,a.treeifyThreshold=8,a.untreeifyThreshold=6,a.minTreeifySize=64,Object.freeze(a),r.default=a},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Set/Set"),o=t("../LinkList/LinkList");function a(t,e,r){var u=this;if(void 0===t&&(t=[]),void 0===e&&(e=a.initSize),r=r||function(t){var e=0,r="";if("number"==typeof t)e=((e=Math.floor(t))<<5)-e,e&=e;else{r="string"!=typeof t?JSON.stringify(t):t;for(var n=0;n<r.length;n++)e=(e<<5)-e+r.charCodeAt(n),e&=e}return e^e>>>16},0!=(e&e-1))throw new Error("initBucketNum must be 2 to the power of n");var h=0,c=[],l=Math.max(a.initSize,Math.min(a.maxSize,e));this.size=function(){return h},this.empty=function(){return 0===h},this.clear=function(){h=0,l=e,c=[]},this.forEach=function(t){var e=0;c.forEach((function(r){r.forEach((function(r){t(r,e++)}))}))},this.insert=function(t){if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var e=r(t)&l-1;if(c[e]){var n=c[e].size();if(c[e]instanceof o.default){if(c[e].find(t))return;c[e].pushBack(t),c[e].size()>=a.treeifyThreshold&&(c[e]=new s.default(c[e]))}else c[e].insert(t);var i=c[e].size();h+=i-n}else c[e]=new o.default([t]),++h;h>l*a.sigma&&function(t){if(!(t>=a.maxSize)){l=2*t;var e=[];c.forEach((function(n,i){if(!n.empty()){if(n instanceof o.default&&1===n.size()){var u=n.front();if(void 0===u)throw new Error("unknown error");e[r(u)&l-1]=new o.default([u])}else if(n instanceof s.default){var h=new o.default,f=new o.default;n.forEach((function(e){0==(r(e)&t)?h.pushBack(e):f.pushBack(e)})),h.size()>a.untreeifyThreshold?e[i]=new s.default(h):h.size()&&(e[i]=h),f.size()>a.untreeifyThreshold?e[i+t]=new s.default(f):f.size()&&(e[i+t]=f)}else{var p=new o.default,d=new o.default;n.forEach((function(e){0==(r(e)&t)?p.pushBack(e):d.pushBack(e)})),p.size()&&(e[i]=p),d.size()&&(e[i+t]=d)}c[i].clear()}})),c=e}}.call(this,l)},this.eraseElementByValue=function(t){var e=r(t)&l-1;if(c[e]){var n=c[e].size();c[e].eraseElementByValue(t),c[e]instanceof s.default&&c[e].size()<=a.untreeifyThreshold&&(c[e]=new o.default(c[e]));var i=c[e].size();h+=i-n}},this.find=function(t){var e=r(t)&l-1;return!!c[e]&&c[e].find(t)},this[Symbol.iterator]=function(){return function(){var t,e,r,s,o,a;return n(this,(function(n){switch(n.label){case 0:t=0,n.label=1;case 1:if(!(t<l))return[3,10];for(;t<l&&!c[t];)++t;if(t>=l)return[3,10];n.label=2;case 2:n.trys.push([2,7,8,9]),o=void 0,e=i(c[t]),r=e.next(),n.label=3;case 3:return r.done?[3,6]:[4,r.value];case 4:n.sent(),n.label=5;case 5:return r=e.next(),[3,3];case 6:return[3,9];case 7:return s=n.sent(),o={error:s},[3,9];case 8:try{r&&!r.done&&(a=e.return)&&a.call(e)}finally{if(o)throw o.error}return[7];case 9:return++t,[3,1];case 10:return[2]}}))}()},t.forEach((function(t){return u.insert(t)})),Object.freeze(this)}a.initSize=16,a.maxSize=1<<30,a.sigma=.75,a.treeifyThreshold=8,a.untreeifyThreshold=6,a.minTreeifySize=64,Object.freeze(a),r.default=a},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=t};function s(t){var e=this;void 0===t&&(t=[]);var r=0,s=void 0,o=void 0;this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){s=o=void 0,r=0},this.front=function(){return null==s?void 0:s.value},this.back=function(){return null==o?void 0:o.value},this.forEach=function(t){for(var e=s,r=0;e;){if(void 0===e.value)throw new Error("unknown error");t(e.value,r++),e=e.next}},this.getElementByPos=function(t){if(t<0||t>=r)throw new Error("pos must more then 0 and less then the list length");for(var e=s;t--&&e;)e=e.next;if(!e||void 0===e.value)throw new Error("unknown error");return e.value},this.eraseElementByPos=function(t){if(t<0||t>=r)throw new Error("erase pos must more then 0 and less then the list length");if(0===t)this.popFront();else if(t===r-1)this.popBack();else{for(var e=s;t--;){if(!(null==e?void 0:e.next))throw new Error("unknown error");e=e.next}if(!e||!e.pre||!e.next)throw new Error("unknown error");var n=e.pre,i=e.next;i.pre=n,n.next=i,r>0&&--r}},this.eraseElementByValue=function(t){for(;s&&s.value===t;)this.popFront();for(;o&&o.value===t;)this.popBack();if(s)for(var e=s;e;){if(e.value===t){var n=e.pre,i=e.next;i&&(i.pre=n),n&&(n.next=i),r>0&&--r}e=e.next}},this.pushBack=function(t){if(null==t)throw new Error("you can't push null or undefined here");++r;var e=new i(t);o?(o.next=e,e.pre=o,o=e):s=o=e},this.popBack=function(){o&&(r>0&&--r,o&&(s===o?s=o=void 0:(o=o.pre)&&(o.next=void 0)))},this.setElementByPos=function(t,e){if(null==e)throw new Error("you can't set null or undefined here");if(t<0||t>=r)throw new Error("pos must more then 0 and less then the list length");for(var n=s;t--;){if(!n)throw new Error("unknown error");n=n.next}n&&(n.value=e)},this.insert=function(t,e,n){if(void 0===n&&(n=1),null==e)throw new Error("you can't insert null or undefined here");if(t<0||t>r)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(n<0)throw new Error("insert size must more than 0");if(0===t)for(;n--;)this.pushFront(e);else if(t===r)for(;n--;)this.pushBack(e);else{for(var o=s,a=1;a<t;++a){if(!(null==o?void 0:o.next))throw new Error("unknown error");o=null==o?void 0:o.next}if(!o)throw new Error("unknown error");var u=o.next;for(r+=n;n--;)o.next=new i(e),o.next.pre=o,o=o.next;o.next=u,u&&(u.pre=o)}},this.find=function(t){for(var e=s;e;){if(e.value===t)return!0;e=e.next}return!1},this.reverse=function(){for(var t=s,e=o,n=0;t&&e&&2*n<r;){var i=t.value;t.value=e.value,e.value=i,t=t.next,e=e.pre,++n}},this.unique=function(){for(var t=s;t;){for(var e=t;e&&e.next&&e.value===e.next.value;)e=e.next,r>0&&--r;t.next=e.next,t.next&&(t.next.pre=t),t=t.next}},this.sort=function(t){var e=[];this.forEach((function(t){e.push(t)})),e.sort(t);var r=s;e.forEach((function(t){r&&(r.value=t,r=r.next)}))},this.pushFront=function(t){if(null==t)throw new Error("you can't push null or undefined here");++r;var e=new i(t);s?(e.next=s,s.pre=e,s=e):s=o=e},this.popFront=function(){s&&(r>0&&--r,s&&(s===o?s=o=void 0:(s=s.next)&&(s.pre=void 0)))},this.merge=function(t){var e=this,n=s;t.forEach((function(t){for(;n&&void 0!==n.value&&n.value<=t;)n=n.next;if(void 0===n)e.pushBack(t),n=o;else if(n===s)e.pushFront(t),n=s;else{++r;var a=n.pre;a&&(a.next=new i(t),a.next.pre=a,a.next.next=n,n&&(n.pre=a.next))}}))},this[Symbol.iterator]=function(){return function(){var t;return n(this,(function(e){switch(e.label){case 0:t=s,e.label=1;case 1:if(void 0===t)return[3,3];if(!t.value)throw new Error("unknown error");return[4,t.value];case 2:return e.sent(),t=t.next,[3,1];case 3:return[2]}}))}()},t.forEach((function(t){return e.pushBack(t)})),Object.freeze(this)}Object.freeze(s),r.default=s},{}],30:[function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Base/TreeNode");function o(t,e){var r=this;void 0===t&&(t=[]),e=e||function(t,e){return t<e?-1:t>e?1:0};var o=0,a=new s.default;a.color=s.default.TreeNodeColorType.black,this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,a.key=a.value=void 0,a.leftChild=a.rightChild=a.brother=void 0};var u=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.leftChild?u(t.leftChild):t},h=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.rightChild?h(t.rightChild):t};this.front=function(){if(!this.empty()){var t=u(a);if(void 0===t.key||void 0===t.value)throw new Error("unknown error");return{key:t.key,value:t.value}}},this.back=function(){if(!this.empty()){var t=h(a);if(void 0===t.key||void 0===t.value)throw new Error("unknown error");return{key:t.key,value:t.value}}},this.forEach=function(t){var e,r,n=0;try{for(var s=i(this),o=s.next();!o.done;o=s.next())t(o.value,n++)}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}},this.getElementByPos=function(t){var e,r;if(t<0||t>=this.size())throw new Error("pos must more than 0 and less than set's size");var n=0;try{for(var s=i(this),o=s.next();!o.done;o=s.next()){var a=o.value;if(n===t)return a;++n}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}throw new Error("unknown Error")};var c=function(t,r){if(t&&void 0!==t.key&&void 0!==t.value){var n=e(t.key,r);return 0===n?{key:t.key,value:t.value}:n<0?c(t.rightChild,r):c(t.leftChild,r)||{key:t.key,value:t.value}}};this.lowerBound=function(t){return c(a,t)};var l=function(t,r){if(t&&void 0!==t.key&&void 0!==t.value)return e(t.key,r)<=0?l(t.rightChild,r):l(t.leftChild,r)||{key:t.key,value:t.value}};this.upperBound=function(t){return l(a,t)};var f=function(t,r){if(t&&void 0!==t.key&&void 0!==t.value){var n=e(t.key,r);return 0===n?{key:t.key,value:t.value}:n>0?f(t.leftChild,r):f(t.rightChild,r)||{key:t.key,value:t.value}}};this.reverseLowerBound=function(t){return f(a,t)};var p=function(t,r){if(t&&void 0!==t.key&&void 0!==t.value)return e(t.key,r)>=0?p(t.leftChild,r):p(t.rightChild,r)||{key:t.key,value:t.value}};this.reverseUpperBound=function(t){return p(a,t)};var d=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(t.color!==s.default.TreeNodeColorType.red){var r=t.brother;if(!r)throw new Error("unknown error");if(t===e.leftChild)if(r.color===s.default.TreeNodeColorType.red){r.color=s.default.TreeNodeColorType.black,e.color=s.default.TreeNodeColorType.red;var n=e.rotateLeft();a===e&&(a=n),d(t)}else r.color===s.default.TreeNodeColorType.black&&(r.rightChild&&r.rightChild.color===s.default.TreeNodeColorType.red?(r.color=e.color,e.color=s.default.TreeNodeColorType.black,r.rightChild&&(r.rightChild.color=s.default.TreeNodeColorType.black),n=e.rotateLeft(),a===e&&(a=n),t.color=s.default.TreeNodeColorType.black):r.rightChild&&r.rightChild.color!==s.default.TreeNodeColorType.black||!r.leftChild||r.leftChild.color!==s.default.TreeNodeColorType.red?r.leftChild&&r.leftChild.color!==s.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==s.default.TreeNodeColorType.black||(r.color=s.default.TreeNodeColorType.red,d(e)):(r.color=s.default.TreeNodeColorType.red,r.leftChild&&(r.leftChild.color=s.default.TreeNodeColorType.black),n=r.rotateRight(),a===r&&(a=n),d(t)));else t===e.rightChild&&(r.color===s.default.TreeNodeColorType.red?(r.color=s.default.TreeNodeColorType.black,e.color=s.default.TreeNodeColorType.red,n=e.rotateRight(),a===e&&(a=n),d(t)):r.color===s.default.TreeNodeColorType.black&&(r.leftChild&&r.leftChild.color===s.default.TreeNodeColorType.red?(r.color=e.color,e.color=s.default.TreeNodeColorType.black,r.leftChild&&(r.leftChild.color=s.default.TreeNodeColorType.black),n=e.rotateRight(),a===e&&(a=n),t.color=s.default.TreeNodeColorType.black):r.leftChild&&r.leftChild.color!==s.default.TreeNodeColorType.black||!r.rightChild||r.rightChild.color!==s.default.TreeNodeColorType.red?r.leftChild&&r.leftChild.color!==s.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==s.default.TreeNodeColorType.black||(r.color=s.default.TreeNodeColorType.red,d(e)):(r.color=s.default.TreeNodeColorType.red,r.rightChild&&(r.rightChild.color=s.default.TreeNodeColorType.black),n=r.rotateLeft(),a===r&&(a=n),d(t))))}else t.color=s.default.TreeNodeColorType.black},y=function(t){for(var e=t;e.leftChild||e.rightChild;){if(e.rightChild){e=u(e.rightChild);var r=t.key;t.key=e.key,e.key=r;var n=t.value;t.value=e.value,e.value=n,t=e}e.leftChild&&(e=h(e.leftChild),r=t.key,t.key=e.key,e.key=r,n=t.value,t.value=e.value,e.value=n,t=e)}d(e),e&&e.remove(),--o,a.color=s.default.TreeNodeColorType.black},g=function(t,e){return!(!t||void 0===t.key)&&(!!g(t.leftChild,e)||!!e(t)||g(t.rightChild,e))};this.eraseElementByPos=function(t){if(t<0||t>=o)throw new Error("pos must more than 0 and less than set's size");var e=0;g(a,(function(r){return t===e?(y(r),!0):(++e,!1)}))},this.eraseElementByKey=function(t){if(!this.empty()){var r=b(a,t);void 0!==r&&void 0!==r.key&&0===e(r.key,t)&&y(r)}};var m=function(t,r){if(!t||void 0===t.key)throw new Error("unknown error");var n=e(r,t.key);return n<0?t.leftChild?m(t.leftChild,r):(t.leftChild=new s.default,t.leftChild.parent=t,t.leftChild.brother=t.rightChild,t.rightChild&&(t.rightChild.brother=t.leftChild),t.leftChild):n>0?t.rightChild?m(t.rightChild,r):(t.rightChild=new s.default,t.rightChild.parent=t,t.rightChild.brother=t.leftChild,t.leftChild&&(t.leftChild.brother=t.rightChild),t.rightChild):t},v=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(e.color!==s.default.TreeNodeColorType.black&&e.color===s.default.TreeNodeColorType.red){var r=e.brother,n=e.parent;if(!n)throw new Error("unknown error");if(r&&r.color===s.default.TreeNodeColorType.red)r.color=e.color=s.default.TreeNodeColorType.black,n.color=s.default.TreeNodeColorType.red,v(n);else if(!r||r.color===s.default.TreeNodeColorType.black)if(e===n.leftChild)if(t===e.leftChild){e.color=s.default.TreeNodeColorType.black,n.color=s.default.TreeNodeColorType.red;var i=n.rotateRight();n===a&&(a=i)}else t===e.rightChild&&(i=e.rotateLeft(),n===a&&(a=i),v(e));else e===n.rightChild&&(t===e.leftChild?(i=e.rotateRight(),n===a&&(a=i),v(e)):t===e.rightChild&&(e.color=s.default.TreeNodeColorType.black,n.color=s.default.TreeNodeColorType.red,i=n.rotateLeft(),n===a&&(a=i)))}};this.setElement=function(t,r){if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=r){if(this.empty())return++o,a.key=t,a.value=r,void(a.color=s.default.TreeNodeColorType.black);var n=m(a,t);void 0===n.key||0!==e(n.key,t)?(++o,n.key=t,n.value=r,v(n),a.color=s.default.TreeNodeColorType.black):n.value=r}else this.eraseElementByKey(t)};var b=function(t,r){if(t&&void 0!==t.key){var n=e(r,t.key);return n<0?b(t.leftChild,r):n>0?b(t.rightChild,r):t}};this.find=function(t){return!!b(a,t)},this.getElementByKey=function(t){var e=b(a,t);if(void 0===(null==e?void 0:e.key)||void 0===(null==e?void 0:e.value))throw new Error("unknown error");return e.value},this.union=function(t){var e=this;t.forEach((function(t){var r=t.key,n=t.value;return e.setElement(r,n)}))},this.getHeight=function(){if(this.empty())return 0;var t=function(e){return e?Math.max(t(e.leftChild),t(e.rightChild))+1:1};return t(a)};var w=function(t){return n(this,(function(e){switch(e.label){case 0:return t&&void 0!==t.key&&void 0!==t.value?[5,i(w(t.leftChild))]:[2];case 1:return e.sent(),[4,{key:t.key,value:t.value}];case 2:return e.sent(),[5,i(w(t.rightChild))];case 3:return e.sent(),[2]}}))};this[Symbol.iterator]=function(){return w(a)},t.forEach((function(t){var e=t.key,n=t.value;return r.setElement(e,n)})),Object.freeze(this)}Object.freeze(o),r.default=o},{"../Base/TreeNode":25}],31:[function(t,e,r){"use strict";function n(t,e){void 0===t&&(t=[]),e=e||function(t,e){return t>e?-1:t<e?1:0};var r=[];t.forEach((function(t){return r.push(t)}));var n=r.length,i=function(t,e){if(t<0||t>=n)throw new Error("unknown error");if(e<0||e>=n)throw new Error("unknown error");var i=r[t];r[t]=r[e],r[e]=i},s=function(t){if(t<0||t>=n)throw new Error("unknown error");var s=2*t+1,o=2*t+2;s<n&&e(r[t],r[s])>0&&i(t,s),o<n&&e(r[t],r[o])>0&&i(t,o)};!function(){for(var t=Math.floor((n-1)/2);t>=0;--t)for(var s=t,o=2*s+1;o<n;){var a=o+1,u=o;if(a<n&&e(r[o],r[a])>0&&(u=a),e(r[s],r[u])<=0)break;i(s,u),o=2*(s=u)+1}}(),this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){n=0,r.length=0},this.push=function(t){if(r.push(t),1!=++n)for(var i=n-1;i>0;){var o=Math.floor((i-1)/2);if(e(r[o],t)<=0)break;s(o),i=o}},this.pop=function(){if(!this.empty())if(1!==this.size()){var t=r[n-1];--n;for(var i=0;i<this.size();){var s=2*i+1,o=2*i+2;if(s>=this.size())break;var a=s;if(o<this.size()&&e(r[s],r[o])>0&&(a=o),e(r[a],t)>=0)break;r[i]=r[a],i=a}r[i]=t}else--n},this.top=function(){return r[0]},Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(n),r.default=n},{}],32:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../LinkList/LinkList");function i(t){void 0===t&&(t=[]);var e=new n.default(t);this.size=function(){return e.size()},this.empty=function(){return e.empty()},this.clear=function(){e.clear()},this.push=function(t){e.pushBack(t)},this.pop=function(){e.popFront()},this.front=function(){return e.front()},Object.freeze(this)}Object.freeze(i),r.default=i},{"../LinkList/LinkList":29}],33:[function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Base/TreeNode");function o(t,e){var r=this;void 0===t&&(t=[]),e=e||function(t,e){return t<e?-1:t>e?1:0};var o=0,a=new s.default;a.color=s.default.TreeNodeColorType.black,this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,a.key=void 0,a.leftChild=a.rightChild=a.brother=a.parent=void 0,a.color=s.default.TreeNodeColorType.black};var u=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.leftChild?u(t.leftChild):t},h=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.rightChild?h(t.rightChild):t};this.front=function(){if(!this.empty())return u(a).key},this.back=function(){if(!this.empty())return h(a).key},this.forEach=function(t){var e,r,n=0;try{for(var s=i(this),o=s.next();!o.done;o=s.next())t(o.value,n++)}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}},this.getElementByPos=function(t){var e,r;if(t<0||t>=this.size())throw new Error("pos must more than 0 and less than set's size");var n=0;try{for(var s=i(this),o=s.next();!o.done;o=s.next()){var a=o.value;if(n===t)return a;++n}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}throw new Error("unknown error")};var c=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(t.color!==s.default.TreeNodeColorType.red){var r=t.brother;if(!r)throw new Error("unknown error");if(t===e.leftChild)if(r.color===s.default.TreeNodeColorType.red){r.color=s.default.TreeNodeColorType.black,e.color=s.default.TreeNodeColorType.red;var n=e.rotateLeft();a===e&&(a=n),c(t)}else r.color===s.default.TreeNodeColorType.black&&(r.rightChild&&r.rightChild.color===s.default.TreeNodeColorType.red?(r.color=e.color,e.color=s.default.TreeNodeColorType.black,r.rightChild&&(r.rightChild.color=s.default.TreeNodeColorType.black),n=e.rotateLeft(),a===e&&(a=n),t.color=s.default.TreeNodeColorType.black):r.rightChild&&r.rightChild.color!==s.default.TreeNodeColorType.black||!r.leftChild||r.leftChild.color!==s.default.TreeNodeColorType.red?r.leftChild&&r.leftChild.color!==s.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==s.default.TreeNodeColorType.black||(r.color=s.default.TreeNodeColorType.red,c(e)):(r.color=s.default.TreeNodeColorType.red,r.leftChild&&(r.leftChild.color=s.default.TreeNodeColorType.black),n=r.rotateRight(),a===r&&(a=n),c(t)));else t===e.rightChild&&(r.color===s.default.TreeNodeColorType.red?(r.color=s.default.TreeNodeColorType.black,e.color=s.default.TreeNodeColorType.red,n=e.rotateRight(),a===e&&(a=n),c(t)):r.color===s.default.TreeNodeColorType.black&&(r.leftChild&&r.leftChild.color===s.default.TreeNodeColorType.red?(r.color=e.color,e.color=s.default.TreeNodeColorType.black,r.leftChild&&(r.leftChild.color=s.default.TreeNodeColorType.black),n=e.rotateRight(),a===e&&(a=n),t.color=s.default.TreeNodeColorType.black):r.leftChild&&r.leftChild.color!==s.default.TreeNodeColorType.black||!r.rightChild||r.rightChild.color!==s.default.TreeNodeColorType.red?r.leftChild&&r.leftChild.color!==s.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==s.default.TreeNodeColorType.black||(r.color=s.default.TreeNodeColorType.red,c(e)):(r.color=s.default.TreeNodeColorType.red,r.rightChild&&(r.rightChild.color=s.default.TreeNodeColorType.black),n=r.rotateLeft(),a===r&&(a=n),c(t))))}else t.color=s.default.TreeNodeColorType.black},l=function(t){for(var e=t;e.leftChild||e.rightChild;){if(e.rightChild){e=u(e.rightChild);var r=t.key;t.key=e.key,e.key=r,t=e}e.leftChild&&(e=h(e.leftChild),r=t.key,t.key=e.key,e.key=r,t=e)}c(e),e&&e.remove(),--o,a.color=s.default.TreeNodeColorType.black},f=function(t,e){return!(!t||void 0===t.key)&&(!!f(t.leftChild,e)||!!e(t)||f(t.rightChild,e))};this.eraseElementByPos=function(t){if(t<0||t>=o)throw new Error("pos must more than 0 and less than set's size");var e=0;f(a,(function(r){return t===e?(l(r),!0):(++e,!1)}))},this.eraseElementByValue=function(t){if(!this.empty()){var r=y(a,t);void 0!==r&&void 0!==r.key&&0===e(r.key,t)&&l(r)}};var p=function(t,r){if(!t||void 0===t.key)throw new Error("unknown error");var n=e(r,t.key);return n<0?t.leftChild?p(t.leftChild,r):(t.leftChild=new s.default,t.leftChild.parent=t,t.leftChild.brother=t.rightChild,t.rightChild&&(t.rightChild.brother=t.leftChild),t.leftChild):n>0?t.rightChild?p(t.rightChild,r):(t.rightChild=new s.default,t.rightChild.parent=t,t.rightChild.brother=t.leftChild,t.leftChild&&(t.leftChild.brother=t.rightChild),t.rightChild):t},d=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(e.color!==s.default.TreeNodeColorType.black&&e.color===s.default.TreeNodeColorType.red){var r=e.brother,n=e.parent;if(!n)throw new Error("unknown error");if(r&&r.color===s.default.TreeNodeColorType.red)r.color=e.color=s.default.TreeNodeColorType.black,n.color=s.default.TreeNodeColorType.red,d(n);else if(!r||r.color===s.default.TreeNodeColorType.black)if(e===n.leftChild)if(t===e.leftChild){e.color=s.default.TreeNodeColorType.black,n.color=s.default.TreeNodeColorType.red;var i=n.rotateRight();n===a&&(a=i)}else t===e.rightChild&&(i=e.rotateLeft(),n===a&&(a=i),d(e));else e===n.rightChild&&(t===e.leftChild?(i=e.rotateRight(),n===a&&(a=i),d(e)):t===e.rightChild&&(e.color=s.default.TreeNodeColorType.black,n.color=s.default.TreeNodeColorType.red,i=n.rotateLeft(),n===a&&(a=i)))}};this.insert=function(t){if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++o,a.key=t,void(a.color=s.default.TreeNodeColorType.black);var r=p(a,t);void 0!==r.key&&0===e(r.key,t)||(++o,r.key=t,d(r),a.color=s.default.TreeNodeColorType.black)};var y=function(t,r){if(t&&void 0!==t.key){var n=e(r,t.key);return n<0?y(t.leftChild,r):n>0?y(t.rightChild,r):t}};this.find=function(t){var r=y(a,t);return void 0!==r&&void 0!==r.key&&0===e(r.key,t)};var g=function(t,r){if(t&&void 0!==t.key){var n=e(t.key,r);return 0===n?t.key:n<0?g(t.rightChild,r):g(t.leftChild,r)||t.key}};this.lowerBound=function(t){return g(a,t)};var m=function(t,r){if(t&&void 0!==t.key)return e(t.key,r)<=0?m(t.rightChild,r):m(t.leftChild,r)||t.key};this.upperBound=function(t){return m(a,t)};var v=function(t,r){if(t&&void 0!==t.key){var n=e(t.key,r);return 0===n?t.key:n>0?v(t.leftChild,r):v(t.rightChild,r)||t.key}};this.reverseLowerBound=function(t){return v(a,t)};var b=function(t,r){if(t&&void 0!==t.key)return e(t.key,r)>=0?b(t.leftChild,r):b(t.rightChild,r)||t.key};this.reverseUpperBound=function(t){return b(a,t)},this.union=function(t){var e=this;t.forEach((function(t){return e.insert(t)}))},this.getHeight=function(){if(this.empty())return 0;var t=function(e){return e?Math.max(t(e.leftChild),t(e.rightChild))+1:1};return t(a)};var w=function(t){return n(this,(function(e){switch(e.label){case 0:return t&&void 0!==t.key?[5,i(w(t.leftChild))]:[2];case 1:return e.sent(),[4,t.key];case 2:return e.sent(),[5,i(w(t.rightChild))];case 3:return e.sent(),[2]}}))};this[Symbol.iterator]=function(){return w(a)},t.forEach((function(t){return r.insert(t)})),Object.freeze(this)}Object.freeze(o),r.default=o},{"../Base/TreeNode":25}],34:[function(t,e,r){"use strict";function n(t){var e=this;void 0===t&&(t=[]);var r=0,n=[];this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,n.length=0},this.push=function(t){n.push(t),++r},this.pop=function(){n.pop(),r>0&&--r},this.top=function(){return n[r-1]},t.forEach((function(t){return e.push(t)})),Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(n),r.default=n},{}],35:[function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,s=e.length;i<s;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function a(t){var e=this;void 0===t&&(t=[]);var r=0,a=[];this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,a.length=0},this.front=function(){if(!this.empty())return a[0]},this.back=function(){if(!this.empty())return a[r-1]},this.forEach=function(t){a.forEach(t)},this.getElementByPos=function(t){if(t<0||t>=r)throw new Error("pos must more than 0 and less than vector's size");return a[t]},this.eraseElementByPos=function(t){if(t<0||t>=r)throw new Error("pos must more than 0 and less than vector's size");for(var e=t;e<r-1;++e)a[e]=a[e+1];this.popBack()},this.eraseElementByValue=function(t){var e=[];this.forEach((function(r){r!==t&&e.push(r)})),e.forEach((function(t,e){a[e]=t}));for(var n=e.length;r>n;)this.popBack()},this.pushBack=function(t){a.push(t),++r},this.popBack=function(){a.pop(),r>0&&--r},this.setElementByPos=function(t,e){if(t<0||t>=r)throw new Error("pos must more than 0 and less than vector's size");a[t]=e},this.insert=function(t,e,n){if(void 0===n&&(n=1),t<0||t>r)throw new Error("pos must more than 0 and less than or equal to vector's size");a.splice.apply(a,s([t,0],i(new Array(n).fill(e)),!1)),r+=n},this.find=function(t){return a.includes(t)},this.reverse=function(){a.reverse()},this.unique=function(){var t,e=[];this.forEach((function(r,n){0!==n&&r===t||(e.push(r),t=r)})),e.forEach((function(t,e){a[e]=t}));for(var n=e.length;r>n;)this.popBack()},this.sort=function(t){a.sort(t)},this[Symbol.iterator]=function(){return function(){return n(this,(function(t){switch(t.label){case 0:return[5,o(a)];case 1:return[2,t.sent()]}}))}()},t.forEach((function(t){return e.pushBack(t)})),Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(a),r.default=a},{}],36:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashMap=r.HashSet=r.Map=r.Set=r.PriorityQueue=r.Deque=r.LinkList=r.Queue=r.Stack=r.Vector=void 0;var n=t("./Vector/Vector");r.Vector=n.default;var i=t("./Stack/Stack");r.Stack=i.default;var s=t("./Queue/Queue");r.Queue=s.default;var o=t("./LinkList/LinkList");r.LinkList=o.default;var a=t("./Deque/Deque");r.Deque=a.default;var u=t("./PriorityQueue/PriorityQueue");r.PriorityQueue=u.default;var h=t("./Set/Set");r.Set=h.default;var c=t("./Map/Map");r.Map=c.default;var l=t("./HashSet/HashSet");r.HashSet=l.default;var f=t("./HashMap/HashMap");r.HashMap=f.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(t,e,r){"use strict";const n=t("yallist"),i=Symbol("max"),s=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),u=Symbol("maxAge"),h=Symbol("dispose"),c=Symbol("noDisposeOnSet"),l=Symbol("lruList"),f=Symbol("cache"),p=Symbol("updateAgeOnGet"),d=()=>1,y=(t,e,r)=>{const n=t[f].get(e);if(n){const e=n.value;if(g(t,e)){if(v(t,n),!t[a])return}else r&&(t[p]&&(n.value.now=Date.now()),t[l].unshiftNode(n));return e.value}},g=(t,e)=>{if(!e||!e.maxAge&&!t[u])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[u]&&r>t[u]},m=t=>{if(t[s]>t[i])for(let e=t[l].tail;t[s]>t[i]&&null!==e;){const r=e.prev;v(t,e),e=r}},v=(t,e)=>{if(e){const r=e.value;t[h]&&t[h](r.key,r.value),t[s]-=r.length,t[f].delete(r.key),t[l].removeNode(e)}};class b{constructor(t,e,r,n,i){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=i||0}}const w=(t,e,r,n)=>{let i=r.value;g(t,i)&&(v(t,r),t[a]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};e.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[i]=t.max||1/0;const e=t.length||d;if(this[o]="function"!=typeof e?d:e,this[a]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[u]=t.maxAge||0,this[h]=t.dispose,this[c]=t.noDisposeOnSet||!1,this[p]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[i]=t||1/0,m(this)}get max(){return this[i]}set allowStale(t){this[a]=!!t}get allowStale(){return this[a]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[u]=t,m(this)}get maxAge(){return this[u]}set lengthCalculator(t){"function"!=typeof t&&(t=d),t!==this[o]&&(this[o]=t,this[s]=0,this[l].forEach(t=>{t.length=this[o](t.value,t.key),this[s]+=t.length})),m(this)}get lengthCalculator(){return this[o]}get length(){return this[s]}get itemCount(){return this[l].length}rforEach(t,e){e=e||this;for(let r=this[l].tail;null!==r;){const n=r.prev;w(this,t,r,e),r=n}}forEach(t,e){e=e||this;for(let r=this[l].head;null!==r;){const n=r.next;w(this,t,r,e),r=n}}keys(){return this[l].toArray().map(t=>t.key)}values(){return this[l].toArray().map(t=>t.value)}reset(){this[h]&&this[l]&&this[l].length&&this[l].forEach(t=>this[h](t.key,t.value)),this[f]=new Map,this[l]=new n,this[s]=0}dump(){return this[l].map(t=>!g(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[l]}set(t,e,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[o](e,t);if(this[f].has(t)){if(a>this[i])return v(this,this[f].get(t)),!1;const o=this[f].get(t).value;return this[h]&&(this[c]||this[h](t,o.value)),o.now=n,o.maxAge=r,o.value=e,this[s]+=a-o.length,o.length=a,this.get(t),m(this),!0}const p=new b(t,e,a,n,r);return p.length>this[i]?(this[h]&&this[h](t,e),!1):(this[s]+=p.length,this[l].unshift(p),this[f].set(t,this[l].head),m(this),!0)}has(t){if(!this[f].has(t))return!1;const e=this[f].get(t).value;return!g(this,e)}get(t){return y(this,t,!0)}peek(t){return y(this,t,!1)}pop(){const t=this[l].tail;return t?(v(this,t),t.value):null}del(t){v(this,this[f].get(t))}load(t){this.reset();const e=Date.now();for(let r=t.length-1;r>=0;r--){const n=t[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const t=i-e;t>0&&this.set(n.k,n.v,t)}}}prune(){this[f].forEach((t,e)=>y(this,e,!1))}}},{yallist:83}],38:[function(t,e,r){(function(t){(function(){const r=e.exports;r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.codes={};for(const t in r.types){const e=r.types[t];r.codes[e]=t}r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=t.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=t.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=t.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={};for(const t in r.properties){const e=r.properties[t];r.propertiesCodes[e]=t}function n(e){return[0,1,2].map(n=>[0,1].map(i=>[0,1].map(s=>{const o=t.alloc(1);return o.writeUInt8(r.codes[e]<<r.CMD_SHIFT|(i?r.DUP_MASK:0)|n<<r.QOS_SHIFT|s,0,!0),o})))}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},r.PUBLISH_HEADER=n("publish"),r.SUBSCRIBE_HEADER=n("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=n("unsubscribe"),r.ACKS={unsuback:n("unsuback"),puback:n("puback"),pubcomp:n("pubcomp"),pubrel:n("pubrel"),pubrec:n("pubrec")},r.SUBACK_HEADER=t.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=t.from([3]),r.VERSION4=t.from([4]),r.VERSION5=t.from([5]),r.VERSION131=t.from([131]),r.VERSION132=t.from([132]),r.QOS=[0,1,2].map(e=>t.from([e])),r.EMPTY={pingreq:t.from([r.codes.pingreq<<4,0]),pingresp:t.from([r.codes.pingresp<<4,0]),disconnect:t.from([r.codes.disconnect<<4,0])}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17}],39:[function(t,e,r){(function(r){(function(){const n=t("./writeToStream"),i=t("events");class s extends i{constructor(){super(),this._array=new Array(20),this._i=0}write(t){return this._array[this._i++]=t,!0}concat(){let t=0;const e=new Array(this._array.length),n=this._array;let i,s=0;for(i=0;i<n.length&&void 0!==n[i];i++)"string"!=typeof n[i]?e[i]=n[i].length:e[i]=r.byteLength(n[i]),t+=e[i];const o=r.allocUnsafe(t);for(i=0;i<n.length&&void 0!==n[i];i++)"string"!=typeof n[i]?(n[i].copy(o,s),s+=e[i]):(o.write(n[i],s),s+=e[i]);return o}}e.exports=function(t,e){const r=new s;return n(t,r,e),r.concat()}}).call(this)}).call(this,t("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(t,e,r){r.parser=t("./parser").parser,r.generate=t("./generate"),r.writeToStream=t("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(t,e,r){(function(t){(function(){const r={},n=t.isBuffer(t.from([1,2]).subarray(0,1));function i(e){const r=t.allocUnsafe(2);return r.writeUInt8(e>>8,0),r.writeUInt8(255&e,1),r}e.exports={cache:r,generateCache:function(){for(let t=0;t<65536;t++)r[t]=i(t)},generateNumber:i,genBufVariableByteInt:function(e){let r=0,i=0;const s=t.allocUnsafe(4);do{r=e%128|0,(e=e/128|0)>0&&(r|=128),s.writeUInt8(r,i++)}while(e>0&&i<4);return e>0&&(i=0),n?s.subarray(0,i):s.slice(0,i)},generate4ByteBuffer:function(e){const r=t.allocUnsafe(4);return r.writeUInt32BE(e,0),r}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17}],42:[function(t,e,r){e.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(t,e,r){const n=t("bl"),i=t("events"),s=t("./packet"),o=t("./constants"),a=t("debug")("mqtt-packet:parser");class u extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof u?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new u).parser(t)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=n(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const t=this._list.readUInt8(0);return this.packet.cmd=o.types[t>>o.CMD_SHIFT],this.packet.retain=0!=(t&o.RETAIN_MASK),this.packet.qos=t>>o.QOS_SHIFT&o.QOS_MASK,this.packet.dup=0!=(t&o.DUP_MASK),a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),a("_parseLength %d",t.value),!!t}_parsePayload(){a("_parsePayload: payload %O",this._list);let t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return a("_parsePayload complete result: %s",t),t}_parseConnect(){let t,e,r,n;a("_parseConnect");const i={},s=this.packet,u=this._parseString();if(null===u)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==u&&"MQIsdp"!==u)return this._emitError(new Error("Invalid protocolId"));if(s.protocolId=u,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.protocolVersion=this._list.readUInt8(this._pos),s.protocolVersion>=128&&(s.bridgeMode=!0,s.protocolVersion=s.protocolVersion-128),3!==s.protocolVersion&&4!==s.protocolVersion&&5!==s.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(i.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,i.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,i.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK,i.will&&(s.will={},s.will.retain=0!=(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),s.will.qos=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT),s.clean=0!=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK),this._pos++,s.keepalive=this._parseNum(),-1===s.keepalive)return this._emitError(new Error("Packet too short"));if(5===s.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(s.properties=t)}const h=this._parseString();if(null===h)return this._emitError(new Error("Packet too short"));if(s.clientId=h,a("_parseConnect: packet.clientId: %s",s.clientId),i.will){if(5===s.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(s.will.properties=t)}if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(s.will.topic=t,a("_parseConnect: packet.will.topic: %s",s.will.topic),null===(e=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));s.will.payload=e,a("_parseConnect: packet.will.paylaod: %s",s.will.payload)}if(i.username){if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse username"));s.username=n,a("_parseConnect: packet.username: %s",s.username)}if(i.password){if(null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));s.password=r}return this.settings=s,a("_parseConnect: complete"),s}_parseConnack(){a("_parseConnack");const t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&o.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(-1===t.returnCode||-1===t.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");const t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));if(!(t.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}t.payload=this._list.slice(this._pos,t.length),a("_parsePublish: payload from buffer list: %o",t.payload)}}_parseSubscribe(){a("_parseSubscribe");const t=this.packet;let e,r,n,i,s,u,h;if(1!==t.qos)return this._emitError(new Error("Wrong subscribe header"));if(t.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<t.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=t.length)return this._emitError(new Error("Malformed Subscribe Payload"));n=(r=this._parseByte())&o.SUBSCRIBE_OPTIONS_QOS_MASK,u=0!=(r>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK),s=0!=(r>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK),i=r>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,h={topic:e,qos:n},5===this.settings.protocolVersion?(h.nl=u,h.rap=s,h.rh=i):this.settings.bridgeMode&&(h.rh=0,h.rap=!0,h.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",h),t.subscriptions.push(h)}}}_parseSuback(){a("_parseSuback");const t=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){a("_parseUnsubscribe");const t=this.packet;if(t.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<t.length;){const e=this._parseString();if(null===e)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",e),t.unsubscriptions.push(e)}}}_parseUnsuback(){a("_parseUnsuback");const t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(t.properties=e),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const t=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(t.length>2?(t.reasonCode=this._parseByte(),a("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,t.length>3)){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return!0}_parseDisconnect(){const t=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?t.reasonCode=this._parseByte():t.reasonCode=0;const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");const t=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();const e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(t.properties=e),a("_parseAuth: result: true"),!0}_parseMessageId(){const t=this.packet;return t.messageId=this._parseNum(),null===t.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){const e=this._parseNum(),r=e+this._pos;if(-1===e||r>this._list.length||r>this.packet.length)return null;const n=this._list.toString("utf8",this._pos,r);return this._pos+=e,a("_parseString: result: %s",n),n}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const t=this._parseNum(),e=t+this._pos;if(-1===t||e>this._list.length||e>this.packet.length)return null;const r=this._list.slice(this._pos,e);return this._pos+=t,a("_parseBuffer: result: %o",r),r}_parseNum(){if(this._list.length-this._pos<2)return-1;const t=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",t),t}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const t=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",t),t}_parseVarByteNum(t){a("_parseVarByteNum");let e,r=0,n=1,i=0,s=!1;const u=this._pos?this._pos:0;for(;r<4&&u+r<this._list.length;){if(i+=n*((e=this._list.readUInt8(u+r++))&o.VARBYTEINT_MASK),n*=128,0==(e&o.VARBYTEINT_FIN_MASK)){s=!0;break}if(this._list.length<=r)break}return!s&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),u&&(this._pos+=r),a("_parseVarByteNum: result: %o",s=!!s&&(t?{bytes:r,value:i}:i)),s}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",t),t}_parseByType(t){switch(a("_parseByType: type: %s",t),t){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");const t=this._parseVarByteNum(),e=this._pos+t,r={};for(;this._pos<e;){const t=this._parseByte();if(!t)return this._emitError(new Error("Cannot parse property code type")),!1;const e=o.propertiesCodes[t];if(!e)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==e)r[e]?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(this._parseByType(o.propertiesTypes[e]))):r[e]=this._parseByType(o.propertiesTypes[e]);else{r[e]||(r[e]=Object.create(null));const t=this._parseByType(o.propertiesTypes[e]);if(r[e][t.name])if(Array.isArray(r[e][t.name]))r[e][t.name].push(t.value);else{const n=r[e][t.name];r[e][t.name]=[n],r[e][t.name].push(t.value)}else r[e][t.name]=t.value}}return r}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new s,this._pos=0,!0}_emitError(t){a("_emitError"),this.error=t,this.emit("error",t)}}e.exports=u},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(t,e,r){(function(r){(function(){const n=t("./constants"),i=r.allocUnsafe(0),s=r.from([0]),o=t("./numbers"),a=t("process-nextick-args").nextTick,u=t("debug")("mqtt-packet:writeToStream"),h=o.cache,c=o.generateNumber,l=o.generateCache,f=o.genBufVariableByteInt,p=o.generate4ByteBuffer;let d=k,y=!0;function g(t,e,o){switch(u("generate called"),e.cork&&(e.cork(),a(m,e)),y&&(y=!1,l()),u("generate: packet.cmd: %s",t.cmd),t.cmd){case"connect":return function(t,e,i){const s=t||{},o=s.protocolId||"MQTT";let a=s.protocolVersion||4;const u=s.will;let h=s.clean;const c=s.keepalive||0,l=s.clientId||"",f=s.username,p=s.password,y=s.properties;void 0===h&&(h=!0);let g=0;if(!o||"string"!=typeof o&&!r.isBuffer(o))return e.emit("error",new Error("Invalid protocolId")),!1;if(g+=o.length+2,3!==a&&4!==a&&5!==a)return e.emit("error",new Error("Invalid protocol version")),!1;if(g+=1,("string"==typeof l||r.isBuffer(l))&&(l||a>=4)&&(l||h))g+=r.byteLength(l)+2;else{if(a<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*h==0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof c||c<0||c>65535||c%1!=0)return e.emit("error",new Error("Invalid keepalive")),!1;if(g+=2,g+=1,5===a){var m=S(e,y);if(!m)return!1;g+=m.length}if(u){if("object"!=typeof u)return e.emit("error",new Error("Invalid will")),!1;if(!u.topic||"string"!=typeof u.topic)return e.emit("error",new Error("Invalid will topic")),!1;if(g+=r.byteLength(u.topic)+2,g+=2,u.payload){if(!(u.payload.length>=0))return e.emit("error",new Error("Invalid will payload")),!1;"string"==typeof u.payload?g+=r.byteLength(u.payload):g+=u.payload.length}var v={};if(5===a){if(!(v=S(e,u.properties)))return!1;g+=v.length}}let _=!1;if(null!=f){if(!O(f))return e.emit("error",new Error("Invalid username")),!1;_=!0,g+=r.byteLength(f)+2}if(null!=p){if(!_)return e.emit("error",new Error("Username is required to use password")),!1;if(!O(p))return e.emit("error",new Error("Invalid password")),!1;g+=A(p)+2}e.write(n.CONNECT_HEADER),b(e,g),M(e,o),s.bridgeMode&&(a+=128),e.write(131===a?n.VERSION131:132===a?n.VERSION132:4===a?n.VERSION4:5===a?n.VERSION5:n.VERSION3);let k=0;return k|=null!=f?n.USERNAME_MASK:0,k|=null!=p?n.PASSWORD_MASK:0,k|=u&&u.retain?n.WILL_RETAIN_MASK:0,k|=u&&u.qos?u.qos<<n.WILL_QOS_SHIFT:0,k|=u?n.WILL_FLAG_MASK:0,k|=h?n.CLEAN_SESSION_MASK:0,e.write(r.from([k])),d(e,c),5===a&&m.write(),M(e,l),u&&(5===a&&v.write(),w(e,u.topic),M(e,u.payload)),null!=f&&M(e,f),null!=p&&M(e,p),!0}(t,e);case"connack":return function(t,e,i){const o=i?i.protocolVersion:4,a=t||{},u=5===o?a.reasonCode:a.returnCode,h=a.properties;let c=2;if("number"!=typeof u)return e.emit("error",new Error("Invalid return code")),!1;let l=null;if(5===o){if(!(l=S(e,h)))return!1;c+=l.length}return e.write(n.CONNACK_HEADER),b(e,c),e.write(a.sessionPresent?n.SESSIONPRESENT_HEADER:s),e.write(r.from([u])),null!=l&&l.write(),!0}(t,e,o);case"publish":return function(t,e,s){u("publish: packet: %o",t);const o=s?s.protocolVersion:4,a=t||{},h=a.qos||0,c=a.retain?n.RETAIN_MASK:0,l=a.topic,f=a.payload||i,p=a.messageId,y=a.properties;let g=0;if("string"==typeof l)g+=r.byteLength(l)+2;else{if(!r.isBuffer(l))return e.emit("error",new Error("Invalid topic")),!1;g+=l.length+2}if(r.isBuffer(f)?g+=f.length:g+=r.byteLength(f),h&&"number"!=typeof p)return e.emit("error",new Error("Invalid messageId")),!1;h&&(g+=2);let m=null;if(5===o){if(!(m=S(e,y)))return!1;g+=m.length}return e.write(n.PUBLISH_HEADER[h][a.dup?1:0][c?1:0]),b(e,g),d(e,A(l)),e.write(l),h>0&&d(e,p),null!=m&&m.write(),u("publish: payload: %o",f),e.write(f)}(t,e,o);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(t,e,i){const s=i?i.protocolVersion:4,o=t||{},a=o.cmd||"puback",u=o.messageId,h=o.dup&&"pubrel"===a?n.DUP_MASK:0;let c=0;const l=o.reasonCode,f=o.properties;let p=5===s?3:2;if("pubrel"===a&&(c=1),"number"!=typeof u)return e.emit("error",new Error("Invalid messageId")),!1;let y=null;if(5===s&&"object"==typeof f){if(!(y=E(e,f,i,p)))return!1;p+=y.length}return e.write(n.ACKS[a][c][h][0]),b(e,p),d(e,u),5===s&&e.write(r.from([l])),null!==y&&y.write(),!0}(t,e,o);case"subscribe":return function(t,e,i){u("subscribe: packet: ");const s=i?i.protocolVersion:4,o=t||{},a=o.dup?n.DUP_MASK:0,h=o.messageId,c=o.subscriptions,l=o.properties;let f=0;if("number"!=typeof h)return e.emit("error",new Error("Invalid messageId")),!1;f+=2;let p=null;if(5===s){if(!(p=S(e,l)))return!1;f+=p.length}if("object"!=typeof c||!c.length)return e.emit("error",new Error("Invalid subscriptions")),!1;for(let t=0;t<c.length;t+=1){const n=c[t].topic,i=c[t].qos;if("string"!=typeof n)return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof i)return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===s){if("boolean"!=typeof(c[t].nl||!1))return e.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(c[t].rap||!1))return e.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const r=c[t].rh||0;if("number"!=typeof r||r>2)return e.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}f+=r.byteLength(n)+2+1}u("subscribe: writing to stream: %o",n.SUBSCRIBE_HEADER),e.write(n.SUBSCRIBE_HEADER[1][a?1:0][0]),b(e,f),d(e,h),null!==p&&p.write();let y=!0;for(const t of c){const i=t.topic,o=t.qos,a=+t.nl,u=+t.rap,h=t.rh;let c;w(e,i),c=n.SUBSCRIBE_OPTIONS_QOS[o],5===s&&(c|=a?n.SUBSCRIBE_OPTIONS_NL:0,c|=u?n.SUBSCRIBE_OPTIONS_RAP:0,c|=h?n.SUBSCRIBE_OPTIONS_RH[h]:0),y=e.write(r.from([c]))}return y}(t,e,o);case"suback":return function(t,e,i){const s=i?i.protocolVersion:4,o=t||{},a=o.messageId,u=o.granted,h=o.properties;let c=0;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(c+=2,"object"!=typeof u||!u.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<u.length;t+=1){if("number"!=typeof u[t])return e.emit("error",new Error("Invalid qos vector")),!1;c+=1}let l=null;if(5===s){if(!(l=E(e,h,i,c)))return!1;c+=l.length}return e.write(n.SUBACK_HEADER),b(e,c),d(e,a),null!==l&&l.write(),e.write(r.from(u))}(t,e,o);case"unsubscribe":return function(t,e,i){const s=i?i.protocolVersion:4,o=t||{},a=o.messageId,u=o.dup?n.DUP_MASK:0,h=o.unsubscriptions,c=o.properties;let l=0;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(l+=2,"object"!=typeof h||!h.length)return e.emit("error",new Error("Invalid unsubscriptions")),!1;for(let t=0;t<h.length;t+=1){if("string"!=typeof h[t])return e.emit("error",new Error("Invalid unsubscriptions")),!1;l+=r.byteLength(h[t])+2}let f=null;if(5===s){if(!(f=S(e,c)))return!1;l+=f.length}e.write(n.UNSUBSCRIBE_HEADER[1][u?1:0][0]),b(e,l),d(e,a),null!==f&&f.write();let p=!0;for(let t=0;t<h.length;t++)p=w(e,h[t]);return p}(t,e,o);case"unsuback":return function(t,e,i){const s=i?i.protocolVersion:4,o=t||{},a=o.messageId,u=o.dup?n.DUP_MASK:0,h=o.granted,c=o.properties,l=o.cmd;let f=2;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(5===s){if("object"!=typeof h||!h.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<h.length;t+=1){if("number"!=typeof h[t])return e.emit("error",new Error("Invalid qos vector")),!1;f+=1}}let p=null;if(5===s){if(!(p=E(e,c,i,f)))return!1;f+=p.length}return e.write(n.ACKS[l][0][u][0]),b(e,f),d(e,a),null!==p&&p.write(),5===s&&e.write(r.from(h)),!0}(t,e,o);case"pingreq":case"pingresp":return function(t,e,r){return e.write(n.EMPTY[t.cmd])}(t,e);case"disconnect":return function(t,e,i){const s=i?i.protocolVersion:4,o=t||{},a=o.reasonCode,u=o.properties;let h=5===s?1:0,c=null;if(5===s){if(!(c=E(e,u,i,h)))return!1;h+=c.length}return e.write(r.from([n.codes.disconnect<<4])),b(e,h),5===s&&e.write(r.from([a])),null!==c&&c.write(),!0}(t,e,o);case"auth":return function(t,e,i){const s=i?i.protocolVersion:4,o=t||{},a=o.reasonCode,u=o.properties;let h=5===s?1:0;5!==s&&e.emit("error",new Error("Invalid mqtt version for auth packet"));const c=E(e,u,i,h);return!!c&&(h+=c.length,e.write(r.from([n.codes.auth<<4])),b(e,h),e.write(r.from([a])),null!==c&&c.write(),!0)}(t,e,o);default:return e.emit("error",new Error("Unknown command")),!1}}function m(t){t.uncork()}Object.defineProperty(g,"cacheNumbers",{get:()=>d===k,set(t){t?(h&&0!==Object.keys(h).length||(y=!0),d=k):(y=!1,d=x)}});const v={};function b(t,e){if(e>n.VARBYTEINT_MAX)return t.emit("error",new Error("Invalid variable byte integer: "+e)),!1;let r=v[e];return r||(r=f(e),e<16384&&(v[e]=r)),u("writeVarByteInt: writing to stream: %o",r),t.write(r)}function w(t,e){const n=r.byteLength(e);return d(t,n),u("writeString: %s",e),t.write(e,"utf8")}function _(t,e,r){w(t,e),w(t,r)}function k(t,e){return u("writeNumberCached: number: %d",e),u("writeNumberCached: %o",h[e]),t.write(h[e])}function x(t,e){const r=c(e);return u("writeNumberGenerated: %o",r),t.write(r)}function M(t,e){"string"==typeof e?w(t,e):e?(d(t,e.length),t.write(e)):d(t,0)}function S(t,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){T(t,{},0)}};let i=0;function s(e,i){let s=0;switch(n.propertiesTypes[e]){case"byte":if("boolean"!=typeof i)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=2;break;case"int8":if("number"!=typeof i||i<0||i>255)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=2;break;case"binary":if(i&&null===i)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=1+r.byteLength(i)+2;break;case"int16":if("number"!=typeof i||i<0||i>65535)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=3;break;case"int32":if("number"!=typeof i||i<0||i>4294967295)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=5;break;case"var":if("number"!=typeof i||i<0||i>268435455)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=1+r.byteLength(f(i));break;case"string":if("string"!=typeof i)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=3+r.byteLength(i.toString());break;case"pair":if("object"!=typeof i)return t.emit("error",new Error(`Invalid ${e}: ${i}`)),!1;s+=Object.getOwnPropertyNames(i).reduce((t,e)=>{const n=i[e];return Array.isArray(n)?t+=n.reduce((t,n)=>t+(3+r.byteLength(e.toString())+2+r.byteLength(n.toString())),0):t+=3+r.byteLength(e.toString())+2+r.byteLength(i[e].toString()),t},0);break;default:return t.emit("error",new Error(`Invalid property ${e}: ${i}`)),!1}return s}if(e)for(const t in e){let r=0,n=0;const o=e[t];if(Array.isArray(o))for(let e=0;e<o.length;e++){if(!(n=s(t,o[e])))return!1;r+=n}else{if(!(n=s(t,o)))return!1;r=n}if(!r)return!1;i+=r}return{length:r.byteLength(f(i))+i,write(){T(t,e,i)}}}function E(t,e,r,n){const i=["reasonString","userProperties"],s=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let o=S(t,e);if(s)for(;n+o.length>s;){const r=i.shift();if(!r||!e[r])return!1;delete e[r],o=S(t,e)}return o}function C(t,e,i){switch(n.propertiesTypes[e]){case"byte":t.write(r.from([n.properties[e]])),t.write(r.from([+i]));break;case"int8":t.write(r.from([n.properties[e]])),t.write(r.from([i]));break;case"binary":t.write(r.from([n.properties[e]])),M(t,i);break;case"int16":t.write(r.from([n.properties[e]])),d(t,i);break;case"int32":t.write(r.from([n.properties[e]])),function(t,e){const r=p(e);u("write4ByteNumber: %o",r),t.write(r)}(t,i);break;case"var":t.write(r.from([n.properties[e]])),b(t,i);break;case"string":t.write(r.from([n.properties[e]])),w(t,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(s=>{const o=i[s];Array.isArray(o)?o.forEach(i=>{t.write(r.from([n.properties[e]])),_(t,s.toString(),i.toString())}):(t.write(r.from([n.properties[e]])),_(t,s.toString(),o.toString()))});break;default:return t.emit("error",new Error(`Invalid property ${e} value: ${i}`)),!1}}function T(t,e,r){b(t,r);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&null!==e[r]){const n=e[r];if(Array.isArray(n))for(let e=0;e<n.length;e++)C(t,r,n[e]);else C(t,r,n)}}function A(t){return t?t instanceof r?t.length:r.byteLength(t):0}function O(t){return"string"==typeof t||t instanceof r}e.exports=g}).call(this)}).call(this,t("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(t,e,r){var n=1e3,i=6e4,s=60*i,o=24*s;function a(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}e.exports=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*s;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(t);if("number"===r&&isFinite(t))return e.long?function(t){var e=Math.abs(t);return e>=o?a(t,e,o,"day"):e>=s?a(t,e,s,"hour"):e>=i?a(t,e,i,"minute"):e>=n?a(t,e,n,"second"):t+" ms"}(t):function(t){var e=Math.abs(t);return e>=o?Math.round(t/o)+"d":e>=s?Math.round(t/s)+"h":e>=i?Math.round(t/i)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],46:[function(t,e,r){const n=t("./lib/number-allocator.js");e.exports.NumberAllocator=n},{"./lib/number-allocator.js":47}],47:[function(t,e,r){"use strict";const n=t("js-sdsl").Set,i=t("debug")("number-allocator:trace"),s=t("debug")("number-allocator:error");function o(t,e){this.low=t,this.high=e}function a(t,e){if(!(this instanceof a))return new a(t,e);this.min=t,this.max=e,this.ss=new n([],(t,e)=>t.compare(e)),i("Create"),this.clear()}o.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},o.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0},a.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},a.prototype.alloc=function(){if(0===this.ss.size())return i("alloc():empty"),null;const t=this.ss.front(),e=t.low;return e+1<=t.high?++t.low:this.ss.eraseElementByPos(0),i("alloc():"+e),e},a.prototype.use=function(t){const e=new o(t,t),r=this.ss.lowerBound(e);if(r){if(r.equals(e))return this.ss.eraseElementByValue(r),i("use():"+t),!0;if(r.low>t)return!1;if(r.low===t)return++r.low,i("use():"+t),!0;if(r.high===t)return--r.high,i("use():"+t),!0;const n=r.low;return r.low=t+1,this.ss.insert(new o(n,t-1)),i("use():"+t),!0}return i("use():failed"),!1},a.prototype.free=function(t){if(t<this.min||t>this.max)return void s("free():"+t+" is out of range");const e=new o(t,t),r=this.ss.lowerBound(e);if(r){if(r.low<=t&&t<=r.high)return void s("free():"+t+" has already been vacant");if(r===this.ss.front())t+1===r.low?--r.low:this.ss.insert(e);else{const n=this.ss.reverseLowerBound(e);n.high+1===t?t+1===r.low?(this.ss.eraseElementByValue(n),r.low=n.low):n.high=t:t+1===r.low?r.low=t:this.ss.insert(e)}}else{if(r===this.ss.front())return void this.ss.insert(e);const n=this.ss.reverseLowerBound(e);n.high+1===t?n.high=t:this.ss.insert(e)}i("free():"+t)},a.prototype.clear=function(){i("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)},e.exports=a},{debug:18,"js-sdsl":36}],48:[function(t,e,r){var n=t("wrappy");function i(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function s(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}e.exports=n(i),e.exports.strict=n(s),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},{wrappy:79}],49:[function(t,e,r){(function(t){(function(){"use strict";void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return t.nextTick((function(){e.apply(null,s)}))}}}:e.exports=t}).call(this)}).call(this,t("_process"))},{_process:50}],50:[function(t,e,r){var n,i,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var h,c=[],l=!1,f=-1;function p(){l&&h&&(l=!1,h.length?c=h.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=u(p);l=!0;for(var e=c.length;e;){for(h=c,c=[];++f<e;)h&&h[f].run();f=-1,e=c.length}h=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new y(t,e)),1!==c.length||l||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],51:[function(t,r,n){(function(t){(function(){!function(e){var i="object"==typeof n&&n&&!n.nodeType&&n,s="object"==typeof r&&r&&!r.nodeType&&r,o="object"==typeof t&&t;o.global!==o&&o.window!==o&&o.self!==o||(e=o);var a,u,h=2147483647,c=36,l=/^xn--/,f=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=Math.floor,g=String.fromCharCode;function m(t){throw new RangeError(d[t])}function v(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function b(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+v((t=t.replace(p,".")).split("."),e).join(".")}function w(t){for(var e,r,n=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function _(t){return v(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+g(t)})).join("")}function k(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,r){var n=0;for(t=r?y(t/700):t>>1,t+=y(t/e);t>455;n+=c)t=y(t/35);return y(n+36*t/(t+38))}function M(t){var e,r,n,i,s,o,a,u,l,f,p,d=[],g=t.length,v=0,b=128,w=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&m("not-basic"),d.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(s=v,o=1,a=c;i>=g&&m("invalid-input"),((u=(p=t.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:c)>=c||u>y((h-v)/o))&&m("overflow"),v+=u*o,!(u<(l=a<=w?1:a>=w+26?26:a-w));a+=c)o>y(h/(f=c-l))&&m("overflow"),o*=f;w=x(v-s,e=d.length+1,0==s),y(v/e)>h-b&&m("overflow"),b+=y(v/e),v%=e,d.splice(v++,0,b)}return _(d)}function S(t){var e,r,n,i,s,o,a,u,l,f,p,d,v,b,_,M=[];for(d=(t=w(t)).length,e=128,r=0,s=72,o=0;o<d;++o)(p=t[o])<128&&M.push(g(p));for(n=i=M.length,i&&M.push("-");n<d;){for(a=h,o=0;o<d;++o)(p=t[o])>=e&&p<a&&(a=p);for(a-e>y((h-r)/(v=n+1))&&m("overflow"),r+=(a-e)*v,e=a,o=0;o<d;++o)if((p=t[o])<e&&++r>h&&m("overflow"),p==e){for(u=r,l=c;!(u<(f=l<=s?1:l>=s+26?26:l-s));l+=c)_=u-f,b=c-f,M.push(g(k(f+_%b,0))),u=y(_/b);M.push(g(k(u,0))),s=x(r,v,n==i),r=0,++n}++r,++e}return M.join("")}if(a={version:"1.4.1",ucs2:{decode:w,encode:_},decode:M,encode:S,toASCII:function(t){return b(t,(function(t){return f.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return b(t,(function(t){return l.test(t)?M(t.slice(4).toLowerCase()):t}))}},i&&s)if(r.exports==i)s.exports=a;else for(u in a)a.hasOwnProperty(u)&&(i[u]=a[u]);else e.punycode=a}(this)}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,s){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var c=0;c<h;++c){var l,f,p,d,y=t[c].replace(a,"%20"),g=y.indexOf(r);g>=0?(l=y.substr(0,g),f=y.substr(g+1)):(l=y,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),n(o,p)?i(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],53:[function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?s(o(t),(function(o){var a=encodeURIComponent(n(o))+r;return i(t[o])?s(t[o],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[o]))})).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var o=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],54:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":52,"./encode":53}],55:[function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function s(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,o;if("string"==typeof e&&(i="not ",e.substr(0,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))o="The ".concat(t," ").concat(n," ").concat(s(e,"type"));else{var a=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+".".length>t.length)&&-1!==t.indexOf(".",r)}(t)?"property":"argument";o='The "'.concat(t,'" ').concat(a," ").concat(n," ").concat(s(e,"type"))}return o+". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},{}],56:[function(t,e,r){(function(r){(function(){"use strict";var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=h;var i=t("./_stream_readable"),s=t("./_stream_writable");t("inherits")(h,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var u=o[a];h.prototype[u]||(h.prototype[u]=s.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);i.call(this,t),s.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||r.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(t,e,r){"use strict";e.exports=i;var n=t("./_stream_transform");function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}t("inherits")(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":59,inherits:24}],58:[function(t,r,n){(function(e,n){(function(){"use strict";var i;r.exports=S,S.ReadableState=M,t("events").EventEmitter;var s,o=function(t,e){return t.listeners(e).length},a=t("./internal/streams/stream"),u=t("buffer").Buffer,h=n.Uint8Array||function(){},c=t("util");s=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,p,d=t("./internal/streams/buffer_list"),y=t("./internal/streams/destroy"),g=t("./internal/streams/state").getHighWaterMark,m=t("../errors").codes,v=m.ERR_INVALID_ARG_TYPE,b=m.ERR_STREAM_PUSH_AFTER_EOF,w=m.ERR_METHOD_NOT_IMPLEMENTED,_=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(S,a);var k=y.errorOrDestroy,x=["error","close","destroy","pause","resume"];function M(e,r,n){i=i||t("./_stream_duplex"),e=e||{},"boolean"!=typeof n&&(n=r instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=t("string_decoder/").StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function S(e){if(i=i||t("./_stream_duplex"),!(this instanceof S))return new S(e);var r=this instanceof i;this._readableState=new M(e,this,r),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function E(t,e,r,n,i){s("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(s("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?O(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,P(t)))}}(t,a);else if(i||(o=function(t,e){var r,n;return n=e,u.isBuffer(n)||n instanceof h||"string"==typeof e||void 0===e||t.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],e)),r}(a,e)),o)k(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),n)a.endEmitted?k(t,new _):C(t,a,e,!0);else if(a.ended)k(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?C(t,a,e,!1):I(t,a)):C(t,a,e,!1)}else n||(a.reading=!1,I(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function C(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&O(t)),I(t,e)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=y.destroy,S.prototype._undestroy=y.undestroy,S.prototype._destroy=function(t,e){e(t)},S.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=u.from(t,e),e=""),r=!0),E(this,t,e,!1,r)},S.prototype.unshift=function(t){return E(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){l||(l=t("string_decoder/").StringDecoder);var r=new l(e);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function A(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t){var r=t._readableState;s("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(s("emitReadable",r.flowing),r.emittedReadable=!0,e.nextTick(P,t))}function P(t){var e=t._readableState;s("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,B(t)}function I(t,r){r.readingMore||(r.readingMore=!0,e.nextTick(j,t,r))}function j(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(s("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function N(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function R(t){s("readable nexttick read 0"),t.read(0)}function L(t,e){s("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),B(t),e.flowing&&!e.reading&&t.read(0)}function B(t){var e=t._readableState;for(s("flow",e.flowing);e.flowing&&null!==t.read(););}function D(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function U(t){var r=t._readableState;s("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,e.nextTick(q,r,t))}function q(t,e){if(s("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function F(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}S.prototype.read=function(t){s("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return s("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?U(this):O(this),null;if(0===(t=A(t,e))&&e.ended)return 0===e.length&&U(this),null;var n,i=e.needReadable;return s("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&s("length less than watermark",i=!0),e.ended||e.reading?s("reading or ended",i=!1):i&&(s("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=A(r,e))),null===(n=t>0?D(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&U(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(t){k(this,new w("_read()"))},S.prototype.pipe=function(t,r){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,s("pipe count=%d opts=%j",i.pipesCount,r);var a=r&&!1===r.end||t===e.stdout||t===e.stderr?y:u;function u(){s("onend"),t.end()}i.endEmitted?e.nextTick(a):n.once("end",a),t.on("unpipe",(function e(r,o){s("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,s("cleanup"),t.removeListener("close",p),t.removeListener("finish",d),t.removeListener("drain",h),t.removeListener("error",f),t.removeListener("unpipe",e),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",l),c=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}));var h=function(t){return function(){var e=t._readableState;s("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,B(t))}}(n);t.on("drain",h);var c=!1;function l(e){s("ondata");var r=t.write(e);s("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==F(i.pipes,t))&&!c&&(s("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function f(e){s("onerror",e),y(),t.removeListener("error",f),0===o(t,"error")&&k(t,e)}function p(){t.removeListener("finish",d),y()}function d(){s("onfinish"),t.removeListener("close",p),y()}function y(){s("unpipe"),n.unpipe(t)}return n.on("data",l),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",f),t.once("close",p),t.once("finish",d),t.emit("pipe",n),i.flowing||(s("pipe resume"),n.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},S.prototype.on=function(t,r){var n=a.prototype.on.call(this,t,r),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,s("on readable",i.length,i.reading),i.length?O(this):i.reading||e.nextTick(R,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(t,r){var n=a.prototype.removeListener.call(this,t,r);return"readable"===t&&e.nextTick(N,this),n},S.prototype.removeAllListeners=function(t){var r=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(N,this),r},S.prototype.resume=function(){var t=this._readableState;return t.flowing||(s("resume"),t.flowing=!t.readableListening,function(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(L,t,r))}(this,t)),t.paused=!1,this},S.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(s("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){s("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!=i)&&(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<x.length;o++)t.on(x[o],this.emit.bind(this,x[o]));return this._read=function(e){s("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=t("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),S._fromList=D,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(e,r){return void 0===p&&(p=t("./internal/streams/from")),p(S,e,r)})}).call(this)}).call(this,t("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(t,e,r){"use strict";e.exports=h;var n=t("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=t("./_stream_duplex");function h(t){if(!(this instanceof h))return new h(t);u.call(this,t),this._transformState={afterTransform:function(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?l(this,null,null):this._flush((function(e,r){l(t,e,r)}))}function l(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}t("inherits")(h,u),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,r){r(new i("_transform()"))},h.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(t,r,n){(function(e,n){(function(){"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(void 0),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var s;r.exports=S,S.WritableState=M;var o,a={deprecate:t("util-deprecate")},u=t("./internal/streams/stream"),h=t("buffer").Buffer,c=n.Uint8Array||function(){},l=t("./internal/streams/destroy"),f=t("./internal/streams/state").getHighWaterMark,p=t("../errors").codes,d=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,m=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,_=p.ERR_UNKNOWN_ENCODING,k=l.errorOrDestroy;function x(){}function M(r,n,o){s=s||t("./_stream_duplex"),r=r||{},"boolean"!=typeof o&&(o=n instanceof s),this.objectMode=!!r.objectMode,o&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=f(this,r,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===r.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,r){var n=t._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),r)!function(t,r,n,i,s){--r.pendingcb,n?(e.nextTick(s,i),e.nextTick(P,t,r),t._writableState.errorEmitted=!0,k(t,i)):(s(i),t._writableState.errorEmitted=!0,k(t,i),P(t,r))}(t,n,i,r,s);else{var o=A(n)||t.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(t,n),i?e.nextTick(C,t,n,o,s):C(t,n,o,s)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(e){var r=this instanceof(s=s||t("./_stream_duplex"));if(!r&&!o.call(S,this))return new S(e);this._writableState=new M(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function E(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function C(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),P(t,e)}function T(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)s[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;s.allBuffers=u,E(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var h=r.chunk,c=r.encoding,l=r.callback;if(E(t,e,!1,e.objectMode?1:h.length,h,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function A(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(r){e.pendingcb--,r&&k(t,r),e.prefinished=!0,t.emit("prefinish"),P(t,e)}))}function P(t,r){var n=A(r);if(n&&(function(t,r){r.prefinished||r.finalCalled||("function"!=typeof t._final||r.destroyed?(r.prefinished=!0,t.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,e.nextTick(O,t,r)))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"),r.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return n}t("inherits")(S,u),M.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(M.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===S&&t&&t._writableState instanceof M}})):o=function(t){return t instanceof this},S.prototype.pipe=function(){k(this,new m)},S.prototype.write=function(t,r,n){var i,s=this._writableState,o=!1,a=!s.objectMode&&(i=t,h.isBuffer(i)||i instanceof c);return a&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof r&&(n=r,r=null),a?r="buffer":r||(r=s.defaultEncoding),"function"!=typeof n&&(n=x),s.ending?function(t,r){var n=new w;k(t,n),e.nextTick(r,n)}(this,n):(a||function(t,r,n,i){var s;return null===n?s=new b:"string"==typeof n||r.objectMode||(s=new d("chunk",["string","Buffer"],n)),!s||(k(t,s),e.nextTick(i,s),!1)}(this,s,t,n))&&(s.pendingcb++,o=function(t,e,r,n,i,s){if(!r){var o=function(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,r)),e}(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else E(t,e,!1,a,n,i,s);return u}(this,s,a,t,r,n)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||T(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,r){r(new y("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,r,n){var i=this._writableState;return"function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null),null!=t&&this.write(t,r),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,r,n){r.ending=!0,P(t,r),n&&(r.finished?e.nextTick(n):t.once("finish",n)),r.ended=!0,t.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,t("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(t,e,r){(function(r){(function(){"use strict";var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=t("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),h=Symbol("ended"),c=Symbol("lastPromise"),l=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[o];if(null!==e){var r=t[f].read();null!==r&&(t[c]=null,t[o]=null,t[a]=null,e(p(r,!1)))}}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var t=this,e=this[u];if(null!==e)return Promise.reject(e);if(this[h])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(e,n){r.nextTick((function(){t[u]?n(t[u]):e(p(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[h]?r(p(void 0,!0)):e[l](r,n)}),n)}}(i,this));else{var s=this[f].read();if(null!==s)return Promise.resolve(p(s,!1));n=new Promise(this[l])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),n),y);e.exports=function(t){var e,n=Object.create(g,(i(e={},f,{value:t,writable:!0}),i(e,o,{value:null,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,h,{value:t._readableState.endEmitted,writable:!0}),i(e,l,{value:function(t,e){var r=n[f].read();r?(n[c]=null,n[o]=null,n[a]=null,t(p(r,!1))):(n[o]=t,n[a]=e)},writable:!0}),e));return n[c]=null,s(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[a];return null!==e&&(n[c]=null,n[o]=null,n[a]=null,e(t)),void(n[u]=t)}var r=n[o];null!==r&&(n[c]=null,n[o]=null,n[a]=null,r(p(void 0,!0))),n[h]=!0})),t.on("readable",function(t){r.nextTick(d,t)}.bind(null,n)),n}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":64,_process:50}],62:[function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=t("buffer").Buffer,a=t("util").inspect,u=a&&a.custom||"inspect";e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return o.alloc(0);for(var e,r,n,i=o.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,r=i,n=a,o.prototype.copy.call(e,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,s=t>i.length?i.length:t;if(s===i.length?n+=i:n+=i.slice(0,t),0==(t-=s)){s===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=o.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,s=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,s),0==(t-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,e}},{key:u,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&s(e.prototype,r),t}()},{buffer:17,util:16}],63:[function(t,e,r){(function(t){(function(){"use strict";function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}e.exports={destroy:function(e,s){var o=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(s?s(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!s&&e?o._writableState?o._writableState.errorEmitted?t.nextTick(n,o):(o._writableState.errorEmitted=!0,t.nextTick(r,o,e)):t.nextTick(r,o,e):s?(t.nextTick(n,o),s(e)):t.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,t("_process"))},{_process:50}],64:[function(t,e,r){"use strict";var n=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function t(e,r,s){if("function"==typeof r)return t(e,null,r);r||(r={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||c()},h=e._writableState&&e._writableState.finished,c=function(){a=!1,h=!0,o||s.call(e)},l=e._readableState&&e._readableState.endEmitted,f=function(){o=!1,l=!0,a||s.call(e)},p=function(t){s.call(e,t)},d=function(){var t;return o&&!l?(e._readableState&&e._readableState.ended||(t=new n),s.call(e,t)):a&&!h?(e._writableState&&e._writableState.ended||(t=new n),s.call(e,t)):void 0},y=function(){e.req.on("finish",c)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",c),e.on("abort",d),e.req?y():e.on("request",y)):a&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",f),e.on("finish",c),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",c),e.removeListener("abort",d),e.removeListener("request",y),e.req&&e.req.removeListener("finish",c),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}},{"../../../errors":55}],65:[function(t,e,r){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(t,e,r){"use strict";var n,i=t("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function u(t){t()}function h(t,e){return t.pipe(e)}e.exports=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var c,l=function(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var f=r.map((function(e,i){var s=i<r.length-1;return function(e,r,i,s){s=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(s);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=t("./end-of-stream")),n(e,{readable:r,writable:i},(function(t){if(t)return s(t);a=!0,s()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new o("pipe"))}}(e,s,i>0,(function(t){c||(c=t),t&&f.forEach(u),s||(f.forEach(u),l(c))}))}));return r.reduce(h)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(t,e,r){"use strict";var n=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(t,e,r,i){var s=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}}},{"../../../errors":55}],68:[function(t,e,r){e.exports=t("events").EventEmitter},{events:22}],69:[function(t,e,r){(r=e.exports=t("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js"),r.finished=t("./lib/internal/streams/end-of-stream.js"),r.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(t,e,r){"use strict";e.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new function(t,e,r){var n=this;this._callback=t,this._args=r,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t||(t=n._interval),n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,t,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}(arguments[0],arguments[1],t)}},{}],71:[function(t,e,r){"use strict";e.exports=t("./index.js")()},{"./index.js":72}],72:[function(t,e,r){(function(t){(function(){"use strict";function r(e){return e instanceof t?t.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}e.exports=function(t){return(t=t||{}).circles?function(t){var e=[],n=[];return t.proto?function t(s){if("object"!=typeof s||null===s)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return i(s,t);if(s instanceof Map)return new Map(i(Array.from(s),t));if(s instanceof Set)return new Set(i(Array.from(s),t));var o={};for(var a in e.push(s),n.push(o),s){var u=s[a];if("object"!=typeof u||null===u)o[a]=u;else if(u instanceof Date)o[a]=new Date(u);else if(u instanceof Map)o[a]=new Map(i(Array.from(u),t));else if(u instanceof Set)o[a]=new Set(i(Array.from(u),t));else if(ArrayBuffer.isView(u))o[a]=r(u);else{var h=e.indexOf(u);o[a]=-1!==h?n[h]:t(u)}}return e.pop(),n.pop(),o}:function t(s){if("object"!=typeof s||null===s)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return i(s,t);if(s instanceof Map)return new Map(i(Array.from(s),t));if(s instanceof Set)return new Set(i(Array.from(s),t));var o={};for(var a in e.push(s),n.push(o),s)if(!1!==Object.hasOwnProperty.call(s,a)){var u=s[a];if("object"!=typeof u||null===u)o[a]=u;else if(u instanceof Date)o[a]=new Date(u);else if(u instanceof Map)o[a]=new Map(i(Array.from(u),t));else if(u instanceof Set)o[a]=new Set(i(Array.from(u),t));else if(ArrayBuffer.isView(u))o[a]=r(u);else{var h=e.indexOf(u);o[a]=-1!==h?n[h]:t(u)}}return e.pop(),n.pop(),o};function i(t,i){for(var s=Object.keys(t),o=new Array(s.length),a=0;a<s.length;a++){var u=s[a],h=t[u];if("object"!=typeof h||null===h)o[u]=h;else if(h instanceof Date)o[u]=new Date(h);else if(ArrayBuffer.isView(h))o[u]=r(h);else{var c=e.indexOf(h);o[u]=-1!==c?n[c]:i(h)}}return o}}(t):t.proto?function t(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return e(n,t);if(n instanceof Map)return new Map(e(Array.from(n),t));if(n instanceof Set)return new Set(e(Array.from(n),t));var i={};for(var s in n){var o=n[s];"object"!=typeof o||null===o?i[s]=o:o instanceof Date?i[s]=new Date(o):o instanceof Map?i[s]=new Map(e(Array.from(o),t)):o instanceof Set?i[s]=new Set(e(Array.from(o),t)):ArrayBuffer.isView(o)?i[s]=r(o):i[s]=t(o)}return i}:function t(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return e(n,t);if(n instanceof Map)return new Map(e(Array.from(n),t));if(n instanceof Set)return new Set(e(Array.from(n),t));var i={};for(var s in n)if(!1!==Object.hasOwnProperty.call(n,s)){var o=n[s];"object"!=typeof o||null===o?i[s]=o:o instanceof Date?i[s]=new Date(o):o instanceof Map?i[s]=new Map(e(Array.from(o),t)):o instanceof Set?i[s]=new Set(e(Array.from(o),t)):ArrayBuffer.isView(o)?i[s]=r(o):i[s]=t(o)}return i};function e(t,e){for(var n=Object.keys(t),i=new Array(n.length),s=0;s<n.length;s++){var o=n[s],a=t[o];"object"!=typeof a||null===a?i[o]=a:a instanceof Date?i[o]=new Date(a):ArrayBuffer.isView(a)?i[o]=r(a):i[o]=e(a)}return i}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17}],73:[function(t,e,r){var n=t("buffer"),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,r),r.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},{buffer:17}],74:[function(t,e,r){e.exports=function(t){var e,r=t._readableState;return r?r.objectMode||"number"==typeof t._duplexState?t.read():t.read((e=r).buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length):null}},{}],75:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=l,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function c(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}r.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},s.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=o(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(e[n]))>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(e[n]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":73}],76:[function(t,e,r){"use strict";var n=t("punycode"),i=t("./util");function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=b,r.resolve=function(t,e){return b(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},r.format=function(t){return i.isString(t)&&(t=b(t)),t instanceof s?t.format():s.prototype.format.call(t)},r.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),l=["%","/","?",";","#"].concat(c),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=t("querystring");function b(t,e,r){if(t&&i.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,r),n}s.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var b=t=h.join(a);if(b=b.trim(),!r&&1===t.split("#").length){var w=u.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=o.exec(b);if(_){var k=(_=_[0]).toLowerCase();this.protocol=k,b=b.substr(_.length)}if(r||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||_&&g[_]||(b=b.substr(2),this.slashes=!0)}if(!g[_]&&(x||_&&!m[_])){for(var M,S,E=-1,C=0;C<f.length;C++)-1!==(T=b.indexOf(f[C]))&&(-1===E||T<E)&&(E=T);for(-1!==(S=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&(M=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(M)),E=-1,C=0;C<l.length;C++){var T;-1!==(T=b.indexOf(l[C]))&&(-1===E||T<E)&&(E=T)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var O=this.hostname.split(/\./),P=(C=0,O.length);C<P;C++){var I=O[C];if(I&&!I.match(p)){for(var j="",N=0,R=I.length;N<R;N++)I.charCodeAt(N)>127?j+="x":j+=I[N];if(!j.match(p)){var L=O.slice(0,C),B=O.slice(C+1),D=I.match(d);D&&(L.push(D[1]),B.unshift(D[2])),B.length&&(b="/"+B.join(".")+b),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+U,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!y[k])for(C=0,P=c.length;C<P;C++){var F=c[C];if(-1!==b.indexOf(F)){var z=encodeURIComponent(F);z===F&&(z=escape(F)),b=b.split(F).join(z)}}var V=b.indexOf("#");-1!==V&&(this.hash=b.substr(V),b=b.slice(0,V));var W=b.indexOf("?");if(-1!==W?(this.search=b.substr(W),this.query=b.substr(W+1),e&&(this.query=v.parse(this.query)),b=b.slice(0,W)):e&&(this.search="",this.query={}),b&&(this.pathname=b),m[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var G=this.search||"";this.path=U+G}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(i.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var r=new s,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),h=0;h<u.length;h++){var c=u[h];"protocol"!==c&&(r[c]=t[c])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!m[t.protocol]){for(var l=Object.keys(t),f=0;f<l.length;f++){var p=l[f];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",v=r.search||"";r.path=y+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=w||b||r.host&&t.pathname,k=_,x=r.pathname&&r.pathname.split("/")||[],M=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(M&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===x[0])),w)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search))return M&&(r.hostname=r.host=x.shift(),(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift())),r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=x.slice(-1)[0],E=(r.host||t.host||x.length>1)&&("."===S||".."===S)||""===S,C=0,T=x.length;T>=0;T--)"."===(S=x[T])?x.splice(T,1):".."===S?(x.splice(T,1),C++):C&&(x.splice(T,1),C--);if(!_&&!k)for(;C--;C)x.unshift("..");!_||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),E&&"/"!==x.join("/").substr(-1)&&x.push("");var A,O=""===x[0]||x[0]&&"/"===x[0].charAt(0);return M&&(r.hostname=r.host=O?"":x.length?x.shift():"",(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift())),(_=_||r.host&&x.length)&&!O&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":77,punycode:51,querystring:54}],77:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],78:[function(t,r,n){(function(t){(function(){function e(e){try{if(!t.localStorage)return!1}catch(t){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}r.exports=function(t,r){if(e("noDeprecation"))return t;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return t.apply(this,arguments)}}}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(t,e,r){e.exports=function t(e,r){if(e&&r)return t(e)(r);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){n[t]=e[t]})),n;function n(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(t){n[t]=i[t]})),n}}},{}],80:[function(t,e,r){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(t,e,r){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},{}],82:[function(t,e,r){"use strict";e.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},{}],83:[function(t,e,r){"use strict";function n(t){var e=this;if(e instanceof n||(e=new n),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);return e}function i(t,e,r){var n=e===t.head?new a(r,null,e,t):new a(r,e,e.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}function s(t,e){t.tail=new a(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function o(t,e){t.head=new a(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function a(t,e,r,n){if(!(this instanceof a))return new a(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e},n.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},n.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},n.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)s(this,arguments[t]);return this.length},n.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},n.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},n.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},n.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;null!==r;n++)t.call(e,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;null!==r;n--)t.call(e,r.value,n,this),r=r.prev},n.prototype.get=function(t){for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;if(e===t&&null!==r)return r.value},n.prototype.getReverse=function(t){for(var e=0,r=this.tail;null!==r&&e<t;e++)r=r.prev;if(e===t&&null!==r)return r.value},n.prototype.map=function(t,e){e=e||this;for(var r=new n,i=this.head;null!==i;)r.push(t.call(e,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(t,e){e=e||this;for(var r=new n,i=this.tail;null!==i;)r.push(t.call(e,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=t(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=t(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;null!==r;e++)t[e]=r.value,r=r.next;return t},n.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;null!==r;e++)t[e]=r.value,r=r.prev;return t},n.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,s=this.head;null!==s&&i<t;i++)s=s.next;for(;null!==s&&i<e;i++,s=s.next)r.push(s.value);return r},n.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,s=this.tail;null!==s&&i>e;i--)s=s.prev;for(;null!==s&&i>t;i--,s=s.prev)r.push(s.value);return r},n.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,s=this.head;null!==s&&n<t;n++)s=s.next;var o=[];for(n=0;s&&n<e;n++)o.push(s.value),s=this.removeNode(s);for(null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev),n=0;n<r.length;n++)s=i(this,s,r[n]);return o},n.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};try{t("./iterator.js")(n)}catch(t){}},{"./iterator.js":82}]},{},[12])(12)}).call(this,r(7))},,,function(t,e){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,h=[],c=!1,l=-1;function f(){c&&u&&(c=!1,u.length?h=u.concat(h):l=-1,h.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=h.length;e;){for(u=h,h=[];++l<e;)u&&u[l].run();l=-1,e=h.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new d(t,e)),1!==h.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,s=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(13),i)n.regeneratorRuntime=s;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag",u="object"==typeof t,h=e.regeneratorRuntime;if(h)u&&(t.exports=h);else{(h=e.regeneratorRuntime=u?t.exports:{}).wrap=y;var c={},l={};l[s]=function(){return this};var f=Object.getPrototypeOf,p=f&&f(f(E([])));p&&p!==r&&n.call(p,s)&&(l=p);var d=b.prototype=m.prototype=Object.create(l);v.prototype=d.constructor=b,b.constructor=v,b[a]=v.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(d),t},h.awrap=function(t){return{__await:t}},w(_.prototype),_.prototype[o]=function(){return this},h.AsyncIterator=_,h.async=function(t,e,r,n){var i=new _(y(t,e,r,n));return h.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(d),d[a]="Generator",d[s]=function(){return this},d.toString=function(){return"[object Generator]"},h.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},h.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}}}function y(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,s=Object.create(i.prototype),o=new S(n||[]);return s._invoke=function(t,e,r){var n="suspendedStart";return function(i,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw s;return C()}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var a=k(o,r);if(a){if(a===c)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=g(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,o),s}function g(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function m(){}function v(){}function b(){}function w(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(r,i){function s(){return new Promise((function(e,s){!function e(r,i,s,o){var a=g(t[r],t,i);if("throw"!==a.type){var u=a.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then((function(t){e("next",t,s,o)}),(function(t){e("throw",t,s,o)})):Promise.resolve(h).then((function(t){u.value=t,s(u)}),o)}o(a.arg)}(r,i,e,s)}))}return e=e?e.then(s,s):s()}}function k(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=g(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,r){"use strict";r.r(e);var n=r(1);function i(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t){if(!t)return!1;Array.isArray(t)&&(t=t[0]);var e=t.parseTextSync||t.parseSync||t.parse||t.parseStream||t.parseInBatches,r=t.options&&t.options[t.id];return e=e||r&&r.workerUrl}function u(t){var e;return i(t,"null loader"),i(a(t),"invalid loader"),Array.isArray(t)&&(e=t[1],t=o(o({},t=t[0]),{},{options:o(o({},t.options),e)})),t.extension&&(t.extensions=t.extensions||t.extension,delete t.extension),Array.isArray(t.extensions)||(t.extensions=[t.extensions]),i(t.extensions&&t.extensions.length>0&&t.extensions[0]),(t.parseTextSync||t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var h=r(20),c=r(2),l=function(t){return"boolean"==typeof t},f=function(t){return"function"==typeof t},p=function(t){return null!==t&&"object"===Object(c.a)(t)},d=function(t){return p(t)&&t.constructor==={}.constructor},y=function(t){return t&&"function"==typeof t[Symbol.iterator]},g=function(t){return t&&"function"==typeof t[Symbol.asyncIterator]},m=function(t){return"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},v=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},b=function(t){return function(t){return"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||p(t)&&f(t.tee)&&f(t.cancel)&&f(t.getReader)}(t)||function(t){return p(t)&&f(t.read)&&f(t.pipe)&&l(t.readable)}(t)},w=r(0),_=r.n(w);function k(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function o(t){k(s,n,i,o,a,"next",t)}function a(t){k(s,n,i,o,a,"throw",t)}o(void 0)}))}}var M="",S={};function E(t){for(var e in S)if(t.startsWith(e)){var r=S[e];t=t.replace(e,r)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(M).concat(t)),t}var C=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,T=/^([-\w.]+\/[-\w.+]+)/;function A(t){if("string"!=typeof t)return"";var e=t.match(C);return e?e[1]:""}var O=/\?.*/;function P(t){if(m(t)){var e=function(t){if("string"!=typeof t)return"";var e=t.match(T);return e?e[1]:t}(t.headers.get("content-type")),r=A(t.url);return{url:j(t.url||""),type:e||r||null}}return v(t)?{url:j(t.name||""),type:t.type||""}:"string"==typeof t?{url:j(t),type:A(t)}:{url:"",type:""}}function I(t){return m(t)?t.headers["content-length"]||-1:v(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function j(t){return t.replace(O,"")}function N(t){return R.apply(this,arguments)}function R(){return(R=x(_.a.mark((function t(e){var r,n,i,s,o,a,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m(e)){t.next=2;break}return t.abrupt("return",e);case 2:return r={},(n=I(e))>=0&&(r["content-length"]=String(n)),i=P(e),s=i.url,(o=i.type)&&(r["content-type"]=o),t.next=9,q(e);case 9:return(a=t.sent)&&(r["x-first-bytes"]=a),"string"==typeof e&&(e=(new TextEncoder).encode(e)),u=new Response(e,{headers:r}),Object.defineProperty(u,"url",{value:s}),t.abrupt("return",u);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t){return B.apply(this,arguments)}function B(){return(B=x(_.a.mark((function t(e){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,D(e);case 3:throw r=t.sent,new Error(r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){return U.apply(this,arguments)}function U(){return(U=x(_.a.mark((function t(e){var r,n,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,n=e.headers.get("Content-Type"),i=e.statusText,!n.includes("application/json")){t.next=11;break}return t.t0=i,t.t1=" ",t.next=9,e.text();case 9:t.t2=t.sent,i=t.t0+=t.t1.concat.call(t.t1,t.t2);case 11:r=(r+=i).length>60?"".concat(r.slice(60),"..."):r,t.next=17;break;case 15:t.prev=15,t.t3=t.catch(1);case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}function q(t){return F.apply(this,arguments)}function F(){return(F=x(_.a.mark((function t(e){var r,n,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=5,"string"!=typeof e){t.next=3;break}return t.abrupt("return","data:,".concat(e.slice(0,r)));case 3:if(!(e instanceof Blob)){t.next=8;break}return n=e.slice(0,5),t.next=7,new Promise((function(t){var e=new FileReader;e.onload=function(e){return t(e.target&&e.target.result)},e.readAsDataURL(n)}));case 7:return t.abrupt("return",t.sent);case 8:if(!(e instanceof ArrayBuffer)){t.next=12;break}return i=e.slice(0,r),s=z(i),t.abrupt("return","data:base64,".concat(s));case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(t){for(var e="",r=new Uint8Array(t),n=0;n<r.byteLength;n++)e+=String.fromCharCode(r[n]);return btoa(e)}function V(t){return W.apply(this,arguments)}function W(){return(W=x(_.a.mark((function t(e){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,!e.headers.get("Content-Type").includes("application/json")){t.next=10;break}return t.t0=r,t.next=7,e.text();case 7:r=t.t0+=t.sent,t.next=11;break;case 10:r+=e.statusText;case 11:t.next=16;break;case 13:return t.prev=13,t.t1=t.catch(1),t.abrupt("return",r);case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function G(t){return H.apply(this,arguments)}function H(){return(H=x(_.a.mark((function t(e){var r,n,i=arguments;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},"string"==typeof e){t.next=5;break}return t.next=4,N(e);case 4:return t.abrupt("return",t.sent);case 5:return e=E(e),t.next=8,fetch(e,r);case 8:if((n=t.sent).ok||!r.throws){t.next=15;break}return t.t0=Error,t.next=13,V(n);case 13:throw t.t1=t.sent,new t.t0(t.t1);case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(t,e,r){return e&&K(t.prototype,e),r&&K(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var J=function(){function t(){Q(this,t)}return $(t,[{key:"log",value:function(){return function(t){}}},{key:"info",value:function(){return function(t){}}},{key:"warn",value:function(){return function(t){}}},{key:"error",value:function(){return function(t){}}}]),t}();function Y(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var et={fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function t(){Q(this,t),this.console=console}return $(t,[{key:"log",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.console.log).bind.apply(t,[this.console].concat(r))}},{key:"info",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.console.info).bind.apply(t,[this.console].concat(r))}},{key:"warn",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.console.warn).bind.apply(t,[this.console].concat(r))}},{key:"error",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.console.error).bind.apply(t,[this.console].concat(r))}}]),t}()),metadata:!1,transforms:[],reuseWorkers:!0},rt={dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},nt=function(){h.a.loaders=h.a.loaders||{};var t=h.a.loaders;return t._state=t._state||{},t._state},it=function(){var t=nt();return t.globalOptions=t.globalOptions||tt({},et),t.globalOptions};function st(t,e,r,n){return r=r||[],function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;at(t,null,r,et,rt,e);var n,i=Y(e);try{for(i.s();!(n=i.n()).done;){var s=n.value,o=t&&t[s.id]||{},a=s.options&&s.options[s.id]||{},u=s.defaultOptions&&s.defaultOptions[s.id]||{};at(o,s.id,r,a,u,e)}}catch(t){i.e(t)}finally{i.f()}}(t,r=Array.isArray(r)?r:[r]),ht(e,t,n)}function ot(t,e){var r=it(),n=t.fetch||r.fetch;return"function"==typeof n?n:p(n)?function(t){return G(t,n)}:e&&e.fetch?e.fetch:function(e){return G(e,t)}}function at(t,e,r,n,i,s){var o=e||"Top level",a=e?"".concat(e,"."):"";for(var u in t){var h=!e&&p(t[u]);if(!(u in n))if(u in i)r.warn("".concat(o," loader option '").concat(a).concat(u,"' deprecated, use '").concat(i[u],"'"));else if(!h){var c=ut(u,s);r.warn("".concat(o," loader option '").concat(a).concat(u,"' not recognized. ").concat(c))}}}function ut(t,e){var r,n=t.toLowerCase(),i="",s=Y(e);try{for(s.s();!(r=s.n()).done;){var o=r.value;for(var a in o.options){if(t===a)return"Did you mean '".concat(o.id,".").concat(a,"'?");var u=a.toLowerCase();(n.startsWith(u)||u.startsWith(n))&&(i=i||"Did you mean '".concat(o.id,".").concat(a,"'?"))}}}catch(t){s.e(t)}finally{s.f()}return i}function ht(t,e,r){var n=tt({},t.options||{});return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(n,r),null===n.log&&(n.log=new J),ct(n,it()),ct(n,e),n}function ct(t,e){for(var r in e)if(r in e){var n=e[r];d(n)&&d(t[r])?t[r]=tt(tt({},t[r]),e[r]):t[r]=e[r]}}function lt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pt=function(){var t=nt();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function dt(){return pt()}function yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var mt={batchSize:"auto",convertToObject:!0,optimizeMemoryUsage:!1},vt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Q(this,t),r=gt(gt({},mt),r),this.schema=e,this.batchSize=r.batchSize,this.convertToObject=r.convertToObject,this.optimizeMemoryUsage=r.optimizeMemoryUsage,this.rows=null,this.length=0,this.isChunkComplete=!1,this.cursor=0,!Array.isArray(e))for(var n in this._headers=[],e)this._headers[e[n].index]=e[n].name}return $(t,[{key:"addRow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.rows||(this.rows=new Array(this.batchSize),this.length=0),Number.isFinite(e)&&(this.cursor=e);var r=this.convertToObject&&this.schema;this.rows[this.length]=r?bt(t,this._headers):t,this.optimizeMemoryUsage&&(this.rows[this.length]=JSON.parse(JSON.stringify(this.rows[this.length]))),this.length++}},{key:"chunkComplete",value:function(){this.isChunkComplete=!0}},{key:"isFull",value:function(){return"auto"===this.batchSize?this.isChunkComplete&&this.length>0:this.rows&&this.length>=this.batchSize}},{key:"getBatch",value:function(){if(this.rows){var t=this.rows.slice(0,this.length);return this.rows=null,this.isChunkComplete=!1,{data:t,schema:this.schema,length:t.length,cursor:this.cursor}}return null}}]),t}();function bt(t,e){if(!t)throw new Error("null row");if(!Array.isArray(t))return t;if(!e)return t;for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}function kt(t,e){if(e&&("object"===Object(c.a)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function St(t,e,r){return(St=Mt()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&wt(i,r.prototype),i}).apply(null,arguments)}function Et(t){var e="function"==typeof Map?new Map:void 0;return(Et=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return St(t,arguments,xt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wt(n,t)})(t)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xt(t);if(e){var i=xt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kt(this,r)}}var Tt=function(t){_t(r,t);var e=Ct(r);function r(){return Q(this,r),e.apply(this,arguments)}return $(r,[{key:"enqueue",value:function(t){return this.push(t)}},{key:"dequeue",value:function(){return this.shift()}}]),r}(Et(Array));var At=function(){function t(){Q(this,t),this._values=new Tt,this._settlers=new Tt,this._closed=!1}return $(t,[{key:"close",value:function(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}},{key:Symbol.asyncIterator,value:function(){return this}},{key:"enqueue",value:function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.dequeue();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.enqueue(t)}},{key:"next",value:function(){var t=this;if(this._values.length>0){var e=this._values.dequeue();return e instanceof Error?Promise.reject(e):Promise.resolve({value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((function(e,r){t._settlers.enqueue({resolve:e,reject:r})}))}}]),t}();function Ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var It={batchSize:100},jt=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Q(this,t),this.TableBatchType=e,this.schema=r,this.options=Pt(Pt({},It),n),this.batch=null,this.batchCount=0,this.bytesUsed=0}return $(t,[{key:"addRow",value:function(t){if(!this.batch){var e=this.TableBatchType;this.batch=new e(this.schema,this.options)}this.batch.addRow(t)}},{key:"chunkComplete",value:function(t){this.bytesUsed+=t.byteLength||t.length||0,this.batch&&this.batch.chunkComplete()}},{key:"isFull",value:function(){return this.batch&&this.batch.isFull()}},{key:"hasBatch",value:function(){return Boolean(this.batch)}},{key:"getBatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Number.isFinite(t.bytesUsed)&&(this.bytesUsed=t.bytesUsed),this.batch){var e=this.batch.getBatch();return this.batch=null,e.count=this.batchCount,this.batchCount++,e.bytesUsed=this.bytesUsed,Object.assign(e,t),e}return null}}]),t}(),Nt=r(4),Rt=r.n(Nt);function Lt(t){var e,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new Bt(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Bt(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return(Bt=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new Bt(t)}var Dt=Rt.a.ChunkStreamer;function Ut(t){var e;t=t||{},Dt.call(this,t),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=(e=x(_.a.mark((function t(e){var r,n,i,s,o,a,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._input=e,t.prev=1,r=!0,n=!1,t.prev=4,s=Lt(e);case 6:return t.next=8,s.next();case 8:return o=t.sent,r=o.done,t.next=12,o.value;case 12:if(a=t.sent,r){t.next=19;break}u=a,this.parseChunk(this.getStringChunk(u));case 16:r=!0,t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),n=!0,i=t.t0;case 25:if(t.prev=25,t.prev=26,r||null==s.return){t.next=30;break}return t.next=30,s.return();case 30:if(t.prev=30,!n){t.next=33;break}throw i;case 33:return t.finish(30);case 34:return t.finish(25);case 35:this._finished=!0,this.parseChunk(""),t.next=42;break;case 39:t.prev=39,t.t1=t.catch(1),this._sendError(t.t1);case 42:case"end":return t.stop()}}),t,this,[[1,39],[4,21,25,35],[26,,30,34]])}))),function(t){return e.apply(this,arguments)}),this._nextChunk=function(){},this.getStringChunk=function(t){return"string"==typeof t?t:this.textDecoder.decode(t,{stream:!0})}}function qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Ut.prototype=Object.create(Dt.prototype),Ut.prototype.constructor=Ut;var zt,Vt={csv:{TableBatch:vt,batchSize:10,optimizeMemoryUsage:!1,header:"auto",rowFormat:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!1,delimitersToGuess:[",","\t","|",";"]}},Wt={id:"csv",name:"CSV",version:"2.3.7",extensions:["csv"],mimeTypes:["text/csv"],category:"table",parse:(zt=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Gt((new TextDecoder).decode(e),r));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return zt.apply(this,arguments)}),parseText:Gt,parseInBatches:function(t,e){(e=Ft(Ft({},Vt),e)).csv=Ft(Ft({},Vt.csv),e.csv);var r=e.csv,n=r.batchSize,i=r.optimizeMemoryUsage,s=e.csv.TableBatch,o=new At,a="object"===e.csv.rowFormat,u=!0,h=null,l=null,f=null,p=Ft(Ft({dynamicTyping:!0},e.csv),{},{header:!1,download:!1,step:function(t,r){var p=t.data,d=t.meta.cursor;if(u&&!h&&Qt(p,e))return void(h=p);if(u){if(u=!1,!h){h=[];for(var y=0;y<p.length;y++)h[y]="".concat(e.csv.columnPrefix).concat(y+1)}f=function(t,e){for(var r=e?{}:[],n=0;n<t.length;n++){var i=e&&e[n]||n,s=t[n];switch(Object(c.a)(s)){case"number":case"boolean":r[i]={name:String(i),index:n,type:Float32Array};break;case"string":default:r[i]={name:String(i),index:n,type:Array}}}return r}(p,h)}(l=l||new jt(s,f,{batchSize:n,convertToObject:a,optimizeMemoryUsage:i})).addRow(p),l.isFull()&&o.enqueue(l.getBatch({bytesUsed:d}))},complete:function(t,e){var r=t.meta.cursor,n=l.getBatch({bytesUsed:r});n&&o.enqueue(n),o.close()}});return Rt.a.parse(t,p,Ut),o},testText:null,options:Vt};function Gt(t,e){return Ht.apply(this,arguments)}function Ht(){return(Ht=x(_.a.mark((function t(e,r){var n,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Ft(Ft({},Vt),r)).csv=Ft(Ft({},Vt.csv),r.csv),t.next=4,Kt(e,r);case 4:return n=t.sent,i=Ft(Ft({dynamicTyping:!0},r.csv),{},{header:n,download:!1,error:function(t){throw new Error(t)}}),s=Rt.a.parse(e,i),t.abrupt("return",s.data);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qt(t,e){return e&&"auto"!==e.csv.header?Boolean(e.csv.header):t.every((function(t){return"string"==typeof t}))}function Kt(t,e){return $t.apply(this,arguments)}function $t(){return($t=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("auto"===r.csv.header){t.next=2;break}return t.abrupt("return",Boolean(r.csv.header));case 2:return t.next=4,new Promise((function(t,r){Rt.a.parse(e,{download:!1,dynamicTyping:!0,step:function(e,r){r.abort();var n=e.data;t(Qt(n))},error:function(t){r(new Error(t))}})}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jt(t){this.wrapped=t}function Yt(t){return new Jt(t)}function Xt(t){var e,r;function n(e,r){try{var s=t[e](r),o=s.value,a=o instanceof Jt;Promise.resolve(a?o.wrapped:o).then((function(t){a?n("return"===e?"return":"next",t):i(s.done?"return":"normal",t)}),(function(t){n("throw",t)}))}catch(t){i("throw",t)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,i){return new Promise((function(s,o){var a={key:t,arg:i,resolve:s,reject:o,next:null};r?r=r.next=a:(e=r=a,n(t,i))}))},"function"!=typeof t.return&&(this.return=void 0)}function Zt(t){return function(){return new Xt(t.apply(this,arguments))}}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ee(t,e){if(t){if("string"==typeof t)return te(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(t,e):void 0}}function re(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,s=[],o=!0,a=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){a=!0,i=t}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return s}}(t,e)||ee(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ie(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Xt.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Xt.prototype.next=function(t){return this._invoke("next",t)},Xt.prototype.throw=function(t){return this._invoke("throw",t)},Xt.prototype.return=function(t){return this._invoke("return",t)};var se=function(){function t(e){Q(this,t);var r=(e||{}).maxRewindBytes,n=void 0===r?0:r;this.offset=0,this.arrayBuffers=[],this.ended=!1,this.maxRewindBytes=n}return $(t,[{key:"write",value:function(t){this.arrayBuffers.push(t)}},{key:"end",value:function(){this.arrayBuffers=[],this.ended=!0}},{key:"hasAvailableBytes",value:function(t){var e,r=-this.offset,n=ne(this.arrayBuffers);try{for(n.s();!(e=n.n()).done;){if((r+=e.value.byteLength)>=t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"findBufferOffsets",value:function(t){for(var e=-this.offset,r=[],n=0;n<this.arrayBuffers.length;n++){var i=this.arrayBuffers[n];if(e+i.byteLength<=0)e+=i.byteLength;else{var s=e<=0?Math.abs(e):0,o=void 0;if(s+t<=i.byteLength)return o=s+t,r.push([n,[s,o]]),r;o=i.byteLength,r.push([n,[s,o]]),t-=i.byteLength-s,e+=i.byteLength}}return null}},{key:"getDataView",value:function(t){var e=this.findBufferOffsets(t);if(!e&&this.ended)throw new Error("binary data exhausted");if(!e)return null;if(1===e.length){var r=re(e[0],2),n=r[0],i=re(r[1],2),s=i[0],o=i[1],a=this.arrayBuffers[n],u=new DataView(a,s,o-s);return this.offset+=t,this.disposeBuffers(),u}var h=new DataView(this._combineArrayBuffers(e));return this.offset+=t,this.disposeBuffers(),h}},{key:"disposeBuffers",value:function(){for(;this.arrayBuffers.length>0&&this.offset-this.maxRewindBytes>=this.arrayBuffers[0].byteLength;)this.offset-=this.arrayBuffers[0].byteLength,this.arrayBuffers.shift()}},{key:"_combineArrayBuffers",value:function(t){var e,r=0,n=ne(t);try{for(n.s();!(e=n.n()).done;){var i=re(e.value[1],2),s=i[0];r+=i[1]-s}}catch(t){n.e(t)}finally{n.f()}var o,a=new Uint8Array(r),u=0,h=ne(t);try{for(h.s();!(o=h.n()).done;){var c=re(o.value,2),l=c[0],f=re(c[1],2),p=f[0],d=f[1],y=new Uint8Array(this.arrayBuffers[l]);a.set(y.subarray(p,d),u),u+=d-p}}catch(t){h.e(t)}finally{h.f()}return a.buffer}},{key:"skip",value:function(t){this.offset+=t}},{key:"rewind",value:function(t){this.offset-=t}}]),t}();function oe(t){var e={magic:t.getInt32(0,!1),length:2*t.getInt32(24,!1),version:t.getInt32(28,!0),type:t.getInt32(32,!0),bbox:{minX:t.getFloat64(36,!0),minY:t.getFloat64(44,!0),minZ:t.getFloat64(68,!0),minM:t.getFloat64(84,!0),maxX:t.getFloat64(52,!0),maxY:t.getFloat64(60,!0),maxZ:t.getFloat64(76,!0),maxM:t.getFloat64(92,!0)}};return 9994!==e.magic&&console.error("SHP file: bad magic number ".concat(e.magic)),1e3!==e.version&&console.error("SHP file: bad version ".concat(e.version)),e}function ae(t,e){var r=(e&&e.shp||{})._maxDimensions,n=0,i=t.getInt32(n,!0);switch(n+=Int32Array.BYTES_PER_ELEMENT,i){case 0:return null;case 1:return ue(t,n,Math.min(2,r));case 3:return ce(t,n,Math.min(2,r),"LineString");case 5:return ce(t,n,Math.min(2,r),"Polygon");case 8:return he(t,n,Math.min(2,r));case 11:return ue(t,n,Math.min(4,r));case 13:return ce(t,n,Math.min(4,r),"LineString");case 15:return ce(t,n,Math.min(4,r),"Polygon");case 18:return he(t,n,Math.min(4,r));case 21:return ue(t,n,Math.min(3,r));case 23:return ce(t,n,Math.min(3,r),"LineString");case 25:return ce(t,n,Math.min(3,r),"Polygon");case 28:return he(t,n,Math.min(3,r));default:throw new Error("unsupported shape type: ".concat(i))}}function ue(t,e,r){var n,i=re(le(t,e,1,r),2);return n=i[0],e=i[1],{positions:{value:n,size:r},type:"Point"}}function he(t,e,r){e+=4*Float64Array.BYTES_PER_ELEMENT;var n,i=t.getInt32(e,!0),s=null,o=null,a=re(le(t,e+=Int32Array.BYTES_PER_ELEMENT,i,2),2);if(n=a[0],e=a[1],4===r){var u=re(le(t,e+=2*Float64Array.BYTES_PER_ELEMENT,i,1),2);o=u[0],e=u[1]}if(r>=3){var h=re(le(t,e+=2*Float64Array.BYTES_PER_ELEMENT,i,1),2);s=h[0],e=h[1]}return{positions:{value:fe(n,s,o),size:r},type:"Point"}}function ce(t,e,r,n){e+=4*Float64Array.BYTES_PER_ELEMENT;var i=t.getInt32(e,!0);e+=Int32Array.BYTES_PER_ELEMENT;var s=t.getInt32(e,!0);e+=Int32Array.BYTES_PER_ELEMENT;var o=t.byteOffset+e,a=i*Int32Array.BYTES_PER_ELEMENT,u=new Int32Array(i+1);u.set(new Int32Array(t.buffer.slice(o,o+a))),u[i]=s;var h=null,c=null,l=null,f=re(le(t,e+=i*Int32Array.BYTES_PER_ELEMENT,s,2),2);if(h=f[0],e=f[1],4===r){var p=re(le(t,e+=2*Float64Array.BYTES_PER_ELEMENT,s,1),2);l=p[0],e=p[1]}if(r>=3){var d=re(le(t,e+=2*Float64Array.BYTES_PER_ELEMENT,s,1),2);c=d[0],e=d[1]}var y=fe(h,c,l);if("LineString"===n)return{positions:{value:y,size:r},pathIndices:{value:u,size:1},type:n};for(var g=[],m=1;m<u.length;m++){var v=u[m-1],b=u[m];pe(h.subarray(2*v,2*b))>0&&g.push(v)}return g.push(s),{positions:{value:y,size:r},primitivePolygonIndices:{value:u,size:1},polygonIndices:{value:new Uint32Array(g),size:1},type:n}}function le(t,e,r,n){var i=t.byteOffset+e,s=r*n*Float64Array.BYTES_PER_ELEMENT;return[new Float64Array(t.buffer.slice(i,i+s)),e+s]}function fe(t,e,r){if(!e&&!r)return t;var n=t.length,i=2;r&&r.length&&(n+=r.length,i++),e&&e.length&&(n+=e.length,i++);for(var s=new Float64Array(n),o=0;o<t.length/2;o++)s[i*o]=t[2*o],s[i*o+1]=t[2*o+1];if(r&&r.length)for(var a=0;a<r.length;a++)s[i*a+2]=r[a];if(e&&e.length)for(var u=0;u<e.length;u++)s[i*u+(i-1)]=e[u];return s}function pe(t){return Math.sign(function(t){for(var e=0,r=t.length/2-1,n=0;n<r;n++)e+=(t[2*n]+t[2*(n+1)])*(t[2*n+1]-t[2*(n+1)+1]);return e/2}(t))}var de=0,ye=1,ge=2,me=3,ve=function(){function t(e){Q(this,t),this.options=e,this.binaryReader=new se({maxRewindBytes:12}),this.state=de,this.result={geometries:[]}}return $(t,[{key:"write",value:function(t){this.binaryReader.write(t),this.state=_e(this.state,this.result,this.binaryReader,this.options)}},{key:"end",value:function(){this.binaryReader.end(),this.state=_e(this.state,this.result,this.binaryReader,this.options),this.state!==ge&&(this.state=me,this.result.error="SHP incomplete file")}}]),t}();function be(t,e){var r=new ve(e);return r.write(t),r.end(),r.result}function we(){return(we=Zt(_.a.mark((function t(e,r){var n,i,s,o,a,u,h,c,l;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new ve(r),i=!1,s=!0,o=!1,t.prev=4,u=Lt(e);case 6:return t.next=8,Yt(u.next());case 8:return h=t.sent,s=h.done,t.next=12,Yt(h.value);case 12:if(c=t.sent,s){t.next=27;break}if(l=c,n.write(l),i||!n.result.header){t.next=20;break}return i=!0,t.next=20,n.result.header;case 20:if(!(n.result.geometries.length>0)){t.next=24;break}return t.next=23,n.result.geometries;case 23:n.result.geometries=[];case 24:s=!0,t.next=6;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(4),o=!0,a=t.t0;case 33:if(t.prev=33,t.prev=34,s||null==u.return){t.next=38;break}return t.next=38,Yt(u.return());case 38:if(t.prev=38,!o){t.next=41;break}throw a;case 41:return t.finish(38);case 42:return t.finish(33);case 43:if(n.end(),!(n.result.geometries.length>0)){t.next=47;break}return t.next=47,n.result.geometries;case 47:return t.abrupt("return");case 48:case"end":return t.stop()}}),t,null,[[4,29,33,43],[34,,38,42]])})))).apply(this,arguments)}function _e(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;;)try{switch(t){case me:case ge:return t;case de:var i=r.getDataView(100);if(!i)return t;e.header=oe(i),e.progress={bytesUsed:0,bytesTotal:e.header.length,rows:0},e.currentIndex=1,t=ye;break;case ye:for(;r.hasAvailableBytes(12);){var s=r.getDataView(12),o={recordNumber:s.getInt32(0,!1),byteLength:2*s.getInt32(4,!1),type:s.getInt32(8,!0)};if(!r.hasAvailableBytes(o.byteLength-4))return r.rewind(12),t;var a=o.byteLength<4||o.type!==e.header.type||o.recordNumber!==e.currentIndex;if(a)r.rewind(8);else{r.rewind(4);var u=r.getDataView(o.byteLength),h=ae(u,n);e.geometries.push(h),e.currentIndex++,e.progress.rows=e.currentIndex-1}}return r.ended&&(t=ge),t;default:return t=me,e.error="illegal parser state ".concat(t),t}}catch(r){return t=me,e.error="SHP parsing failed: ".concat(r.message),t}}function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Me=[0,0,39,10],Se=xe(xe({},{id:"shp",name:"SHP",category:"geometry",version:"2.3.7",extensions:["shp"],mimeTypes:["application/octet-stream"],tests:[new Uint8Array(Me).buffer],options:{shp:{_maxDimensions:4}}}),{},{parse:function(){var t=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",be(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseSync:be,parseInBatches:function(t,e){return we.apply(this,arguments)}}),Ee=484813681109536e-20,Ce=Math.PI/2,Te=.017453292519943295,Ae=57.29577951308232,Oe=Math.PI/4,Pe=2*Math.PI,Ie=3.14159265359,je={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Ne={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Re=/[\s_\-\/\(\)]/g;function Le(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),i=e.toLowerCase().replace(Re,""),s=-1;++s<n.length;)if((r=n[s]).toLowerCase().replace(Re,"")===i)return t[r]}var Be=function(t){var e,r,n,i={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*Te},lat_1:function(t){i.lat1=t*Te},lat_2:function(t){i.lat2=t*Te},lat_ts:function(t){i.lat_ts=t*Te},lon_0:function(t){i.long0=t*Te},lon_1:function(t){i.long1=t*Te},lon_2:function(t){i.long2=t*Te},alpha:function(t){i.alpha=parseFloat(t)*Te},lonc:function(t){i.longc=t*Te},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=Le(Ne,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*Te},pm:function(t){var e=Le(je,t);i.from_greenwich=(e||parseFloat(t))*Te},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in s)r=s[e],e in o?"function"==typeof(n=o[e])?n(r):i[n]=r:i[e]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},De=function(t){return new We(t).output()},Ue=/\s/,qe=/[A-Za-z]/,Fe=/[A-Za-z84_]/,ze=/[,\]]/,Ve=/[\d\.E\-\+]/;function We(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Ge(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce((function(t,e){return He(e,t),t}),n);e&&(t[e]=i)}function He(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void He(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&He(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&He(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Ge(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return He(t,e[r]);return Ge(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}We.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Ue.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},We.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(ze.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},We.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},We.prototype.number=function(t){if(!Ve.test(t)){if(ze.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},We.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},We.prototype.keyword=function(t){if(Fe.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!ze.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},We.prototype.neutral=function(t){if(qe.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Ve.test(t))return this.word=t,void(this.state=3);if(!ze.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},We.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Qe(t){return.017453292519943295*t}var Ke=function(t){var e=De(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var i={};return He(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var i=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Qe],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Qe],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Qe],["lat0","latitude_of_origin",Qe],["lat0","standard_parallel_1",Qe],["lat1","standard_parallel_1",Qe],["lat2","standard_parallel_2",Qe],["azimuth","Azimuth"],["alpha","azimuth",Qe],["srsCode","name"]].forEach((function(e){return r=t,i=(n=e)[0],s=n[1],void(!(i in r)&&s in r&&(r[i]=r[s],3===n.length&&(r[i]=n[2](r[i]))));var r,n,i,s})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Qe(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function $e(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?$e[t]=Be(arguments[1]):$e[t]=Ke(arguments[1]):$e[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?$e.apply(e,t):$e(t)}));if("string"==typeof t){if(t in $e)return $e[t]}else"EPSG"in t?$e["EPSG:"+t.EPSG]=t:"ESRI"in t?$e["ESRI:"+t.ESRI]=t:"IAU2000"in t?$e["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}($e);var Je=$e;var Ye=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Xe=["3857","900913","3785","102113"];var Ze=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Je}(t))return Je[t];if(function(t){return Ye.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Ke(t);if(function(t){var e=Le(t,"authority");if(e){var r=Le(e,"epsg");return r&&Xe.indexOf(r)>-1}}(e))return Je["EPSG:3857"];var r=function(t){var e=Le(t,"extension");if(e)return Le(e,"proj4")}(e);return r?Be(r):e}return function(t){return"+"===t[0]}(t)?Be(t):void 0},tr=function(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t},er=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)},rr=function(t){return t<0?-1:1},nr=function(t){return Math.abs(t)<=Ie?t:t-rr(t)*Pe},ir=function(t,e,r){var n=t*r,i=.5*t;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(Ce-e))/n},sr=function(t,e){for(var r,n,i=.5*t,s=Ce-2*Math.atan(e),o=0;o<=15;o++)if(r=t*Math.sin(s),s+=n=Ce-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-s,Math.abs(n)<=1e-10)return s;return-9999};function or(t){return t}var ar=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=er(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,i=t.y;if(i*Ae>90&&i*Ae<-90&&n*Ae>180&&n*Ae<-180)return null;if(Math.abs(Math.abs(i)-Ce)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*nr(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Oe+.5*i));else{var s=Math.sin(i),o=ir(this.e,i,s);e=this.x0+this.a*this.k0*nr(n-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,i=t.y-this.y0;if(this.sphere)r=Ce-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(-9999===(r=sr(this.e,s)))return null}return e=nr(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:or,inverse:or,names:["longlat","identity"]}],ur={},hr=[];function cr(t,e){var r=hr.length;return t.names?(hr[r]=t,t.names.forEach((function(t){ur[t.toLowerCase()]=r})),this):(console.log(e),!0)}var lr={start:function(){ar.forEach(cr)},add:cr,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==ur[e]&&hr[ur[e]]?hr[ur[e]]:void 0}},fr={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},pr=fr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};fr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var dr={};dr.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},dr.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},dr.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},dr.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},dr.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},dr.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},dr.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},dr.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},dr.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},dr.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},dr.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},dr.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},dr.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},dr.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},dr.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},dr.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},dr.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var yr=function(t,e,r,n,i,s){var o={};return o.datum_type=void 0===t||"none"===t?5:4,e&&(o.datum_params=e.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=1),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=2,o.datum_params[3]*=Ee,o.datum_params[4]*=Ee,o.datum_params[5]*=Ee,o.datum_params[6]=o.datum_params[6]/1e6+1))),o.a=r,o.b=n,o.es=i,o.ep2=s,o};function gr(t,e){if(!(this instanceof gr))return new gr(t);e=e||function(t){if(t)throw t};var r=Ze(t);if("object"==typeof r){var n=gr.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var i=Le(dr,r.datumCode);i&&(r.datum_params=i.towgs84?i.towgs84.split(","):null,r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var s,o,a,u,h,c,l,f=function(t,e,r,n,i){if(!t){var s=Le(fr,n);s||(s=pr),t=s.a,e=s.b,r=s.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<1e-10)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(s=f.a,o=f.b,f.rf,a=r.R_A,c=((u=s*s)-(h=o*o))/u,l=0,a?(u=(s*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*s,c=0):l=Math.sqrt(c),{es:c,e:l,ep2:(u-h)/h}),d=r.datum||yr(r.datumCode,r.datum_params,f.a,f.b,p.es,p.ep2);tr(this,r),tr(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}gr.projections=lr,gr.projections.start();var mr=gr;function vr(t,e,r){var n,i,s,o,a=t.x,u=t.y,h=t.z?t.z:0;if(u<-Ce&&u>-1.001*Ce)u=-Ce;else if(u>Ce&&u<1.001*Ce)u=Ce;else{if(u<-Ce)return{x:-1/0,y:-1/0,z:t.z};if(u>Ce)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),i=Math.sin(u),o=Math.cos(u),s=i*i,{x:((n=r/Math.sqrt(1-e*s))+h)*o*Math.cos(a),y:(n+h)*o*Math.sin(a),z:(n*(1-e)+h)*i}}function br(t,e,r,n){var i,s,o,a,u,h,c,l,f,p,d,y,g,m,v,b=t.x,w=t.y,_=t.z?t.z:0;if(i=Math.sqrt(b*b+w*w),s=Math.sqrt(b*b+w*w+_*_),i/r<1e-12){if(m=0,s/r<1e-12)return Ce,v=-n,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(w,b);o=_/s,l=(a=i/s)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*a*a)),f=o*u,g=0;do{g++,h=e*(c=r/Math.sqrt(1-e*f*f))/(c+(v=i*l+_*f-c*(1-e*f*f))),y=(d=o*(u=1/Math.sqrt(1-h*(2-h)*a*a)))*l-(p=a*(1-h)*u)*f,l=p,f=d}while(y*y>1e-24&&g<30);return{x:m,y:Math.atan(d/Math.abs(p)),z:v}}function wr(t){return 1===t||2===t}var _r=function(t,e,r){return function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}(t,e)||5===t.datum_type||5===e.datum_type?r:t.es!==e.es||t.a!==e.a||wr(t.datum_type)||wr(e.datum_type)?(r=vr(r,t.es,t.a),wr(t.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(2===e){var n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],h=r[6];return{x:h*(t.x-u*t.y+a*t.z)+n,y:h*(u*t.x+t.y-o*t.z)+i,z:h*(-a*t.x+o*t.y+t.z)+s}}}(r,t.datum_type,t.datum_params)),wr(e.datum_type)&&(r=function(t,e,r){if(1===e)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(2===e){var n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],h=r[6],c=(t.x-n)/h,l=(t.y-i)/h,f=(t.z-s)/h;return{x:c+u*l-a*f,y:-u*c+l+o*f,z:a*c-o*l+f}}}(r,e.datum_type,e.datum_params)),br(r,e.es,e.a,e.b)):r},kr=function(t,e,r){var n,i,s,o=r.x,a=r.y,u=r.z||0,h={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==r.z)switch(0===s?(n=o,i=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(n=a,i=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(n=u,i="z"),t.axis[s]){case"e":case"w":case"n":case"s":h[i]=n;break;case"u":void 0!==r[i]&&(h.z=n);break;case"d":void 0!==r[i]&&(h.z=-n);break;default:return null}return h},xr=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function Mr(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Sr(t,e,r){var n;if(Array.isArray(r)&&(r=xr(r)),function(t){Mr(t.x),Mr(t.y)}(r),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(r=Sr(t,n=new mr("WGS84"),r),t=n),"enu"!==t.axis&&(r=kr(t,!1,r)),"longlat"===t.projName)r={x:r.x*Te,y:r.y*Te,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;return t.from_greenwich&&(r.x+=t.from_greenwich),r=_r(t.datum,e.datum,r),e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*Ae,y:r.y*Ae,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),"enu"!==e.axis?kr(e,!0,r):r}var Er=mr("WGS84");function Cr(t,e,r){var n,i,s;return Array.isArray(r)?(n=Sr(t,e,r)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof n.z?[n.x,n.y,n.z].concat(r.splice(3)):[n.x,n.y,r[2]].concat(r.splice(3)):[n.x,n.y].concat(r.splice(2)):[n.x,n.y]):(i=Sr(t,e,r),2===(s=Object.keys(r)).length||s.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;i[n]=r[n]})),i)}function Tr(t){return t instanceof mr?t:t.oProj?t.oProj:mr(t)}var Ar=function(t,e,r){t=Tr(t);var n,i=!1;return void 0===e?(e=t,t=Er,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=Er,i=!0),e=Tr(e),r?Cr(t,e,r):(n={forward:function(r){return Cr(t,e,r)},inverse:function(r){return Cr(e,t,r)}},i&&(n.oProj=e),n)},Or=73,Pr=79,Ir={forward:jr,inverse:function(t){var e=Br(qr(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Nr};function jr(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,y=t.zoneNumber,g=Ur(y),m=Math.floor(p/1e5),v=Math.floor(d/1e5)%20,i=m,s=v,o=g,a=o-1,u="AJSAJS".charCodeAt(a),h="AFAFAF".charCodeAt(a),c=u+i-1,l=h+s,f=!1,c>90&&(c=c-90+65-1,f=!0),(c===Or||u<Or&&c>Or||(c>Or||u<Or)&&f)&&c++,(c===Pr||u<Pr&&c>Pr||(c>Pr||u<Pr)&&f)&&++c===Or&&c++,c>90&&(c=c-90+65-1),l>86?(l=l-86+65-1,f=!0):f=!1,(l===Or||h<Or&&l>Or||(l>Or||h<Or)&&f)&&l++,(l===Pr||h<Pr&&l>Pr||(l>Pr||h<Pr)&&f)&&++l===Or&&l++,l>86&&(l=l-86+65-1),String.fromCharCode(c)+String.fromCharCode(l))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var i,s,o,a,u,h,c,l,f;var p,d,y,g,m,v}(function(t){var e,r,n,i,s,o,a,u=t.lat,h=t.lon,c=6378137,l=Rr(u),f=Rr(h);a=Math.floor((h+180)/6)+1,180===h&&(a=60);u>=56&&u<64&&h>=3&&h<12&&(a=32);u>=72&&u<84&&(h>=0&&h<9?a=31:h>=9&&h<21?a=33:h>=21&&h<33?a=35:h>=33&&h<42&&(a=37));o=Rr(6*(a-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),r=Math.tan(l)*Math.tan(l),n=.006739496752268451*Math.cos(l)*Math.cos(l),i=Math.cos(l)*(f-o),s=c*(.9983242984503243*l-.002514607064228144*Math.sin(2*l)+2639046602129982e-21*Math.sin(4*l)-3.418046101696858e-9*Math.sin(6*l));var p=.9996*e*(i+(1-r+n)*i*i*i/6+(5-18*r+r*r+72*n-.39089081163157013)*i*i*i*i*i/120)+5e5,d=.9996*(s+e*Math.tan(l)*(i*i/2+(5-r+9*n+4*n*n)*i*i*i*i/24+(61-58*r+r*r+600*n-2.2240339282485886)*i*i*i*i*i*i/720));u<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(p),zoneNumber:a,zoneLetter:Dr(u)}}({lat:t[1],lon:t[0]}),e)}function Nr(t){var e=Br(qr(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Rr(t){return t*(Math.PI/180)}function Lr(t){return t/Math.PI*180}function Br(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s,o,a,u,h,c,l,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=r-5e5,g=e;n<"N"&&(g-=1e7),c=6*(i-1)-180+3,f=(l=g/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*l)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*l)+151*d*d*d/96*Math.sin(6*l),s=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),o=Math.tan(f)*Math.tan(f),a=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),h=y/(.9996*s);var m=f-s*Math.tan(f)/u*(h*h/2-(5+3*o+10*a-4*a*a-.06065547077041606)*h*h*h*h/24+(61+90*o+298*a+45*o*o-1.6983531815716497-3*a*a)*h*h*h*h*h*h/720);m=Lr(m);var v,b=(h-(1+2*o+a)*h*h*h/6+(5-2*a+28*o-3*a*a+.05391597401814761+24*o*o)*h*h*h*h*h/120)/Math.cos(f);if(b=c+Lr(b),t.accuracy){var w=Br({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:w.lat,right:w.lon,bottom:m,left:b}}else v={lat:m,lon:b};return v}function Dr(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Ur(t){var e=t%6;return 0===e&&(e=6),e}function qr(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,i="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,s++}var o=parseInt(i,10);if(0===s||s+3>r)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var u=Ur(o),h=function(t,e){var r="AJSAJS".charCodeAt(e-1),n=1e5,i=!1;for(;r!==t.charCodeAt(0);){if(++r===Or&&r++,r===Pr&&r++,r>90){if(i)throw"Bad character: "+t;r=65,i=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r="AFAFAF".charCodeAt(e-1),n=0,i=!1;for(;r!==t.charCodeAt(0);){if(++r===Or&&r++,r===Pr&&r++,r>86){if(i)throw"Bad character: "+t;r=65,i=!0}n+=1e5}return n}(n.charAt(1),u);c<Fr(a);)c+=2e6;var l=r-s;if(l%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,y=l/2,g=0,m=0;return y>0&&(f=1e5/Math.pow(10,y),p=t.substring(s,s+y),g=parseFloat(p)*f,d=t.substring(s+y),m=parseFloat(d)*f),{easting:g+h,northing:m+c,zoneLetter:a,zoneNumber:o,accuracy:f}}function Fr(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function zr(t,e,r){if(!(this instanceof zr))return new zr(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}zr.fromMGRS=function(t){return new zr(Nr(t))},zr.prototype.toMGRS=function(t){return jr([this.x,this.y],t)};var Vr=zr,Wr=.01068115234375,Gr=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Wr))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Wr)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e},Hr=function(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},Qr=function(t,e,r){for(var n=1/(1-e),i=t,s=20;s;--s){var o=Math.sin(i),a=1-e*o*o;if(i-=a=(Hr(i,o,Math.cos(i),r)-t)*(a*Math.sqrt(a))*n,Math.abs(a)<1e-10)return i}return i};var Kr={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Gr(this.es),this.ml0=Hr(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,i=t.x,s=t.y,o=nr(i-this.long0),a=Math.sin(s),u=Math.cos(s);if(this.es){var h=u*o,c=Math.pow(h,2),l=this.ep2*Math.pow(u,2),f=Math.pow(l,2),p=Math.abs(u)>1e-10?Math.tan(s):0,d=Math.pow(p,2),y=Math.pow(d,2);e=1-this.es*Math.pow(a,2),h/=Math.sqrt(e);var g=Hr(s,a,u,this.en);r=this.a*(this.k0*h*(1+c/6*(1-d+l+c/20*(5-18*d+y+14*l-58*d*l+c/42*(61+179*y-y*d-479*d)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+a*o*h/2*(1+c/12*(5-d+9*l+4*f+c/30*(61+y-58*d+270*l-330*d*l+c/56*(1385+543*y-y*d-3111*d))))))+this.y0}else{var m=u*Math.sin(o);if(Math.abs(Math.abs(m)-1)<1e-10)return 93;if(r=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=u*Math.cos(o)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(n))>=1){if(m-1>1e-10)return 93;n=0}else n=Math.acos(n);s<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,i,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,r=Qr(e,this.es,this.en),Math.abs(r)<Ce){var a=Math.sin(r),u=Math.cos(r),h=Math.abs(u)>1e-10?Math.tan(r):0,c=this.ep2*Math.pow(u,2),l=Math.pow(c,2),f=Math.pow(h,2),p=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var d=s*Math.sqrt(e)/this.k0,y=Math.pow(d,2);n=r-(e*=h)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*c*f+c-4*l-y/30*(61+90*f-252*c*f+45*p+46*c-y/56*(1385+3633*f+4095*p+1574*p*f)))),i=nr(this.long0+d*(1-y/6*(1+2*f+c-y/20*(5+28*f+24*p+8*c*f+6*c-y/42*(61+662*f+1320*p+720*p*f))))/u)}else n=Ce*rr(o),i=0;else{var g=Math.exp(s/this.k0),m=.5*(g-1/g),v=this.lat0+o/this.k0,b=Math.cos(v);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(m,2))),n=Math.asin(e),o<0&&(n=-n),i=0===m&&0===b?0:nr(Math.atan2(m,b)+this.long0)}return t.x=i,t.y=n,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},$r=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Jr=function(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},Yr=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(Jr(1,e)+1))),t<0?-e:e},Xr=function(t,e){for(var r,n=2*Math.cos(2*e),i=t.length-1,s=t[i],o=0;--i>=0;)r=n*s-o+t[i],o=s,s=r;return e+r*Math.sin(2*e)},Zr=function(t,e,r){for(var n,i,s=Math.sin(e),o=Math.cos(e),a=$r(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),h=2*o*u,c=-2*s*a,l=t.length-1,f=t[l],p=0,d=0,y=0;--l>=0;)n=d,i=p,f=h*(d=f)-n-c*(p=y)+t[l],y=c*d-i+h*p;return[(h=s*u)*f-(c=o*a)*y,h*y+c*f]};var tn={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=Xr(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),i=t.length-1,s=t[i],o=0;--i>=0;)r=n*s-o+t[i],o=s,s=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=nr(t.x-this.long0),r=t.y;r=Xr(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),s=Math.sin(e),o=Math.cos(e);r=Math.atan2(n,o*i),e=Math.atan2(s*i,Jr(n,i*o)),e=Yr(Math.tan(e));var a,u,h=Zr(this.gtu,2*r,2*e);return r+=h[0],e+=h[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(a=1/0,u=1/0),t.x=a,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var s=Zr(this.utg,2*i,2*n);i+=s[0],n+=s[1],n=Math.atan($r(n));var o=Math.sin(i),a=Math.cos(i),u=Math.sin(n),h=Math.cos(n);i=Math.atan2(o*h,Jr(u,h*a)),n=Math.atan2(u,h*a),e=nr(n+this.long0),r=Xr(this.cgb,i)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var en={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(nr(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Te,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,tn.init.apply(this),this.forward=tn.forward,this.inverse=tn.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},rn=function(t,e){return Math.pow((1-t)/(1+t),e)};var nn={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Oe)/(Math.pow(Math.tan(.5*this.lat0+Oe),this.C)*rn(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+Oe),this.C)*rn(this.e*Math.sin(r),this.ratexp))-Ce,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+Oe)/this.K,1/this.C),i=20;i>0&&(r=2*Math.atan(n*rn(this.e*Math.sin(t.y),-.5*this.e))-Ce,!(Math.abs(r-t.y)<1e-14));--i)t.y=r;return i?(t.x=e,t.y=r,t):null},names:["gauss"]};var sn={init:function(){nn.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,i;return t.x=nr(t.x-this.long0),nn.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),r=Math.cos(o),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,nn.inverse.apply(this,[t]),t.x=nr(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var on={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+rr(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*er(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ir(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=er(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ce,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,i,s,o,a=t.x,u=t.y,h=Math.sin(u),c=Math.cos(u),l=nr(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=1e-10&&Math.abs(u+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*h+this.coslat0*c*Math.cos(l)),t.x=this.a*e*c*Math.sin(l)+this.x0,t.y=this.a*e*(this.coslat0*h-this.sinlat0*c*Math.cos(l))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,h,this.e))-Ce,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=1e-10?(s=ir(this.e,u*this.con,this.con*h),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+i*Math.cos(l)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(l))),t.y=e*(this.cosX0*n-this.sinX0*i*Math.cos(l))+this.y0),t.x=e*i*Math.sin(l)+this.x0,t))},inverse:function(t){var e,r,n,i,s;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,r=this.lat0,o<=1e-10?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?nr(this.long0+Math.atan2(t.x,-1*t.y)):nr(this.long0+Math.atan2(t.x,t.y)):nr(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=1e-10){if(o<=1e-10)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=o*this.cons/(2*this.a*this.k0),r=this.con*sr(this.e,n),e=this.con*nr(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=1e-10?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=nr(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),r=-1*sr(this.e,Math.tan(.5*(Ce+s)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(Ce+t))*Math.pow((1-e)/(1+e),.5*r)}};var an={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),s=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+o/this.alpha,u=0,h=s,c=-1e3,l=0;Math.abs(h-c)>1e-7;){if(++l>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=h,t},names:["somerc"]};var un={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),r=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var n,i,s=ir(this.e,this.lat0,t),o=this.bl/e*Math.sqrt((1-this.es)/(1-r*r));if(o*o<1&&(o=1),isNaN(this.longc)){var a=ir(this.e,this.lat1,Math.sin(this.lat1)),u=ir(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(o+Math.sqrt(o*o-1))*Math.pow(s,this.bl):this.el=(o-Math.sqrt(o*o-1))*Math.pow(s,this.bl);var h=Math.pow(a,this.bl),c=Math.pow(u,this.bl);i=.5*((n=this.el/h)-1/n);var l=(this.el*this.el-c*h)/(this.el*this.el+c*h),f=(c-h)/(c+h),p=nr(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=nr(this.long0);var d=nr(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(o*Math.sin(this.gamma0))}else n=this.lat0>=0?o+Math.sqrt(o*o-1):o-Math.sqrt(o*o-1),this.el=n*Math.pow(s,this.bl),i=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/o),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha))},forward:function(t){var e,r,n,i=t.x,s=t.y,o=nr(i-this.long0);if(Math.abs(Math.abs(s)-Ce)<=1e-10)n=s>0?-1:1,r=this.al/this.bl*Math.log(Math.tan(Oe+n*this.gamma0*.5)),e=-1*n*Ce*this.al/this.bl;else{var a=ir(this.e,s,Math.sin(s)),u=this.el/Math.pow(a,this.bl),h=.5*(u-1/u),c=.5*(u+1/u),l=Math.sin(this.bl*o),f=(h*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/c;r=Math.abs(Math.abs(f)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*o))<=1e-10?this.al*this.bl*o:this.al*Math.atan2(h*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*o))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+r):(e-=this.uc,t.x=this.x0+r*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-r*Math.sin(this.alpha)),t},inverse:function(t){var e,r;this.no_rot?(r=t.y-this.y0,e=t.x-this.x0):(r=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*r/this.al),i=.5*(n-1/n),s=.5*(n+1/n),o=Math.sin(this.bl*e/this.al),a=(o*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/s,u=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<1e-10?(t.x=this.long0,t.y=Ce):Math.abs(a+1)<1e-10?(t.x=this.long0,t.y=-1*Ce):(t.y=sr(this.e,u),t.x=nr(this.long0-Math.atan2(i*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var hn={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=er(this.e,e,r),i=ir(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=er(this.e,s,o),u=ir(this.e,this.lat2,s),h=ir(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(n/a)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=1e-10&&(r=rr(r)*(Ce-2e-10));var n,i,s=Math.abs(Math.abs(r)-Ce);if(s>1e-10)n=ir(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((s=r*this.ns)<=0)return null;i=0}var o=this.ns*nr(e-this.long0);return t.x=this.k0*(i*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,t},inverse:function(t){var e,r,n,i,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),r=1):(e=-Math.sqrt(o*o+a*a),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*o,r*a)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=sr(this.e,n)))return null}else i=-Ce;return s=nr(u/this.ns+this.long0),t.x=s,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var cn={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,i,s,o,a,u=t.x,h=t.y,c=nr(u-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),s=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,i,s,o,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,o=e,a=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,h+=1}while(0===a&&h<15);return h>=15?null:t},names:["Krovak","krovak"]},ln=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)},fn=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},pn=function(t){return.375*t*(1+.25*t*(1+.46875*t))},dn=function(t){return.05859375*t*t*(1+.75*t)},yn=function(t){return t*t*t*(35/3072)},gn=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)},mn=function(t){return Math.abs(t)<Ce?t:t-rr(t)*Math.PI},vn=function(t,e,r,n,i){var s,o;s=t/e;for(var a=0;a<15;a++)if(s+=o=(t-(e*s-r*Math.sin(2*s)+n*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*r*Math.cos(2*s)+4*n*Math.cos(4*s)-6*i*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN};var bn={init:function(){this.sphere||(this.e0=fn(this.es),this.e1=pn(this.es),this.e2=dn(this.es),this.e3=yn(this.es),this.ml0=this.a*ln(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,i=t.y;if(n=nr(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var s=Math.sin(i),o=Math.cos(i),a=gn(this.a,this.e,s),u=Math.tan(i)*Math.tan(i),h=n*Math.cos(i),c=h*h,l=this.es*o*o/(1-this.es);e=a*h*(1-c*u*(1/6-(8-u+8*l)*c/120)),r=this.a*ln(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*s/o*c*(.5+(5-u+6*l)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,i=t.y/this.a;if(this.sphere){var s=i+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(s))}else{var o=this.ml0/this.a+i,a=vn(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Ce)<=1e-10)return t.x=this.long0,t.y=Ce,i<0&&(t.y*=-1),t;var u=gn(this.a,this.e,Math.sin(a)),h=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),l=n*this.a/u,f=l*l;e=a-u*Math.tan(a)/h*l*l*(.5-(1+3*c)*l*l/24),r=l*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}return t.x=nr(r+this.long0),t.y=mn(e),t},names:["Cassini","Cassini_Soldner","cass"]},wn=function(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e};var _n={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Ce)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=wn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=.3333333333333333*t,e=t*t,r[0]+=.17222222222222222*e,r[1]=.06388888888888888*e,e*=t,r[0]+=.10257936507936508*e,r[1]+=.0664021164021164*e,r[2]=.016415012942191543*e,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=wn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,i,s,o,a,u,h,c,l=t.x,f=t.y;if(l=nr(l-this.long0),this.sphere){if(s=Math.sin(f),c=Math.cos(f),n=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*s+this.cosph0*c*n)<=1e-10)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(l),r*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<1e-10)return null;r=Oe-.5*f,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(l),r*=n}}else{switch(a=0,u=0,h=0,n=Math.cos(l),i=Math.sin(l),s=Math.sin(f),o=wn(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,u=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:h=1+this.sinb1*a+this.cosb1*u*n;break;case this.EQUIT:h=1+u*n;break;case this.N_POLE:h=Ce+f,o=this.qp-o;break;case this.S_POLE:h=f-Ce,o=this.qp+o}if(Math.abs(h)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),r=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*a-this.sinb1*u*n):(h=Math.sqrt(2/(1+u*n)))*a*this.ymf,e=this.xmf*h*u*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*i,r=n*(this.mode===this.S_POLE?h:-h)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,s,o,a,u,h,c,l=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,y=0;if((r=.5*(p=Math.sqrt(l*l+f*f)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=1e-10?0:Math.asin(f*y/p),l*=y,f=d*p;break;case this.OBLIQ:r=Math.abs(p)<=1e-10?this.lat0:Math.asin(d*this.sinph0+f*y*this.cosph0/p),l*=y*this.cosph0,f=(d-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:f=-f,r=Ce-r;break;case this.S_POLE:r-=Ce}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,f*=this.dd,(o=Math.sqrt(l*l+f*f))<1e-10)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*o/this.rq),n=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(a=n*this.sinb1+f*i*this.cosb1/o,s=this.qp*a,f=o*this.cosb1*n-f*this.sinb1*i):(a=f*i/o,s=this.qp*a,f=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(s=l*l+f*f))return t.x=this.long0,t.y=this.lat0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,f),u=Math.asin(a),h=this.apa,c=u+u,r=u+h[0]*Math.sin(c)+h[1]*Math.sin(c+c)+h[2]*Math.sin(c+c+c)}return t.x=nr(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},kn=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var xn={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=er(this.e3,this.sin_po,this.cos_po),this.qs1=wn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=er(this.e3,this.sin_po,this.cos_po),this.qs2=wn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=wn(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=wn(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*nr(e-this.long0),o=i*Math.sin(s)+this.x0,a=this.rh-i*Math.cos(s)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,r,n,i,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,r)),s=nr(i/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,i,s,o=kn(.5*e);if(t<1e-10)return o;for(var a=t*t,u=1;u<=25;u++)if(o+=s=.5*(i=1-(n=t*(r=Math.sin(o)))*n)*i/Math.cos(o)*(e/(1-a)-r/i+.5/t*Math.log((1-n)/(1+n))),Math.abs(s)<=1e-7)return o;return null}};var Mn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,i,s,o,a,u=t.x,h=t.y;return n=nr(u-this.long0),e=Math.sin(h),r=Math.cos(h),i=Math.cos(n),1,(s=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(s)<=1e-10?(o=this.x0+1*this.a*r*Math.sin(n)/s,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)/s):(o=this.x0+this.infinity_dist*r*Math.sin(n),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=o,t.y=a,t},inverse:function(t){var e,r,n,i,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),n=Math.cos(i),o=kn(n*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),s=nr(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]};var Sn={init:function(){this.sphere||(this.k0=er(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,i=t.y,s=nr(n-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=wn(this.e,Math.sin(i));e=this.x0+this.a*this.k0*s,r=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=nr(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*Ce:Ce;for(var n,i,s,o,a=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(a),s=Math.cos(a),o=t*i,a+=n=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-i/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(n)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=nr(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var En={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=nr(e-this.long0),i=mn(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,r=t.y;return t.x=nr(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=mn(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Cn={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=fn(this.es),this.e1=pn(this.es),this.e2=dn(this.es),this.e3=yn(this.es),this.ml0=this.a*ln(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,i=t.x,s=t.y,o=nr(i-this.long0);if(n=o*Math.sin(s),this.sphere)Math.abs(s)<=1e-10?(e=this.a*o,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(s),r=this.a*(mn(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=1e-10)e=this.a*o,r=-1*this.ml0;else{var a=gn(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(n),r=this.a*ln(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,i,s,o,a,u,h;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=nr(n/this.a+this.long0),r=0;else{var c;for(o=this.lat0+i/this.a,a=n*n/this.a/this.a+o*o,u=o,s=20;s;--s)if(u+=h=-1*(o*(u*(c=Math.tan(u))+1)-u-.5*(u*u+a)*c)/((u-o)/c-1),Math.abs(h)<=1e-10){r=u;break}e=nr(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=1e-10)r=0,e=nr(this.long0+n/this.a);else{var l,f,p,d,y;for(o=(this.ml0+i)/this.a,a=n*n/this.a/this.a+o*o,u=o,s=20;s;--s)if(y=this.e*Math.sin(u),l=Math.sqrt(1-y*y)*Math.tan(u),f=this.a*ln(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=h=(o*(l*(d=f/this.a)+1)-d-.5*l*(d*d+a))/(this.es*Math.sin(2*u)*(d*d+a-2*o*d)/(4*l)+(o-d)*(l*p-2/Math.sin(2*u))-p),Math.abs(h)<=1e-10){r=u;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=nr(this.long0+Math.asin(n*l/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var Tn={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,i=r-this.long0,s=n/Ee*1e-5,o=i,a=1,u=0;for(e=1;e<=10;e++)a*=s,u+=this.A[e]*a;var h,c=u,l=o,f=1,p=0,d=0,y=0;for(e=1;e<=6;e++)h=p*c+f*l,f=f*c-p*l,p=h,d=d+this.B_re[e]*f-this.B_im[e]*p,y=y+this.B_im[e]*f+this.B_re[e]*p;return t.x=y*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,i=t.y,s=n-this.x0,o=(i-this.y0)/this.a,a=s/this.a,u=1,h=0,c=0,l=0;for(e=1;e<=6;e++)r=h*o+u*a,u=u*o-h*a,h=r,c=c+this.C_re[e]*u-this.C_im[e]*h,l=l+this.C_im[e]*u+this.C_re[e]*h;for(var f=0;f<this.iterations;f++){var p,d=c,y=l,g=o,m=a;for(e=2;e<=6;e++)p=y*c+d*l,d=d*c-y*l,y=p,g+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),m+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var v=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=y*c+d*l,d=d*c-y*l,y=p,v+=e*(this.B_re[e]*d-this.B_im[e]*y),b+=e*(this.B_im[e]*d+this.B_re[e]*y);var w=v*v+b*b;c=(g*v+m*b)/w,l=(m*v-g*b)/w}var _=c,k=l,x=1,M=0;for(e=1;e<=9;e++)x*=_,M+=this.D[e]*x;var S=this.lat0+M*Ee*1e5,E=this.long0+k;return t.x=E,t.y=S,t},names:["New_Zealand_Map_Grid","nzmg"]};var An={init:function(){},forward:function(t){var e=t.x,r=t.y,n=nr(e-this.long0),i=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=nr(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]};var On={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Gr(this.es)},forward:function(t){var e,r,n=t.x,i=t.y;if(n=nr(n-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(i),o=20;o;--o){var a=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var u=Math.sin(i),h=Math.cos(i);r=this.a*Hr(i,u,h,this.en),e=this.a*n*h/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=kn((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=kn(Math.sin(e)/this.n)),n=nr(n+this.long0),e=mn(e)):(e=Qr(t.y/this.a,this.es,this.en),(i=Math.abs(e))<Ce?(i=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),n=nr(r)):i-1e-10<Ce&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var Pn={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=nr(e-this.long0),i=r,s=Math.PI*Math.sin(r);;){var o=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=o,Math.abs(o)<1e-10)break}i/=2,Math.PI/2-Math.abs(r)<1e-10&&(n=0);var a=.900316316158*this.a*n*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=nr(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t},names:["Mollweide","moll"]};var In={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=fn(this.es),this.e1=pn(this.es),this.e2=dn(this.es),this.e3=yn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=er(this.e,this.sinphi,this.cosphi),this.ml1=ln(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=er(this.e,this.sinphi,this.cosphi),this.ml2=ln(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ln(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=ln(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var s=this.ns*nr(r-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t},inverse:function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==r&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=nr(this.long0+s/this.ns),n=mn(this.g-r/this.a),t.x=i,t.y=n,t;var o=this.g-r/this.a;return n=vn(o,this.e0,this.e1,this.e2,this.e3),i=nr(this.long0+s/this.ns),t.x=i,t.y=n,t},names:["Equidistant_Conic","eqdc"]};var jn={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,i=t.y,s=nr(n-this.long0);Math.abs(i)<=1e-10&&(e=this.x0+this.R*s,r=this.y0);var o=kn(2*Math.abs(i/Math.PI));(Math.abs(s)<=1e-10||Math.abs(Math.abs(i)-Ce)<=1e-10)&&(e=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),u=a*a,h=Math.sin(o),c=Math.cos(o),l=c/(h+c-1),f=l*l,p=l*(2/h-1),d=p*p,y=Math.PI*this.R*(a*(l-d)+Math.sqrt(u*(l-d)*(l-d)-(d+u)*(f-d)))/(d+u);s<0&&(y=-y),e=this.x0+y;var g=u+l;return y=Math.PI*this.R*(p*g-a*Math.sqrt((d+u)*(u+1)-g*g))/(d+u),r=i>=0?this.y0+y:this.y0-y,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i,s,o,a,u,h,c,l,f;return t.x-=this.x0,t.y-=this.y0,l=Math.PI*this.R,s=(n=t.x/l)*n+(i=t.y/l)*i,l=3*(i*i/(u=-2*(o=-Math.abs(i)*(1+s))+1+2*i*i+s*s)+(2*(a=o-2*i*i+n*n)*a*a/u/u/u-9*o*a/u/u)/27)/(h=(o-a*a/3/u)/u)/(c=2*Math.sqrt(-h/3)),Math.abs(l)>1&&(l=l>=0?1:-1),f=Math.acos(l)/3,r=t.y>=0?(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI,e=Math.abs(n)<1e-10?this.long0:nr(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-i*i)+s*s))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Nn={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,s,o,a,u,h,c,l,f,p,d,y,g,m,v,b,w,_,k,x=t.x,M=t.y,S=Math.sin(t.y),E=Math.cos(t.y),C=nr(x-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(Ce-M)*Math.sin(C),t.y=this.y0-this.a*(Ce-M)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(Ce+M)*Math.sin(C),t.y=this.y0+this.a*(Ce+M)*Math.cos(C),t):(v=this.sin_p12*S+this.cos_p12*E*Math.cos(C),m=(g=Math.acos(v))?g/Math.sin(g):1,t.x=this.x0+this.a*m*E*Math.sin(C),t.y=this.y0+this.a*m*(this.cos_p12*S-this.sin_p12*E*Math.cos(C)),t):(e=fn(this.es),r=pn(this.es),n=dn(this.es),i=yn(this.es),Math.abs(this.sin_p12-1)<=1e-10?(s=this.a*ln(e,r,n,i,Ce),o=this.a*ln(e,r,n,i,M),t.x=this.x0+(s-o)*Math.sin(C),t.y=this.y0-(s-o)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=1e-10?(s=this.a*ln(e,r,n,i,Ce),o=this.a*ln(e,r,n,i,M),t.x=this.x0+(s+o)*Math.sin(C),t.y=this.y0+(s+o)*Math.cos(C),t):(a=S/E,u=gn(this.a,this.e,this.sin_p12),h=gn(this.a,this.e,S),c=Math.atan((1-this.es)*a+this.es*u*this.sin_p12/(h*E)),b=0===(l=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(l)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(C)*Math.cos(c)/Math.sin(l)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=u*b*(1-(w=b*b)*(y=(p=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es))*p)*(1-y)/6+(_=w*b)/8*(d=f*p)*(1-2*y)+(k=_*b)/120*(y*(4-7*y)-3*f*f*(1-7*y))-k*b/48*d),t.x=this.x0+g*Math.sin(l),t.y=this.y0+g*Math.cos(l),t))},inverse:function(t){var e,r,n,i,s,o,a,u,h,c,l,f,p,d,y,g,m,v,b,w,_,k,x;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Ce*this.a)return;return r=e/this.a,n=Math.sin(r),i=Math.cos(r),s=this.long0,Math.abs(e)<=1e-10?o=this.lat0:(o=kn(i*this.sin_p12+t.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-Ce,s=Math.abs(a)<=1e-10?this.lat0>=0?nr(this.long0+Math.atan2(t.x,-t.y)):nr(this.long0-Math.atan2(-t.x,t.y)):nr(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))),t.x=s,t.y=o,t}return u=fn(this.es),h=pn(this.es),c=dn(this.es),l=yn(this.es),Math.abs(this.sin_p12-1)<=1e-10?(f=this.a*ln(u,h,c,l,Ce),e=Math.sqrt(t.x*t.x+t.y*t.y),o=vn((f-e)/this.a,u,h,c,l),s=nr(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=1e-10?(f=this.a*ln(u,h,c,l,Ce),e=Math.sqrt(t.x*t.x+t.y*t.y),o=vn((e-f)/this.a,u,h,c,l),s=nr(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),p=gn(this.a,this.e,this.sin_p12),g=Math.cos(y),v=-(m=this.e*this.cos_p12*g)*m/(1-this.es),b=3*this.es*(1-v)*this.sin_p12*this.cos_p12*g/(1-this.es),k=1-v*(_=(w=e/p)-v*(1+v)*Math.pow(w,3)/6-b*(1+3*v)*Math.pow(w,4)/24)*_/2-w*_*_*_/6,d=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*g),s=nr(this.long0+Math.asin(Math.sin(y)*Math.sin(_)/Math.cos(d))),x=Math.sin(d),o=Math.atan2((x-this.es*k*this.sin_p12)*Math.tan(d),x*(1-this.es)),t.x=s,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]};var Rn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,s,o,a,u=t.x,h=t.y;return n=nr(u-this.long0),e=Math.sin(h),r=Math.cos(h),i=Math.cos(n),1,((s=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(s)<=1e-10)&&(o=1*this.a*r*Math.sin(n),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=o,t.y=a,t},inverse:function(t){var e,r,n,i,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=kn(e/this.a),n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(e)<=1e-10?(a=this.lat0,t.x=o,t.y=a,t):(a=kn(i*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-Ce,Math.abs(s)<=1e-10?(o=this.lat0>=0?nr(this.long0+Math.atan2(t.x,-t.y)):nr(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=nr(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n)),t.x=o,t.y=a,t))},names:["ortho"]},Ln=1,Bn=2,Dn=3,Un=4,qn=5,Fn=6,zn=1,Vn=2,Wn=3,Gn=4;function Hn(t,e,r,n){var i;return t<1e-10?(n.value=zn,i=0):(i=Math.atan2(e,r),Math.abs(i)<=Oe?n.value=zn:i>Oe&&i<=Ce+Oe?(n.value=Vn,i-=Ce):i>Ce+Oe||i<=-(Ce+Oe)?(n.value=Wn,i=i>=0?i-Ie:i+Ie):(n.value=Gn,i+=Ce)),i}function Qn(t,e){var r=t+e;return r<-Ie?r+=Pe:r>+Ie&&(r-=Pe),r}var Kn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ce-Oe/2?this.face=qn:this.lat0<=-(Ce-Oe/2)?this.face=Fn:Math.abs(this.long0)<=Oe?this.face=Ln:Math.abs(this.long0)<=Ce+Oe?this.face=this.long0>0?Bn:Un:this.face=Dn,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,i,s,o,a={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===qn)i=Ce-e,r>=Oe&&r<=Ce+Oe?(u.value=zn,n=r-Ce):r>Ce+Oe||r<=-(Ce+Oe)?(u.value=Vn,n=r>0?r-Ie:r+Ie):r>-(Ce+Oe)&&r<=-Oe?(u.value=Wn,n=r+Ce):(u.value=Gn,n=r);else if(this.face===Fn)i=Ce+e,r>=Oe&&r<=Ce+Oe?(u.value=zn,n=-r+Ce):r<Oe&&r>=-Oe?(u.value=Vn,n=-r):r<-Oe&&r>=-(Ce+Oe)?(u.value=Wn,n=-r-Ce):(u.value=Gn,n=r>0?-r+Ie:-r-Ie);else{var h,c,l,f,p,d;this.face===Bn?r=Qn(r,+Ce):this.face===Dn?r=Qn(r,+Ie):this.face===Un&&(r=Qn(r,-Ce)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(r),h=p*Math.cos(r),c=p*d,l=f,this.face===Ln?n=Hn(i=Math.acos(h),l,c,u):this.face===Bn?n=Hn(i=Math.acos(c),l,-h,u):this.face===Dn?n=Hn(i=Math.acos(-h),l,-c,u):this.face===Un?n=Hn(i=Math.acos(-c),l,h,u):(i=n=0,u.value=zn)}return o=Math.atan(12/Ie*(n+Math.acos(Math.sin(n)*Math.cos(Oe))-Ce)),s=Math.sqrt((1-Math.cos(i))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===Vn?o+=Ce:u.value===Wn?o+=Ie:u.value===Gn&&(o+=1.5*Ie),a.x=s*Math.cos(o),a.y=s*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,r,n,i,s,o,a,u,h,c,l,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=zn:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=Vn,e-=Ce):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=Wn,e=e<0?e+Ie:e-Ie):(d.value=Gn,e+=Ce),h=Ie/12*Math.tan(e),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(s),(a=1-(n=Math.cos(e))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),this.face===qn)u=Math.acos(a),p.phi=Ce-u,d.value===zn?p.lam=o+Ce:d.value===Vn?p.lam=o<0?o+Ie:o-Ie:d.value===Wn?p.lam=o-Ce:p.lam=o;else if(this.face===Fn)u=Math.acos(a),p.phi=u-Ce,d.value===zn?p.lam=-o+Ce:d.value===Vn?p.lam=-o:d.value===Wn?p.lam=-o-Ce:p.lam=o<0?-o-Ie:-o+Ie;else{var y,g,m;h=(y=a)*y,g=(h+=(m=h>=1?0:Math.sqrt(1-h)*Math.sin(o))*m)>=1?0:Math.sqrt(1-h),d.value===Vn?(h=g,g=-m,m=h):d.value===Wn?(g=-g,m=-m):d.value===Gn&&(h=g,g=m,m=-h),this.face===Bn?(h=y,y=-g,g=h):this.face===Dn?(y=-y,g=-g):this.face===Un&&(h=y,y=g,g=-h),p.phi=Math.acos(-m)-Ce,p.lam=Math.atan2(g,y),this.face===Bn?p.lam=Qn(p.lam,-Ce):this.face===Dn?p.lam=Qn(p.lam,-Ie):this.face===Un&&(p.lam=Qn(p.lam,+Ce))}return 0!==this.es&&(c=p.phi<0?1:0,l=Math.tan(p.phi),f=this.b/Math.sqrt(l*l+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},$n=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Jn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Yn=Ae/5,Xn=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Zn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=nr(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*Yn);n<0?n=0:n>=18&&(n=17);var i={x:Xn($n[n],r=Ae*(r-.08726646259971647*n))*e,y:Xn(Jn[n],r)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=$n[18][0],e.y=t.y<0?-Ce:Ce;else{var r=Math.floor(18*e.y);for(r<0?r=0:r>=18&&(r=17);;)if(Jn[r][0]>e.y)--r;else{if(!(Jn[r+1][0]<=e.y))break;++r}var n=Jn[r],i=5*(e.y-n[0])/(Jn[r+1][0]-n[0]);i=function(t,e,r,n){for(var i=e;n;--n){var s=t(i);if(i-=s,Math.abs(s)<r)break}return i}((function(t){return(Xn(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),i,1e-10,100),e.x/=Xn($n[r],i),e.y=(5*r+i)*Te,t.y<0&&(e.y=-e.y)}return e.x=nr(e.x+this.long0),e},names:["Robinson","robin"]};var ti,ei={init:function(){this.name="geocent"},forward:function(t){return vr(t,this.es,this.a)},inverse:function(t){return br(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};Ar.defaultDatum="WGS84",Ar.Proj=mr,Ar.WGS84=new Ar.Proj("WGS84"),Ar.Point=Vr,Ar.toPoint=xr,Ar.defs=Je,Ar.transform=Sr,Ar.mgrs=Ir,Ar.version="__VERSION__",(ti=Ar).Proj.projections.add(Kr),ti.Proj.projections.add(tn),ti.Proj.projections.add(en),ti.Proj.projections.add(sn),ti.Proj.projections.add(on),ti.Proj.projections.add(an),ti.Proj.projections.add(un),ti.Proj.projections.add(hn),ti.Proj.projections.add(cn),ti.Proj.projections.add(bn),ti.Proj.projections.add(_n),ti.Proj.projections.add(xn),ti.Proj.projections.add(Mn),ti.Proj.projections.add(Sn),ti.Proj.projections.add(En),ti.Proj.projections.add(Cn),ti.Proj.projections.add(Tn),ti.Proj.projections.add(An),ti.Proj.projections.add(On),ti.Proj.projections.add(Pn),ti.Proj.projections.add(In),ti.Proj.projections.add(jn),ti.Proj.projections.add(Nn),ti.Proj.projections.add(Rn),ti.Proj.projections.add(Kn),ti.Proj.projections.add(Zn),ti.Proj.projections.add(ei);var ri=Ar;class ni{static defineProjectionAliases(t){const e=[];for(const r in t)e.push([r,t[r]]);ri.defs(e)}constructor({from:t="WGS84",to:e="WGS84"}){const r=ri(t,e);if(!r)throw new Error("Invalid projection");this.project=r.forward,this.unproject=r.inverse}}function ii(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return si(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return si(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function si(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oi(t,e,r){if("geometry"===r)return ui(t);var n=function(t,e){if(!Boolean(t.points||t.lines||t.polygons))return t.type=e||function(t){if(t.pathIndices)return"LineString";if(t.polygonIndices)return"Polygon";return"Point"}(t),[t];var r=[];t.points&&(t.points.type="Point",r.push(t.points));t.lines&&(t.lines.type="LineString",r.push(t.lines));t.polygons&&(t.polygons.type="Polygon",r.push(t.polygons));return r}(t,e);switch(function(t){if(t.length>1)return"FeatureCollection";var e=t[0];if(!(e.featureIds||e.globalFeatureIds||e.numericProps||e.properties))return"Geometry";return"FeatureCollection"}(n)){case"Geometry":return ui(n[0]);case"FeatureCollection":return function(t){var e,r=[],n=ii(t);try{for(n.s();!(e=n.n()).done;){for(var i=e.value,s=0,o=i.featureIds.value[0],a=0;a<i.featureIds.value.length;a++){var u=i.featureIds.value[a];u!==o&&(r.push(ai(i,s,a)),s=a,o=u)}r.push(ai(i,s,i.featureIds.value.length))}}catch(t){n.e(t)}finally{n.f()}return r}(n)}return null}function ai(t,e,r){return{type:"Feature",geometry:ui(t,e,r),properties:function(t,e,r){var n=Object.assign(t.properties[t.featureIds.value[e]]);for(var i in t.numericProps)n[i]=t.numericProps[i].value[e];return n}(t,e)}}function ui(t,e,r){switch(t.type){case"Point":return function(t,e,r){var n=hi(t.positions,e,r);if(n.length>1)return{type:"MultiPoint",coordinates:n};return{type:"Point",coordinates:n[0]}}(t,e,r);case"LineString":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=t.positions,i=t.pathIndices.value.filter((function(t){return t>=e&&t<=r})),s=i.length>2;if(!s){var o=hi(n,i[0],i[1]);return{type:"LineString",coordinates:o}}for(var a=[],u=0;u<i.length-1;u++){var h=hi(n,i[u],i[u+1]);a.push(h)}return{type:"MultiLineString",coordinates:a}}(t,e,r);case"Polygon":return function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=e.positions,s=e.polygonIndices.value.filter((function(t){return t>=r&&t<=n})),o=e.primitivePolygonIndices.value.filter((function(t){return t>=r&&t<=n})),a=s.length>2,u=[];if(!a){for(var h=0;h<o.length-1;h++){var c=o[h],l=o[h+1],f=hi(i,c,l);u.push(f)}return{type:"Polygon",coordinates:u}}for(var p=0;p<s.length-1;p++){var d=s[p],y=s[p+1],g=t(e,d,y).coordinates;u.push(g)}return{type:"MultiPolygon",coordinates:u}}(t,e,r);default:throw new Error("Unsupported geometry type: ".concat(t.type))}}function hi(t,e,r){e=e||0,r=r||t.value.length/t.size;for(var n=[],i=e;i<r;i++)n.push(Array.from(t.value.subarray(i*t.size,(i+1)*t.size)));return n}function ci(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return li(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return li(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function li(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fi(t,e){return function(t){return Number.isFinite(t[0])&&Number.isFinite(t[1])}(t)?e(t):t.map((function(t){return fi(t,e)}))}function pi(t){for(var e=oe(new DataView(t,0,100)).length-100,r=new DataView(t,100,e),n=new Int32Array(e),i=new Int32Array(e),s=0;s<e/8;s++)n[s]=r.getInt32(8*s,!1),i[s]=r.getInt32(8*s+4,!1);return{offsets:n,lengths:i}}function di(t,e){return yi.apply(this,arguments)}function yi(){return(yi=Zt(_.a.mark((function t(e,r){var n,i,s,o,a,u,h,c,l;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=[],s=!1,o=!1;case 4:if(s||o){t.next=27;break}if(0!==n.length||s){t.next=14;break}return t.next=8,Yt(e.next());case 8:a=t.sent,u=a.value,a.done?s=!0:n=u,t.next=21;break;case 14:if(0!==i.length||o){t.next=21;break}return t.next=17,Yt(r.next());case 17:h=t.sent,c=h.value,h.done?o=!0:i=c;case 21:if(!(l=gi(n,i))){t.next=25;break}return t.next=25,l;case 25:t.next=4;break;case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gi(t,e){var r=Math.min(t.length,e.length);if(0===r)return null;var n=[t.slice(0,r),e.slice(0,r)];return t.splice(0,r),e.splice(0,r),n}function mi(t){return function(t){if(Array.isArray(t))return te(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ee(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function bi(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return wi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wi(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function wi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _i=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Q(this,t),vi(Array.isArray(e)),ki(e),this.fields=e,this.metadata=r||new Map}return $(t,[{key:"compareTo",value:function(t){if(this.fields.metadata!==t.fields.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(var e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}},{key:"select",value:function(){for(var e=Object.create(null),r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var s=0,o=n;s<o.length;s++){var a=o[s];e[a]=!0}var u=n.filter((function(t){return e[t.name]}));return new t(u,this.metadata)}},{key:"selectAt",value:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.map((function(t){return e.fields[t]})).filter(Boolean);return new t(s,this.metadata)}},{key:"assign",value:function(e){var r=this.metadata,n=e;if(e instanceof t){var i=e;n=i.fields,r=xi(xi(new Map,this.metadata),i.metadata)}var s,o=Object.create(null),a=bi(this.fields);try{for(a.s();!(s=a.n()).done;){var u=s.value;o[u.name]=u}}catch(t){a.e(t)}finally{a.f()}var h,c=bi(n);try{for(c.s();!(h=c.n()).done;){var l=h.value;o[l.name]=l}}catch(t){c.e(t)}finally{c.f()}return new t(Object.values(o),r)}}]),t}();function ki(t){var e,r={},n=bi(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;r[i.name]&&console.warn("Schema: duplicated field name",i.name,i),r[i.name]=!0}}catch(t){n.e(t)}finally{n.f()}}function xi(t,e){return new Map([].concat(mi(t||new Map),mi(e||new Map)))}var Mi=0,Si=1,Ei=2,Ci=3,Ti=4,Ai=5,Oi=6,Pi=7,Ii=8,ji=9,Ni=10,Ri=11,Li=12,Bi=13,Di=14,Ui=15,qi=16,Fi=17,zi=-1;function Vi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xt(t);if(e){var i=xt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kt(this,r)}}var Wi=function(){function t(){Q(this,t)}return $(t,[{key:"compareTo",value:function(t){return this===t}},{key:"typeId",get:function(){return Mi}}],[{key:"isNull",value:function(t){return t&&t.typeId===Si}},{key:"isInt",value:function(t){return t&&t.typeId===Ei}},{key:"isFloat",value:function(t){return t&&t.typeId===Ci}},{key:"isBinary",value:function(t){return t&&t.typeId===Ti}},{key:"isUtf8",value:function(t){return t&&t.typeId===Ai}},{key:"isBool",value:function(t){return t&&t.typeId===Oi}},{key:"isDecimal",value:function(t){return t&&t.typeId===Pi}},{key:"isDate",value:function(t){return t&&t.typeId===Ii}},{key:"isTime",value:function(t){return t&&t.typeId===ji}},{key:"isTimestamp",value:function(t){return t&&t.typeId===Ni}},{key:"isInterval",value:function(t){return t&&t.typeId===Ri}},{key:"isList",value:function(t){return t&&t.typeId===Li}},{key:"isStruct",value:function(t){return t&&t.typeId===Bi}},{key:"isUnion",value:function(t){return t&&t.typeId===Di}},{key:"isFixedSizeBinary",value:function(t){return t&&t.typeId===Ui}},{key:"isFixedSizeList",value:function(t){return t&&t.typeId===qi}},{key:"isMap",value:function(t){return t&&t.typeId===Fi}},{key:"isDictionary",value:function(t){return t&&t.typeId===zi}}]),t}(),Gi=(function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.apply(this,arguments)}$(r,[{key:"toString",value:function(){return"Null"}},{key:"typeId",get:function(){return Si}},{key:Symbol.toStringTag,get:function(){return"Null"}}])}(Wi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.apply(this,arguments)}return $(r,[{key:"toString",value:function(){return"Bool"}},{key:"typeId",get:function(){return Oi}},{key:"ArrayType",get:function(){return Uint8Array}},{key:Symbol.toStringTag,get:function(){return"Bool"}}]),r}(Wi)),Hi=function(t){_t(r,t);var e=Vi(r);function r(t,n){var i;return Q(this,r),(i=e.call(this)).isSigned=t,i.bitWidth=n,i}return $(r,[{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}},{key:"typeId",get:function(){return Ei}},{key:"ArrayType",get:function(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array;default:throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}}},{key:Symbol.toStringTag,get:function(){return"Int"}}]),r}(Wi),Qi=(function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!0,8)}}(Hi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!0,16)}}(Hi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!0,32)}}(Hi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!0,64)}}(Hi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!1,8)}}(Hi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!1,16)}}(Hi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!1,32)}}(Hi),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,!1,64)}}(Hi),16),Ki=32,$i=64,Ji=function(t){_t(r,t);var e=Vi(r);function r(t){var n;return Q(this,r),(n=e.call(this)).precision=t,n}return $(r,[{key:"toString",value:function(){return"Float".concat(this.precision)}},{key:"typeId",get:function(){return Ci}},{key:"ArrayType",get:function(){switch(this.precision){case Qi:return Uint16Array;case Ki:return Float32Array;case $i:return Float64Array;default:throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}}},{key:Symbol.toStringTag,get:function(){return"Float"}}]),r}(Wi),Yi=(function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,Qi)}}(Ji),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,Ki)}}(Ji),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,$i)}return r}(Ji)),Xi=function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.apply(this,arguments)}return $(r,[{key:"toString",value:function(){return"Utf8"}},{key:"typeId",get:function(){return Ai}},{key:"ArrayType",get:function(){return Uint8Array}},{key:Symbol.toStringTag,get:function(){return"Utf8"}}]),r}(Wi),Zi={DAY:0,MILLISECOND:1},ts=function(t){_t(r,t);var e=Vi(r);function r(t){var n;return Q(this,r),(n=e.call(this)).unit=t,n}return $(r,[{key:"toString",value:function(){return"Date".concat(32*(this.unit+1),"<").concat(Zi[this.unit],">")}},{key:"typeId",get:function(){return Ii}},{key:"ArrayType",get:function(){return Int32Array}},{key:Symbol.toStringTag,get:function(){return"Date"}}]),r}(Wi),es=(function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,Zi.DAY)}}(ts),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,Zi.MILLISECOND)}}(ts),{SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9}),rs=function(t){_t(r,t);var e=Vi(r);function r(t,n){var i;return Q(this,r),(i=e.call(this)).unit=t,i.bitWidth=n,i}return $(r,[{key:"toString",value:function(){return"Time".concat(this.bitWidth,"<").concat(es[this.unit],">")}},{key:"typeId",get:function(){return ji}},{key:Symbol.toStringTag,get:function(){return"Time"}},{key:"ArrayType",get:function(){return Int32Array}}]),r}(Wi),ns=(function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,es.SECOND,32)}}(rs),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,es.MILLISECOND,32)}}(rs),function(t){_t(r,t);var e=Vi(r);function r(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Q(this,r),(n=e.call(this)).unit=t,n.timezone=i,n}return $(r,[{key:"toString",value:function(){return"Timestamp<".concat(es[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}},{key:"typeId",get:function(){return Ni}},{key:"ArrayType",get:function(){return Int32Array}},{key:Symbol.toStringTag,get:function(){return"Timestamp"}}]),r}(Wi)),is=(function(t){_t(r,t);var e=Vi(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Q(this,r),e.call(this,es.SECOND,t)}}(ns),function(t){_t(r,t);var e=Vi(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Q(this,r),e.call(this,es.MILLISECOND,t)}return r}(ns)),ss=(function(t){_t(r,t);var e=Vi(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Q(this,r),e.call(this,es.MICROSECOND,t)}}(ns),function(t){_t(r,t);var e=Vi(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Q(this,r),e.call(this,es.NANOSECOND,t)}}(ns),{DAY_TIME:0,YEAR_MONTH:1}),os=function(t){_t(r,t);var e=Vi(r);function r(t){var n;return Q(this,r),(n=e.call(this)).unit=t,n}return $(r,[{key:"toString",value:function(){return"Interval<".concat(ss[this.unit],">")}},{key:"typeId",get:function(){return Ri}},{key:"ArrayType",get:function(){return Int32Array}},{key:Symbol.toStringTag,get:function(){return"Interval"}}]),r}(Wi),as=(function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,ss.DAY_TIME)}}(os),function(t){_t(r,t);var e=Vi(r);function r(){return Q(this,r),e.call(this,ss.YEAR_MONTH)}}(os),function(t){_t(r,t);var e=Vi(r);function r(t,n){var i;return Q(this,r),(i=e.call(this)).listSize=t,i.children=[n],i}$(r,[{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}},{key:"typeId",get:function(){return qi}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:"ArrayType",get:function(){return this.valueType.ArrayType}},{key:Symbol.toStringTag,get:function(){return"FixedSizeList"}}])}(Wi),function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;Q(this,t),vi("string"==typeof e),vi(!r||r instanceof Wi),vi("boolean"==typeof n),vi(!i||"object"===Object(c.a)(i)),this.name=e,this.type=r,this.nullable=n,this.metadata=i}return $(t,[{key:"clone",value:function(){return new t(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}},{key:"typeId",get:function(){return this.type&&this.type.typeId}}]),t}());function us(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return hs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hs(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function hs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var cs=0,ls=1,fs=2,ps=3,ds=4,ys=function(){function t(e){var r=e.encoding;Q(this,t),this.binaryReader=new se,this.textDecoder=new TextDecoder(r),this.state=cs,this.result={data:[],schema:null}}return $(t,[{key:"write",value:function(t){this.binaryReader.write(t),this.state=vs(this.state,this.result,this.binaryReader,this.textDecoder)}},{key:"end",value:function(){this.binaryReader.end(),this.state=vs(this.state,this.result,this.binaryReader,this.textDecoder),this.state!==ps&&(this.state=ds,this.result.error="DBF incomplete file")}}]),t}();function gs(t,e){var r=(e.dbf||{}).encoding,n=new ys({encoding:r});n.write(t),n.end();var i=n.result,s=i.data,o=i.schema;switch(e.tables&&e.tables.format){case"table":return{schema:o,rows:s};case"rows":default:return s}}function ms(){return(ms=Zt(_.a.mark((function t(e,r){var n,i,s,o,a,u,h,c,l,f,p;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.dbf||{},i=n.encoding,s=new ys({encoding:i}),o=!1,a=!0,u=!1,t.prev=6,c=Lt(e);case 8:return t.next=10,Yt(c.next());case 10:return l=t.sent,a=l.done,t.next=14,Yt(l.value);case 14:if(f=t.sent,a){t.next=29;break}if(p=f,s.write(p),o||!s.result.dbfHeader){t.next=22;break}return o=!0,t.next=22,s.result.dbfHeader;case 22:if(!(s.result.data.length>0)){t.next=26;break}return t.next=25,s.result.data;case 25:s.result.data=[];case 26:a=!0,t.next=8;break;case 29:t.next=35;break;case 31:t.prev=31,t.t0=t.catch(6),u=!0,h=t.t0;case 35:if(t.prev=35,t.prev=36,a||null==c.return){t.next=40;break}return t.next=40,Yt(c.return());case 40:if(t.prev=40,!u){t.next=43;break}throw h;case 43:return t.finish(40);case 44:return t.finish(35);case 45:if(s.end(),!(s.result.data.length>0)){t.next=49;break}return t.next=49,s.result.data;case 49:case"end":return t.stop()}}),t,null,[[6,31,35,45],[36,,40,44]])})))).apply(this,arguments)}function vs(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;;)try{switch(t){case ds:case ps:return t;case cs:var i=r.getDataView(32,"DBF header");if(!i)return t;e.dbfHeader=bs(i),e.progress={bytesUsed:0,rowsTotal:e.dbfHeader.nRecords,rows:0},t=ls;break;case ls:var s=r.getDataView(e.dbfHeader.headerLength-32,"DBF field descriptors");if(!s)return t;e.dbfFields=ws(s,n),e.schema=new _i(e.dbfFields.map((function(t){return Ms(t)}))),t=fs,r.skip(1);break;case fs:for(var o=e.dbfHeader.recordLength;e.data.length<e.dbfHeader.nRecords;){var a=r.getDataView(o-1);if(!a)return t;r.skip(1);var u=_s(a,e.dbfFields,n);e.data.push(u),e.progress.rows=e.data.length}t=ps;break;default:return t=ds,e.error="illegal parser state ".concat(t),t}}catch(r){return t=ds,e.error="DBF parsing failed: ".concat(r.message),t}}function bs(t){return{year:t.getUint8(1)+1900,month:t.getUint8(2),day:t.getUint8(3),nRecords:t.getUint32(4,!0),headerLength:t.getUint16(8,!0),recordLength:t.getUint16(10,!0),languageDriver:t.getUint8(29)}}function ws(t,e){for(var r=(t.byteLength-1)/32,n=[],i=0,s=0;s<r;s++){var o=e.decode(new Uint8Array(t.buffer,t.byteOffset+i,11)).replace(/\u0000/g,"");n.push({name:o,dataType:String.fromCharCode(t.getUint8(i+11)),fieldLength:t.getUint8(i+16),decimal:t.getUint8(i+17)}),i+=32}return n}function _s(t,e,r){var n,i={},s=0,o=us(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=r.decode(new Uint8Array(t.buffer,t.byteOffset+s,a.fieldLength));i[a.name]=ks(u,a.dataType),s+=a.fieldLength}}catch(t){o.e(t)}finally{o.f()}return i}function ks(t,e){switch(e){case"B":return xs(t);case"C":return function(t){return t.trim()||null}(t);case"F":case"N":case"O":return xs(t);case"D":return n=t,Date.UTC(n.slice(0,4),parseInt(n.slice(4,6),10)-1,n.slice(6,8));case"L":return!/^[nf]$/i.test(r=t)&&(!!/^[yt]$/i.test(r)||null);default:throw new Error("Unsupported data type")}var r,n}function xs(t){var e=parseFloat(t);return isNaN(e)?null:e}function Ms(t){var e=t.name,r=t.dataType;t.fieldLength,t.decimal;switch(r){case"B":return new as(e,new Yi,!0);case"C":return new as(e,new Xi,!0);case"F":case"N":case"O":return new as(e,new Yi,!0);case"D":return new as(e,new is,!0);case"L":return new as(e,new Gi,!0);default:throw new Error("Unsupported data type")}}function Ss(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Es(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ss(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ss(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Cs=Es(Es({},{id:"dbf",name:"DBF",category:"table",version:"2.3.7",extensions:["dbf"],mimeTypes:["application/x-dbf"],options:{dbf:{encoding:"latin1",workerUrl:"https://unpkg.com/@loaders.gl/shapefile@".concat("2.3.7","/dist/dbf-loader.worker.js")}}}),{},{parse:function(){var t=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",gs(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseSync:gs,parseInBatches:function(t,e){return ms.apply(this,arguments)}});function Ts(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return As(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return As(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function As(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Os(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ps(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Os(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Os(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Is(){return(Is=Zt(_.a.mark((function t(e,r,n){var i,s,o,a,u,h,c,l,f,p,d,y,g,m,v,b,w,k,x,M,S,E,C,T,A,O,P,I,j,N;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r&&r.gis||{},s=i.reproject,o=void 0!==s&&s,a=i._targetCrs,u=void 0===a?"WGS84":a,h=n.parseInBatches,c=n.fetch,l=n.url,t.next=4,Yt(Bs(r,n));case 4:return f=t.sent,p=f.shx,d=f.cpg,y=f.prj,t.next=10,Yt(h(e,Se,r));case 10:return g=t.sent,t.next=13,Yt(c(Us(l,"dbf")));case 13:if(!(v=t.sent).ok){t.next=18;break}return t.next=17,Yt(h(v,Cs,Ps(Ps({},r),{},{dbf:{encoding:d||"latin1"}})));case 17:m=t.sent;case 18:return t.next=20,Yt(g.next());case 20:if(!(b=t.sent.value)||"metadata"!==b.batchType){t.next=25;break}return t.next=24,Yt(g.next());case 24:b=t.sent.value;case 25:if(w={},!m){t.next=34;break}return t.next=29,Yt(m.next());case 29:if(!(w=t.sent.value)||"metadata"!==w.batchType){t.next=34;break}return t.next=33,Yt(m.next());case 33:w=t.sent.value;case 34:if(!m){t.next=40;break}return t.next=37,Yt(di(g,m));case 37:k=t.sent,t.next=41;break;case 40:k=g;case 41:x=!0,M=!1,t.prev=43,E=Lt(k);case 45:return t.next=47,Yt(E.next());case 47:return C=t.sent,x=C.done,t.next=51,Yt(C.value);case 51:if(T=t.sent,x){t.next=65;break}return A=T,O=void 0,P=void 0,m?(I=re(A,2),O=I[0],P=I[1]):O=A,j=Ns(O),N=Rs(j,P),o&&(N=Ls(N,y,u)),t.next=62,{encoding:d,prj:y,shx:p,header:b,data:N};case 62:x=!0,t.next=45;break;case 65:t.next=71;break;case 67:t.prev=67,t.t0=t.catch(43),M=!0,S=t.t0;case 71:if(t.prev=71,t.prev=72,x||null==E.return){t.next=76;break}return t.next=76,Yt(E.return());case 76:if(t.prev=76,!M){t.next=79;break}throw S;case 79:return t.finish(76);case 80:return t.finish(71);case 81:case"end":return t.stop()}}),t,null,[[43,67,71,81],[72,,76,80]])})))).apply(this,arguments)}function js(){return(js=x(_.a.mark((function t(e,r,n){var i,s,o,a,u,h,c,l,f,p,d,y,g,m,v,b,w,k,x;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r&&r.gis||{},s=i.reproject,o=void 0!==s&&s,a=i._targetCrs,u=void 0===a?"WGS84":a,h=n.parse,t.next=4,Bs(r,n);case 4:return c=t.sent,l=c.shx,f=c.cpg,p=c.prj,t.next=10,h(e,Se,r);case 10:return d=t.sent,y=d.header,g=d.geometries,m=Ns(g),v=[],b=n.url,w=n.fetch,t.next=18,w(Us(b,"dbf"));case 18:if(!(k=t.sent).ok){t.next=23;break}return t.next=22,h(k,Cs,{dbf:{encoding:f||"latin1"}});case 22:v=t.sent;case 23:return x=Rs(m,v),o&&(x=Ls(x,p,u)),t.abrupt("return",{encoding:f,prj:p,shx:l,header:y,data:x});case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ns(t){var e,r=[],n=Ts(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;r.push(oi(i,i.type,"geometry"))}}catch(t){n.e(t)}finally{n.f()}return r}function Rs(t,e){for(var r=[],n=0;n<t.length;n++){var i={type:"Feature",geometry:t[n],properties:e&&e[n]||{}};r.push(i)}return r}function Ls(t,e,r){var n=new ni({from:e||"WGS84",to:r||"WGS84"});return function(t,e){var r,n=ci(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.geometry.coordinates=fi(i.geometry.coordinates,e)}}catch(t){n.e(t)}finally{n.f()}return t}(t,(function(t){return n.project(t)}))}function Bs(t,e){return Ds.apply(this,arguments)}function Ds(){return(Ds=x(_.a.mark((function t(e,r){var n,i,s,o,a,u,h,c,l,f,p,d;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.url,i=r.fetch,s=i(Us(n,"shx")),o=i(Us(n,"cpg")),a=i(Us(n,"prj")),t.next=6,Promise.all([s,o,a]);case 6:return u=null,h=null,c=null,t.next=11,s;case 11:if(!(l=t.sent).ok){t.next=17;break}return t.next=15,l.arrayBuffer();case 15:f=t.sent,u=pi(f);case 17:return t.next=19,o;case 19:if(!(p=t.sent).ok){t.next=24;break}return t.next=23,p.text();case 23:h=t.sent;case 24:return t.next=26,a;case 26:if(!(d=t.sent).ok){t.next=31;break}return t.next=30,d.text();case 30:c=t.sent;case 31:return t.abrupt("return",{shx:u,cpg:h,prj:c});case 32:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Us(t,e){var r=function(t){var e=t&&t.lastIndexOf(".");return e>=0?t.substr(0,e):""}(t),n=function(t){var e=t&&t.lastIndexOf(".");return e>=0?t.substr(e+1):""}(t);return n===n.toUpperCase()&&(e=e.toUpperCase()),"".concat(r,".").concat(e)}var qs={id:"shapefile",name:"Shapefile",category:"geometry",version:"2.3.7",extensions:["shp"],mimeTypes:["application/octet-stream"],tests:[new Uint8Array(Me).buffer],options:{shapefile:{},shp:{_maxDimensions:4}},parse:function(t,e,r){return js.apply(this,arguments)},parseInBatches:function(t,e,r){return Is.apply(this,arguments)}};var Fs={name:"KML",extensions:["kml"],supported:!("undefined"==typeof window||!window.DOMParser&&(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))),testText:function(t){return t.startsWith("<?xml")},parseTextSync:function(t){if(window.DOMParser){var e=(new window.DOMParser).parseFromString(t,"application/xml"),r=function(t){var e=(new DOMParser).parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;if("http://www.w3.org/1999/xhtml"===e){var r=t.getElementsByTagName("parsererror");return r.length?r[0].innerHTML:null}return t.getElementsByTagNameNS(e,"parsererror").length>0}(e);if(r)throw new Error(r);return e}if(void 0!==window.ActiveXObject){var n=new window.ActiveXObject("Microsoft.XMLDOM");if(n)return n.async="false",n.loadXML(t),n}throw new Error("No XML parser available")},browserOnly:!0,worker:!1};function zs(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Vs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vs(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function Vs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ws(t){var e,r,n=0,i=0,s=0,o=0,a=0,u=0,h=0,c=0,l=0,f=new Set,p={},d=zs(t);try{for(d.s();!(e=d.n()).done;){var y=e.value,g=y.geometry;switch(g.type){case"Point":i++,n++,f.add(g.coordinates.length);break;case"MultiPoint":i++,n+=g.coordinates.length;var m,v=zs(g.coordinates);try{for(v.s();!(m=v.n()).done;){var b=m.value;f.add(b.length)}}catch(t){v.e(t)}finally{v.f()}break;case"LineString":a++,s+=g.coordinates.length,o++;var w,_=zs(g.coordinates);try{for(_.s();!(w=_.n()).done;){var k=w.value;f.add(k.length)}}catch(t){_.e(t)}finally{_.f()}break;case"MultiLineString":a++;var x,M=zs(g.coordinates);try{for(M.s();!(x=M.n()).done;){var S=x.value;s+=S.length,o++;var E,C=zs(S);try{for(C.s();!(E=C.n()).done;){var T=E.value;f.add(T.length)}}catch(t){C.e(t)}finally{C.f()}}}catch(t){M.e(t)}finally{M.f()}break;case"Polygon":l++,h++,c+=g.coordinates.length,u+=ro(g.coordinates).length;var A,O=zs(ro(g.coordinates));try{for(O.s();!(A=O.n()).done;){var P=A.value;f.add(P.length)}}catch(t){O.e(t)}finally{O.f()}break;case"MultiPolygon":l++;var I,j=zs(g.coordinates);try{for(j.s();!(I=j.n()).done;){var N=I.value;h++,c+=N.length,u+=ro(N).length;var R,L=zs(ro(N));try{for(L.s();!(R=L.n()).done;){var B=R.value;f.add(B.length)}}catch(t){L.e(t)}finally{L.f()}}}catch(t){j.e(t)}finally{j.f()}break;default:throw new Error("Unsupported geometry type: ".concat(g.type))}if(y.properties)for(var D in y.properties){var U=y.properties[D];p[D]=p[D]||void 0===p[D]?(r=U,Number.isFinite(r)):p[D]}}}catch(t){d.e(t)}finally{d.f()}return{pointPositionsCount:n,pointFeaturesCount:i,linePositionsCount:s,linePathsCount:o,lineFeaturesCount:a,coordLength:Math.max.apply(Math,mi(f)),polygonPositionsCount:u,polygonObjectsCount:h,polygonRingsCount:c,polygonFeaturesCount:l,numericPropKeys:Object.keys(p).filter((function(t){return p[t]}))}}function Gs(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.pointPositionsCount,i=e.pointFeaturesCount,s=e.linePositionsCount,o=e.linePathsCount,a=e.lineFeaturesCount,u=e.polygonPositionsCount,h=e.polygonObjectsCount,c=e.polygonRingsCount,l=e.polygonFeaturesCount,f=r.coordLength,p=r.numericPropKeys,d=r.PositionDataType,y=void 0===d?Float32Array:d,g=t.length>65535?Uint32Array:Uint16Array,m={positions:new y(n*f),globalFeatureIds:new g(n),featureIds:i>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[]},v={pathIndices:s>65535?new Uint32Array(o+1):new Uint16Array(o+1),positions:new y(s*f),globalFeatureIds:new g(s),featureIds:a>65535?new Uint32Array(s):new Uint16Array(s),numericProps:{},properties:[]},b={polygonIndices:u>65535?new Uint32Array(h+1):new Uint16Array(h+1),primitivePolygonIndices:u>65535?new Uint32Array(c+1):new Uint16Array(c+1),positions:new y(u*f),globalFeatureIds:new g(u),featureIds:l>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[]},w=0,_=[m,v,b];w<_.length;w++){var k,x=_[w],M=zs(p);try{for(M.s();!(k=M.n()).done;){var S=k.value;x.numericProps[S]=new Float32Array(x.positions.length/f)}}catch(t){M.e(t)}finally{M.f()}}v.pathIndices[o]=s,b.polygonIndices[h]=u,b.primitivePolygonIndices[c]=u;var E,C={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0},T=zs(t);try{for(T.s();!(E=T.n()).done;){var A=E.value,O=A.geometry,P=A.properties;switch(O.type){case"Point":Hs(O.coordinates,m,C,f,P),m.properties.push(to(P,p)),C.pointFeature++;break;case"MultiPoint":Qs(O.coordinates,m,C,f,P),m.properties.push(to(P,p)),C.pointFeature++;break;case"LineString":Ks(O.coordinates,v,C,f,P),v.properties.push(to(P,p)),C.lineFeature++;break;case"MultiLineString":$s(O.coordinates,v,C,f,P),v.properties.push(to(P,p)),C.lineFeature++;break;case"Polygon":Js(O.coordinates,b,C,f,P),b.properties.push(to(P,p)),C.polygonFeature++;break;case"MultiPolygon":Ys(O.coordinates,b,C,f,P),b.properties.push(to(P,p)),C.polygonFeature++;break;default:throw new Error("Invalid geometry type")}C.feature++}}catch(t){T.e(t)}finally{T.f()}return Xs(m,v,b,f)}function Hs(t,e,r,n,i){e.positions.set(t,r.pointPosition*n),e.globalFeatureIds[r.pointPosition]=r.feature,e.featureIds[r.pointPosition]=r.pointFeature,Zs(e,i,r.pointPosition,1),r.pointPosition++}function Qs(t,e,r,n,i){var s,o=zs(t);try{for(o.s();!(s=o.n()).done;){Hs(s.value,e,r,n,i)}}catch(t){o.e(t)}finally{o.f()}}function Ks(t,e,r,n,i){e.pathIndices[r.linePath]=r.linePosition,r.linePath++,eo(e.positions,t,r.linePosition,n);var s=t.length;Zs(e,i,r.linePosition,s),e.globalFeatureIds.set(new Uint32Array(s).fill(r.feature),r.linePosition),e.featureIds.set(new Uint32Array(s).fill(r.lineFeature),r.linePosition),r.linePosition+=s}function $s(t,e,r,n,i){var s,o=zs(t);try{for(o.s();!(s=o.n()).done;){Ks(s.value,e,r,n,i)}}catch(t){o.e(t)}finally{o.f()}}function Js(t,e,r,n,i){e.polygonIndices[r.polygonObject]=r.polygonPosition,r.polygonObject++;var s,o=zs(t);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.primitivePolygonIndices[r.polygonRing]=r.polygonPosition,r.polygonRing++,eo(e.positions,a,r.polygonPosition,n);var u=a.length;Zs(e,i,r.polygonPosition,u),e.globalFeatureIds.set(new Uint32Array(u).fill(r.feature),r.polygonPosition),e.featureIds.set(new Uint32Array(u).fill(r.polygonFeature),r.polygonPosition),r.polygonPosition+=u}}catch(t){o.e(t)}finally{o.f()}}function Ys(t,e,r,n,i){var s,o=zs(t);try{for(o.s();!(s=o.n()).done;){Js(s.value,e,r,n,i)}}catch(t){o.e(t)}finally{o.f()}}function Xs(t,e,r,n){var i={points:{positions:{value:t.positions,size:n},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:t.numericProps,properties:t.properties},lines:{pathIndices:{value:e.pathIndices,size:1},positions:{value:e.positions,size:n},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:e.numericProps,properties:e.properties},polygons:{polygonIndices:{value:r.polygonIndices,size:1},primitivePolygonIndices:{value:r.primitivePolygonIndices,size:1},positions:{value:r.positions,size:n},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:r.numericProps,properties:r.properties}};for(var s in i)for(var o in i[s].numericProps)i[s].numericProps[o]={value:i[s].numericProps[o],size:1};return i}function Zs(t,e,r,n){for(var i in t.numericProps)i in e&&t.numericProps[i].set(new Array(n).fill(e[i]),r)}function to(t,e){for(var r in t)e.includes(r)&&delete t[r];return t}function eo(t,e,r,n){var i,s=r*n,o=zs(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.set(a,s),s+=n}}catch(t){o.e(t)}finally{o.f()}}function ro(t){var e;return(e=[]).concat.apply(e,mi(t))}function no(t){throw new TypeError('"'+t+'" is read-only')}var io=function(){function t(){Q(this,t)}return $(t,[{key:"parse",value:function(t,e){return this.kml=t,this.options=e,this.log=e.log||console,{documents:this._filter(this.ParseDomDocuments(this.kml)),folders:this._filter(this.ParseDomFolders(this.kml)),markers:this._filter(this.ParseDomMarkers(this.kml)),polygons:this._filter(this.ParseDomPolygons(this.kml)),lines:this._filter(this.ParseDomLines(this.kml)),overlays:this._filter(this.ParseDomGroundOverlays(this.kml)),links:this._filter(this.ParseDomLinks(this.kml))}}},{key:"parseDocuments",value:function(t){var e=this,r=this._filter(this.ParseDomDocuments(this.kml));return r.forEach((function(n,i){return t(n,e.kml,r,i)})),this}},{key:"parseFolders",value:function(t){var e=this,r=this._filter(this.ParseDomFolders(this.kml));return r.forEach((function(n,i){return t(n,e.kml,r,i)})),this}},{key:"parseMarkers",value:function(t){var e=this,r=this._filter(this.ParseDomMarkers(this.kml));return r.forEach((function(n,i){return t(n,e.kml,r,i)})),this}},{key:"parsePolygons",value:function(t){var e=this,r=this._filter(this.ParseDomPolygons(this.kml));return r.forEach((function(n,i){return t(n,e.kml,r,i)})),this}},{key:"parseLines",value:function(t){var e=this,r=this._filter(this.ParseDomLines(this.kml));return r.forEach((function(n,i){return t(n,e.kml,r,i)})),this}},{key:"parseGroundOverlays",value:function(t){var e=this,r=this._filter(this.ParseDomGroundOverlays(this.kml));return r.forEach((function(n,i){return t(n,e.kml,r,i)})),this}},{key:"parseNetworklinks",value:function(t){var e=this,r=this._filter(this.ParseDomLinks(this.kml));return r.forEach((function(n,i){return t(n,e.kml,r,i)})),this}},{key:"_filter",value:function(t){var e=this,r=[];return this._filters&&t&&t.length?(t.forEach((function(t){var n=!0;e._filters.forEach((function(e){!1===e(t)&&(n=!1)})),n&&r.push(t)})),r):t}},{key:"addFilter",value:function(t){return this._filters||(this._filters=[]),this._filters.push(t),this}},{key:"ParseDomDocuments",value:function(t){for(var e=[],r=t.getElementsByTagName("Document"),n=0;n<r.length;n++){var i=r.item(n),s=Object.assign({},this.ParseDomDoc(i),this.ParseNonSpatialDomData(i,{}));e.push(s)}return e}},{key:"ParseDomDoc",value:function(t){return{}}},{key:"ParseDomFolders",value:function(t){for(var e=[],r=this.ParseDomItems(t,"Folder"),n=0;n<r.length;n++){var i=r[n],s=Object.assign({type:"folder"},this.ParseDomFolder(i),this.ParseNonSpatialDomData(i,{}));e.push(s)}return e}},{key:"ParseDomLinks",value:function(t){for(var e=[],r=t.getElementsByTagName("NetworkLink"),n=0;n<r.length;n++){var i=r.item(n),s=Object.assign({},this.ParseDomLink(i),this.ParseNonSpatialDomData(i,{}));e.push(s)}return e}},{key:"ParseDomFolder",value:function(t){return{}}},{key:"ParseDomLink",value:function(t){var e=t.getElementsByTagName("href"),r={type:"link"};if(e.length>0){var n=e.item(0);r.url=this.Value(n)}return r}},{key:"ParseDomLines",value:function(t){for(var e=[],r=this.ParseDomItems(t,"LineString"),n=0;n<r.length;n++){var i=r[n],s=Object.assign({type:"line",lineColor:"#FF000000",lineWidth:1,polyColor:"#77000000",coordinates:this.ParseDomCoordinates(i)},this.ParseNonSpatialDomData(i,{}),this.ResolveDomStyle(this.ParseDomStyle(i),t)),o=this.convertKMLColorToRGB(s.lineColor);s.lineOpacity=o.opacity,s.lineColor=o.color,e.push(s)}return e}},{key:"ParseDomGroundOverlays",value:function(t){for(var e=[],r=this.ParseDomItems(t,"GroundOverlay"),n=0;n<r.length;n++){var i=r[n],s=Object.assign({type:"imageoverlay",icon:this.ParseDomIcon(i),bounds:this.ParseDomBounds(i)},this.ParseNonSpatialDomData(i,{}));e.push(s)}return e}},{key:"ParseDomPolygons",value:function(t){for(var e=[],r=this.ParseDomItems(t,"Polygon"),n=0;n<r.length;n++){var i=r[n],s=Object.assign({type:"polygon",fill:!0,lineColor:"#FF000000",lineWidth:1,polyColor:"#77000000",coordinates:this.ParseDomCoordinates(i)},this.ParseNonSpatialDomData(i,{}),this.ResolveDomStyle(this.ParseDomStyle(i),t)),o=this.convertKMLColorToRGB(s.lineColor);s.lineOpacity=o.opacity,s.lineColor=o.color;var a=this.convertKMLColorToRGB(s.polyColor);s.polyOpacity=s.fill?a.opacity:0,s.polyColor=a.color,e.push(s)}return e}},{key:"ParseDomMarkers",value:function(t){for(var e=[],r=this.ParseDomItems(t,"Point"),n=0;n<r.length;n++){var i=r[n],s=this.ParseDomCoordinates(i),o=Object.assign({type:"point",coordinates:s[0]},this.ParseNonSpatialDomData(i,{})),a=this.ParseDomStyle(i);"#"===a.charAt(0)&&(a=this.ResolveDomStyle(a,t).icon),a&&(o.icon=a),e.push(o)}return e}},{key:"ParseDomCoordinates",value:function(t){var e=t.getElementsByTagName("coordinates");if(!e.length)return this.log.warn(["this. DOM Node did not contain coordinates!",{node:t}]),null;var r=e.item(0),n=this.Value(r),i=(n=n.trim()).split(" "),s=[];return Object.values(i).forEach((function(t){var e=t.split(",");e.length>1&&s.push([e[1],e[0]])})),s}},{key:"ParseDomBounds",value:function(t){var e=t.getElementsByTagName("LatLonBox");if(!e.length)return this.log.warn(["this. DOM Node did not contain coordinates!",{node:t}]),null;var r=e.item(0),n=r.getElementsByTagName("north"),i=r.getElementsByTagName("south"),s=r.getElementsByTagName("east"),o=r.getElementsByTagName("west"),a=null,u=null,h=null,c=null;return n.length?a=parseFloat(this.Value(n.item(0))):this.log.warn(["this. DOM LatLngBox Node did not contain north!",{node:t}]),i.length?u=parseFloat(this.Value(i.item(0))):this.log.warn(["this. DOM LatLngBox Node did not contain south!",{node:t}]),s.length?h=parseFloat(this.Value(s.item(0))):this.log.warn(["this. DOM LatLngBox Node did not contain east!",{node:t}]),o.length?c=parseFloat(this.Value(o.item(0))):this.log.warn(["this. DOM LatLngBox Node did not contain west!",{node:t}]),{north:a,south:u,east:h,west:c}}},{key:"ParseNonSpatialDomData",value:function(t,e){for(var r=Object.assign({},{maxOffset:2},e),n={name:"",description:null,tags:{}},i=t.getElementsByTagName("name"),s=0;s<i.length;s++)if(this.WithinOffsetDom(t,i.item(s),r.maxOffset)){n.name=this.Value(i.item(s));break}for(var o=t.getElementsByTagName("description"),a=0;a<o.length;a++)if(this.WithinOffsetDom(t,o.item(a),r.maxOffset)){n.description=this.Value(o.item(a));break}t.hasAttribute("id")&&(n.id=parseInt(t.getAttribute("id"),10));for(var u=t.getElementsByTagName("ExtendedData"),h=0;h<u.length;h++)if(this.WithinOffsetDom(t,u.item(h),r.maxOffset))for(var c=0;c<u.item(h).childNodes.length;c++){var l=u.item(h).childNodes.item(c),f=this.ParseTag(l);"#text"!==f.name&&(n.tags[f.name]=f.value)}return n}},{key:"ParseTag",value:function(t){var e={name:null,value:{}};switch(t.nodeName){case"Data":case"data":break;case"ID":e.name="ID",e.value=this.Value(t);break;default:e.name=t.nodeName,e.value=this.Value(t)}return e}},{key:"WithinOffsetDom",value:function(t,e,r){for(var n=e.parentNode,i=0;i<r;i++){if(n.nodeName===("string"==typeof t?t:t.nodeName))return!0;n=n.parentNode}return this.log.error(["this. Could not find parent node within expected bounds.",{parentNode:t,childNode:e,bounds:r}]),!1}},{key:"ParseDomStyle",value:function(t,e){var r=Object.assign({},{defaultStyle:"default"},e),n=t.getElementsByTagName("styleUrl"),i=r.defaultStyle;if(0===n.length)this.log.warn(["this. DOM Node did not contain styleUrl!",{node:t,options:r}]);else{var s=n.item(0);i=this.Value(s)}return i}},{key:"ParseDomIcon",value:function(t,e){var r=Object.assign({},{defaultIcon:!1,defaultScale:1},e),n=t.getElementsByTagName("Icon"),i=r.defaultStyle,s=r.defaultScale;if(0===n.length)this.log.warn(["this. DOM Node did not contain Icon!",{node:t,options:r}]);else{var o=n.item(0),a=o.getElementsByTagName("href");if(0===a.length)this.log.warn(["this. DOM Icon Node did not contain href!",{node:t,options:r}]);else{var u=a.item(0);i=this.Value(u)}var h=o.getElementsByTagName("viewBoundScale");if(0===h.length)this.log.warn(["this. DOM Icon Node did not contain viewBoundScale!",{node:t,options:r}]);else{var c=h.item(0);s=parseFloat(this.Value(c))}}return{url:i,scale:s}}},{key:"ResolveDomStyle",value:function(t,e){for(var r={},n="#"===t.charAt(0)?t.substring(1,t.length):t,i=e.getElementsByTagName("Style"),s=0;s<i.length;s++){var o=i.item(s);if(o.getAttribute("id")===n){var a=o.getElementsByTagName("LineStyle"),u=o.getElementsByTagName("PolyStyle"),h=o.getElementsByTagName("href");if(a.length>0){var c=a.item(0),l=c.getElementsByTagName("color");if(l.length>0){var f=l.item(0);r.lineColor=this.Value(f)}var p=c.getElementsByTagName("width");if(p.length>0){var d=p.item(0);r.lineWidth=this.Value(d)}}if(u.length>0){var y=u.item(0),g=y.getElementsByTagName("color");if(g.length>0){var m=g.item(0);r.polyColor=this.Value(m)}var v=y.getElementsByTagName("outline");if(v.length>0){var b=v.item(0),w=this.Value(b);r.outline=Boolean(w)}}if(h.length>0){var _=h.item(0),k=this.Value(_);r.icon=k}}}return r}},{key:"ParseDomItems",value:function(t,e){for(var r=e||"Point",n=[],i=t.getElementsByTagName(r),s=0;s<i.length;s++){var o=i.item(s);if("GroundOverlay"!==e){var a="Placemark"===o.parentNode.nodeName?o.parentNode:"Placemark"===o.parentNode.parentNode.nodeName?o.parentNode.parentNode:null;null===a?this.log.error(["Failed to find ParentNode for Element - "+r,{node:t}]):n.push(a)}else n.push(o)}return n}},{key:"convertKMLColorToRGB",value:function(t){for(var e=t.replace("#","");e.length<6;)no("colorStr"),e="0"+e;for(;e.length<8;)no("colorStr"),e="F"+e;return e.length>8&&(no("colorStr"),e=e.substring(0,8)),{color:"#"+(e.substring(6,8)+e.substring(4,6)+e.substring(2,4)),opacity:1*parseInt(e.substring(0,2),16)/parseInt("FF",16)}}},{key:"RGBColorToKML",value:function(t,e){for(var r=t.replace("#","");r.length<6;)no("colorStr"),r="0"+r;if(r.length>6&&(no("colorStr"),r=r.substring(0,6)),null!=e)if(e>=0&&e<=1);else if(parseInt(e)>=0&&parseInt(e)<=1)parseInt(e);if(null===n);var n=255*n;return n.toString(16).substring(0,2)+""+r.substring(4,6)+r.substring(2,4)+r.substring(0,2)}},{key:"Value",value:function(t){var e=this,r=t.nodeValue;if(r)return r;var n="";try{t.childNodes&&t.childNodes.length&&Object.values(this.ChildNodesArray(t)).forEach((function(t){n+=e.Value(t)}))}catch(t){this.log.error(["SimpleKML Parser Exception",t])}return n}},{key:"ChildNodesArray",value:function(t){var e=[];if(t.childNodes&&t.childNodes.length>0)for(var r=0;r<t.childNodes.length;r++)e.push(t.childNodes.item(r));return e}}]),t}();function so(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return oo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oo(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ao(t){if(t.coordinates&&t.coordinates.length)if(Array.isArray(t.coordinates[0]))t.coordinates=t.coordinates.map((function(t){var e=re(t,3),r=e[0],n=e[1],i=e[2],s=void 0===i?0:i;return[Number(n),Number(r),Number(s)]}));else{var e=re(t.coordinates,3),r=e[0],n=e[1],i=e[2],s=void 0===i?0:i;t.coordinates=[Number(n),Number(r),Number(s)]}}function uo(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ho(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ho(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function co(t,e){var r,n={type:"FeatureCollection",features:[]},i=uo(t.markers);try{for(i.s();!(r=i.n()).done;){var s=r.value,o={type:"Feature",geometry:{type:"Point",coordinates:s.coordinates},properties:s};delete o.properties.type,delete o.properties.coordinates,n.features.push(o)}}catch(t){i.e(t)}finally{i.f()}var a,u=uo(t.polygons);try{for(u.s();!(a=u.n()).done;){var h=a.value,c={type:"Feature",geometry:{type:"Polygon",coordinates:[h.coordinates]},properties:h};delete c.properties.type,delete c.properties.coordinates,n.features.push(c)}}catch(t){u.e(t)}finally{u.f()}var l,f=uo(t.lines);try{for(f.s();!(l=f.n()).done;){var p=l.value,d={type:"Feature",geometry:{type:"LineString",coordinates:p.coordinates},properties:p};delete d.properties.type,delete d.properties.coordinates,n.features.push(d)}}catch(t){f.e(t)}finally{f.f()}return n}function lo(t,e){(e=e||{}).kml=e.kml||{},e.gis=e.gis||{};var r=Fs.parseTextSync(t),n=(new io).parse(r,e);switch(e.kml.normalize&&(n=function(t){for(var e in t){var r,n=so(t[e]);try{for(n.s();!(r=n.n()).done;){ao(r.value)}}catch(t){n.e(t)}finally{n.f()}}return t}(n)),e.gis.format){case"geojson":return co(n);case"binary":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ws(t);return Gs(t,r,{coordLength:e.coordLength||r.coordLength,numericPropKeys:e.numericPropKeys||r.numericPropKeys,PositionDataType:e.PositionDataType||Float32Array})}(co(n).features);default:return n}}var fo={id:"kml",name:"KML",version:"2.3.7",extensions:["kml"],mimeTypes:["vnd.google-earth.kml+xml"],supported:Fs.supported,testText:function(t){return t.startsWith('<?xml version="1.0" encoding="UTF-8"?>\n<kml xmlns="http://www.opengis.net/kml/2.2">\n')},parse:function(){var t=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",lo((new TextDecoder).decode(e),r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseTextSync:lo,browserOnly:!0,options:{kml:{normalize:!0}}};function po(t,e){try{var r=JSON.parse(t);return e.json.table&&function t(e){if(Array.isArray(e))return e;if(e&&"object"===Object(c.a)(e))for(var r=0,n=Object.values(e);r<n.length;r++){var i=n[r],s=t(i);if(s)return s}return null}(r)||r}catch(t){throw new Error("JSONLoader: failed to parse JSON")}}function yo(t,e){return go.apply(this,arguments)}function go(){return(go=Zt(_.a.mark((function t(e,r){var n,i,s,o,a,u,h,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new TextDecoder(r),i=!0,s=!1,t.prev=3,a=Lt(e);case 5:return t.next=7,Yt(a.next());case 7:return u=t.sent,i=u.done,t.next=11,Yt(u.value);case 11:if(h=t.sent,i){t.next=19;break}return c=h,t.next=16,"string"==typeof c?c:n.decode(c,{stream:!0});case 16:i=!0,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(3),s=!0,o=t.t0;case 25:if(t.prev=25,t.prev=26,i||null==a.return){t.next=30;break}return t.next=30,Yt(a.return());case 30:if(t.prev=30,!s){t.next=33;break}throw o;case 33:return t.finish(30);case 34:return t.finish(25);case 35:case"end":return t.stop()}}),t,null,[[3,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function mo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xt(t)););return t}function vo(){return(vo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=mo(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}var bo=Number.MAX_SAFE_INTEGER,wo="debug"==={}.CDEBUG,_o={textNode:void 0,numberNode:""},ko=0,xo={BEGIN:ko++,VALUE:ko++,OPEN_OBJECT:ko++,CLOSE_OBJECT:ko++,OPEN_ARRAY:ko++,CLOSE_ARRAY:ko++,TEXT_ESCAPE:ko++,STRING:ko++,BACKSLASH:ko++,END:ko++,OPEN_KEY:ko++,CLOSE_KEY:ko++,TRUE:ko++,TRUE2:ko++,TRUE3:ko++,FALSE:ko++,FALSE2:ko++,FALSE3:ko++,FALSE4:ko++,NULL:ko++,NULL2:ko++,NULL3:ko++,NUMBER_DECIMAL_POINT:ko++,NUMBER_DIGIT:ko++};for(var Mo in xo)xo[xo[Mo]]=Mo;ko=xo;var So=9,Eo=10,Co=13,To=32,Ao=34,Oo=43,Po=44,Io=45,jo=46,No=48,Ro=57,Lo=58,Bo=69,Do=91,Uo=92,qo=93,Fo=97,zo=98,Vo=101,Wo=102,Go=108,Ho=110,Qo=114,Ko=115,$o=116,Jo=117,Yo=123,Xo=125;var Zo=/[\\"\n]/g,ta=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q(this,t),this._initialize(e)}return $(t,[{key:"_initialize",value:function(t){this._clearBuffers(this),this.bufferCheckPosition=bo,this.q="",this.c="",this.p="",this.options=t||{},this.closed=!1,this.closedRoot=!1,this.sawRoot=!1,this.tag=null,this.error=null,this.state=ko.BEGIN,this.stack=new Array,this.position=this.column=0,this.line=1,this.slashed=!1,this.unicodeI=0,this.unicodeS=null,this.depth=0,"onready"in t&&(this.onready=t.onready),"onopenobject"in t&&(this.onopenobject=t.onopenobject),"onkey"in t&&(this.onkey=t.onkey),"oncloseobject"in t&&(this.oncloseobject=t.oncloseobject),"onopenarray"in t&&(this.onopenarray=t.onopenarray),"onclosearray"in t&&(this.onclosearray=t.onclosearray),"onvalue"in t&&(this.onvalue=t.onvalue),"onerror"in t&&(this.onerror=t.onerror),"onend"in t&&(this.onend=t.onend),"onchunkparsed"in t&&(this.onchunkparsed=t.onchunkparsed),ea(this,"onready")}},{key:"_clearBuffers",value:function(){for(var t in _o)this[t]=_o[t]}},{key:"end",value:function(){return this.state===ko.VALUE&&0===this.depth||sa(this,"Unexpected end"),na(this),this.c="",this.closed=!0,ea(this,"onend"),this._initialize(this.options),this}},{key:"resume",value:function(){return this.error=null,this}},{key:"close",value:function(){return this.write(null)}},{key:"write",value:function(t){if(this.error)throw this.error;if(this.closed)return sa(this,"Cannot write after close. Assign an onready handler.");if(null===t)return this.end();var e=0,r=t.charCodeAt(0),n=this.p;for(wo&&console.log("write -> ["+t+"]");r&&(n=r,this.c=r=t.charCodeAt(e++),n!==r?this.p=n:n=this.p,r);)switch(wo&&console.log(e,r,xo[this.state]),this.position++,r===Eo?(this.line++,this.column=0):this.column++,this.state){case ko.BEGIN:r===Yo?this.state=ko.OPEN_OBJECT:r===Do?this.state=ko.OPEN_ARRAY:oa(r)||sa(this,"Non-whitespace before {[.");continue;case ko.OPEN_KEY:case ko.OPEN_OBJECT:if(oa(r))continue;if(this.state===ko.OPEN_KEY)this.stack.push(ko.CLOSE_KEY);else{if(r===Xo){ea(this,"onopenobject"),this.depth++,ea(this,"oncloseobject"),this.depth--,this.state=this.stack.pop()||ko.VALUE;continue}this.stack.push(ko.CLOSE_OBJECT)}r===Ao?this.state=ko.STRING:sa(this,'Malformed object key should start with "');continue;case ko.CLOSE_KEY:case ko.CLOSE_OBJECT:if(oa(r))continue;this.state,ko.CLOSE_KEY;r===Lo?(this.state===ko.CLOSE_OBJECT?(this.stack.push(ko.CLOSE_OBJECT),na(this,"onopenobject"),this.depth++):na(this,"onkey"),this.state=ko.VALUE):r===Xo?(ra(this,"oncloseobject"),this.depth--,this.state=this.stack.pop()||ko.VALUE):r===Po?(this.state===ko.CLOSE_OBJECT&&this.stack.push(ko.CLOSE_OBJECT),na(this),this.state=ko.OPEN_KEY):sa(this,"Bad object");continue;case ko.OPEN_ARRAY:case ko.VALUE:if(oa(r))continue;if(this.state===ko.OPEN_ARRAY){if(ea(this,"onopenarray"),this.depth++,this.state=ko.VALUE,r===qo){ea(this,"onclosearray"),this.depth--,this.state=this.stack.pop()||ko.VALUE;continue}this.stack.push(ko.CLOSE_ARRAY)}r===Ao?this.state=ko.STRING:r===Yo?this.state=ko.OPEN_OBJECT:r===Do?this.state=ko.OPEN_ARRAY:r===$o?this.state=ko.TRUE:r===Wo?this.state=ko.FALSE:r===Ho?this.state=ko.NULL:r===Io?this.numberNode+="-":No<=r&&r<=Ro?(this.numberNode+=String.fromCharCode(r),this.state=ko.NUMBER_DIGIT):sa(this,"Bad value");continue;case ko.CLOSE_ARRAY:if(r===Po)this.stack.push(ko.CLOSE_ARRAY),na(this,"onvalue"),this.state=ko.VALUE;else if(r===qo)ra(this,"onclosearray"),this.depth--,this.state=this.stack.pop()||ko.VALUE;else{if(oa(r))continue;sa(this,"Bad array")}continue;case ko.STRING:void 0===this.textNode&&(this.textNode="");var i=e-1,s=this.slashed,o=this.unicodeI;t:for(;;){for(wo&&console.log(e,r,xo[this.state],s);o>0;)if(this.unicodeS+=String.fromCharCode(r),r=t.charCodeAt(e++),this.position++,4===o?(this.textNode+=String.fromCharCode(parseInt(this.unicodeS,16)),o=0,i=e-1):o++,!r)break t;if(r===Ao&&!s){this.state=this.stack.pop()||ko.VALUE,this.textNode+=t.substring(i,e-1),this.position+=e-1-i;break}if(r===Uo&&!s&&(s=!0,this.textNode+=t.substring(i,e-1),this.position+=e-1-i,r=t.charCodeAt(e++),this.position++,!r))break;if(s){if(s=!1,r===Ho?this.textNode+="\n":r===Qo?this.textNode+="\r":r===$o?this.textNode+="\t":r===Wo?this.textNode+="\f":r===zo?this.textNode+="\b":r===Jo?(o=1,this.unicodeS=""):this.textNode+=String.fromCharCode(r),r=t.charCodeAt(e++),this.position++,i=e-1,r)continue;break}Zo.lastIndex=e;var a=Zo.exec(t);if(null===a){e=t.length+1,this.textNode+=t.substring(i,e-1),this.position+=e-1-i;break}if(e=a.index+1,!(r=t.charCodeAt(a.index))){this.textNode+=t.substring(i,e-1),this.position+=e-1-i;break}}this.slashed=s,this.unicodeI=o;continue;case ko.TRUE:r===Qo?this.state=ko.TRUE2:sa(this,"Invalid true started with t"+r);continue;case ko.TRUE2:r===Jo?this.state=ko.TRUE3:sa(this,"Invalid true started with tr"+r);continue;case ko.TRUE3:r===Vo?(ea(this,"onvalue",!0),this.state=this.stack.pop()||ko.VALUE):sa(this,"Invalid true started with tru"+r);continue;case ko.FALSE:r===Fo?this.state=ko.FALSE2:sa(this,"Invalid false started with f"+r);continue;case ko.FALSE2:r===Go?this.state=ko.FALSE3:sa(this,"Invalid false started with fa"+r);continue;case ko.FALSE3:r===Ko?this.state=ko.FALSE4:sa(this,"Invalid false started with fal"+r);continue;case ko.FALSE4:r===Vo?(ea(this,"onvalue",!1),this.state=this.stack.pop()||ko.VALUE):sa(this,"Invalid false started with fals"+r);continue;case ko.NULL:r===Jo?this.state=ko.NULL2:sa(this,"Invalid null started with n"+r);continue;case ko.NULL2:r===Go?this.state=ko.NULL3:sa(this,"Invalid null started with nu"+r);continue;case ko.NULL3:r===Go?(ea(this,"onvalue",null),this.state=this.stack.pop()||ko.VALUE):sa(this,"Invalid null started with nul"+r);continue;case ko.NUMBER_DECIMAL_POINT:r===jo?(this.numberNode+=".",this.state=ko.NUMBER_DIGIT):sa(this,"Leading zero not followed by .");continue;case ko.NUMBER_DIGIT:No<=r&&r<=Ro?this.numberNode+=String.fromCharCode(r):r===jo?(-1!==this.numberNode.indexOf(".")&&sa(this,"Invalid number has two dots"),this.numberNode+="."):r===Vo||r===Bo?(-1===this.numberNode.indexOf("e")&&-1===this.numberNode.indexOf("E")||sa(this,"Invalid number has two exponential"),this.numberNode+="e"):r===Oo||r===Io?(n!==Vo&&n!==Bo&&sa(this,"Invalid symbol in number"),this.numberNode+=String.fromCharCode(r)):(ia(this),e--,this.state=this.stack.pop()||ko.VALUE);continue;default:sa(this,"Unknown state: "+this.state)}return this.position>=this.bufferCheckPosition&&function(t){var e=Math.max(bo,10),r=0;for(var n in _o){var i=void 0===t[n]?0:t[n].length;if(i>e)switch(n){case"text":closeText(t);break;default:sa(t,"Max buffer length exceeded: "+n)}r=Math.max(r,i)}t.bufferCheckPosition=bo-r+t.position}(this),ea(this,"onchunkparsed"),this}}]),t}();function ea(t,e,r){wo&&console.log("-- emit",e,r),t[e]&&t[e](r,t)}function ra(t,e,r){na(t),ea(t,e,r)}function na(t,e){t.textNode=function(t,e){if(void 0===e)return e;t.trim&&(e=e.trim());t.normalize&&(e=e.replace(/\s+/g," "));return e}(t.options,t.textNode),void 0!==t.textNode&&ea(t,e||"onvalue",t.textNode),t.textNode=void 0}function ia(t){t.numberNode&&ea(t,"onvalue",parseFloat(t.numberNode)),t.numberNode=""}function sa(t,e){return na(t),e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c,e=new Error(e),t.error=e,ea(t,"onerror",e),t}function oa(t){return t===Co||t===Eo||t===To||t===So}function aa(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ua(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ua(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function ua(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ha=function(){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Q(this,t),this.path=["$"],r instanceof t)this.path=mi(r.path);else if(Array.isArray(r))(e=this.path).push.apply(e,mi(r));else if("string"==typeof r&&(this.path=r.split("."),"$"!==this.path[0]))throw new Error("JSONPaths must start with $")}return $(t,[{key:"clone",value:function(){return new t(this)}},{key:"toString",value:function(){return this.path.join(".")}},{key:"push",value:function(t){this.path.push(t)}},{key:"pop",value:function(){return this.path.pop()}},{key:"set",value:function(t){this.path[this.path.length-1]=t}},{key:"equals",value:function(t){if(!this||!t||this.path.length!==t.path.length)return!1;for(var e=0;e<this.path.length;++e)if(this.path[e]!==t.path[e])return!1;return!0}},{key:"setFieldAtPath",value:function(t,e){var r=mi(this.path);r.shift();var n,i=r.pop(),s=aa(r);try{for(s.s();!(n=s.n()).done;){t=t[n.value]}}catch(t){s.e(t)}finally{s.f()}t[i]=e}},{key:"getFieldAtPath",value:function(t){var e=mi(this.path);e.shift();var r,n=e.pop(),i=aa(e);try{for(i.s();!(r=i.n()).done;){t=t[r.value]}}catch(t){i.e(t)}finally{i.f()}return t[n]}}]),t}();function ca(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return la(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return la(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function la(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xt(t);if(e){var i=xt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kt(this,r)}}var pa=function(t){_t(r,t);var e=fa(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q(this,r),t=e.call(this);var i=n.jsonpaths||[];return t.jsonPaths=i.map((function(t){return new ha(t)})),t.streamingJsonPath=null,t.streamingArray=null,t.topLevelObject=null,t._extendParser(),t}return $(r,[{key:"write",value:function(t){vo(xt(r.prototype),"write",this).call(this,t);var e=[];return this.streamingArray&&(e=mi(this.streamingArray),this.streamingArray.length=0),e}},{key:"getPartialResult",value:function(){return this.topLevelObject}},{key:"getStreamingJsonPath",value:function(){return this.streamingJsonPath}},{key:"getStreamingJsonPathAsString",value:function(){return this.streamingJsonPath&&this.streamingJsonPath.toString()}},{key:"getJsonPath",value:function(){return this.jsonpath}},{key:"_matchJSONPath",value:function(){var t=this.getJsonPath();if(0===this.jsonPaths.length)return!0;var e,r=ca(this.jsonPaths);try{for(r.s();!(e=r.n()).done;){if(e.value.equals(t))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"_extendParser",value:function(){var t=this;this.parser.onopenarray=function(){if(!t.streamingArray&&t._matchJSONPath())return t.streamingJsonPath=t.getJsonPath().clone(),t.streamingArray=[],void t._openArray(t.streamingArray);t._openArray()},this.parser.onopenobject=function(e){t.topLevelObject?t._openObject({}):(t.topLevelObject={},t._openObject(t.topLevelObject)),void 0!==e&&t.parser.onkey(e)}}}]),r}(function(){function t(){Q(this,t),this.reset(),this._initializeParser()}return $(t,[{key:"reset",value:function(){this.result=void 0,this.previousStates=[],this.currentState=Object.freeze({container:[],key:null}),this.jsonpath=new ha}},{key:"write",value:function(t){this.parser.write(t)}},{key:"close",value:function(){this.parser.close()}},{key:"_pushOrSet",value:function(t){var e=this.currentState,r=e.container,n=e.key;null!==n?(r[n]=t,this.currentState.key=null):r.push(t)}},{key:"_openArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.jsonpath.push(null),this._pushOrSet(t),this.previousStates.push(this.currentState),this.currentState={container:t,isArray:!0,key:null}}},{key:"_closeArray",value:function(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}},{key:"_openObject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.jsonpath.push(null),this._pushOrSet(t),this.previousStates.push(this.currentState),this.currentState={container:t,isArray:!1,key:null}}},{key:"_closeObject",value:function(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}},{key:"_initializeParser",value:function(){var t=this;this.parser=new ta({onready:function(){t.jsonpath=new ha,t.previousStates.length=0,t.currentState.container.length=0},onopenobject:function(e){t._openObject({}),void 0!==e&&t.parser.onkey(e)},onkey:function(e){t.jsonpath.set(e),t.currentState.key=e},oncloseobject:function(){t._closeObject()},onopenarray:function(){t._openArray()},onclosearray:function(){t._closeArray()},onvalue:function(e){t._pushOrSet(e)},onerror:function(t){throw t},onend:function(){t.result=t.currentState.container.pop()}})}}]),t}());function da(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ya(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ya(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function ya(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ga(t,e){return ma.apply(this,arguments)}function ma(){return(ma=Zt(_.a.mark((function t(e,r){var n,i,s,o,a,u,h,c,l,f,p,d,y,g,m,v,b,w,k,x,M,S,E,C,T,A,O,P;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=yo(e),n=r.metadata,i=r.json,s=i.batchSize,o=i._rootObjectBatches,a=i.jsonpaths,u=r.json.TableBatch,h=!0,c=null,l=null,f=new pa({jsonpaths:a}),c=c||new jt(u,l,{batchSize:s}),p=!0,d=!1,t.prev=11,g=Lt(e);case 13:return t.next=15,Yt(g.next());case 15:return m=t.sent,p=m.done,t.next=19,Yt(m.value);case 19:if(v=t.sent,p){t.next=61;break}if(b=v,w=f.write(b),k=w.length>0&&f.getStreamingJsonPathAsString(),!(w.length>0&&h)){t.next=35;break}if(!n){t.next=29;break}return x={batchType:"partial-result",container:f.getPartialResult(),data:[],bytesUsed:0,schema:null,jsonpath:k},t.next=29,x;case 29:if(!o){t.next=33;break}return M={batchType:"root-object-batch-partial",container:f.getPartialResult(),data:[],schema:null},t.next=33,M;case 33:h=!1,l=va(w);case 35:S=da(w),t.prev=36,S.s();case 38:if((E=S.n()).done){t.next=46;break}if(C=E.value,c.addRow(C),!c.isFull()){t.next=44;break}return t.next=44,c.getBatch({jsonpath:k});case 44:t.next=38;break;case 46:t.next=51;break;case 48:t.prev=48,t.t0=t.catch(36),S.e(t.t0);case 51:return t.prev=51,S.f(),t.finish(51);case 54:if(c.chunkComplete(b),!c.isFull()){t.next=58;break}return t.next=58,c.getBatch({jsonpath:k});case 58:p=!0,t.next=13;break;case 61:t.next=67;break;case 63:t.prev=63,t.t1=t.catch(11),d=!0,y=t.t1;case 67:if(t.prev=67,t.prev=68,p||null==g.return){t.next=72;break}return t.next=72,Yt(g.return());case 72:if(t.prev=72,!d){t.next=75;break}throw y;case 75:return t.finish(72);case 76:return t.finish(67);case 77:if(T=f.getStreamingJsonPathAsString(),!(A=c.getBatch({jsonpath:T}))){t.next=82;break}return t.next=82,A;case 82:if(!n){t.next=86;break}return O={batchType:"final-result",container:f.getPartialResult(),jsonpath:f.getStreamingJsonPathAsString(),data:[],schema:null},t.next=86,O;case 86:if(!o){t.next=90;break}return P={batchType:"root-object-batch-complete",container:f.getPartialResult(),data:[],schema:null},t.next=90,P;case 90:case"end":return t.stop()}}),t,null,[[11,63,67,77],[36,48,51,54],[68,,72,76]])})))).apply(this,arguments)}function va(t){var e=t[0],r={},n=0;for(var i in e){var s=e[i];switch(Object(c.a)(s)){case"number":case"boolean":r[i]={name:String(i),index:n,type:Float32Array};break;case"object":r[i]={name:String(i),index:n,type:Array};break;case"string":default:r[i]={name:String(i),index:n,type:Array}}n++}return r}function ba(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ba(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _a={json:{TableBatch:vt,batchSize:"auto",_rootObjectBatches:!1,table:!1,jsonpaths:[]}},ka={id:"json",name:"JSON",version:"2.3.7",extensions:["json","geojson"],mimeTypes:["application/json"],category:"table",text:!0,parse:function(t,e){return xa.apply(this,arguments)},parseTextSync:Ma,parseInBatches:function(t,e){return Sa.apply(this,arguments)},options:_a,deprecatedOptions:{json:{_rootObjectBatches:"metadata"}}};function xa(){return(xa=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ma((new TextDecoder).decode(e),r));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ma(t,e){return(e=wa(wa({},_a),e)).json=wa(wa({},_a.json),e.json),po(t,e)}function Sa(){return(Sa=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=wa(wa({},_a),r)).json=wa(wa({},_a.json),r.json),t.abrupt("return",ga(e,r));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ea=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,Ca=new RegExp("^"+Ea.source+"(\\s"+Ea.source+"){1,}");function Ta(t){var e,r=t.split(";"),n=r.pop(),i=(r.shift()||"").split("=").pop(),s=0;function o(t){var e=n.substring(s).match(t);return e?(s+=e[0].length,e[0]):null}function a(){o(/^\s*/)}function u(){a();for(var t,e=0,r=[],n=[r],i=r;t=o(/^(\()/)||o(/^(\))/)||o(/^(,)/)||o(Ca);){if("("===t)n.push(i),i=[],n[n.length-1].push(i),e++;else if(")"===t){if(0===i.length)return null;if(!(i=n.pop()))return null;if(0===--e)break}else if(","===t)i=[],n[n.length-1].push(i);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(i,t.split(/\s/g).map(parseFloat))}a()}return 0!==e?null:r}function h(){for(var t,e,r=[];e=o(Ca)||o(/^(,)/);)","===e?(r.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),a();return t?(r.push(t),r.length?r:null):null}function c(){return function(){if(!o(/^(point(\sz)?)/i))return null;if(a(),!o(/^(\()/))return null;var t=h();return t?(a(),o(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!o(/^(linestring(\sz)?)/i))return null;if(a(),!o(/^(\()/))return null;var t=h();return t&&o(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!o(/^(polygon(\sz)?)/i))return null;a();var t=u();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!o(/^(multipoint)/i))return null;a();var t=n.substring(n.indexOf("(")+1,n.length-1).replace(/\(/g,"").replace(/\)/g,"");n="MULTIPOINT ("+t+")";var e=u();return e?(a(),{type:"MultiPoint",coordinates:e}):null}()||function(){if(!o(/^(multilinestring)/i))return null;a();var t=u();return t?(a(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!o(/^(multipolygon)/i))return null;a();var t=u();return t?{type:"MultiPolygon",coordinates:t}:null}()||function(){var t,e=[];if(!o(/^(geometrycollection)/i))return null;if(a(),!o(/^(\()/))return null;for(;t=c();)e.push(t),a(),o(/^(,)/),a();return o(/^(\))/)?{type:"GeometryCollection",geometries:e}:null}()}return(e=c())&&i.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+i}}),e}function Aa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Aa(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Pa=Oa(Oa({},{id:"wkt",name:"WKT",version:"2.3.7",extensions:["wkt"],mimeTypes:["text/plain"],category:"geometry",text:!0,options:{wkt:{workerUrl:"https://unpkg.com/@loaders.gl/wkt@".concat("2.3.7","/dist/wkt-loader.worker.js")}}}),{},{parse:function(){var t=x(_.a.mark((function t(e,r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ta((new TextDecoder).decode(e)));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseTextSync:Ta});function Ia(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.3.13";i(t,"no loader provided");var r=t.version;e&&r&&(e=ja(e),r=ja(r))}function ja(t){var e=t.split(".").map(Number);return{major:e[0],minor:e[1]}}var Na=r(6);function Ra(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return La(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return La(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function La(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ba(t){if(Na.toArrayBuffer&&(t=Na.toArrayBuffer(t)),t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.buffer;if("string"==typeof t){var e=t;return(new TextEncoder).encode(e).buffer}return t&&"object"===Object(c.a)(t)&&t._toArrayBuffer?t._toArrayBuffer():i(!1)}function Da(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=e.map((function(t){return t instanceof ArrayBuffer?new Uint8Array(t):t})),s=i.reduce((function(t,e){return t+e.byteLength}),0),o=new Uint8Array(s),a=0,u=Ra(i);try{for(u.s();!(n=u.n()).done;){var h=n.value;o.set(h,a),a+=h.byteLength}}catch(t){u.e(t)}finally{u.f()}return o.buffer}function Ua(t){return qa.apply(this,arguments)}function qa(){return(qa=x(_.a.mark((function t(e){var r,n,s,o,a,u,h,c,l;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=[],s=!0,o=!1,t.prev=4,u=Lt(e);case 6:return t.next=8,u.next();case 8:return h=t.sent,s=h.done,t.next=12,h.value;case 12:if(c=t.sent,s){t.next=19;break}"string"==typeof(l=c)?n.push(l):r.push(l);case 16:s=!0,t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),o=!0,a=t.t0;case 25:if(t.prev=25,t.prev=26,s||null==u.return){t.next=30;break}return t.next=30,u.return();case 30:if(t.prev=30,!o){t.next=33;break}throw a;case 33:return t.finish(30);case 34:return t.finish(25);case 35:if(!(n.length>0)){t.next=38;break}return i(0===r.length),t.abrupt("return",n.join(""));case 38:return t.abrupt("return",Da.apply(void 0,r));case 39:case"end":return t.stop()}}),t,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}var Fa=_.a.mark(za);function za(t){var e,r,n,i,s,o,a,u=arguments;return _.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:e=u.length>1&&void 0!==u[1]?u[1]:{},r=e.chunkSize,n=void 0===r?262144:r,i=0,s=new TextEncoder;case 4:if(!(i<t.length)){h.next=12;break}return o=Math.min(t.length-i,n),a=t.slice(i,i+o),i+=o,h.next=10,s.encode(a);case 10:h.next=4;break;case 12:case"end":return h.stop()}}),Fa)}var Va=_.a.mark(Wa);function Wa(t){var e,r,n,i,s,o,a,u=arguments;return _.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:e=u.length>1&&void 0!==u[1]?u[1]:{},r=e.chunkSize,n=void 0===r?262144:r,i=0;case 3:if(!(i<t.byteLength)){h.next=14;break}return s=Math.min(t.byteLength-i,n),o=new ArrayBuffer(s),a=new Uint8Array(t,i,s),new Uint8Array(o).set(a),i+=s,h.next=12,o;case 12:h.next=3;break;case 14:case"end":return h.stop()}}),Va)}function Ga(t){return Ha.apply(this,arguments)}function Ha(){return(Ha=Zt(_.a.mark((function t(e){var r,n,i,s,o,a=arguments;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.length>1&&void 0!==a[1]?a[1]:{},n=r.chunkSize||1048576,i=0;case 3:if(!(i<e.size)){t.next=13;break}return s=i+n,t.next=7,Yt(Qa(e,i,s));case 7:return o=t.sent,i=s,t.next=11,o;case 11:t.next=3;break;case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qa(t,e,r){return Ka.apply(this,arguments)}function Ka(){return(Ka=x(_.a.mark((function t(e,r,n){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,i){var s=e.slice(r,n),o=new FileReader;o.onload=function(e){return t(e.target&&e.target.result)},o.onerror=function(t){return i(t)},o.readAsArrayBuffer(s)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $a(t){if(h.b||h.c>=10){if("function"==typeof t[Symbol.asyncIterator])return function(t){return Ja.apply(this,arguments)}(t);if("function"==typeof t.getIterator)return t.getIterator()}return h.b?function(t){return Ya.apply(this,arguments)}(t):function(t){return Xa.apply(this,arguments)}(t)}function Ja(){return(Ja=Zt(_.a.mark((function t(e){var r,n,i,s,o,a,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,n=!1,t.prev=2,s=Lt(e);case 4:return t.next=6,Yt(s.next());case 6:return o=t.sent,r=o.done,t.next=10,Yt(o.value);case 10:if(a=t.sent,r){t.next=18;break}return u=a,t.next=15,Ba(u);case 15:r=!0,t.next=4;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),n=!0,i=t.t0;case 24:if(t.prev=24,t.prev=25,r||null==s.return){t.next=29;break}return t.next=29,Yt(s.return());case 29:if(t.prev=29,!n){t.next=32;break}throw i;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}}),t,null,[[2,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function Ya(){return(Ya=Zt(_.a.mark((function t(e){var r,n,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.getReader(),t.prev=1;case 2:return t.next=5,Yt(r.read());case 5:if(n=t.sent,i=n.done,s=n.value,!i){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,Ba(s);case 12:t.next=2;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),r.releaseLock();case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}function Xa(){return(Xa=Zt(_.a.mark((function t(e){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yt(e);case 2:e=t.sent;case 3:if(null===(r=e.read())){t.next=9;break}return t.next=8,Ba(r);case 8:return t.abrupt("continue",3);case 9:if(!e._readableState.ended){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,Yt(Za(e));case 13:t.next=3;break;case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Za(t){return tu.apply(this,arguments)}function tu(){return(tu=x(_.a.mark((function t(e){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.once("readable",t)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function eu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t?za(t,e):t instanceof ArrayBuffer?Wa(t,e):v(t)?Ga(t,e):b(t)?$a(t):m(t)?$a(t.body):i(!1)}var ru="Cannot convert supplied data type";function nu(t,e){if(e.text&&"string"==typeof t)return t;if(t instanceof ArrayBuffer){var r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)||(s=t)&&"object"===Object(c.a)(s)&&s.isBuffer){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);var n=t.buffer,i=t.byteLength||t.length;return 0===t.byteOffset&&i===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+i)),n}var s;throw new Error(ru)}function iu(t,e){return su.apply(this,arguments)}function su(){return(su=x(_.a.mark((function t(e,r){var n,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e instanceof ArrayBuffer||ArrayBuffer.isView(e),"string"!=typeof e&&!n){t.next=3;break}return t.abrupt("return",nu(e,r));case 3:if(!v(e)){t.next=7;break}return t.next=6,N(e);case 6:e=t.sent;case 7:if(!m(e)){t.next=21;break}return i=e,t.next=11,L(i);case 11:if(!r.binary){t.next=17;break}return t.next=14,i.arrayBuffer();case 14:t.t0=t.sent,t.next=20;break;case 17:return t.next=19,i.text();case 19:t.t0=t.sent;case 20:return t.abrupt("return",t.t0);case 21:if(b(e)&&(e=eu(e)),!y(e)&&!g(e)){t.next=24;break}return t.abrupt("return",Ua(e));case 24:throw new Error(ru);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ou(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function au(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ou(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ou(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function uu(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r||(t=au({fetch:ot(e||{},t)},t),Array.isArray(t.loaders)||(t.loaders=null),t)}function hu(t,e){if(!e&&t&&!Array.isArray(t))return t;var r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){var n=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[].concat(mi(r),mi(n)):n}return r&&r.length?r:null}var cu=new Map;function lu(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n}")}function fu(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=r||new Set;if(t){if(pu(t))n.add(t);else if(pu(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===Object(c.a)(t))for(var i in t)fu(t[i],e,n)}else;return void 0===r?Array.from(n):[]}function pu(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var du=0;function yu(t){var e=t.data;(0,t.resolve)(e)}var gu=function(){function t(e){var r=e.source,n=e.name,s=void 0===n?"web-worker-".concat(du++):n,o=e.onMessage;Q(this,t);var a=function(t){if(i("string"==typeof t,"worker source"),t.startsWith("url(")&&t.endsWith(")")){var e=t.match(/^url\((.*)\)$/)[1];if(e&&!e.startsWith("http"))return e;t=lu(e)}var r=cu.get(t);if(!r){var n=new Blob([t],{type:"application/javascript"});r=URL.createObjectURL(n),cu.set(t,r)}return r}(r,s);this.worker=new Worker(a,{name:s}),this.name=s,this.onMessage=o||yu}var e;return $(t,[{key:"process",value:(e=x(_.a.mark((function t(e){var r=this;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){r.worker.onmessage=function(e){r.onMessage({worker:r.worker,data:e.data,resolve:t,reject:n})},r.worker.onerror=function(t){var e="".concat(r.name,": WorkerThread.process() failed");t.message&&(e+=" ".concat(t.message," ").concat(t.filename,":").concat(t.lineno,":").concat(t.colno));var i=new Error(e);console.error(t),n(i)};var i=fu(e);r.worker.postMessage(e,i)})));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),t}(),mu=function(){function t(e){var r=e.source,n=e.name,i=void 0===n?"unnamed":n,s=e.maxConcurrency,o=void 0===s?1:s,a=e.onMessage,u=e.onDebug,h=void 0===u?function(){}:u,c=e.reuseWorkers,l=void 0===c||c;Q(this,t),this.source=r,this.name=i,this.maxConcurrency=o,this.onMessage=a,this.onDebug=h,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=l}var e;return $(t,[{key:"destroy",value:function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0}},{key:"process",value:function(t,e){var r=this;return new Promise((function(n,i){r.jobQueue.push({data:t,jobName:e,resolve:n,reject:i}),r._startQueuedJob()}))}},{key:"_startQueuedJob",value:(e=x(_.a.mark((function t(){var e,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.jobQueue.length){t.next=2;break}return t.abrupt("return");case 2:if(e=this._getAvailableWorker()){t.next=5;break}return t.abrupt("return");case 5:return r=this.jobQueue.shift(),this.onDebug({message:"processing",worker:e.name,job:r.jobName,backlog:this.jobQueue.length}),t.prev=7,t.t0=r,t.next=11,e.process(r.data);case 11:t.t1=t.sent,t.t0.resolve.call(t.t0,t.t1),t.next=18;break;case 15:t.prev=15,t.t2=t.catch(7),r.reject(t.t2);case 18:return t.prev=18,this._onWorkerDone(e),t.finish(18);case 21:case"end":return t.stop()}}),t,this,[[7,15,18,21]])}))),function(){return e.apply(this,arguments)})},{key:"_onWorkerDone",value:function(t){this.isDestroyed?t.destroy():(this.reuseWorkers?this.idleQueue.push(t):(t.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new gu({source:this.source,onMessage:this.onMessage,name:t})}return null}}]),t}(),vu=function(){function t(e){var r=e.maxConcurrency,n=void 0===r?5:r,i=e.onMessage,s=void 0===i?null:i,o=e.onDebug,a=void 0===o?function(){}:o,u=e.reuseWorkers,h=void 0===u||u;Q(this,t),this.maxConcurrency=n,this.onMessage=s,this.onDebug=a,this.workerPools=new Map,this.reuseWorkers=h}var e;return $(t,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),$(t,[{key:"setProps",value:function(t){"maxConcurrency"in t&&(this.maxConcurrency=t.maxConcurrency),"onDebug"in t&&(this.onDebug=t.onDebug),"reuseWorkers"in t&&(this.reuseWorkers=t.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach((function(t){return t.destroy()}))}},{key:"process",value:(e=x(_.a.mark((function t(e,r,n){var i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this._getWorkerPool(e,r),t.abrupt("return",i.process(n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,r,n){return e.apply(this,arguments)})},{key:"_getWorkerPool",value:function(t,e){var r=this.workerPools.get(e);return r||(r=new mu({source:t,name:e,onMessage:bu.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(e,r)),r}}]),t}();function bu(t,e){var r=e.worker,n=e.data,i=e.resolve,s=e.reject;if(t)t({worker:r,data:n,resolve:i,reject:s});else switch(n.type){case"done":i(n.result);break;case"error":s(n.message)}}function wu(t,e,r,n){if(!vu.isSupported())return!1;var i=r&&r[t.id];return!!("local"===r.worker&&i&&i.localWorkerUrl||r.worker&&i&&i.workerUrl)&&(!t.useWorker||t.useWorker(r))}function _u(t,e,r,n){var i=(r||{}).worker,s=r&&r[t.id]||{},o="local"===i?s.localWorkerUrl:s.workerUrl,a="url(".concat(o,")"),u=t.name,h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};t.maxConcurrency&&(e.maxConcurrency=t.maxConcurrency);t.onDebug&&(e.onDebug=t.onDebug);"reuseWorkers"in t&&(e.reuseWorkers=t.reuseWorkers);ku||(ku=new vu({onMessage:xu}));return ku.setProps(e),ku}(r);r=JSON.parse(JSON.stringify(r));var c="2.3.7"!==t.version?"(core version ".concat("2.3.7",")"):"";return h.process(a,"".concat(u,"-worker@").concat(t.version).concat(c),{arraybuffer:Ba(e),options:r,source:"loaders.gl@".concat("2.3.7"),type:"parse"})}var ku=null;function xu(t){return Mu.apply(this,arguments)}function Mu(){return(Mu=x(_.a.mark((function t(e){var r,n,i,s,o;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.worker,n=e.data,i=e.resolve,s=e.reject,t.t0=n.type,t.next="done"===t.t0?4:"parse"===t.t0?6:"error"===t.t0?17:19;break;case 4:return i(n.result),t.abrupt("break",19);case 6:return t.prev=6,t.next=9,Fu(n.arraybuffer,n.options,n.url);case 9:o=t.sent,r.postMessage({type:"parse-done",id:n.id,result:o},fu(o)),t.next=16;break;case 13:t.prev=13,t.t1=t.catch(6),r.postMessage({type:"parse-error",id:n.id,message:t.t1.message});case 16:return t.abrupt("break",19);case 17:return s(n.message),t.abrupt("break",19);case 19:case"end":return t.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}function Su(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Eu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Su(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Su(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cu(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Tu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tu(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function Tu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Au=/\.([^.]+)$/;function Ou(t){return Pu.apply(this,arguments)}function Pu(){return(Pu=x(_.a.mark((function t(e){var r,n,i,s,o=arguments;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:[],n=o.length>2&&void 0!==o[2]?o[2]:{},i=o.length>3&&void 0!==o[3]?o[3]:{},!(s=Iu(e,r,Eu(Eu({},n),{},{nothrow:!0}),i))){t.next=6;break}return t.abrupt("return",s);case 6:if(!v(e)){t.next=11;break}return t.next=9,Qa(e,0,10);case 9:e=t.sent,s=Iu(e,r,n,i);case 11:if(s||n.nothrow){t.next=13;break}throw new Error(ju(e));case 13:return t.abrupt("return",s);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Iu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e&&!Array.isArray(e))return u(e);Nu(e=[].concat(mi(e||[]),mi(dt())));var i=P(t),s=i.url,o=i.type,a=Ru(e,s||n.url);if(!(a=(a=a||Lu(e,o))||Bu(e,t))&&!r.nothrow)throw new Error(ju(t));return a}function ju(t){var e=P(t),r=e.url,n=e.type,i="No valid loader found";return t&&(i+=' data: "'.concat(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return qu(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){var r=0;return qu(t,r,e)}return""}(t),'", contentType: "').concat(n,'"')),r&&(i+=" url: ".concat(r)),i}function Nu(t){var e,r=Cu(t);try{for(r.s();!(e=r.n()).done;){u(e.value)}}catch(t){r.e(t)}finally{r.f()}}function Ru(t,e){var r=e&&e.match(Au),n=r&&r[1];return n&&function(t,e){e=e.toLowerCase();var r,n=Cu(t);try{for(n.s();!(r=n.n()).done;){var i,s=r.value,o=Cu(s.extensions);try{for(o.s();!(i=o.n()).done;){if(i.value.toLowerCase()===e)return s}}catch(t){o.e(t)}finally{o.f()}}}catch(t){n.e(t)}finally{n.f()}return null}(t,n)}function Lu(t,e){var r,n=Cu(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.mimeTypes&&i.mimeTypes.includes(e))return i;if(e==="application/x.".concat(i.id))return i}}catch(t){n.e(t)}finally{n.f()}return null}function Bu(t,e){if(!e)return null;var r,n=Cu(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("string"==typeof e){if(Du(e,i))return i}else if(ArrayBuffer.isView(e)){if(Uu(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer){if(Uu(e,0,i))return i}}}catch(t){n.e(t)}finally{n.f()}return null}function Du(t,e){return e.testText&&e.testText(t)}function Uu(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((function(n){return function(t,e,r,n){if(n instanceof ArrayBuffer)return function(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;for(var n=new Uint8Array(t),i=new Uint8Array(e),s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(n,t,n.byteLength);switch(Object(c.a)(n)){case"function":return n(t,r);case"string":var i=qu(t,e,n.length);return n===i;default:return!1}}(t,e,r,n)}))}function qu(t,e,r){if(t.byteLength<e+r)return"";for(var n=new DataView(t),i="",s=0;s<r;s++)i+=String.fromCharCode(n.getUint8(e+s));return i}function Fu(t,e,r,n){return zu.apply(this,arguments)}function zu(){return(zu=x(_.a.mark((function t(e,r,n,s){var o,u,h,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!s||"string"!=typeof s,"parse no longer accepts final url"),!r||Array.isArray(r)||a(r)||(s=n,n=r,r=null),t.next=4,e;case 4:return e=t.sent,n=n||{},o=P(e),u=o.url,h=hu(r,s),t.next=10,Ou(e,h,n);case 10:if(c=t.sent){t.next=13;break}return t.abrupt("return",null);case 13:return n=st(n,c,h,u),s=uu({url:u,parse:Fu,loaders:h},n,s),t.next=17,Vu(c,e,n,s);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vu(t,e,r,n){return Wu.apply(this,arguments)}function Wu(){return(Wu=x(_.a.mark((function t(e,r,n,s){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ia(e),t.next=3,iu(r,e);case 3:if(r=t.sent,!e.parseTextSync||"string"!=typeof r){t.next=7;break}return n.dataType="text",t.abrupt("return",e.parseTextSync(r,n,s,e));case 7:if(!wu(e,0,n)){t.next=11;break}return t.next=10,_u(e,r,n);case 10:return t.abrupt("return",t.sent);case 11:if(!e.parseText||"string"!=typeof r){t.next=15;break}return t.next=14,e.parseText(r,n,s,e);case 14:return t.abrupt("return",t.sent);case 15:if(!e.parse){t.next=19;break}return t.next=18,e.parse(r,n,s,e);case 18:return t.abrupt("return",t.sent);case 19:return i(!e.parseSync),t.abrupt("return",i(!1));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Gu=class{constructor(t){this.properties=t,function(t){var e,r=pt(),n=lt(t=Array.isArray(t)?t:[t]);try{var i=function(){var t=u(e.value);r.find((function(e){return t===e}))||r.unshift(t)};for(n.s();!(e=n.n()).done;)i()}catch(t){n.e(t)}finally{n.f()}}([qs,fo,ka,Wt,Pa])}parseTimeStamp(t){return 0}async parseDataBlock(t){return Fu(t)}};Math.pow(2,53);function Hu(t){return null!=t}function Qu(t,e="letiable"){if(!Hu(t))throw e+" must be defined";return t}function Ku(){return"xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}const $u="connecting",Ju="connected",Yu="disconnected",Xu="closed-error";var Zu=class{constructor(t,e){this.url=t,this.properties=e,this.id="DataConnector-"+Ku(),this.reconnectTimeout=12e4,this.status=Yu}disconnect(){this.checkStatus(Yu),this.checkAndClearReconnection()}setUrl(t){this.url=t}getId(){return this.id}getUrl(){return this.url}setReconnectTimeout(t){this.reconnectTimeout=t}onReconnect(){return!0}connect(){}forceReconnect(){this.disconnect(),this.connect()}onChangeStatus(t){}checkStatus(t){t!==this.status&&(this.onChangeStatus(t),this.status=t)}onDisconnect(){}onConnect(){}postRequest(){}publishRequest(){}reset(){}};let th=-1;var eh=class extends Zu{constructor(t,e){super(t,e),this.interval=-1,this.lastReceiveTime=0,this.extraUrl=""}doRequest(t=this.extraUrl,e=this.queryString){if(!this.init){this.extraUrl=t,this.queryString=e;let r=this.getUrl()+t;Hu(e)&&(r+="?"+e),this.closed=!1,this.init=!0,this.ws=new WebSocket(r),this.ws.binaryType="arraybuffer",this.checkStatus($u),console.warn("WebSocket stream connecting"),this.ws.onopen=function(t){this.checkAndClearReconnection(),this.checkStatus(Ju),console.warn("WebSocket stream connected")}.bind(this),this.ws.onmessage=function(t){this.lastReceiveTime=Date.now(),t.data.byteLength>0&&this.onMessage(t.data)}.bind(this),this.ws.onerror=function(t){console.error("WebSocket stream error"),this.checkStatus(Xu),this.init=!1,this.lastReceiveTime=-1,this.createReconnection()}.bind(this),this.ws.onclose=t=>{console.warn("WebSocket stream closed: ",t.reason,t.code),1e3===t.code||this.closed?this.checkStatus(Yu):(this.checkStatus(Xu),this.createReconnection())},-1!==this.reconnectionInterval&&(clearInterval(this.reconnectionInterval),this.reconnectionInterval=-1)}}connect(){this.doRequest()}publishRequest(t,e){Hu(this.ws)&&this.ws.send(e)}checkAndClearReconnection(){-1!==th&&(clearInterval(th),th=-1)}createReconnection(){if(!this.closed&&-1===th&&this.onReconnect()){let t=0;const e=this.url;th=setInterval(function(){let r=Date.now()-this.lastReceiveTime;if(-1===this.lastReceiveTime||r>=this.reconnectTimeout)if(t++>=this.properties.reconnectRetry)console.warn("Maximum reconnection retries attempted: "+this.properties.reconnectRetry),clearInterval(th);else{let r=e;Hu(this.extraUrl)&&(r+=this.extraUrl),Hu(this.queryString)&&(r+="?"+this.queryString),console.warn(`(${t}/${this.properties.reconnectRetry}) trying to reconnect: ${r}`),this.init=!1,this.connect()}}.bind(this),this.reconnectTimeout)}}disconnect(){super.disconnect(),this.init=!1,this.closed=!0,null!=this.ws&&this.ws.readyState!==WebSocket.CLOSED&&this.ws.close()}async onMessage(t){}isConnected(){return null!=this.ws&&this.ws.readyState===WebSocket.OPEN}};var rh=class extends Zu{constructor(t){super(t),this.lastReceiveTime=-1,this.interval=-1,this.broadcastChannel=null}connect(){null===this.broadcastChannel&&(this.broadcastChannel=new BroadcastChannel(this.getUrl()),this.broadcastChannel.onmessage=t=>{this.lastReceiveTime=Date.now(),this.onMessage(t.data.data)},this.broadcastChannel.onerror=t=>{console.error("BroadcastChannel stream error: "+t),this.broadcastChannel.close(),this.init=!1,this.lastReceiveTime=-1,this.opened=!1},this.opened=!0,-1===this.interval&&(this.interval=setInterval(function(){let t=Date.now()-this.lastReceiveTime;(-1===this.lastReceiveTime||t>=this.reconnectTimeout)&&(console.warn(`trying to reconnect after ${this.reconnectTimeout} ..`),this.reconnect())}.bind(this),this.reconnectTimeout)))}disconnect(){this.fullDisconnect(!0)}fullDisconnect(t){null!=this.broadcastChannel&&(this.broadcastChannel.close(),this.broadcastChannel=null),t&&clearInterval(this.interval),this.opened=!1}reconnect(){this.onReconnect(),this.init&&this.fullDisconnect(!1),this.connect()}onMessage(t){}close(){this.disconnect()}isConnected(){return null!==this.broadcastChannel&&this.opened}};const nh="data",ih="status";var sh=class extends Zu{constructor(t,e){super(t,e),this.method="POST",Hu(e)&&(e.method&&(this.method=e.method),e.headers&&(this.headers=e.headers))}async doRequest(t="",e,r){let n=this.getUrl(),i=n+t;Hu(e)&&(i+="?"+e);const s=fetch(i,{method:this.method,headers:this.headers}).then((function(t){if(!t.ok){const e=new Error(`Got ${t.status} response from ${n}`);throw e.response=t,e}return t.arrayBuffer()})),o=await s;return this.onMessage(o),o}async postRequest(t="",e={},r){let n=this.getUrl()+t;await fetch(n,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",...this.headers},body:e})}onError(t){}onMessage(t){}disconnect(){}connect(){return this.doRequest()}isConnected(){return!1}},oh=r(8),ah=r.n(oh);let uh={};var hh=class{constructor(t){if(this.properties=t,!Hu(t))throw Error("endpoint and clientId are mandatory properties");if(!Hu(t.endpoint))throw Error("endpoint is a mandatory property");if(!Hu(t.clientId))throw Error("clientId is a mandatory property");this.mqttPrefix="/api",Hu(t.mqttPrefix)&&(this.mqttPrefix=t.mqttPrefix);let e={reconnectPeriod:30,connectTimeout:3e4,clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),wsOptions:{binaryType:"arraybuffer"}};Hu(this.properties.options)&&(e={...e,...this.properties.options}),this.options=e,this.endpoint=t.endpoint+"/mqtt",this.clientId=t.clientId,this.client=null}async subscribe(t,e){if(!Hu(this.client))throw Error("You must connect the client before subscribing any topic");let r;const n=`${this.mqttPrefix}${t}`;return new Promise((t,i)=>{r=setInterval(()=>{if(this.client.connected)try{n in uh||(uh[n]=[]),uh[n].push(e),this.client.subscribe(""+n,(function(r){r?(e(r),i(r)):(console.warn("Subscribed to "+n),t())}))}catch(t){console.error(t)}finally{clearInterval(r)}},100)})}publish(t,e){const r=`${this.mqttPrefix}${t}`;this.client.publish(r,e)}async unsubscribe(t){const e=`${this.mqttPrefix}${t}`;return new Promise((t,r)=>{this.client.unsubscribe(e,n=>{if(delete uh[e],n){const t=`Cannot Unsubscribed topic: ${e} : ${n}`;console.error(t),r(t)}else console.warn("Unsubscribed topic: "+e),t()})})}connect(){if(!Hu(this.client)){this.client=ah.a.connect(this.endpoint,{...this.options});const t=this;this.client.on("connect",e=>{console.info("Mqtt client is connected to "+t.endpoint)}),this.client.on("message",this.onMessage.bind(this)),this.client.on("offline",e=>{throw new Error(`The server ${t.endpoint} seems offline`)}),this.client.on("error",t=>{throw new Error(error)})}}async onMessage(t,e){if(t in uh)for(let r of uh[t])r(new Uint8Array(e).subarray(e.byteOffset).buffer)}disconnect(){if(!Hu(this.client))throw Error("The client has not been created yet");this.client.end(),uh={},this.client=null}isConnected(){return Hu(this.client)&&this.client.connected}};const ch={};var lh=class extends Zu{constructor(t,e){super(t,{mqttPrefix:e.mqtt&&e.mqtt.prefix||"/api",...e}),this.interval=-1,this.topics=[]}getMqttProvider(){let t=this.getUrl();if(t in ch)console.warn("Getting MQTT provider from cache: "+t);else{let e={reconnectPeriod:this.reconnectTimeout,connectTimeout:3e4};Hu(this.properties.options)&&(e={...e,...this.properties.options}),ch[t]=new hh({endpoint:t,clientId:Ku(),options:e,mqttPrefix:this.properties.mqttPrefix}),console.warn("Stored MQTT provider into cache: "+t),ch[t].connect(),this.checkStatus(Ju)}return ch[t]}doRequest(t="",e){if(!(`${t}?${e}`in this.topics)){this.getMqttProvider().subscribe(`${t}?${e}`,this.onMessage).then(()=>{this.topics.push(`${t}?${e}`),this.onChangeStatus(Ju)})}}publishRequest(t,e){this.getMqttProvider().publish(t,e)}async disconnect(){const t=ch[this.getUrl()];if(Hu(t)&&t.isConnected())for(let e of this.topics)await t.unsubscribe(e);this.topics=[]}connect(){this.doRequest(this.properties.topic||"")}onMessage(t){}isConnected(){return Hu(ch[this.getUrl()])&&ch[this.getUrl()].isConnected()}reset(){this.disconnect(),console.log("Remove provider from cache: "+this.getUrl()),delete ch[this.getUrl()]}};var fh=class{constructor(){this.connector=null,this.reconnectTimeout=1e4,this.values=[],this.version=-Number.MAX_SAFE_INTEGER,this.id=Ku(),this.initialized=!1}init(t,e,r){this.dataSourceId=r,null!==this.connector&&(this.connector.disconnect(),this.connector=null),this.setTopic(e);const n=t;this.handleProperties(n),this.createDataConnector(this.properties),this.initialized=!0}handleProperties(t){Hu(t.bufferingTime)&&(this.bufferingTime=t.bufferingTime),Hu(t.timeOut)&&(this.timeOut=t.timeOut),Hu(t.reconnectTimeout)&&(this.reconnectTimeout=t.reconnectTimeout),this.properties=t}async createDataConnector(t,e){this.updatedProperties=t;const r=t.tls?"s":"",n=t.protocol+r+"://"+t.endpointUrl;if(Hu(e))this.connector=e;else if(t.protocol.startsWith("ws"))this.connector=new eh(n,t);else if(t.protocol.startsWith("http"))this.connector=new sh(n,{responseType:t.responseType||"arraybuffer",method:"GET"});else if("topic"===t.protocol)this.connector=new rh(n);else if("mqtt"===t.protocol){const e=t.tls?"s":"",r=t.protocol+e+"://"+t.mqttOpts.endpointUrl;this.connector=new lh(r,t)}await this.setUpConnector(t)}async setUpConnector(t){null!==this.connector&&(this.connector.setReconnectTimeout(this.reconnectTimeout),this.connector.onMessage=this.onMessage.bind(this),this.connector.onChangeStatus=this.onChangeStatus.bind(this),await this.updateAferCreatingConnector(t))}async updateAferCreatingConnector(t){}setTopic(t){this.topic!==t&&(Hu(this.broadcastChannel)&&(console.warn(`Replace old topic ${this.topic} by ${t}`),this.broadcastChannel.close()),this.broadcastChannel=new BroadcastChannel(t),this.topic=t)}connect(){null!==this.connector&&this.connector.doRequest("",this.getQueryString(this.updatedProperties))}getQueryString(t){}disconnect(){null!==this.connector&&this.connector.disconnect()}async parseData(t){}async onMessage(t){let e=await this.parseData(t);if(Array.isArray(e))for(let t=0;t<e.length;t++)this.values.push({data:e[t],version:this.version}),Hu(this.batchSize)&&this.values.length>=this.batchSize&&this.flush();else this.values.push({data:e,version:this.version});this.isConnected()?Hu(this.batchSize)&&0!==this.values.length&&this.values.length>=this.batchSize&&this.flush():this.flushAll()}onChangeStatus(t){t===Yu&&this.flushAll(),this.broadcastChannel.postMessage({type:ih,status:t,dataSourceId:this.dataSourceId})}updateProperties(t){this.disconnect(),this.createDataConnector({...this.properties,...t}).then(()=>{this.version++,this.connect()})}flushAll(){for(;this.values.length>0;)this.flush()}flush(){let t=this.values.length;Hu(this.batchSize)&&this.values.length>this.batchSize&&(t=this.batchSize),this.broadcastChannel.postMessage({dataSourceId:this.dataSourceId,type:nh,values:this.values.splice(0,t)})}isConnected(){return null!==this.connector&&this.connector.isConnected()}handleMessage(t,e){let r=void 0;if("init"===t.message)this.initialized||this.init(t.properties,t.topic,t.id),r=this.initialized;else if("connect"===t.message)this.connect();else if("disconnect"===t.message)this.disconnect();else if("topic"===t.message)this.setTopic(t.topic);else if("update-url"===t.message)this.updateProperties(t.data);else if("is-connected"===t.message)r=this.isConnected();else{if("is-init"!==t.message)return;r=this.initialized}e.postMessage({message:t.message,data:r,messageId:t.messageId})}};var ph=class extends Zu{constructor(t){super(t),this.opened=!1}async doRequest(t=""){if(!this.opened){this.opened=!0,this.onChangeStatus(Ju);for(let t of this.url)this.onMessage(await fetch(t));this.onChangeStatus(Yu),this.opened=!1}}isConnected(){return this.opened}};const dh=new class extends fh{constructor(t){super(),this.parser=t}async createDataConnector(t){const e=new ph(this.buildUrl(t),t);await super.createDataConnector(t,e)}async parseData(t){return Promise.resolve(this.parser.parseDataBlock(t))}buildUrl(t){return function(t,e="letiable"){if(Qu(t,e),!Array.isArray(t))throw e+" must be an array"}(t.paths),t.paths}}(new Gu);self.onmessage=t=>{dh.handleMessage(t.data,self)}},,,,,,function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return h}));var i=r(2),s={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},o=s.global||s.self||s.window,a="object"!==(void 0===n?"undefined":Object(i.a)(n))||"[object process]"!==String(n)||n.browser,u=void 0!==n&&n.version&&n.version.match(/v([0-9]*)/),h=u&&parseFloat(u[1])||0}).call(this,r(7),r(11))}]);