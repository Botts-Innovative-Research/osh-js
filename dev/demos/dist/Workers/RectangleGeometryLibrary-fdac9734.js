define(["exports","./Matrix2-92b7fb9d","./when-8166c7dd","./RuntimeError-4fdc4459","./Transforms-62a339c3","./ComponentDatatype-9ed50558"],(function(t,n,a,r,e,o){"use strict";var s=Math.cos,i=Math.sin,h=Math.sqrt,g={computePosition:function(t,n,r,e,o,g,u){var c=n.radiiSquared,C=t.nwCorner,l=t.boundingRectangle,d=C.latitude-t.granYCos*e+o*t.granXSin,M=s(d),S=i(d),w=c.z*S,m=C.longitude+e*t.granYSin+o*t.granXCos,p=M*s(m),R=M*i(m),X=c.x*p,Y=c.y*R,v=h(X*p+Y*R+w*S);if(g.x=X/v,g.y=Y/v,g.z=w/v,r){var O=t.stNwCorner;a.defined(O)?(d=O.latitude-t.stGranYCos*e+o*t.stGranXSin,m=O.longitude+e*t.stGranYSin+o*t.stGranXCos,u.x=(m-t.stWest)*t.lonScalar,u.y=(d-t.stSouth)*t.latScalar):(u.x=(m-l.west)*t.lonScalar,u.y=(d-l.south)*t.latScalar)}}},u=new n.Matrix2,c=new n.Cartesian3,C=new n.Cartographic,l=new n.Cartesian3,d=new e.GeographicProjection;function M(t,a,r,e,o,s,i){var h=Math.cos(a),g=e*h,C=r*h,M=Math.sin(a),S=e*M,w=r*M;c=d.project(t,c),c=n.Cartesian3.subtract(c,l,c);var m=n.Matrix2.fromRotation(a,u);c=n.Matrix2.multiplyByVector(m,c,c),c=n.Cartesian3.add(c,l,c),s-=1,i-=1;var p=(t=d.unproject(c,t)).latitude,R=p+s*w,X=p-g*i,Y=p-g*i+s*w,v=Math.max(p,R,X,Y),O=Math.min(p,R,X,Y),f=t.longitude,_=f+s*C,x=f+i*S,G=f+i*S+s*C;return{north:v,south:O,east:Math.max(f,_,x,G),west:Math.min(f,_,x,G),granYCos:g,granYSin:S,granXCos:C,granXSin:w,nwCorner:t}}g.computeOptions=function(t,a,e,s,i,h,g){var u,c,S,w,m,p=t.east,R=t.west,X=t.north,Y=t.south,v=!1,O=!1;X===o.CesiumMath.PI_OVER_TWO&&(v=!0),Y===-o.CesiumMath.PI_OVER_TWO&&(O=!0);var f=X-Y;S=(m=R>p?o.CesiumMath.TWO_PI-R+p:p-R)/((u=Math.ceil(m/a)+1)-1),w=f/((c=Math.ceil(f/a)+1)-1);var _=n.Rectangle.northwest(t,h),x=n.Rectangle.center(t,C);0===e&&0===s||(x.longitude<_.longitude&&(x.longitude+=o.CesiumMath.TWO_PI),l=d.project(x,l));var G=w,P=S,W=n.Rectangle.clone(t,i),y={granYCos:G,granYSin:0,granXCos:P,granXSin:0,nwCorner:_,boundingRectangle:W,width:u,height:c,northCap:v,southCap:O};if(0!==e){var I=M(_,e,S,w,0,u,c);if(X=I.north,Y=I.south,p=I.east,R=I.west,X<-o.CesiumMath.PI_OVER_TWO||X>o.CesiumMath.PI_OVER_TWO||Y<-o.CesiumMath.PI_OVER_TWO||Y>o.CesiumMath.PI_OVER_TWO)throw new r.DeveloperError("Rotated rectangle is invalid.  It crosses over either the north or south pole.");y.granYCos=I.granYCos,y.granYSin=I.granYSin,y.granXCos=I.granXCos,y.granXSin=I.granXSin,W.north=X,W.south=Y,W.east=p,W.west=R}if(0!==s){e-=s;var T=n.Rectangle.northwest(W,g),E=M(T,e,S,w,0,u,c);y.stGranYCos=E.granYCos,y.stGranXCos=E.granXCos,y.stGranYSin=E.granYSin,y.stGranXSin=E.granXSin,y.stNwCorner=T,y.stWest=E.west,y.stSouth=E.south}return y},t.RectangleGeometryLibrary=g}));