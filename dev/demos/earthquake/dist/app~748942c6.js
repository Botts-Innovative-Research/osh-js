(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(t,e){},113:function(t,e,n){var a=n(183);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("245911c2",a,!1,{})},114:function(t,e,n){var a=n(185);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("7b828b2d",a,!1,{})},115:function(t,e,n){var a=n(187);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("2f4320e5",a,!1,{})},116:function(t,e,n){var a=n(189);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("25bda644",a,!1,{})},117:function(t,e,n){var a=n(191);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("45a70254",a,!1,{})},118:function(t,e,n){var a=n(196);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("146e7f95",a,!1,{})},119:function(t,e,n){var a=n(198);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("03ada772",a,!1,{})},141:function(t,e){},173:function(t,e,n){var a=n(174);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(51).default)("3a812de8",a,!1,{})},174:function(t,e,n){(e=n(49)(!1)).push([t.i,"html, body {\n    overflow: hidden !important;\n}\n",""]),t.exports=e},181:function(t,e){},182:function(t,e,n){"use strict";var a=n(113);n.n(a).a},183:function(t,e,n){(e=n(49)(!1)).push([t.i,"\n.content[data-v-26cf870a] {\n  height: 75px;\n}\n.hoverInfo-title[data-v-26cf870a]{\n  font-size: 14px;\n}\n",""]),t.exports=e},184:function(t,e,n){"use strict";var a=n(114);n.n(a).a},185:function(t,e,n){(e=n(49)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$data-table-border-radius :  0px !default;\n",""]),t.exports=e},186:function(t,e,n){"use strict";var a=n(115);n.n(a).a},187:function(t,e,n){(e=n(49)(!1)).push([t.i,"\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > th,\n.v-data-table > .v-data-table__wrapper > table > thead > tr > th,\n.v-data-table > .v-data-table__wrapper > table > tfoot > tr > th,\n.v-data-table > .v-data-table__wrapper > table > tbody > tr > td{\n  font-size: 10px !important;\n}\n.v-data-table {\n  border-radius: 0px !important;\n}\n",""]),t.exports=e},188:function(t,e,n){"use strict";var a=n(116);n.n(a).a},189:function(t,e,n){(e=n(49)(!1)).push([t.i,"\n.map[data-v-69b5aed2] {\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 5;\n}\n.count[data-v-69b5aed2] {\n  position: absolute;\n  left: 0;\n  top: 2px;\n  z-index: 99999;\n  background-color: rgb(41, 50, 60);\n  padding: 12px 16px 4px;\n  color: ghostwhite;\n}\n.hover-info[data-v-69b5aed2] {\n  position: absolute;\n  right: 0;\n  top: 2px;\n  width: 415px;\n  z-index: 99999;\n  background-color: rgb(41, 50, 60);\n  padding: 4px 4px 0px;\n  color: ghostwhite;\n}\n",""]),t.exports=e},190:function(t,e,n){"use strict";var a=n(117);n.n(a).a},191:function(t,e,n){(e=n(49)(!1)).push([t.i,"\n.v-application .map a {\n  color: unset;\n  cursor: crosshair !important;\n}\n.legend {\n  display: flex;\n  position: absolute;\n  font-weight: 600;\n  height: 408px;\n  bottom: 32px;\n  right: 0px;\n  z-index: 1;\n}\n.legend-meaning {\n  display: flex;\n  flex-direction: column;\n  margin-right: 8px;\n  height: 100%;\n  font-size: 10px;\n  line-height: 16px;\n}\n.legend-colors {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 24px;\n  padding: 4px 0 4px 4px;\n  background-color: rgba(255, 255, 255, 0.2);\n  border-radius: 4px 0 0 4px;\n  font-size: 12px;\n}\n.legend-meaning > div {\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n  border-bottom: 1px solid rgba(201, 203, 209, 0.4);\n  text-align: right;\n  width: 160px;\n  flex-shrink: 0;\n  flex-grow: 1;\n  opacity: 0;\n  color: white;\n  transition: opacity 0.2s linear;\n}\n.legend:hover > div.legend-meaning > * {\n  opacity: 1;\n}\n.legend-colors > div {\n  flex-shrink: 0;\n  flex-grow: 1;\n  text-align: center;\n  display: grid;\n  align-items: self-end;\n}\n#deckgl-overlay {\n  cursor: crosshair !important;\n}\n",""]),t.exports=e},195:function(t,e,n){"use strict";var a=n(118);n.n(a).a},196:function(t,e,n){(e=n(49)(!1)).push([t.i,"\n.time-range-slider[data-v-f08eae1e] {\n  position: absolute;\n  margin:10px;\n  background-color: rgb(41, 50, 60);\n}\n.container[data-v-f08eae1e]{\n  width: 700px;\n  background-color: rgb(41, 50, 60);\n  height: 160px;\n  margin:auto;\n  left: 0;\n  right: 0;\n  bottom:10px;\n}\n",""]),t.exports=e},197:function(t,e,n){"use strict";var a=n(119);n.n(a).a},198:function(t,e,n){(e=n(49)(!1)).push([t.i,"\n.time-range-slider {\n  z-index: 99999;\n  position: absolute;\n  bottom: 0;\n}\n",""]),t.exports=e},203:function(t,e,n){"use strict";n.r(e);var a=n(80),i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("v-app",{attrs:{id:"inspire"}},[e("v-app",{attrs:{id:"inspire"}},[e("Map",{attrs:{datasource:this.datasource}}),this._v(" "),e("TimeRangeSlider",{staticClass:"time-range-slider",attrs:{loaded:this.loaded}})],1)],1)],1)};i._withStripped=!0;n(173);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map",attrs:{id:"map"}},[n("div",{staticClass:"count"},[n("span",[t._v("Earthquakes "+t._s(t.nFormatter(t.count,2))+" ")])]),t._v(" "),n("HoverInfo",{staticClass:"hover-info",attrs:{infos:t.infos}}),t._v(" "),t._m(0)],1)};o._withStripped=!0;var s=n(225),r=n(231),l=n(166),d=n(6),c=n(233);class u extends l.a{constructor(t){super({...t,supportedLayers:["data"]}),this.colorRange=[[255,195,0],[255,169,0],[255,148,0],[255,139,0],[255,122,0],[255,73,0],[255,44,0],[205,18,0],[125,0,0]],this.columnLayers=[],this.min=-1,this.max=-1}setData(t,e){const n=e.values;if(n.length>0){const t={ambient:.64,diffuse:.6,shininess:32,specularColor:[51,51,51]},e=new c.a({id:Object(d.j)(),data:n,material:t,diskResolution:20,radius:1e4,extruded:!0,pickable:!0,autoHighlight:!0,highlightColor:[46,204,113],getPosition:t=>[t.data.longitude,t.data.latitude],getFillColor:t=>this.colorRange[parseInt(t.data.mag)],getLineColor:[0,0,0],getElevation:t=>Math.exp(t.data.mag),coverage:1,elevationScale:1e3,transitions:{getLineColor:1e4,getLineWidth:1e4,getElevation:1e4}});this.columnLayers.push(e),this.render(this.columnLayers,{}),this.onRender(e,n)}}onClick(t){}renderFilter(t){const e=[];for(let n=0;n<this.columnLayers.length;n++)e.push(this.columnLayers[n].clone({visible:t.idx.indexOf(this.columnLayers[n].id)>=0}));this.min=t.start,this.max=t.start,this.render(e,{})}onRender(t,e){}render(t,e){const n={layers:[...this.deckLayers,...t]};this.deckgl.setProps({...e,...n})}}var p=u,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hoverInfo",attrs:{id:"hoverInfo"}},[n("div",{staticClass:"hoverInfo-title"},[t._v("Infos")]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"content"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"items-per-page":1,"hide-default-footer":"","disable-pagination":"","disable-filtering":"","disable-sort":"",height:"65",dark:"",dense:""},scopedSlots:t._u([{key:"item.mag",fn:function(e){var a=e.item;return[n("v-chip",{attrs:{color:t.getColor(a.mag),dark:"","x-small":""}},[t._v("\n          "+t._s(a.mag)+"\n        ")])]}},{key:"item.time",fn:function(e){var n=e.item;return[t._v("\n          "+t._s(t.dateFormat(n.time))+"\n      ")]}}])})],1)])};v._withStripped=!0;var f={name:"HoverInfo",props:["infos"],data:()=>({headers:[{text:"Id",align:"start",sortable:!1,value:"id"},{text:"Magnitude",value:"mag"},{text:"Depth",value:"depth"},{text:"Time",value:"time"}],items:[],colorMap:["#ffc300","#ffa900","#ff9400","#ff8b00","#ff7a00","#ff4900","#ff2c00","#cd1200","#7d0000"]}),watch:{infos(t,e){this.items=null===t?[]:[t]}},mounted(){},methods:{dateFormat:t=>new Date(Date.parse(t)).toISOString(),getColor(t){return this.colorMap[parseInt(t)]}}},h=(n(182),n(184),n(186),n(70)),m=Object(h.a)(f,v,[],!1,null,"26cf870a",null);m.options.__file="src/components/HoverInfo.vue";var g=m.exports,b=n(103),_=n(168),x={name:"MapColumn",components:{HoverInfo:g},props:["datasource"],data:function(){return{viewItems:[],count:0,infos:null}},watch:{datasource(t,e){this.view=new p({container:"map",deckProps:{onClick:t=>{this.clicked=null!==t.layer,this.clicked?this.infos=t.object.data:this.infos=null},initialViewState:{longitude:0,latitude:0,zoom:2,maxZoom:20,pitch:40,bearing:0},getTooltip:t=>{if(!t.picked||this.clicked)return null;this.infos=t.object.data},layers:[new s.a({data:"https://a.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png",minZoom:0,maxZoom:19,tileSize:256,renderSubLayers:t=>{const{bbox:{west:e,south:n,east:a,north:i}}=t.tile;return new r.a(t,{data:null,image:t.data,bounds:[e,n,a,i]})}})]},autoZoomOnFirstMarker:!1,layers:[new _.a({dataSourceId:t.id})]}),this.view.onRender=(t,e)=>{this.count+=e.length,this.$store.dispatch("addData",{layer:t,values:e})}},filteredIndexes(t,e){this.view.renderFilter(t)}},mounted(){},computed:{filteredIndexes(){return this.$store.state.filteredAll}},methods:{...Object(b.b)(["addData"]),nFormatter(t,e){const n=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];let a;for(a=n.length-1;a>0&&!(t>=n[a].value);a--);return(t/n[a].value).toFixed(e).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[a].symbol}}},y=(n(188),n(190),Object(h.a)(x,o,[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"legend hide-mobile"},[n("div",{staticClass:"legend-meaning"},[n("div",[t._v(" Great "),n("br"),t._v(" At or near total destruction")]),t._v(" "),n("div",[t._v(" Great "),n("br"),t._v(" Causes damage to most buildings")]),t._v(" "),n("div",[t._v(" Major "),n("br"),t._v(" Causes damage to most buildings")]),t._v(" "),n("div",[t._v(" Strong "),n("br"),t._v(" Can cause moderate damage")]),t._v(" "),n("div",[t._v(" Moderate "),n("br"),t._v(" Can cause light damage")]),t._v(" "),n("div",[t._v(" Light "),n("br"),t._v(" Noticeable shaking")]),t._v(" "),n("div",[t._v(" Minor "),n("br"),t._v(" Felt slightly")]),t._v(" "),n("div",[t._v(" Minor "),n("br"),t._v(" Felt slightly")]),t._v(" "),n("div",[t._v(" Micro "),n("br"),t._v(" Microearthquakes")])]),t._v(" "),n("div",{staticClass:"legend-colors"},[n("div",{staticStyle:{background:"rgb(125,0,0)"}},[t._v("9")]),t._v(" "),n("div",{staticStyle:{background:"rgb(205,18,0)"}},[t._v("8")]),t._v(" "),n("div",{staticStyle:{background:"rgb(255,44, 0)"}},[t._v("7")]),t._v(" "),n("div",{staticStyle:{background:"rgb(255, 73, 0)"}},[t._v("6")]),t._v(" "),n("div",{staticStyle:{background:"rgb(255, 122, 0)"}},[t._v("5")]),t._v(" "),n("div",{staticStyle:{background:"rgb(255, 139, 0)"}},[t._v("4")]),t._v(" "),n("div",{staticStyle:{background:"rgb(255, 148, 0)"}},[t._v("3")]),t._v(" "),n("div",{staticStyle:{background:"rgb(255, 169, 0)"}},[t._v("2")]),t._v(" "),n("div",{staticStyle:{background:"rgb(255, 195, 0)"}},[t._v("1")])])])}],!1,null,"69b5aed2",null));y.options.__file="src/components/MapColumn.vue";var w=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[0===t.data.length?n("infinite-loading",{attrs:{spinner:"spiral"}}):n("HistogramSlider",{key:t.componentKey,staticClass:"time-range-slider",attrs:{"bar-height":100,data:t.data,prettify:t.prettify,"drag-interval":!0,"force-edges":!1,handleSize:12,barRadius:0,barGap:5,barWidth:4,histSliderGap:5,primaryColor:"#21afca",holderColor:"#6a7485",min:t.min,max:t.max},on:{finish:t.finish,change:t.finish}})],1)};k._withStripped=!0;var S=n(157),C=n.n(S),M=(n(193),n(158)),D=n.n(M),T={name:"TimeRangeSlider",components:{HistogramSlider:C.a,InfiniteLoading:D.a},props:["loaded"],data:()=>({data:[],componentKey:0,min:new Date("1970-01-01T00:00:00.000Z").valueOf(),max:Date.now(),prettify:function(t){return new Date(t).toLocaleDateString("en",{year:"numeric"})}}),mounted(){},computed:{},methods:{finish(t){this.$store.dispatch("setTimeRange",{startTime:t.from,endTime:t.to})}},watch:{loaded(){const t=this.$store.state.all,e=[];for(let n in t)for(let a of t[n].values)Object(d.h)(a)&&e.push(new Date(a).valueOf());e.sort((t,e)=>new Date(t).getTime()-new Date(e).getTime()),e.length>2&&(this.min=new Date(e[0]).getTime(),this.max=new Date(e[e.length-1]).getTime()),this.data=e,this.componentKey=this.componentKey+1}}},I=(n(195),Object(h.a)(T,k,[],!1,null,"f08eae1e",null));I.options.__file="src/components/TimeRangeSlider.vue";var E=I.exports,L=n(162),R=n(88),z=n(60),F={name:"App",components:{Map:w,TimeRangeSlider:E},props:{source:String},data:function(){return{datasource:null,loaded:!1}},mounted(){const t=[];for(let e=1;e<=100;e++)t.push("./data/earthquakes."+e+".csv");this.datasource=new L.a("EQ data",{paths:t,batchSize:50}),this.datasource.connect(),this.datasource.subscribe(t=>{t.status===z.a.DISCONNECTED&&(this.loaded=!0)},[R.a.STATUS])}},$=(n(197),Object(h.a)(F,i,[],!1,null,null,null));$.options.__file="src/App.vue";var O=$.exports,j=n(144),A=n.n(j);a.default.use(b.a);var H=new b.a.Store({state:{all:{},filteredAll:{start:0,end:0,idx:[]},count:0},actions:{setTimeRange({state:t,commit:e},n){const{startTime:a,endTime:i}={...n},o=[];for(let e in t.all){const n=t.all[e];n.min>=a&&n.max<=i&&o.push(e)}e("setFilteredAll",{start:a,end:i,idx:o})},addData({state:t,commit:e},n){if(n.values.length>0){let t,a=Number.MAX_SAFE_INTEGER,i=0;for(let e=0;e<n.values.length;e++)t=Date.parse(n.values[e].data.time),t<a&&(a=t),t>i&&(i=t);e("count"),e("addData",{idx:n.layer.id,min:a,max:i,values:n.values.map(t=>t.data.time)})}},setData({state:t,commit:e},n){n.length>0&&e("setData",n)}},mutations:{setData(t,e){t.all=e},addData(t,e){const n={...t.all};n[e.idx]={min:e.min,max:e.max,values:e.values},t.all={...n}},setFilteredAll(t,e){t.filteredAll={...e}},count(t){t.count+=1}}});n(201);a.default.use(A.a),a.default.config.productionTip=!1,new a.default({store:H,vuetify:new A.a({theme:{themes:{light:{primary:"#ffffff",secondary:"#b0bec5",accent:"#8c9eff",error:"#b71c1c"}}}}),data:()=>({drawer:null,drawerRight:null,right:!1,left:!1}),render:t=>t(O)}).$mount("#app")}},[[203,2,4,3,10,7,6,9,11,5,8,1]]]);