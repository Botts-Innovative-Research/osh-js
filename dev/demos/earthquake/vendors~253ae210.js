(window.webpackJsonp=window.webpackJsonp||[]).push([[4],[,,,,function(t,e,n){"use strict";n.d(e,"j",(function(){return r})),n.d(e,"h",(function(){return i.d})),n.d(e,"i",(function(){return i.e})),n.d(e,"f",(function(){return i.c})),n.d(e,"b",(function(){return i.b})),n.d(e,"a",(function(){return i.a})),n.d(e,"m",(function(){return a.c})),n.d(e,"k",(function(){return a.b})),n.d(e,"n",(function(){return a.d})),n.d(e,"c",(function(){return y})),n.d(e,"l",(function(){return O})),n.d(e,"g",(function(){return m})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return f}));var r=new(n(204).a)({id:"luma.gl"}),i=n(30),a=(n(137),n(68)),o=n(56),u=n(24),s=n(36);function c(t){var e=t.luma;if(t.canvas&&e){var n=e.canvasSizeInfo.clientWidth;return n?t.drawingBufferWidth/n:1}return 1}function f(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=c(t),i=t.drawingBufferWidth,a=t.drawingBufferHeight;return h(e,r,i,a,n)}function l(t){var e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function h(t,e,n,r,i){var a,o=d(t[0],e,n),u=v(t[1],e,r,i),s=d(t[0]+1,e,n),c=s===n-1?s:s-1;return s=v(t[1]+1,e,r,i),i?(a=u,u=s=0===s?s:s+1):a=s===r-1?s:s-1,{x:o,y:u,width:Math.max(c-o+1,1),height:Math.max(a-u+1,1)}}function d(t,e,n){return Math.min(Math.round(t*e),n-1)}function v(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}var b=Object(u.isBrowser)(),g=b&&"undefined"!=typeof document,p={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(b,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var e,n=t=Object.assign({},p,t),r=n.width,i=n.height;function a(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}t.onError=a;var o=t,u=o.canvas,c=_({canvas:u,width:r,height:i,onError:a});return(e=j(c,t))?(x(e=m(e,t)),e):null}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||k(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var n=e=Object.assign({},p,e),i=n.manageState,a=n.debug;return i&&Object(o.c)(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.log.apply(r,[1].concat(e))()}}),b&&a&&(u.global.makeDebugContext?(t=u.global.makeDebugContext(t,e),r.level=Math.max(r.level,1)):r.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){var n=l(e.useDevicePixels);w(t,n,e)}else{var r=t.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in e&&"height"in e&&r.resize(e.width,e.height)}}function j(t,e){var n=e.onError,r=null,i=function(t){return r=t.statusMessage||r};t.addEventListener("webglcontextcreationerror",i,!1);var a=e.webgl1,o=void 0===a||a,u=e.webgl2,s=void 0===u||u,c=null;return s&&(c=(c=c||t.getContext("webgl2",e))||t.getContext("experimental-webgl2",e)),o&&(c=(c=c||t.getContext("webgl",e))||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),c?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),c):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function _(t){var e,n=t.canvas,r=t.width,i=void 0===r?800:r,a=t.height,o=void 0===a?600:a,u=t.onError;"string"==typeof n?(g&&"complete"===document.readyState||u("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):n?e=n:((e=document.createElement("canvas")).id="lumagl-canvas",e.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",e.style.height=Number.isFinite(o)?"".concat(o,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}function x(t){var e=Object(i.e)(t)?"WebGL2":"WebGL1",n=function(t){var e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),a=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",o=t.debug?" debug":"";r.info(1,"".concat(e).concat(o," context ").concat(a))()}function k(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function w(t,e,n){var i="width"in n?n.width:t.canvas.clientWidth,a="height"in n?n.height:t.canvas.clientHeight;i&&a||(r.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,a=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==a||o.devicePixelRatio!==e){var u=e,s=Math.floor(i*u),c=Math.floor(a*u);t.canvas.width=s,t.canvas.height=c,t.drawingBufferWidth===s&&t.drawingBufferHeight===c||(r.warn("Device pixel ratio clamped")(),u=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/a),t.canvas.width=Math.floor(i*u),t.canvas.height=Math.floor(a*u)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:a,devicePixelRatio:e})}}},,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return f}));n(13),n(88),n(11),n(41),Math.PI,Math.PI;var r={};function i(t){return Math.round(t/r.EPSILON)*r.EPSILON}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,a=void 0===n?r.precision||4:n;return t=i(t),"".concat(parseFloat(t.toPrecision(a)))}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u(t,e,n){if(o(t)){n=n||((i=t).clone?i.clone():new Array(i.length));for(var r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}var i;return e(t)}function s(t,e,n){return u(t,(function(t){return Math.max(e,Math.min(n,t))}))}function c(t,e,n){return o(t)?t.map((function(t,r){return c(t,e[r],n)})):n*e+(1-n)*t}function f(t,e,n){var i=r.EPSILON;n&&(r.EPSILON=n);try{if(t===e)return!0;if(o(t)&&o(e)){if(t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if(!f(t[a],e[a]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{r.EPSILON=i}}r.EPSILON=1e-12,r.debug=!1,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var r=n(19);function i(t,e){if(t.length!==e)return!1;for(var n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function a(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(r.b.debug&&!i(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}var u={};function s(t,e){u[t]||(u[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}},function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return f})),n.d(e,"i",(function(){return l})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"h",(function(){return v}));var r=n(13),i=function(t){return"boolean"==typeof t},a=function(t){return"function"==typeof t},o=function(t){return null!==t&&"object"===Object(r.a)(t)},u=function(t){return o(t)&&t.constructor==={}.constructor},s=function(t){return t&&"function"==typeof t[Symbol.iterator]},c=function(t){return t&&"function"==typeof t[Symbol.asyncIterator]},f=function(t){return t&&a(t.next)},l=function(t){return"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},h=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},d=function(t){return t&&"object"===Object(r.a)(t)&&t.isBuffer},v=function(t){return function(t){return"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||o(t)&&a(t.tee)&&a(t.cancel)&&a(t.getReader)}(t)||function(t){return o(t)&&a(t.read)&&a(t.pipe)&&i(t.readable)}(t)}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}n.d(e,"a",(function(){return r}))},,,,,function(t,e,n){"use strict";n.d(e,"c",(function(){return P})),n.d(e,"b",(function(){return I})),n.d(e,"i",(function(){return C})),n.d(e,"h",(function(){return O})),n.d(e,"k",(function(){return j})),n.d(e,"l",(function(){return T})),n.d(e,"j",(function(){return S})),n.d(e,"e",(function(){return _})),n.d(e,"d",(function(){return x})),n.d(e,"a",(function(){return k})),n.d(e,"g",(function(){return w})),n.d(e,"f",(function(){return A}));var r=n(11),i=n(8),a=n(2),o=n(1),u=n(28);function s(t,e){var n=u.n([],e,t);return u.k(n,n,1/n[3]),n}function c(t,e){var n=t%e;return n<0?e+n:n}var f=n(16),l=n(35),h=n(25);function d(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var v=Math.PI,b=v/4,g=v/180,p=180/v;function y(t){return Math.pow(2,t)}function m(t){return Math.log2(t)}function O(t){var e=Object(i.a)(t,2),n=e[0],r=e[1];d(Number.isFinite(n)),d(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var a=r*g;return[512*(n*g+v)/(2*v),512*(v+Math.log(Math.tan(b+.5*a)))/(2*v)]}function j(t){var e=Object(i.a)(t,2),n=e[0],r=e[1],a=n/512*(2*v)-v,o=2*(Math.atan(Math.exp(r/512*(2*v)-v))-b);return[a*p,o*p]}function _(t){var e=t.latitude;return d(Number.isFinite(e)),m(4003e4*Math.cos(e*g))-9}function x(t){var e=t.latitude,n=t.longitude,r=t.highPrecision,i=void 0!==r&&r;d(Number.isFinite(e)&&Number.isFinite(n));var a={},o=Math.cos(e*g),u=512/360/o,s=512/4003e4/o;if(a.unitsPerMeter=[s,s,s],a.metersPerUnit=[1/s,1/s,1/s],a.unitsPerDegree=[512/360,u,s],a.degreesPerUnit=[.703125,1/u,1/s],i){var c=g*Math.tan(e*g)/o,f=512/360*c/2,l=512/4003e4*c,h=l/u*s;a.unitsPerDegree2=[0,f,l],a.unitsPerMeter2=[h,0,h]}return a}function k(t,e){var n=Object(i.a)(t,3),r=n[0],a=n[1],o=n[2],u=Object(i.a)(e,3),s=u[0],c=u[1],f=u[2],l=x({longitude:r,latitude:a,highPrecision:!0}),h=l.unitsPerMeter,d=l.unitsPerMeter2,v=O(t);v[0]+=s*(h[0]+d[0]*c),v[1]+=c*(h[1]+d[1]*c);var b=j(v),g=(o||0)+(f||0);return Number.isFinite(o)||Number.isFinite(f)?[b[0],b[1],g]:b}function w(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,a=t.scale,o=t.center,u=void 0===o?null:o,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return f.p(s,s,[0,0,-i]),f.l(s,s,-n*g),f.n(s,s,r*g),a/=e,f.o(s,s,[a,a,a]),u&&f.p(s,s,h.g([],u)),s}function A(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?1.5:r,a=t.pitch,o=void 0===a?0:a,u=t.nearZMultiplier,s=void 0===u?1:u,c=t.farZMultiplier,f=void 0===c?1:c,l=o*g,h=Math.atan(.5/i),d=Math.sin(h)*i/Math.sin(Math.min(Math.max(Math.PI/2-l-h,.01),Math.PI-.01));return{fov:2*h,aspect:e/n,focalDistance:i,near:s,far:(Math.sin(l)*d+i)*f}}function E(t){var e=t.width,n=t.height,r=t.pitch,i=A({width:e,height:n,altitude:t.altitude,pitch:r,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),a=i.fov,o=i.aspect,u=i.near,s=i.far;return f.j([],a,o,u,s)}function T(t,e){var n=Object(i.a)(t,3),r=n[0],a=n[1],o=n[2],u=void 0===o?0:o;return d(Number.isFinite(r)&&Number.isFinite(a)&&Number.isFinite(u)),s(e,[r,a,u,1])}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(i.a)(t,3),a=r[0],o=r[1],u=r[2];if(d(Number.isFinite(a)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(u)){var c=s(e,[a,o,u,1]);return c}var f=s(e,[a,o,0,1]),h=s(e,[a,o,1,1]),v=f[2],b=h[2],g=v===b?0:((n||0)-v)/(b-v);return l.c([],f,h,g)}function I(t){var e=t.width,n=t.height,r=t.bounds,a=t.minExtent,o=void 0===a?0:a,u=t.maxZoom,s=void 0===u?24:u,c=t.padding,f=void 0===c?0:c,l=t.offset,h=void 0===l?[0,0]:l,v=Object(i.a)(r,2),b=Object(i.a)(v[0],2),g=b[0],p=b[1],y=Object(i.a)(v[1],2),m=y[0],O=y[1];if(Number.isFinite(f)){f={top:f,bottom:f,left:f,right:f}}else d(Number.isFinite(f.top)&&Number.isFinite(f.bottom)&&Number.isFinite(f.left)&&Number.isFinite(f.right));var j=new M({width:e,height:n,longitude:0,latitude:0,zoom:0}),_=j.project([g,O]),x=j.project([m,p]),k=[Math.max(Math.abs(x[0]-_[0]),o),Math.max(Math.abs(x[1]-_[1]),o)],w=[e-f.left-f.right-2*Math.abs(h[0]),n-f.top-f.bottom-2*Math.abs(h[1])];d(w[0]>0&&w[1]>0);var A=w[0]/k[0],E=w[1]/k[1],T=(f.right-f.left)/2/A,S=(f.bottom-f.top)/2/E,I=[(x[0]+_[0])/2+T,(x[1]+_[1])/2+S],L=j.unproject(I),P=Math.min(s,j.zoom+Math.log2(Math.abs(Math.min(A,E))));return d(Number.isFinite(P)),{longitude:L[0],latitude:L[1],zoom:P}}var L=Math.PI/180;function P(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.width,a=t.height,o=t.unproject,u={targetZ:r},s=o([0,a],u),c=o([i,a],u),f=Math.atan(.5/t.altitude),l=(90-t.pitch)*L;return f>l-.01?(e=R(t,0,r),n=R(t,i,r)):(e=o([0,0],u),n=o([i,0],u)),[s,c,n,e]}function R(t,e,n){var r=t.pixelUnprojectionMatrix,i=s(r,[e,0,1,1]),a=s(r,[e,t.height,1,1]),o=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(a[2]-i[2]),u=j(l.c([],i,a,o));return u[2]=n,u}var M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},n=e.width,r=e.height,i=e.latitude,o=void 0===i?0:i,u=e.longitude,s=void 0===u?0:u,c=e.zoom,f=void 0===c?0:c,l=e.pitch,h=void 0===l?0:l,d=e.bearing,v=void 0===d?0:d,b=e.altitude,g=void 0===b?1.5:b,p=e.nearZMultiplier,m=void 0===p?.02:p,j=e.farZMultiplier,_=void 0===j?1.01:j;Object(a.a)(this,t),n=n||1,r=r||1;var k=y(f);g=Math.max(.75,g);var A=O([s,o]);A[2]=0,this.projectionMatrix=E({width:n,height:r,pitch:h,altitude:g,nearZMultiplier:m,farZMultiplier:_}),this.viewMatrix=w({height:r,scale:k,center:A,pitch:h,bearing:v,altitude:g}),this.width=n,this.height=r,this.scale=k,this.latitude=o,this.longitude=s,this.zoom=f,this.pitch=h,this.bearing=v,this.altitude=g,this.center=A,this.distanceScales=x(this),this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return Object(o.a)(t,[{key:"_initMatrices",value:function(){var t=this.width,e=this.height,n=this.projectionMatrix,r=this.viewMatrix,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];f.h(i,i,n),f.h(i,i,r),this.viewProjectionMatrix=i;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];f.o(a,a,[t/2,-e/2,1]),f.p(a,a,[1,-1,0]),f.h(a,a,i);var o=f.f([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a);if(!o)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=a,this.pixelUnprojectionMatrix=o}},{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&f.b(e.projectionMatrix,this.projectionMatrix)&&f.b(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,a=this.projectPosition(t),o=T(a,this.pixelProjectionMatrix),u=Object(i.a)(o,2),s=u[0],c=u[1],f=r?c:this.height-c;return 2===t.length?[s,f]:[s,f,o[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,a=e.targetZ,o=void 0===a?void 0:a,u=Object(i.a)(t,3),s=u[0],c=u[1],f=u[2],l=r?c:this.height-c,h=o&&o*this.distanceScales.unitsPerMeter[2],d=S([s,l,f],this.pixelUnprojectionMatrix,h),v=this.unprojectPosition(d),b=Object(i.a)(v,3),g=b[0],p=b[1],y=b[2];return Number.isFinite(f)?[g,p,y]:Number.isFinite(o)?[g,p,o]:[g,p]}},{key:"projectPosition",value:function(t){var e=O(t),n=Object(i.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=j(t),n=Object(i.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return O(t)}},{key:"unprojectFlat",value:function(t){return j(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=S(t.pos,this.pixelUnprojectionMatrix),r=O(e),i=l.a([],r,l.d([],n));return j(l.a([],this.center,i))}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=I(Object.assign({width:r,height:i,bounds:e},n)),o=a.longitude,u=a.latitude,s=a.zoom;return new t({width:r,height:i,longitude:o,latitude:u,zoom:s})}},{key:"getBounds",value:function(t){var e=this.getBoundingRegion(t),n=Math.min.apply(Math,Object(r.a)(e.map((function(t){return t[0]})))),i=Math.max.apply(Math,Object(r.a)(e.map((function(t){return t[0]}))));return[[n,Math.min.apply(Math,Object(r.a)(e.map((function(t){return t[1]}))))],[i,Math.max.apply(Math,Object(r.a)(e.map((function(t){return t[1]}))))]]}},{key:"getBoundingRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return P(this,t.z||0)}}]),t}();function C(t){var e=t.width,n=t.height,r=t.longitude,i=t.latitude,a=t.zoom,o=t.pitch,u=void 0===o?0:o,s=t.bearing,f=void 0===s?0:s;(r<-180||r>180)&&(r=c(r+180,360)-180),(f<-180||f>180)&&(f=c(f+180,360)-180);var l=new M({width:e,height:n,longitude:r,latitude:i,zoom:a}),h=l.project([r,85.05113])[1],d=l.project([r,-85.05113])[1],v=0;return d-h<n&&(a+=Math.log2(n/(d-h)),h=(l=new M({width:e,height:n,longitude:r,latitude:i,zoom:a})).project([r,85.05113])[1],d=l.project([r,-85.05113])[1]),h>0?v=h:d<n&&(v=d-n),v&&(i=l.unproject([e/2,n/2+v])[1]),{width:e,height:n,longitude:r,latitude:i,zoom:a,pitch:u,bearing:f}}},,,function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s}));var r=n(36);function i(t){return"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function a(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function o(t){return a(t)?t:null}function u(t){return Object(r.a)(i(t),"Invalid WebGLRenderingContext"),t}function s(t){return Object(r.a)(a(t),"Requires WebGL2"),t}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(2),i=n(1),a=n(29),o=n(6),u=n(7),s=n(3),c=n(38),f=n(49),l=n(67),h=n(4),d=n(130),v=n(22);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var g={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},p={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:g},y={removedProps:g},m=function(t){Object(o.a)(n,t);var e=b(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,n),(i=e.call(this,t,o)).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),i.target=o.target||(i.gl.webgl2?36662:34962),i.initialize(o),Object.seal(Object(a.a)(i)),i}return Object(i.a)(n,[{key:"getElementCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/f.a.getBytesPerElement(t))}},{key:"getVertexCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/f.a.getBytesPerVertex(t))}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Object(d.a)("Buffer",t,p),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}},{key:"setProps",value:function(t){return"accessor"in(t=Object(d.a)("Buffer",t,y))&&this.setAccessor(t.accessor),this}},{key:"setAccessor",value:function(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new f.a(t),this}},{key:"reallocate",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:"setData",value:function(t){return this.initialize(t)}},{key:"subData",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,n=e.data,r=e.offset,i=void 0===r?0:r,a=e.srcOffset,o=void 0===a?0:a,u=t.byteLength||t.length;Object(v.a)(n);var s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==o||void 0!==u?(Object(h.a)(this.gl),this.gl.bufferSubData(this.target,i,n,o,u)):this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(t){var e=t.sourceBuffer,n=t.readOffset,r=void 0===n?0:n,i=t.writeOffset,a=void 0===i?0:i,o=t.size,u=this.gl;return Object(h.a)(u),u.bindBuffer(36662,e.handle),u.bindBuffer(36663,this.handle),u.copyBufferSubData(36662,36663,r,a,o),u.bindBuffer(36662,null),u.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,n=void 0===e?null:e,r=t.srcByteOffset,i=void 0===r?0:r,a=t.dstOffset,o=void 0===a?0:a,u=t.length,s=void 0===u?0:u;Object(h.a)(this.gl);var c,f,d=Object(l.c)(this.accessor.type||5126,{clamped:!1}),b=this._getAvailableElementCount(i),g=o;n?c=(f=n.length)-g:f=g+(c=Math.min(b,s||b));var p=Math.min(b,c);return s=s||p,Object(v.a)(s<=p),n=n||new d(f),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,o,s),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=t.offset,o=void 0===a?0:a,u=t.size;return 35345===n||35982===n?void 0!==u?this.gl.bindBufferRange(n,i,this.handle,o,u):(Object(v.a)(0===o),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=35345===n||35982===n;return a?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;Object(v.a)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);var i=Object(l.b)(t);return Object(v.a)(i),this.setAccessor(new f.a(this.accessor,{type:i})),this}},{key:"_setByteLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(t>=0),this._trackDeallocatedMemory();var n=t;0===t&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(t){var e=t/Object(l.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}},{key:"_inferType",value:function(t){this.accessor.type||this.setAccessor(new f.a(this.accessor,{type:Object(l.b)(t)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:"setByteLength",value:function(t){return h.j.deprecated("setByteLength","reallocate")(),this.reallocate(t)}},{key:"updateAccessor",value:function(t){return h.j.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new f.a(this.accessor,t),this}},{key:"type",get:function(){return h.j.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return h.j.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),n}(c.a)},,function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(2),i=n(1),a=n(4),o=n(100),u=n(74),s=n(91),c=n(22),f=n(202);function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d="Resource subclass must define virtual methods",v=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(a.b)(e);var i=n.id,o=n.userData,u=void 0===o?{}:o;this.gl=e,this.gl2=e,this.id=i||Object(s.c)(this.constructor.name),this.userData=u,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(i.a)(t,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.deleteChildren,n=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(t){return t.delete()})),this}},{key:"bind",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(u.b)(this.gl,t),Object(c.a)(t);var n=this.constructor.PARAMETERS||{},r=n[t];if(r){var i=Object(a.i)(this.gl),o=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!o){var s=r.webgl1,f="webgl2"in r?r.webgl2:r.webgl1,l=i?f:s;return l}}return this._getParameter(t,e)}},{key:"getParameters",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.parameters,r=e.keys,i=this.constructor.PARAMETERS||{},o=Object(a.i)(this.gl),s={},c=n||Object.keys(i),f=l(c);try{for(f.s();!(t=f.n()).done;){var h=t.value,d=i[h],v=d&&(!("webgl2"in d)||o)&&(!("extension"in d)||this.gl.getExtension(d.extension));if(v){var b=r?Object(u.a)(this.gl,h):h;s[b]=this.getParameter(h,e),r&&"GLenum"===d.type&&(s[b]=Object(u.a)(this.gl,s[b]))}}}catch(t){f.e(t)}finally{f.f()}return s}},{key:"setParameter",value:function(t,e){t=Object(u.b)(this.gl,t),Object(c.a)(t);var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Object(a.i)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Object(u.b)(e))}return this._setParameter(t,e),this}},{key:"setParameters",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:"stubRemovedMethods",value:function(t,e,n){return Object(f.a)(this,t,e,n)}},{key:"initialize",value:function(t){}},{key:"_createHandle",value:function(){throw new Error(d)}},{key:"_deleteHandle",value:function(){throw new Error(d)}},{key:"_bindHandle",value:function(t){throw new Error(d)}},{key:"_getOptsFromHandle",value:function(){throw new Error(d)}},{key:"_getParameter",value:function(t,e){throw new Error(d)}},{key:"_setParameter",value:function(t,e){throw new Error(d)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var t=this.constructor.name,e=o.a.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var t=this.constructor.name;o.a.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=o.a.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t),this.byteLength=t}},{key:"_trackDeallocatedMemory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,e=o.a.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),t}()},,function(t,e,n){"use strict";(function(t){var r=n(19),i=n(147);n.d(e,"b",(function(){return i.a}));var a=n(133);n.d(e,"a",(function(){return a.a})),n.d(e,"d",(function(){return r.c})),n.d(e,"c",(function(){return r.a})),n.d(e,"e",(function(){return r.f}));var o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t};(o.global||o.self||o.window).mathgl={config:r.b}}).call(this,n(46))},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"f",(function(){return u})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return x})),n.d(e,"d",(function(){return j})),n.d(e,"e",(function(){return I})),n.d(e,"c",(function(){return L}));var r=n(2),i=n(1),a=n(19),o={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=s(t,n);return r!==e&&(l(t,n),!0)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(c(t,e))}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;return f(t,(function(t,e,r,i){n+=b(t,e,r,i)}),e),n/2}function f(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.start,i=void 0===r?0:r,o=n.end,u=void 0===o?t.length:o,s=n.size,c=void 0===s?2:s,f=n.isClosed,l=(u-i)/c,h=0;h<l-1;++h)e(t[i+h*c],t[i+h*c+1],t[i+(h+1)*c],t[i+(h+1)*c+1],h,h+1);var d=i+(l-1)*c,v=f||Object(a.c)(t[i],t[d])&&Object(a.c)(t[i+1],t[d+1]);v||e(t[d],t[d+1],t[i],t[i+1],l-1,0)}function l(t,e){for(var n=e.start,r=void 0===n?0:n,i=e.end,a=void 0===i?t.length:i,o=e.size,u=void 0===o?2:o,s=(a-r)/u,c=Math.floor(s/2),f=0;f<c;++f)for(var l=r+f*u,h=r+(s-1-f)*u,d=0;d<u;++d){var v=t[l+d];t[l+d]=t[h+d],t[h+d]=v}}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(d(t,e))}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;return v(t,(function(t,e){n+=b(t[0],t[1],e[0],e[1])}),e),n/2}function v(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.start,i=void 0===r?0:r,o=n.end,u=void 0===o?t.length:o,s=n.isClosed,c=i;c<u-1;++c)e(t[c],t[c+1],c,c+1);var f=s||Object(a.c)(t[u-1],t[0]);f||e(t[u-1],t[0],u-1,0)}function b(t,e,n,r){return(t+n)*(e-r)}!function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.points=e,this.isFlatArray=!Object(a.e)(e[0]),this.options={start:n.start||0,end:n.end||e.length,size:n.size||2,isClosed:n.isClosed},Object.freeze(this)}Object(i.a)(t,[{key:"getSignedArea",value:function(){return this.isFlatArray?c(this.points,this.options):d(this.points,this.options)}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(t){this.isFlatArray?f(this.points,(function(e,n,r,i,a,o){t([e,n],[r,i],a,o)}),this.options):v(this.points,t,this.options)}},{key:"modifyWindingDirection",value:function(t){return this.isFlatArray?u(this.points,t,this.options):function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=h(t,n);return r!==e&&(t.reverse(),!0)}(this.points,t,this.options)}}])}();function g(t,e){var n=e.length,r=t.length;if(r>0){for(var i=!0,a=0;a<n;a++)if(t[r-n+a]!==e[a]){i=!1;break}if(i)return!1}for(var o=0;o<n;o++)t[r+o]=e[o];return!0}function p(t,e){for(var n=e.length,r=0;r<n;r++)t[r]=e[r]}function y(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=r+e*n,o=0;o<n;o++)i[o]=t[a+o];return i}function m(t,e,n,r){var i,a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-t[1])/(e[1]-t[1]),a=3;else if(4&n)i=(r[1]-t[1])/(e[1]-t[1]),a=1;else if(2&n)i=(r[2]-t[0])/(e[0]-t[0]),a=2;else{if(!(1&n))return null;i=(r[0]-t[0])/(e[0]-t[0]),a=0}for(var u=0;u<t.length;u++)o[u]=(1&a)===u?r[a]:i*(e[u]-t[u])+t[u];return o}function O(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function j(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.size,a=void 0===i?2:i,o=r.broken,u=void 0!==o&&o,s=r.gridResolution,c=void 0===s?10:s,f=r.gridOffset,l=void 0===f?[0,0]:f,h=r.startIndex,d=void 0===h?0:h,v=r.endIndex,b=void 0===v?t.length:v,j=(b-d)/a,_=[],x=[_],k=y(t,0,a,d),E=w(k,c,l,[]),T=[];g(_,k);for(var S=1;S<j;S++){for(n=O(e=y(t,S,a,d,e),E);n;){m(k,e,n,E,T);var I=O(T,E);I&&(m(k,T,I,E,T),n=I),g(_,T),p(k,T),A(E,c,n),u&&_.length>a&&(_=[],x.push(_),g(_,k)),n=O(e,E)}g(_,e),p(k,e)}return u?x:x[0]}function _(t,e){for(var n=0;n<e.length;n++)t.push(e[n]);return t}function x(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return[];for(var r=n.size,i=void 0===r?2:r,a=n.gridResolution,o=void 0===a?10:a,u=n.gridOffset,s=void 0===u?[0,0]:u,c=n.edgeTypes,f=void 0!==c&&c,l=[],h=[{pos:t,types:f&&new Array(t.length/i).fill(1),holes:e||[]}],d=[[],[]],v=[];h.length;){var b=h.shift(),g=b.pos,p=b.types,y=b.holes;E(g,i,y[0]||g.length,d),v=w(d[0],o,s,v);var m=O(d[1],v);if(m){var j=k(g,p,i,0,y[0]||g.length,v,m),x={pos:j[0].pos,types:j[0].types,holes:[]},A={pos:j[1].pos,types:j[1].types,holes:[]};h.push(x,A);for(var T=0;T<y.length;T++)(j=k(g,p,i,y[T],y[T+1]||g.length,v,m))[0]&&(x.holes.push(x.pos.length),x.pos=_(x.pos,j[0].pos),f&&(x.types=_(x.types,j[0].types))),j[1]&&(A.holes.push(A.pos.length),A.pos=_(A.pos,j[1].pos),f&&(A.types=_(A.types,j[1].types)))}else{var S={positions:g};f&&(S.edgeTypes=p),y.length&&(S.holeIndices=y),l.push(S)}}return l}function k(t,e,n,r,i,a,o){for(var u,s,c,f=(i-r)/n,l=[],h=[],d=[],v=[],b=[],O=y(t,f-1,n,r),j=Math.sign(8&o?O[1]-a[3]:O[0]-a[2]),_=e&&e[f-1],x=0,k=0,w=0;w<f;w++)u=y(t,w,n,r,u),s=Math.sign(8&o?u[1]-a[3]:u[0]-a[2]),c=e&&e[r/n+w],s&&j&&j!==s&&(m(O,u,o,a,b),g(l,b)&&d.push(_),g(h,b)&&v.push(_)),s<=0?(g(l,u)&&d.push(c),x-=s):d.length&&(d[d.length-1]=0),s>=0?(g(h,u)&&v.push(c),k+=s):v.length&&(v[v.length-1]=0),p(O,u),j=s,_=c;return[x?{pos:l,types:e&&d}:null,k?{pos:h,types:e&&v}:null]}function w(t,e,n,r){var i=Math.floor((t[0]-n[0])/e)*e+n[0],a=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=a,r[2]=i+e,r[3]=a+e,r}function A(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function E(t,e,n,r){for(var i=1/0,a=-1/0,o=1/0,u=-1/0,s=0;s<n;s+=e){var c=t[s],f=t[s+1];i=c<i?c:i,a=c>a?c:a,o=f<o?f:o,u=f>u?f:u}return r[0][0]=i,r[0][1]=o,r[1][0]=a,r[1][1]=u,r}function T(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.size,r=void 0===n?2:n,i=e.startIndex,a=void 0===i?0:i,o=e.endIndex,u=void 0===o?t.length:o,s=e.normalize,c=void 0===s||s,f=t.slice(a,u);M(f,r,0,u-a);var l=j(f,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(c){var h,d=T(l);try{for(d.s();!(h=d.n()).done;){var v=h.value;C(v,r)}}catch(t){d.e(t)}finally{d.f()}}return l}function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.size,i=void 0===r?2:r,a=n.normalize,o=void 0===a||a,u=n.edgeTypes,s=void 0!==u&&u;e=e||[];for(var c=[],f=[],l=0,h=0,d=0;d<=e.length;d++){for(var v=e[d]||t.length,b=h,g=P(t,i,l,v),p=g;p<v;p++)c[h++]=t[p];for(var y=l;y<g;y++)c[h++]=t[y];M(c,i,b,h),R(c,i,b,h,n.maxLatitude),l=v,f[d]=h}f.pop();var m=x(c,f,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(o){var O,j=T(m);try{for(j.s();!(O=j.n()).done;){var _=O.value;C(_.positions,i)}}catch(t){j.e(t)}finally{j.f()}}return m}function P(t,e,n,r){for(var i=-1,a=-1,o=n+1;o<r;o+=e){var u=Math.abs(t[o]);u>i&&(i=u,a=o-1)}return a}function R(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:85.051129,a=t[n],o=t[r-e];if(Math.abs(a-o)>180){var u=y(t,0,e,n);u[0]+=360*Math.round((o-a)/360),g(t,u),u[1]=Math.sign(u[1])*i,g(t,u),u[0]=a,g(t,u)}}function M(t,e,n,r){for(var i,a=t[0],o=n;o<r;o+=e){var u=(i=t[o])-a;(u>180||u<-180)&&(i-=360*Math.round(u/360)),t[o]=a=i}}function C(t,e){for(var n,r=t.length/e,i=0;i<r&&((n=t[i*e])+180)%360==0;i++);var a=360*-Math.round(n/360);if(0!==a)for(var o=0;o<r;o++)t[o*e]+=a}},function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var r=n(8),i=n(2),a=n(1),o=n(6),u=n(7),s=n(3),c=n(4),f=n(24),l=n(38),h=n(34),d=n(65),v=n(91),b=n(22);function g(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var m=[9729,9728],O=f.global.WebGLBuffer||function(){},j=function(t){Object(o.a)(n,t);var e=y(n);function n(t,r){var a;Object(i.a)(this,n);var o=r.id,u=void 0===o?Object(v.c)("texture"):o,s=r.handle,c=r.target;return(a=e.call(this,t,{id:u,handle:s})).target=c,a.textureUnit=void 0,a.loaded=!1,a.width=void 0,a.height=void 0,a.depth=void 0,a.format=void 0,a.type=void 0,a.dataFormat=void 0,a.border=void 0,a.textureUnit=void 0,a.mipmaps=void 0,a}return Object(a.a)(n,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,r=e.linearFiltering,i=!0;return n&&(i=(i=i&&Object(d.d)(t,n))&&(!r||Object(d.e)(t,n))),i}}]),Object(a.a)(n,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then((function(n){return t.initialize(Object.assign({},e,{pixels:n,data:n}))})),this;var r="undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",(function(){return t.initialize(e)})),this;var i=e.pixels,a=void 0===i?null:i,o=e.format,u=void 0===o?6408:o,s=e.border,f=void 0===s?0:s,l=e.recreate,h=void 0!==l&&l,d=e.parameters,v=void 0===d?{}:d,b=e.pixelStore,g=void 0===b?{}:b,p=e.textureUnit,y=void 0===p?void 0:p;n||(n=a);var m=e.width,O=e.height,j=e.dataFormat,_=e.type,x=e.compressed,k=void 0!==x&&x,w=e.mipmaps,A=void 0===w||w,E=e.depth,T=void 0===E?0:E,S=this._deduceParameters({format:u,type:_,dataFormat:j,compressed:k,data:n,width:m,height:O});return m=S.width,O=S.height,k=S.compressed,j=S.dataFormat,_=S.type,this.width=m,this.height=O,this.depth=T,this.format=u,this.type=_,this.dataFormat=j,this.border=f,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),A&&this._isNPOT()&&(c.j.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),A=!1,this._updateForNPOT(v)),this.mipmaps=A,this.setImageData({data:n,width:m,height:O,depth:T,format:u,type:_,dataFormat:j,border:f,mipmaps:A,parameters:g,compressed:k}),A&&this.generateMipmap(),this.setParameters(v),h&&(this.data=n),r&&(this._video={video:n,parameters:v,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var t=this._video,e=t.video,n=t.parameters;if(t.lastTime===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}},{key:"resize",value:function(t){var e=t.height,n=t.width,r=t.mipmaps,i=void 0!==r&&r;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(c.j.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(c.n)(this.gl,e,(function(){t.gl.generateMipmap(t.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(t){this._trackDeallocatedMemory("Texture");var e=t.target,n=void 0===e?this.target:e,i=t.pixels,a=void 0===i?null:i,o=t.level,u=void 0===o?0:o,s=t.format,f=void 0===s?this.format:s,l=t.border,h=void 0===l?this.border:l,v=t.offset,p=void 0===v?0:v,y=t.parameters,m=void 0===y?{}:y,O=t.data,j=void 0===O?null:O,_=t.type,x=void 0===_?this.type:_,k=t.width,w=void 0===k?this.width:k,A=t.height,E=void 0===A?this.height:A,T=t.dataFormat,S=void 0===T?this.dataFormat:T,I=t.compressed,L=void 0!==I&&I;j||(j=a);var P=this._deduceParameters({format:f,type:x,dataFormat:S,compressed:L,data:j,width:w,height:E});x=P.type,S=P.dataFormat,L=P.compressed,w=P.width,E=P.height;var R=this.gl;R.bindTexture(this.target,this.handle);var M,C,D=this._getDataType({data:j,compressed:L});if(j=D.data,M=D.dataType,Object(c.n)(this.gl,m,(function(){switch(M){case"null":R.texImage2D(n,u,f,w,E,h,S,x,j);break;case"typed-array":R.texImage2D(n,u,f,w,E,h,S,x,j,p);break;case"buffer":(C=Object(c.a)(R)).bindBuffer(35052,j.handle||j),C.texImage2D(n,u,f,w,E,h,S,x,p),C.bindBuffer(35052,null);break;case"browser-object":Object(c.i)(R)?R.texImage2D(n,u,f,w,E,h,S,x,j):R.texImage2D(n,u,f,S,x,j);break;case"compressed":var t,e=g(j.entries());try{for(e.s();!(t=e.n()).done;){var i=Object(r.a)(t.value,2),a=i[0],o=i[1];R.compressedTexImage2D(n,a,o.format,o.width,o.height,h,o.data)}}catch(t){e.e(t)}finally{e.f()}break;default:Object(b.a)(!1,"Unknown image data type")}})),j&&j.byteLength)this._trackAllocatedMemory(j.byteLength,"Texture");else{var B=d.a[this.dataFormat]||4,N=d.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*B*N,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(t){var e=this,n=t.target,r=void 0===n?this.target:n,i=t.pixels,a=void 0===i?null:i,o=t.data,u=void 0===o?null:o,s=t.x,f=void 0===s?0:s,l=t.y,d=void 0===l?0:l,v=t.width,g=void 0===v?this.width:v,p=t.height,y=void 0===p?this.height:p,m=t.level,j=void 0===m?0:m,_=t.format,x=void 0===_?this.format:_,k=t.type,w=void 0===k?this.type:k,A=t.dataFormat,E=void 0===A?this.dataFormat:A,T=t.compressed,S=void 0!==T&&T,I=t.offset,L=void 0===I?0:I,P=t.border,R=(void 0===P&&this.border,t.parameters),M=void 0===R?{}:R,C=this._deduceParameters({format:x,type:w,dataFormat:E,compressed:S,data:u,width:g,height:y});if(w=C.type,E=C.dataFormat,S=C.compressed,g=C.width,y=C.height,Object(b.a)(0===this.depth,"texSubImage not supported for 3D textures"),u||(u=a),u&&u.data){var D=u;u=D.data,g=D.shape[0],y=D.shape[1]}u instanceof h.a&&(u=u.handle),this.gl.bindTexture(this.target,this.handle),Object(c.n)(this.gl,M,(function(){if(S)e.gl.compressedTexSubImage2D(r,j,f,d,g,y,x,u);else if(null===u)e.gl.texSubImage2D(r,j,f,d,g,y,E,w,null);else if(ArrayBuffer.isView(u))e.gl.texSubImage2D(r,j,f,d,g,y,E,w,u,L);else if(u instanceof O){var t=Object(c.a)(e.gl);t.bindBuffer(35052,u),t.texSubImage2D(r,j,f,d,g,y,E,w,L),t.bindBuffer(35052,null)}else if(Object(c.i)(e.gl)){Object(c.a)(e.gl).texSubImage2D(r,j,f,d,g,y,E,w,u)}else e.gl.texSubImage2D(r,j,f,d,E,w,u)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return c.j.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}},{key:"_getDataType",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof h.a?{data:e.handle,dataType:"buffer"}:e instanceof O?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(t){var e=t.format,n=t.data,r=t.width,i=t.height,a=t.dataFormat,o=t.type,u=t.compressed,s=d.b[e];a=a||s&&s.dataFormat,o=o||s&&s.types[0],u=u||s&&s.compressed;var c=this._deduceImageSize(n,r,i);return{dataFormat:a,type:o,compressed:u,width:r=c.width,height:i=c.height,format:e,data:n}}},{key:"_deduceImageSize",value:function(t,e,n){var r;return r="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},Object(b.a)(r,"Could not deduced texture size"),Object(b.a)(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),Object(b.a)(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Object(b.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(c.i)(this.gl)&&(!(!this.width||!this.height)&&(!Object(v.b)(this.width)||!Object(v.b)(this.height)))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===m.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}]),n}(l.a)},,function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(o=r,u=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(s," */")),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([i]).join("\n")}var o,u,s;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var u=0;u<t.length;u++){var s=[].concat(t[u]);r&&i[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(88),i=n(2),a=n(1),o=n(67),u=n(22),s=n(130),c={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},f={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},l=function(){function t(){var e=this;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];r.forEach((function(t){return e._assign(t)})),Object.freeze(this)}return Object(a.a)(t,null,[{key:"getBytesPerElement",value:function(t){return Object(o.c)(t.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){return Object(u.a)(t.size),Object(o.c)(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Object(r.a)(t,[c].concat(n))}}]),Object(a.a)(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(t=Object(s.a)("Accessor",t,f)).type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}}]),t}()},,,function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"loader assertion failed.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return b})),n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return y})),n.d(e,"d",(function(){return O}));var r,i,a,o=n(8),u=n(11),s=n(0),c=n(30),f=(r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,[0,0,1024,1024]),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),l=function(t,e,n){return e?t.enable(n):t.disable(n)},h=function(t,e,n){return t.hint(n,e)},d=function(t,e,n){return t.pixelStorei(n,e)};function v(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var b=(i={},Object(s.a)(i,3042,l),Object(s.a)(i,32773,(function(t,e){return t.blendColor.apply(t,Object(u.a)(e))})),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,(function(t,e){return t.clearColor.apply(t,Object(u.a)(e))})),Object(s.a)(i,3107,(function(t,e){return t.colorMask.apply(t,Object(u.a)(e))})),Object(s.a)(i,2884,l),Object(s.a)(i,2885,(function(t,e){return t.cullFace(e)})),Object(s.a)(i,2929,l),Object(s.a)(i,2931,(function(t,e){return t.clearDepth(e)})),Object(s.a)(i,2932,(function(t,e){return t.depthFunc(e)})),Object(s.a)(i,2928,(function(t,e){return t.depthRange.apply(t,Object(u.a)(e))})),Object(s.a)(i,2930,(function(t,e){return t.depthMask(e)})),Object(s.a)(i,3024,l),Object(s.a)(i,35723,h),Object(s.a)(i,36006,(function(t,e){var n=Object(c.e)(t)?36009:36160;return t.bindFramebuffer(n,e)})),Object(s.a)(i,2886,(function(t,e){return t.frontFace(e)})),Object(s.a)(i,33170,h),Object(s.a)(i,2849,(function(t,e){return t.lineWidth(e)})),Object(s.a)(i,32823,l),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,l),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,l),Object(s.a)(i,3088,(function(t,e){return t.scissor.apply(t,Object(u.a)(e))})),Object(s.a)(i,2960,l),Object(s.a)(i,2961,(function(t,e){return t.clearStencil(e)})),Object(s.a)(i,2968,(function(t,e){return t.stencilMaskSeparate(1028,e)})),Object(s.a)(i,36005,(function(t,e){return t.stencilMaskSeparate(1029,e)})),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,(function(t,e){return t.viewport.apply(t,Object(u.a)(e))})),Object(s.a)(i,3333,d),Object(s.a)(i,3317,d),Object(s.a)(i,37440,d),Object(s.a)(i,37441,d),Object(s.a)(i,37443,d),Object(s.a)(i,3330,d),Object(s.a)(i,3332,d),Object(s.a)(i,3331,d),Object(s.a)(i,36010,(function(t,e){return t.bindFramebuffer(36008,e)})),Object(s.a)(i,3314,d),Object(s.a)(i,32878,d),Object(s.a)(i,3316,d),Object(s.a)(i,3315,d),Object(s.a)(i,32877,d),Object(s.a)(i,"framebuffer",(function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)})),Object(s.a)(i,"blend",(function(t,e){return e?t.enable(3042):t.disable(3042)})),Object(s.a)(i,"blendColor",(function(t,e){return t.blendColor.apply(t,Object(u.a)(e))})),Object(s.a)(i,"blendEquation",(function(t,e){e=v(e)?e:[e,e],t.blendEquationSeparate.apply(t,Object(u.a)(e))})),Object(s.a)(i,"blendFunc",(function(t,e){e=v(e)&&2===e.length?[].concat(Object(u.a)(e),Object(u.a)(e)):e,t.blendFuncSeparate.apply(t,Object(u.a)(e))})),Object(s.a)(i,"clearColor",(function(t,e){return t.clearColor.apply(t,Object(u.a)(e))})),Object(s.a)(i,"clearDepth",(function(t,e){return t.clearDepth(e)})),Object(s.a)(i,"clearStencil",(function(t,e){return t.clearStencil(e)})),Object(s.a)(i,"colorMask",(function(t,e){return t.colorMask.apply(t,Object(u.a)(e))})),Object(s.a)(i,"cull",(function(t,e){return e?t.enable(2884):t.disable(2884)})),Object(s.a)(i,"cullFace",(function(t,e){return t.cullFace(e)})),Object(s.a)(i,"depthTest",(function(t,e){return e?t.enable(2929):t.disable(2929)})),Object(s.a)(i,"depthFunc",(function(t,e){return t.depthFunc(e)})),Object(s.a)(i,"depthMask",(function(t,e){return t.depthMask(e)})),Object(s.a)(i,"depthRange",(function(t,e){return t.depthRange.apply(t,Object(u.a)(e))})),Object(s.a)(i,"dither",(function(t,e){return e?t.enable(3024):t.disable(3024)})),Object(s.a)(i,"derivativeHint",(function(t,e){t.hint(35723,e)})),Object(s.a)(i,"frontFace",(function(t,e){return t.frontFace(e)})),Object(s.a)(i,"mipmapHint",(function(t,e){return t.hint(33170,e)})),Object(s.a)(i,"lineWidth",(function(t,e){return t.lineWidth(e)})),Object(s.a)(i,"polygonOffsetFill",(function(t,e){return e?t.enable(32823):t.disable(32823)})),Object(s.a)(i,"polygonOffset",(function(t,e){return t.polygonOffset.apply(t,Object(u.a)(e))})),Object(s.a)(i,"sampleCoverage",(function(t,e){return t.sampleCoverage.apply(t,Object(u.a)(e))})),Object(s.a)(i,"scissorTest",(function(t,e){return e?t.enable(3089):t.disable(3089)})),Object(s.a)(i,"scissor",(function(t,e){return t.scissor.apply(t,Object(u.a)(e))})),Object(s.a)(i,"stencilTest",(function(t,e){return e?t.enable(2960):t.disable(2960)})),Object(s.a)(i,"stencilMask",(function(t,e){var n=e=v(e)?e:[e,e],r=Object(o.a)(n,2),i=r[0],a=r[1];t.stencilMaskSeparate(1028,i),t.stencilMaskSeparate(1029,a)})),Object(s.a)(i,"stencilFunc",(function(t,e){var n=e=v(e)&&3===e.length?[].concat(Object(u.a)(e),Object(u.a)(e)):e,r=Object(o.a)(n,6),i=r[0],a=r[1],s=r[2],c=r[3],f=r[4],l=r[5];t.stencilFuncSeparate(1028,i,a,s),t.stencilFuncSeparate(1029,c,f,l)})),Object(s.a)(i,"stencilOp",(function(t,e){var n=e=v(e)&&3===e.length?[].concat(Object(u.a)(e),Object(u.a)(e)):e,r=Object(o.a)(n,6),i=r[0],a=r[1],s=r[2],c=r[3],f=r[4],l=r[5];t.stencilOpSeparate(1028,i,a,s),t.stencilOpSeparate(1029,c,f,l)})),Object(s.a)(i,"viewport",(function(t,e){return t.viewport.apply(t,Object(u.a)(e))})),i);function g(t,e,n){return void 0!==e[t]?e[t]:n[t]}var p={blendEquation:function(t,e,n){return t.blendEquationSeparate(g(32777,e,n),g(34877,e,n))},blendFunc:function(t,e,n){return t.blendFuncSeparate(g(32969,e,n),g(32968,e,n),g(32971,e,n),g(32970,e,n))},polygonOffset:function(t,e,n){return t.polygonOffset(g(32824,e,n),g(10752,e,n))},sampleCoverage:function(t,e,n){return t.sampleCoverage(g(32938,e,n),g(32939,e,n))},stencilFuncFront:function(t,e,n){return t.stencilFuncSeparate(1028,g(2962,e,n),g(2967,e,n),g(2963,e,n))},stencilFuncBack:function(t,e,n){return t.stencilFuncSeparate(1029,g(34816,e,n),g(36003,e,n),g(36004,e,n))},stencilOpFront:function(t,e,n){return t.stencilOpSeparate(1028,g(2964,e,n),g(2965,e,n),g(2966,e,n))},stencilOpBack:function(t,e,n){return t.stencilOpSeparate(1029,g(34817,e,n),g(34818,e,n),g(34819,e,n))}},y={enable:function(t,e){return t(Object(s.a)({},e,!0))},disable:function(t,e){return t(Object(s.a)({},e,!1))},pixelStorei:function(t,e,n){return t(Object(s.a)({},e,n))},hint:function(t,e,n){return t(Object(s.a)({},e,n))},bindFramebuffer:function(t,e,n){var r;switch(e){case 36160:return t((r={},Object(s.a)(r,36006,n),Object(s.a)(r,36010,n),r));case 36009:return t(Object(s.a)({},36006,n));case 36008:return t(Object(s.a)({},36010,n));default:return null}},blendColor:function(t,e,n,r,i){return t(Object(s.a)({},32773,new Float32Array([e,n,r,i])))},blendEquation:function(t,e){var n;return t((n={},Object(s.a)(n,32777,e),Object(s.a)(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var r;return t((r={},Object(s.a)(r,32777,e),Object(s.a)(r,34877,n),r))},blendFunc:function(t,e,n){var r;return t((r={},Object(s.a)(r,32969,e),Object(s.a)(r,32968,n),Object(s.a)(r,32971,e),Object(s.a)(r,32970,n),r))},blendFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(s.a)(a,32969,e),Object(s.a)(a,32968,n),Object(s.a)(a,32971,r),Object(s.a)(a,32970,i),a))},clearColor:function(t,e,n,r,i){return t(Object(s.a)({},3106,new Float32Array([e,n,r,i])))},clearDepth:function(t,e){return t(Object(s.a)({},2931,e))},clearStencil:function(t,e){return t(Object(s.a)({},2961,e))},colorMask:function(t,e,n,r,i){return t(Object(s.a)({},3107,[e,n,r,i]))},cullFace:function(t,e){return t(Object(s.a)({},2885,e))},depthFunc:function(t,e){return t(Object(s.a)({},2932,e))},depthRange:function(t,e,n){return t(Object(s.a)({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t(Object(s.a)({},2930,e))},frontFace:function(t,e){return t(Object(s.a)({},2886,e))},lineWidth:function(t,e){return t(Object(s.a)({},2849,e))},polygonOffset:function(t,e,n){var r;return t((r={},Object(s.a)(r,32824,e),Object(s.a)(r,10752,n),r))},sampleCoverage:function(t,e,n){var r;return t((r={},Object(s.a)(r,32938,e),Object(s.a)(r,32939,n),r))},scissor:function(t,e,n,r,i){return t(Object(s.a)({},3088,new Int32Array([e,n,r,i])))},stencilMask:function(t,e){var n;return t((n={},Object(s.a)(n,2968,e),Object(s.a)(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t(Object(s.a)({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,r){var i;return t((i={},Object(s.a)(i,2962,e),Object(s.a)(i,2967,n),Object(s.a)(i,2963,r),Object(s.a)(i,34816,e),Object(s.a)(i,36003,n),Object(s.a)(i,36004,r),i))},stencilFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(s.a)(a,1028===e?2962:34816,n),Object(s.a)(a,1028===e?2967:36003,r),Object(s.a)(a,1028===e?2963:36004,i),a))},stencilOp:function(t,e,n,r){var i;return t((i={},Object(s.a)(i,2964,e),Object(s.a)(i,2965,n),Object(s.a)(i,2966,r),Object(s.a)(i,34817,e),Object(s.a)(i,34818,n),Object(s.a)(i,34819,r),i))},stencilOpSeparate:function(t,e,n,r,i){var a;return t((a={},Object(s.a)(a,1028===e?2964:34817,n),Object(s.a)(a,1028===e?2965:34818,r),Object(s.a)(a,1028===e?2966:34819,i),a))},viewport:function(t,e,n,r,i){return t(Object(s.a)({},2978,[e,n,r,i]))}},m=function(t,e){return t.isEnabled(e)},O=(a={},Object(s.a)(a,3042,m),Object(s.a)(a,2884,m),Object(s.a)(a,2929,m),Object(s.a)(a,3024,m),Object(s.a)(a,32823,m),Object(s.a)(a,32926,m),Object(s.a)(a,32928,m),Object(s.a)(a,3089,m),Object(s.a)(a,2960,m),Object(s.a)(a,35977,m),a)},,,function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return b}));var r=n(2),i=n(1),a=n(53),o=n(68),u=n(36),s=n(97);function c(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=n.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function f(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];var o=n.apply(void 0,[t.state._updateCache].concat(i)),u=o.valueChanged,s=o.oldValue;return u&&r.apply(void 0,i),s},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function l(t){var e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,u=void 0!==i&&i,s=n.log,c=void 0===s?function(){}:s;Object(r.a)(this,t),this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=u?Object(o.a)(e):Object.assign({},a.c),this.log=c,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Object(u.a)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];Object(o.c)(this.gl,t),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t){Object(u.a)(void 0!==i);var a=t[i],o=this.cache[i];Object(s.a)(a,o)||(n=!0,e=o,r&&!(i in r)&&(r[i]=o),this.cache[i]=a)}return{valueChanged:n,oldValue:e}}}]),t}();function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(u.a)(void 0!==o),!e.state){var s=void 0!==t?t:window,d=s.polyfillContext;for(var v in d&&d(e),e.state=new h(e,{copyState:o}),l(e),a.b){var b=a.b[v];f(e,v,b)}c(e,"getParameter"),c(e,"isEnabled")}return e.state.enable=i,e}function v(t){t.state||d(t,{copyState:!1}),t.state.push()}function b(t){Object(u.a)(t.state),t.state.pop()}}).call(this,n(46))},function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(0),i=n(8),a=n(2),o=n(29),u=n(14),s=n(1),c=n(6),f=n(7),l=n(3),h=n(4),d=n(38),v=n(87),b=n(80),g=n(124),p=n(129),y=n(203),m=n(74),O=n(22);function j(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var k=function(t){Object(c.a)(n,t);var e=x(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)(this,n),(r=e.call(this,t,i)).width=null,r.height=null,r.attachments={},r.readBuffer=36064,r.drawBuffers=[36064],r.ownResources=[],r.initialize(i),Object.seal(Object(o.a)(r)),r}return Object(s.a)(n,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){var t=Object(h.a)(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var t=Object(h.a)(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.colorBufferFloat,r=e.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new n(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),Object(s.a)(n,[{key:"initialize",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,a=t.attachments,o=void 0===a?null:a,u=t.color,s=void 0===u||u,c=t.depth,f=void 0===c||c,l=t.stencil,h=void 0!==l&&l,d=t.check,v=void 0===d||d,b=t.readBuffer,g=void 0===b?void 0:b,p=t.drawBuffers,y=void 0===p?void 0:p;if(Object(O.a)(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,o)for(var m in o){var j=o[m];(Array.isArray(j)?j[0]:j).resize({width:n,height:i})}else o=this._createDefaultAttachments(s,f,h,n,i);this.update({clearAttachments:!0,attachments:o,readBuffer:g,drawBuffers:y}),o&&v&&this.checkStatus()}},{key:"delete",value:function(){var t,e=j(this.ownResources);try{for(e.s();!(t=e.n()).done;){t.value.delete()}}catch(t){e.e(t)}finally{e.f()}return Object(u.a)(Object(l.a)(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(t){var e=t.attachments,n=void 0===e?{}:e,r=t.readBuffer,i=t.drawBuffers,a=t.clearAttachments,o=void 0!==a&&a,u=t.resizeAttachments,s=void 0===u||u;this.attach(n,{clearAttachments:o,resizeAttachments:s});var c=this.gl,f=c.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),c.bindFramebuffer(36160,f||null),this}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height;if(null===this.handle)return Object(O.a)(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&h.j.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}},{key:"attach",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,a=void 0!==r&&r,o=n.resizeAttachments,u=void 0===o||o,s={};a&&Object.keys(this.attachments).forEach((function(t){s[t]=null})),Object.assign(s,t);var c=this.gl.bindFramebuffer(36160,this.handle);for(var f in s){Object(O.a)(void 0!==f,"Misspelled framebuffer binding point?");var l=Number(f),h=s[l],d=h;if(d)if(d instanceof b.a)this._attachRenderbuffer({attachment:l,renderbuffer:d});else if(Array.isArray(h)){var v=Object(i.a)(h,3),g=v[0],p=v[1],y=void 0===p?0:p,m=v[2],j=void 0===m?0:m;d=g,this._attachTexture({attachment:l,texture:g,layer:y,level:j})}else this._attachTexture({attachment:l,texture:d,layer:0,level:0});else this._unattach(l);u&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,c||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((function(t){return!e.attachments[t]})).forEach((function(t){delete e.attachments[t]}))}},{key:"checkStatus",value:function(){this.gl;var t=this.getStatus();if(36053!==t)throw new Error(w(t));return this}},{key:"getStatus",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.depth,r=t.stencil,i=t.drawBuffers,a=void 0===i?[]:i,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&Object(g.a)(this.gl,{color:e,depth:n,stencil:r}),a.forEach((function(t,e){Object(g.b)({drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){return h.j.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return h.j.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return h.j.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return h.j.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return h.j.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return h.j.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(t){var e=t.attachments,n=void 0===e?[]:e,r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a,u=t.width,s=t.height,c=Object(h.a)(this.gl),f=c.bindFramebuffer(36008,this.handle);return 0===i&&0===o&&void 0===u&&void 0===s?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,i,o,u,s),c.bindFramebuffer(36008,f),this}},{key:"getAttachmentParameter",value:function(t,e,n){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(m.a)(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],i={},a=j(r);try{for(a.s();!(t=a.n()).done;){var o=t.value,u=n?Object(m.a)(this.gl,o):o;i[u]=this.getAttachmentParameter(e,o,n)}}catch(t){a.e(t)}finally{a.f()}return i}},{key:"getParameters",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),n={},r=0,i=e;r<i.length;r++){var a=i[r],o=Number(a),u=t?Object(m.a)(this.gl,o):o;n[u]=this.getAttachmentParameters(o,t)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(Object(p.a)(this),"luma-debug-texture"),this}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>h.j.level||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);var n=Object(p.a)(this,{targetMaxHeight:100});return h.j.image({logLevel:t,message:e,image:n},e)(),this}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(t,e,n,i,a){var o,u=null;t&&((u=u||{})[36064]=new v.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:a,mipmaps:!1,parameters:(o={},Object(r.a)(o,10241,9729),Object(r.a)(o,10240,9729),Object(r.a)(o,10242,33071),Object(r.a)(o,10243,33071),o)}),this.ownResources.push(u[36064]));return e&&n?((u=u||{})[33306]=new b.a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(u[33306])):e?((u=u||{})[36096]=new b.a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:a}),this.ownResources.push(u[36096])):n&&Object(O.a)(!1),u}},{key:"_unattach",value:function(t){var e=this.attachments[t];e&&(e instanceof b.a?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}},{key:"_attachRenderbuffer",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.texture,i=t.layer,a=t.level,o=this.gl;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Object(h.a)(o).framebufferTextureLayer(36160,n,r.target,a,i);break;case 34067:var u=function(t){return t<34069?t+34069:t}(i);o.framebufferTexture2D(36160,n,u,r.handle,a);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,a);break;default:Object(O.a)(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(t){var e=Object(h.f)(this.gl);e?e.readBuffer(t):Object(O.a)(36064===t||1029===t,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(t){var e=this.gl,n=Object(h.a)(e);if(n)n.drawBuffers(t);else{var r=e.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(t):Object(O.a)(1===t.length&&(36064===t[0]||1029===t[0]),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(t){var e=Object(y.a)(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(t){return this.gl.bindFramebuffer(36160,t)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),n}(d.a);function w(t){return(k.STATUS||{})[t]||"Framebuffer error ".concat(t)}k.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},,,function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var r="vs",i="fs"},,function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return f}));var r,i=n(8),a=n(0),o=n(22),u=(r={},Object(a.a)(r,5126,[5126,1,"float"]),Object(a.a)(r,35664,[5126,2,"vec2"]),Object(a.a)(r,35665,[5126,3,"vec3"]),Object(a.a)(r,35666,[5126,4,"vec4"]),Object(a.a)(r,5124,[5124,1,"int"]),Object(a.a)(r,35667,[5124,2,"ivec2"]),Object(a.a)(r,35668,[5124,3,"ivec3"]),Object(a.a)(r,35669,[5124,4,"ivec4"]),Object(a.a)(r,5125,[5125,1,"uint"]),Object(a.a)(r,36294,[5125,2,"uvec2"]),Object(a.a)(r,36295,[5125,3,"uvec3"]),Object(a.a)(r,36296,[5125,4,"uvec4"]),Object(a.a)(r,35670,[5126,1,"bool"]),Object(a.a)(r,35671,[5126,2,"bvec2"]),Object(a.a)(r,35672,[5126,3,"bvec3"]),Object(a.a)(r,35673,[5126,4,"bvec4"]),Object(a.a)(r,35674,[5126,8,"mat2"]),Object(a.a)(r,35685,[5126,8,"mat2x3"]),Object(a.a)(r,35686,[5126,8,"mat2x4"]),Object(a.a)(r,35675,[5126,12,"mat3"]),Object(a.a)(r,35687,[5126,12,"mat3x2"]),Object(a.a)(r,35688,[5126,12,"mat3x4"]),Object(a.a)(r,35676,[5126,16,"mat4"]),Object(a.a)(r,35689,[5126,16,"mat4x2"]),Object(a.a)(r,35690,[5126,16,"mat4x3"]),r);function s(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(o.a)(!1),0}}function c(t){var e=u[t];if(!e)return null;var n=Object(i.a)(e,2);return{type:n[0],components:n[1]}}function f(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=5126}for(var n in u){var r=Object(i.a)(u[n],3),a=r[0],o=r[1],s=r[2];if(a===t&&o===e)return{glType:n,name:s}}return null}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return s}));var r=n(0),i=n(52);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t){if(!t)return!1;Array.isArray(t)&&(t=t[0]);var e=t.parseTextSync||t.parseSync||t.parse||t.parseStream||t.parseInBatches,n=t.options&&t.options[t.id];return e=e||n&&n.workerUrl}function s(t){var e;return Object(i.a)(t,"null loader"),Object(i.a)(u(t),"invalid loader"),Array.isArray(t)&&(e=t[1],t=o(o({},t=t[0]),{},{options:o(o({},t.options),e)})),t.extension&&(t.extensions=t.extensions||t.extension,delete t.extension),Array.isArray(t.extensions)||(t.extensions=[t.extensions]),Object(i.a)(t.extensions&&t.extensions.length>0&&t.extensions[0]),(t.parseTextSync||t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return T})),n.d(e,"a",(function(){return S}));var r=n(0),i=n(212),a=n(21),o=n(5),u=n.n(o),s=n(12),c="",f={};function l(t){for(var e in f)if(t.startsWith(e)){var n=f[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(c).concat(t)),t}var h=n(79);function d(t){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,!e.headers.get("Content-Type").includes("application/json")){t.next=10;break}return t.t0=n,t.next=7,e.text();case 7:n=t.t0+=t.sent,t.next=11;break;case 10:n+=e.statusText;case 11:t.next=16;break;case 13:return t.prev=13,t.t1=t.catch(1),t.abrupt("return",n);case 16:return t.abrupt("return",n);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function b(t){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(u.a.mark((function t(e){var n,r,i=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},"string"==typeof e){t.next=5;break}return t.next=4,Object(h.b)(e);case 4:return t.abrupt("return",t.sent);case 5:return e=l(e),t.next=8,fetch(e,n);case 8:if((r=t.sent).ok||!n.throws){t.next=15;break}return t.t0=Error,t.next=13,d(r);case 13:throw t.t1=t.sent,new t.t0(t.t1);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=n(2),y=n(1),m=function(){function t(){Object(p.a)(this,t)}return Object(y.a)(t,[{key:"log",value:function(){return function(t){}}},{key:"info",value:function(){return function(t){}}},{key:"warn",value:function(){return function(t){}}},{key:"error",value:function(){return function(t){}}}]),t}();function O(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={baseUri:"",fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function t(){Object(p.a)(this,t),this.console=console}return Object(y.a)(t,[{key:"log",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.log).bind.apply(t,[this.console].concat(n))}},{key:"info",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.info).bind.apply(t,[this.console].concat(n))}},{key:"warn",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.warn).bind.apply(t,[this.console].concat(n))}},{key:"error",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.console.error).bind.apply(t,[this.console].concat(n))}}]),t}()),metadata:!1,transforms:[],reuseWorkers:!0},w={dataType:"(no longer used)",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},A=function(){i.a.loaders=i.a.loaders||{};var t=i.a.loaders;return t._state=t._state||{},t._state},E=function(){var t=A();return t.globalOptions=t.globalOptions||x({},k),t.globalOptions};function T(t,e,n,r){return n=n||[],function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;I(t,null,n,k,w,e);var r,i=O(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t&&t[a.id]||{},u=a.options&&a.options[a.id]||{},s=a.defaultOptions&&a.defaultOptions[a.id]||{};I(o,a.id,n,u,s,e)}}catch(t){i.e(t)}finally{i.f()}}(t,n=Array.isArray(n)?n:[n]),P(e,t,r)}function S(t,e){var n=E(),r=t.fetch||n.fetch;return"function"==typeof r?r:Object(a.f)(r)?function(t){return b(t,r)}:e&&e.fetch?e.fetch:function(e){return b(e,t)}}function I(t,e,n,r,i,o){var u=e||"Top level",s=e?"".concat(e,"."):"";for(var c in t){var f=!e&&Object(a.f)(t[c]);if(!(c in r))if(c in i)n.warn("".concat(u," loader option '").concat(s).concat(c,"' deprecated, use '").concat(i[c],"'"));else if(!f){var l=L(c,o);n.warn("".concat(u," loader option '").concat(s).concat(c,"' not recognized. ").concat(l))}}}function L(t,e){var n,r=t.toLowerCase(),i="",a=O(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;for(var u in o.options){if(t===u)return"Did you mean '".concat(o.id,".").concat(u,"'?");var s=u.toLowerCase();(r.startsWith(s)||s.startsWith(r))&&(i=i||"Did you mean '".concat(o.id,".").concat(u,"'?"))}}}catch(t){a.e(t)}finally{a.f()}return i}function P(t,e,n){var r=x({},t.options||{});return null===r.log&&(r.log=new m),R(r,E()),R(r,e),function(t,e){e&&!t.baseUri&&(t.baseUri=e)}(r,n),r}function R(t,e){for(var n in e)if(n in e){var r=e[n];Object(a.g)(r)&&Object(a.g)(t[n])?t[n]=x(x({},t[n]),e[n]):t[n]=e[n]}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return h}));var r,i,a,o=n(0),u=n(4),s=(r={},Object(o.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(o.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(o.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(o.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(o.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(o.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(o.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(o.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(o.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r),c=(i={},Object(o.a)(i,6403,1),Object(o.a)(i,36244,1),Object(o.a)(i,33319,2),Object(o.a)(i,33320,2),Object(o.a)(i,6407,3),Object(o.a)(i,36248,3),Object(o.a)(i,6408,4),Object(o.a)(i,36249,4),Object(o.a)(i,6402,1),Object(o.a)(i,34041,1),Object(o.a)(i,6406,1),Object(o.a)(i,6409,1),Object(o.a)(i,6410,2),i),f=(a={},Object(o.a)(a,5126,4),Object(o.a)(a,5125,4),Object(o.a)(a,5124,4),Object(o.a)(a,5123,2),Object(o.a)(a,5122,2),Object(o.a)(a,5131,2),Object(o.a)(a,5120,1),Object(o.a)(a,5121,1),a);function l(t,e){var n=s[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(u.i)(t)&&n.gl2||n.gl1;return"string"==typeof r?t.getExtension(r):r}function h(t,e){var n=s[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},,function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return o}));function r(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,r=void 0===n||n;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(t){var e=t.data,n=t.width,r=t.height,i=t.bytesPerPixel,a=void 0===i?4:i,o=t.temp,u=n*a;o=o||new Uint8Array(u);for(var s=0;s<r/2;++s){var c=s*u,f=(r-s-1)*u;o.set(e.subarray(c,c+u)),e.copyWithin(c,f,f+u),e.set(o,f)}}function o(t){for(var e=t.data,n=t.width,r=t.height,i=Math.round(n/2),a=Math.round(r/2),o=new Uint8Array(i*a*4),u=0;u<a;u++)for(var s=0;s<i;s++)for(var c=0;c<4;c++)o[4*(u*i+s)+c]=e[4*(2*u*n+2*s)+c];return{data:o,width:i,height:a}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return d}));var r=n(53),i=n(56),a=n(36),o=n(30),u=n(97);function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(Object(a.a)(Object(o.d)(t),"setParameters requires a WebGL context"),!Object(u.b)(e)){var n={};for(var i in e){var s=Number(i),c=r.e[i];c&&("string"==typeof c?n[c]=!0:c(t,e[i],s))}var f=t.state&&t.state.cache;if(f)for(var l in n){(0,r.a[l])(t,e,f)}}}function l(t,e){if("number"==typeof(e=e||r.c)){var n=e,i=r.d[n];return i?i(t,n):t.getParameter(n)}var a,o={},u=s(Array.isArray(e)?e:Object.keys(e));try{for(u.s();!(a=u.n()).done;){var c=a.value,f=r.d[c];o[c]=f?f(t,Number(c)):t.getParameter(Number(c))}}catch(t){u.e(t)}finally{u.f()}return o}function h(t){f(t,r.c)}function d(t,e,n){if(Object(u.b)(e))return n(t);var r,a=e.nocatch,o=void 0===a||a;if(Object(i.b)(t),f(t,e),o)r=n(t),Object(i.a)(t);else try{r=n(t)}finally{Object(i.a)(t)}return r}},,,,function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],a=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/a,t[1]=(n[1]*r+n[5]*i)/a,t}function i(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a||1;return t[0]=(n[0]*r+n[4]*i+n[8]*a)/o,t[1]=(n[1]*r+n[5]*i+n[9]*a)/o,t[2]=(n[2]*r+n[6]*i+n[10]*a)/o,t}function a(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function o(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*a,t[1]=n[1]*r+n[4]*i+n[7]*a,t[2]=n[2]*r+n[5]*i+n[8]*a,t[3]=e[3],t}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(21),i=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,a=/^([-\w.]+\/[-\w.+]+)/;function o(t){if("string"!=typeof t)return"";var e=t.match(i);return e?e[1]:""}var u=/\?.*/;function s(t){if(Object(r.i)(t)){var e=function(t){if("string"!=typeof t)return"";var e=t.match(a);return e?e[1]:t}(t.headers.get("content-type")),n=o(t.url);return{url:f(t.url||""),type:e||n||null}}return Object(r.b)(t)?{url:f(t.name||""),type:t.type||""}:"string"==typeof t?{url:f(t),type:o(t)}:{url:"",type:""}}function c(t){return Object(r.i)(t)?t.headers["content-length"]||-1:Object(r.b)(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function f(t){return t.replace(u,"")}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n(22);function i(t,e){if("string"!=typeof e)return e;var n=Number(e);if(!isNaN(n))return n;var i=t[e=e.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function a(t,e){for(var n in e=Number(e),t)if(t[n]===e)return"GL.".concat(n);return String(e)}},,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return f}));var r=n(5),i=n.n(r),a=n(12),o=n(21),u=n(73);function s(t){return c.apply(this,arguments)}function c(){return(c=Object(a.a)(i.a.mark((function t(e){var n,r,a,s,c,f,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(o.i)(e)){t.next=2;break}return t.abrupt("return",e);case 2:return n={},(r=Object(u.a)(e))>=0&&(n["content-length"]=String(r)),a=Object(u.b)(e),s=a.url,(c=a.type)&&(n["content-type"]=c),t.next=9,v(e);case 9:return(f=t.sent)&&(n["x-first-bytes"]=f),"string"==typeof e&&(e=(new TextEncoder).encode(e)),l=new Response(e,{headers:n}),Object.defineProperty(l,"url",{value:s}),t.abrupt("return",l);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,h(e);case 3:throw n=t.sent,new Error(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(i.a.mark((function t(e){var n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),t.prev=1,r=e.headers.get("Content-Type"),a=e.statusText,!r.includes("application/json")){t.next=11;break}return t.t0=a,t.t1=" ",t.next=9,e.text();case 9:t.t2=t.sent,a=t.t0+=t.t1.concat.call(t.t1,t.t2);case 11:n=(n+=a).length>60?"".concat(n.slice(60),"..."):n,t.next=17;break;case 15:t.prev=15,t.t3=t.catch(1);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}function v(t){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(i.a.mark((function t(e){var n,r,a,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=5,"string"!=typeof e){t.next=3;break}return t.abrupt("return","data:,".concat(e.slice(0,n)));case 3:if(!(e instanceof Blob)){t.next=8;break}return r=e.slice(0,5),t.next=7,new Promise((function(t){var e=new FileReader;e.onload=function(e){return t(e.target&&e.target.result)},e.readAsDataURL(r)}));case 7:return t.abrupt("return",t.sent);case 8:if(!(e instanceof ArrayBuffer)){t.next=12;break}return a=e.slice(0,n),o=g(a),t.abrupt("return","data:base64,".concat(o));case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){for(var e="",n=new Uint8Array(t),r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r,i=n(2),a=n(29),o=n(1),u=n(6),s=n(7),c=n(3),f=n(38),l=n(0),h="EXT_color_buffer_float",d=(r={},Object(l.a)(r,33189,{bpp:2}),Object(l.a)(r,33190,{gl2:!0,bpp:3}),Object(l.a)(r,36012,{gl2:!0,bpp:4}),Object(l.a)(r,36168,{bpp:1}),Object(l.a)(r,34041,{bpp:4}),Object(l.a)(r,35056,{gl2:!0,bpp:4}),Object(l.a)(r,36013,{gl2:!0,bpp:5}),Object(l.a)(r,32854,{bpp:2}),Object(l.a)(r,36194,{bpp:2}),Object(l.a)(r,32855,{bpp:2}),Object(l.a)(r,33321,{gl2:!0,bpp:1}),Object(l.a)(r,33330,{gl2:!0,bpp:1}),Object(l.a)(r,33329,{gl2:!0,bpp:1}),Object(l.a)(r,33332,{gl2:!0,bpp:2}),Object(l.a)(r,33331,{gl2:!0,bpp:2}),Object(l.a)(r,33334,{gl2:!0,bpp:4}),Object(l.a)(r,33333,{gl2:!0,bpp:4}),Object(l.a)(r,33323,{gl2:!0,bpp:2}),Object(l.a)(r,33336,{gl2:!0,bpp:2}),Object(l.a)(r,33335,{gl2:!0,bpp:2}),Object(l.a)(r,33338,{gl2:!0,bpp:4}),Object(l.a)(r,33337,{gl2:!0,bpp:4}),Object(l.a)(r,33340,{gl2:!0,bpp:8}),Object(l.a)(r,33339,{gl2:!0,bpp:8}),Object(l.a)(r,32849,{gl2:!0,bpp:3}),Object(l.a)(r,32856,{gl2:!0,bpp:4}),Object(l.a)(r,32857,{gl2:!0,bpp:4}),Object(l.a)(r,36220,{gl2:!0,bpp:4}),Object(l.a)(r,36238,{gl2:!0,bpp:4}),Object(l.a)(r,36975,{gl2:!0,bpp:4}),Object(l.a)(r,36214,{gl2:!0,bpp:8}),Object(l.a)(r,36232,{gl2:!0,bpp:8}),Object(l.a)(r,36226,{gl2:!0,bpp:16}),Object(l.a)(r,36208,{gl2:!0,bpp:16}),Object(l.a)(r,33325,{gl2:h,bpp:2}),Object(l.a)(r,33327,{gl2:h,bpp:4}),Object(l.a)(r,34842,{gl2:h,bpp:8}),Object(l.a)(r,33326,{gl2:h,bpp:4}),Object(l.a)(r,33328,{gl2:h,bpp:8}),Object(l.a)(r,34836,{gl2:h,bpp:16}),Object(l.a)(r,35898,{gl2:h,bpp:4}),r),v=n(4),b=n(22);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}function p(t,e,n){var r=n[e];if(!r)return!1;var i=Object(v.i)(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}var y=function(t){Object(u.a)(n,t);var e=g(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,n),(r=e.call(this,t,o)).initialize(o),Object.seal(Object(a.a)(r)),r}return Object(o.a)(n,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null},n=e.format;return!n||p(t,n,d)}},{key:"getSamplesForFormat",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),Object(o.a)(n,[{key:"initialize",value:function(t){var e=t.format,n=t.width,r=void 0===n?1:n,i=t.height,a=void 0===i?1:i,o=t.samples,u=void 0===o?0:o;return Object(b.a)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==u&&Object(v.i)(this.gl)?this.gl.renderbufferStorageMultisample(36161,u,e,r,a):this.gl.renderbufferStorage(36161,e,r,a),this.format=e,this.width=r,this.height=a,this.samples=u,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*d[this.format].bpp),this}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:"_syncHandle",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}]),n}(f.a)},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(2),i=n(1),a=n(6),o=n(7),u=n(3),s=n(160),c=n(19),f=n(41);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(a.a)(n,t);var e=l(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"to",value:function(t){return t===this?this:Object(c.e)(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(c.b)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(c.d)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(c.c)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]+=a[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]-=a[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}},{key:"multiplyByScalar",value:function(t){return this.scale(t)}},{key:"check",value:function(){if(c.b.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:"ELEMENTS",get:function(){return Object(f.a)(!1),0}},{key:"RANK",get:function(){return Object(f.a)(!1),0}},{key:"elements",get:function(){return this}}]),n}(Object(s.a)(Array))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(2),i=n(29),a=n(1),o=n(6),u=n(7),s=n(3),c=n(4),f=n(43),l=n(22),h="";function d(t,e){return Object(l.a)("string"==typeof t),t=h+t,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(t,".")))},i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(t){r(t)}}))}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var b=function(t){Object(o.a)(n,t);var e=v(n);function n(t){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,n),Object(c.b)(t),(o instanceof Promise||"string"==typeof o)&&(o={data:o}),"string"==typeof o.data&&(o=Object.assign({},o,{data:d(o.data)})),(a=e.call(this,t,Object.assign({},o,{target:3553}))).initialize(o),Object.seal(Object(i.a)(a)),a}return Object(a.a)(n,null,[{key:"isSupported",value:function(t,e){return f.a.isSupported(t,e)}}]),n}(f.a)},,,function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return l}));var r,i,a=n(0),o=n(36),u=n(30),s=function(t){return Object(u.e)(t)?void 0:0},c=(r={},Object(a.a)(r,3074,(function(t){return Object(u.e)(t)?void 0:36064})),Object(a.a)(r,35723,(function(t){return Object(u.e)(t)?void 0:4352})),Object(a.a)(r,35977,s),Object(a.a)(r,32937,s),Object(a.a)(r,36795,(function(t,e){var n=Object(u.e)(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0})),Object(a.a)(r,37445,(function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(a.a)(r,37446,(function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(a.a)(r,34047,(function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(a.a)(r,32883,s),Object(a.a)(r,35071,s),Object(a.a)(r,37447,s),Object(a.a)(r,36063,(function(t,e){if(!Object(u.e)(t)){var n=t.getExtension("WEBGL_draw_buffers");return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(a.a)(r,35379,s),Object(a.a)(r,35374,s),Object(a.a)(r,35377,s),Object(a.a)(r,34852,(function(t){if(!Object(u.e)(t)){var e=t.getExtension("WEBGL_draw_buffers");return e?e.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(a.a)(r,36203,(function(t){return t.getExtension("OES_element_index")?2147483647:65535})),Object(a.a)(r,33001,(function(t){return t.getExtension("OES_element_index")?16777216:65535})),Object(a.a)(r,33e3,(function(t){return 16777216})),Object(a.a)(r,37157,s),Object(a.a)(r,35373,s),Object(a.a)(r,35657,s),Object(a.a)(r,36183,s),Object(a.a)(r,37137,s),Object(a.a)(r,34045,s),Object(a.a)(r,35978,s),Object(a.a)(r,35979,s),Object(a.a)(r,35968,s),Object(a.a)(r,35376,s),Object(a.a)(r,35375,s),Object(a.a)(r,35659,s),Object(a.a)(r,37154,s),Object(a.a)(r,35371,s),Object(a.a)(r,35658,s),Object(a.a)(r,35076,s),Object(a.a)(r,35077,s),Object(a.a)(r,35380,s),r);var f=(i={},Object(a.a)(i,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Object(o.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(a.a)(i,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,e){Object(o.a)(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(a.a)(i,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o.a)(!1)}}),Object(a.a)(i,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Object(o.a)(!1)},deleteQuery:function(){Object(o.a)(!1)},beginQuery:function(){Object(o.a)(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},getQueryObject:function(){}}),i),l={readBuffer:function(t,e,n){Object(u.e)(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,a=function(t,e){return{webgl2:Object(u.e)(t),ext:t.getExtension(e)}}(t,"ANGLE_instanced_arrays"),o=a.webgl2,s=a.ext;switch(r){case 35069:i=!!o&&void 0;break;case 35070:i=o||s?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!Object(u.e)(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){if(!Object(u.e)(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter:function(t,e,n,r){switch(r){case 34046:var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){var r=c[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:function(t,e,n,r){return e(n,r)}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(22),i={};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";i[t]=i[t]||1;var e=i[t]++;return"".concat(t,"-").concat(e)}function o(t){return Object(r.a)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function u(t){var e=!0;for(var n in t){e=!1;break}return e}},,,function(t,e,n){"use strict";(function(t){function r(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){var n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,"a",(function(){return r}))}).call(this,n(55))},,,function(t,e,n){"use strict";function r(t){for(var e in t)return!1;return!0}function i(t,e){if(t===e)return!0;var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));var i=n(13),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},o=a.global||a.self||a.window,u="object"!==(void 0===r?"undefined":Object(i.a)(r))||"[object process]"!==String(r)||r.browser,s=void 0!==r&&r.version&&r.version.match(/v([0-9]*)/);s&&parseFloat(s[1])}).call(this,n(46),n(55))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),i=n(1),a=n(4),o=n(128),u=n(24),s=new(function(){function t(){Object(r.a)(this,t),this.stats=new Map}return Object(i.a)(t,[{key:"get",value:function(t){return this.stats.has(t)||this.stats.set(t,new o.a({id:t})),this.stats.get(t)}}]),t}());if(u.global.luma&&"8.4.4"!==u.global.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(u.global.luma.VERSION," vs ").concat("8.4.4"));u.global.luma||(Object(u.isBrowser)()&&a.j.log(1,"luma.gl ".concat("8.4.4"," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),u.global.luma=u.global.luma||{VERSION:"8.4.4",version:"8.4.4",log:a.j,stats:s,globals:{modules:{},nodeIO:{}}});u.global.luma},,function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return q})),n.d(e,"d",(function(){return U}));var r=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),i=n(2),a=n(1),o=n(147),u=new o.a,s=new o.a,c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(i.a)(this,t),r=r||u.copy(e).add(n).scale(.5),this.center=new o.a(r),this.halfDiagonal=new o.a(n).subtract(this.center),this.minimum=new o.a(e),this.maximum=new o.a(n)}return Object(a.a)(t,[{key:"clone",value:function(){return new t(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}},{key:"intersectPlane",value:function(t){var e=this.halfDiagonal,n=s.from(t.normal),i=e.x*Math.abs(n.x)+e.y*Math.abs(n.y)+e.z*Math.abs(n.z),a=this.center.dot(n)+t.distance;return a-i>0?r.INSIDE:a+i<0?r.OUTSIDE:r.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e,n=u.from(t).subtract(this.center),r=this.halfDiagonal,i=0;return(e=Math.abs(n.x)-r.x)>0&&(i+=e*e),(e=Math.abs(n.y)-r.y)>0&&(i+=e*e),(e=Math.abs(n.z)-r.z)>0&&(i+=e*e),i}}]),t}(),f=n(16),l=new o.a,h=new o.a,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.a)(this,t),this.radius=-0,this.center=new o.a,this.fromCenterRadius(e,n)}return Object(a.a)(t,[{key:"fromCenterRadius",value:function(t,e){return this.center.from(t),this.radius=e,this}},{key:"fromCornerPoints",value:function(t,e){return e=l.from(e),this.center=(new o.a).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}},{key:"clone",value:function(){return new t(this.center,this.radius)}},{key:"union",value:function(t){var e=this.center,n=this.radius,r=t.center,i=t.radius,a=l.copy(r).subtract(e),o=a.magnitude();if(n>=o+i)return this.clone();if(i>=o+n)return t.clone();var u=.5*(n+o+i);return h.copy(a).scale((-n+u)/o).add(e),this.center.copy(h),this.radius=u,this}},{key:"expand",value:function(t){var e=(t=l.from(t)).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}},{key:"intersectPlane",value:function(t){var e=this.center,n=this.radius,i=t.normal.dot(e)+t.distance;return i<-n?r.OUTSIDE:i<n?r.INTERSECTING:r.INSIDE}},{key:"transform",value:function(t){this.center.transform(t);var e=f.e(l,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(t){return(t=l.from(t)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}}]),t}(),v=n(11),b=n(131),g=n(132),p=new o.a,y=new o.a,m=new o.a,O=new o.a,j=new o.a,_=new o.a,x=new o.a,k=new o.a,w=new o.a,A=new o.a,E=0,T=1,S=2,I=3,L=4,P=5,R=6,M=7,C=8,D=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Object(i.a)(this,t),this.center=(new o.a).from(e),this.halfAxes=new b.a(n)}Object(a.a)(t,[{key:"fromCenterHalfSizeQuaternion",value:function(t,e,n){var r=new g.a(n),i=(new b.a).fromQuaternion(r);return i[0]=i[0]*e[0],i[1]=i[1]*e[0],i[2]=i[2]*e[0],i[3]=i[3]*e[1],i[4]=i[4]*e[1],i[5]=i[5]*e[1],i[6]=i[6]*e[2],i[7]=i[7]*e[2],i[8]=i[8]*e[2],this.center=(new o.a).from(t),this.halfAxes=i,this}},{key:"clone",value:function(){return new t(this.center,this.halfAxes)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}},{key:"getBoundingSphere",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d,e=this.halfAxes,n=e.getColumn(0,k),r=e.getColumn(1,w),i=e.getColumn(2,A),a=p.copy(n).add(r).add(i);return t.center.copy(this.center),t.radius=a.magnitude(),t}},{key:"intersectPlane",value:function(t){var e=this.center,n=t.normal,i=this.halfAxes,a=n.x,o=n.y,u=n.z,s=Math.abs(a*i[E]+o*i[T]+u*i[S])+Math.abs(a*i[I]+o*i[L]+u*i[P])+Math.abs(a*i[R]+o*i[M]+u*i[C]),c=n.dot(e)+t.distance;return c<=-s?r.OUTSIDE:c>=s?r.INSIDE:r.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e=y.from(t).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,m),i=n.getColumn(1,O),a=n.getColumn(2,j),o=r.magnitude(),u=i.magnitude(),s=a.magnitude();r.normalize(),i.normalize(),a.normalize();var c,f=0;return(c=Math.abs(e.dot(r))-o)>0&&(f+=c*c),(c=Math.abs(e.dot(i))-u)>0&&(f+=c*c),(c=Math.abs(e.dot(a))-s)>0&&(f+=c*c),f}},{key:"computePlaneDistances",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=this.center,o=this.halfAxes,u=o.getColumn(0,m),s=o.getColumn(1,O),c=o.getColumn(2,j),f=_.copy(u).add(s).add(c).add(a),l=x.copy(f).subtract(t),h=e.dot(l);return r=Math.min(h,r),i=Math.max(h,i),f.copy(a).add(u).add(s).subtract(c),l.copy(f).subtract(t),h=e.dot(l),r=Math.min(h,r),i=Math.max(h,i),f.copy(a).add(u).subtract(s).add(c),l.copy(f).subtract(t),h=e.dot(l),r=Math.min(h,r),i=Math.max(h,i),f.copy(a).add(u).subtract(s).subtract(c),l.copy(f).subtract(t),h=e.dot(l),r=Math.min(h,r),i=Math.max(h,i),a.copy(f).subtract(u).add(s).add(c),l.copy(f).subtract(t),h=e.dot(l),r=Math.min(h,r),i=Math.max(h,i),a.copy(f).subtract(u).add(s).subtract(c),l.copy(f).subtract(t),h=e.dot(l),r=Math.min(h,r),i=Math.max(h,i),a.copy(f).subtract(u).subtract(s).add(c),l.copy(f).subtract(t),h=e.dot(l),r=Math.min(h,r),i=Math.max(h,i),a.copy(f).subtract(u).subtract(s).subtract(c),l.copy(f).subtract(t),h=e.dot(l),r=Math.min(h,r),i=Math.max(h,i),n[0]=r,n[1]=i,n}},{key:"getTransform",value:function(){}},{key:"halfSize",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new o.a(t).len(),new o.a(e).len(),new o.a(n).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new o.a(t).normalize(),i=new o.a(e).normalize(),a=new o.a(n).normalize();return(new g.a).fromMatrix3(new b.a([].concat(Object(v.a)(r),Object(v.a)(i),Object(v.a)(a))))}}])}(),n(41)),B=n(19),N=new o.a,F=new o.a,U=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.a)(this,t),this.normal=new o.a,this.distance=-0,this.fromNormalDistance(e,n)}return Object(a.a)(t,[{key:"fromNormalDistance",value:function(t,e){return Object(D.a)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}},{key:"fromPointNormal",value:function(t,e){t=N.from(t),this.normal.from(e).normalize();var n=-this.normal.dot(t);return this.distance=n,this}},{key:"fromCoefficients",value:function(t,e,n,r){return this.normal.set(t,e,n),Object(D.a)(Object(B.c)(this.normal.len(),1)),this.distance=r,this}},{key:"clone",value:function(e){return new t(this.normal,this.distance)}},{key:"equals",value:function(t){return Object(B.c)(this.distance,t.distance)&&Object(B.c)(this.normal,t.normal)}},{key:"getPointDistance",value:function(t){return this.normal.dot(t)+this.distance}},{key:"transform",value:function(t){var e=F.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}},{key:"projectPointOntoPlane",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=N.from(t);var n=this.getPointDistance(t),r=F.copy(this.normal).scale(n);return t.subtract(r).to(e)}}]),t}();function z(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var G=[new o.a([1,0,0]),new o.a([0,1,0]),new o.a([0,0,1])],W=new o.a,H=new o.a,q=(new U(new o.a(1,0,0),0),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(i.a)(this,t),this.planes=e,Object(D.a)(this.planes.every((function(t){return t instanceof U})))}return Object(a.a)(t,null,[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),Object(a.a)(t,[{key:"fromBoundingSphere",value:function(t){this.planes.length=2*G.length;var e,n=t.center,r=t.radius,i=0,a=z(G);try{for(a.s();!(e=a.n()).done;){var o=e.value,u=this.planes[i],s=this.planes[i+1];u||(u=this.planes[i]=new U),s||(s=this.planes[i+1]=new U);var c=W.copy(o).scale(-r).add(n);o.dot(c);u.fromPointNormal(c,o);var f=W.copy(o).scale(r).add(n),l=H.copy(o).negate();l.dot(f);s.fromPointNormal(f,l),i+=2}}catch(t){a.e(t)}finally{a.f()}return this}},{key:"computeVisibility",value:function(t){Object(D.a)(t);var e,n=r.INSIDE,i=z(this.planes);try{for(i.s();!(e=i.n()).done;){var a=e.value;switch(t.intersectPlane(a)){case r.OUTSIDE:return r.OUTSIDE;case r.INTERSECTING:n=r.INTERSECTING}}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(e,n){if(Object(D.a)(e,"boundingVolume is required."),Object(D.a)(Number.isFinite(n),"parentPlaneMask is required."),n===t.MASK_OUTSIDE||n===t.MASK_INSIDE)return n;for(var i=t.MASK_INSIDE,a=this.planes,o=0;o<this.planes.length;++o){var u=o<31?1<<o:0;if(!(o<31&&0==(n&u))){var s=a[o],c=e.intersectPlane(s);if(c===r.OUTSIDE)return t.MASK_OUTSIDE;c===r.INTERSECTING&&(i|=u)}}return i}}]),t}()),X=n(0),Z=n(133);function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){Object(X.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K=new o.a,$=new o.a,J=new o.a,tt=new o.a,et=new o.a,nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),e=Y({near:1,far:5e8},e),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this._cullingVolume=new q([new U,new U,new U,new U,new U,new U]),this._perspectiveMatrix=new Z.a,this._infinitePerspective=new Z.a}return Object(a.a)(t,[{key:"clone",value:function(){return new t({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(e){return e&&e instanceof t&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far}},{key:"computeCullingVolume",value:function(t,e,n){Object(D.a)(t,"position is required."),Object(D.a)(e,"direction is required."),Object(D.a)(n,"up is required.");var r=this._cullingVolume.planes;n=K.copy(n).normalize();var i=$.copy(e).cross(n).normalize(),a=J.copy(e).multiplyByScalar(this.near).add(t),u=tt.copy(e).multiplyByScalar(this.far).add(t),s=et;return s.copy(i).multiplyByScalar(this.left).add(a).subtract(t).cross(n),r[0].fromPointNormal(t,s),s.copy(i).multiplyByScalar(this.right).add(a).subtract(t).cross(n).negate(),r[1].fromPointNormal(t,s),s.copy(n).multiplyByScalar(this.bottom).add(a).subtract(t).cross(i).negate(),r[2].fromPointNormal(t,s),s.copy(n).multiplyByScalar(this.top).add(a).subtract(t).cross(i),r[3].fromPointNormal(t,s),s=(new o.a).copy(e),r[4].fromPointNormal(a,s),s.negate(),r[5].fromPointNormal(u,s),this._cullingVolume}},{key:"getPixelDimensions",value:function(t,e,n,r){rt(this),Object(D.a)(Number.isFinite(t)&&Number.isFinite(e)),Object(D.a)(t>0),Object(D.a)(e>0),Object(D.a)(n>0),Object(D.a)(r);var i=1/this.near,a=this.top*i,o=2*n*a/e,u=2*n*(a=this.right*i)/t;return r.x=u,r.y=o,r}},{key:"projectionMatrix",get:function(){return rt(this),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return rt(this),this._infinitePerspective}}]),t}();function rt(t){Object(D.a)(Number.isFinite(t.right)&&Number.isFinite(t.left)&&Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t.top,n=t.bottom,r=t.right,i=t.left,a=t.near,o=t.far;e===t._top&&n===t._bottom&&i===t._left&&r===t._right&&a===t._near&&o===t._far||(Object(D.a)(t.near>0&&t.near<t.far,"near must be greater than zero and less than far."),t._left=i,t._right=r,t._top=e,t._bottom=n,t._near=a,t._far=o,t._perspectiveMatrix=(new Z.a).frustum({left:i,right:r,bottom:n,top:e,near:a,far:o}),t._infinitePerspective=(new Z.a).frustum({left:i,right:r,bottom:n,top:e,near:a,far:1/0}))}function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){Object(X.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),e=at({near:1,far:5e8,xOffset:0,yOffset:0},e),this._offCenterFrustum=new nt,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this.xOffset=e.xOffset,this._xOffset=this.xOffset,this.yOffset=e.yOffset,this._yOffset=this.yOffset}Object(a.a)(t,[{key:"clone",value:function(){return new t({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(e){return null!=e&&e instanceof t&&(ot(this),ot(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this.near===e.near&&this.far===e.far&&this._offCenterFrustum.equals(e._offCenterFrustum))}},{key:"computeCullingVolume",value:function(t,e,n){return ot(this),this._offCenterFrustum.computeCullingVolume(t,e,n)}},{key:"getPixelDimensions",value:function(t,e,n,r){return ot(this),this._offCenterFrustum.getPixelDimensions(t,e,n,r)}},{key:"projectionMatrix",get:function(){return ot(this),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return ot(this),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return ot(this),this._fovy}},{key:"sseDenominator",get:function(){return ot(this),this._sseDenominator}}])}();function ot(t){Object(D.a)(Number.isFinite(t.fov)&&Number.isFinite(t.aspectRatio)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t._offCenterFrustum;t.fov===t._fov&&t.aspectRatio===t._aspectRatio&&t.near===t._near&&t.far===t._far&&t.xOffset===t._xOffset&&t.yOffset===t._yOffset||(Object(D.a)(t.fov>=0&&t.fov<Math.PI),Object(D.a)(t.aspectRatio>0),Object(D.a)(t.near>=0&&t.near<t.far),t._aspectRatio=t.aspectRatio,t._fov=t.fov,t._fovy=t.aspectRatio<=1?t.fov:2*Math.atan(Math.tan(.5*t.fov)/t.aspectRatio),t._near=t.near,t._far=t.far,t._sseDenominator=2*Math.tan(.5*t._fovy),t._xOffset=t.xOffset,t._yOffset=t.yOffset,e.top=t.near*Math.tan(.5*t._fovy),e.bottom=-e.top,e.right=t.aspectRatio*e.top,e.left=-e.right,e.near=t.near,e.far=t.far,e.right+=t.xOffset,e.left+=t.xOffset,e.top+=t.yOffset,e.bottom+=t.yOffset)}new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,Math.PI;n(134),new b.a,new b.a,new b.a,new b.a,new b.a;new o.a,new o.a,new o.a,new o.a,new o.a,new b.a,new b.a,new b.a},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(2),i=n(1),a=n(6),o=n(7),u=n(3),s=n(85),c=n(20),f=n(19);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(a.a)(n,t);var e=l(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"toString",value:function(){var t="[";if(f.b.printRowMajor){t+="row-major:";for(var e=0;e<this.RANK;++e)for(var n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(var r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]"}},{key:"getElementIndex",value:function(t,e){return e*this.RANK+t}},{key:"getElement",value:function(t,e){return this[e*this.RANK+t]}},{key:"setElement",value:function(t,e,n){return this[e*this.RANK+t]=Object(c.a)(n),this}},{key:"getColumn",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=t*this.RANK,r=0;r<this.RANK;++r)e[r]=this[n+r];return e}},{key:"setColumn",value:function(t,e){for(var n=t*this.RANK,r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}]),n}(s.a)},,,,,,,,function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return d}));var r,i=n(0),a=n(60),o=n(116),u=(r={},Object(i.a)(r,a.b,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(i.a)(r,a.a,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),r),s="__LUMA_INJECT_DECLARATIONS__",c=/void\s+main\s*\([^)]*\)\s*\{\n?/,f=/}\n?[^{}]*$/,l=[];function h(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e===a.b,o=function(e){var r=n[e];r.sort((function(t,e){return t.order-e.order})),l.length=r.length;for(var a=0,o=r.length;a<o;++a)l[a]=r[a].injection;var u="".concat(l.join("\n"),"\n");switch(e){case"vs:#decl":i&&(t=t.replace(s,u));break;case"vs:#main-start":i&&(t=t.replace(c,(function(t){return t+u})));break;case"vs:#main-end":i&&(t=t.replace(f,(function(t){return u+t})));break;case"fs:#decl":i||(t=t.replace(s,u));break;case"fs:#main-start":i||(t=t.replace(c,(function(t){return t+u})));break;case"fs:#main-end":i||(t=t.replace(f,(function(t){return u+t})));break;default:t=t.replace(e,(function(t){return t+u}))}};for(var h in n)o(h);return t=t.replace(s,""),r&&(t=t.replace(/\}\s*$/,(function(t){return t+u[e]}))),t}function d(t){var e={};return Object(o.a)(Array.isArray(t)&&t.length>1),t.forEach((function(t){for(var n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r,i=n(0),a=n(57),o=n(87),u={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};e.b=(r={},Object(i.a)(r,u.WEBGL2,[!1,!0]),Object(i.a)(r,u.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(i.a)(r,u.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(i.a)(r,u.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(i.a)(r,u.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(i.a)(r,u.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(i.a)(r,u.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(i.a)(r,u.FLOAT_BLEND,["EXT_float_blend"]),Object(i.a)(r,u.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(i.a)(r,u.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(i.a)(r,u.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(i.a)(r,u.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(i.a)(r,u.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(i.a)(r,u.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(i.a)(r,u.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(i.a)(r,u.COLOR_ATTACHMENT_RGBA32F,[function(t){var e=new o.a(t,{format:6408,type:5126,dataFormat:6408}),n=new a.a(t,{id:"test-framebuffer",check:!1,attachments:Object(i.a)({},36064,e)}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"]),Object(i.a)(r,u.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(i.a)(r,u.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),Object(i.a)(r,u.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(i.a)(r,u.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(i.a)(r,u.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(i.a)(r,u.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),r)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));var r=n(8),i=n(4),a=n(22);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,o=e.color,u=void 0===o?null:o,s=e.depth,c=void 0===s?null:s,f=e.stencil,l=void 0===f?null:f,h={};r&&(h.framebuffer=r);var d=0;u&&(d|=16384,!0!==u&&(h.clearColor=u)),c&&(d|=256,!0!==c&&(h.clearDepth=c)),l&&(d|=1024,!0!==c&&(h.clearStencil=c)),Object(a.a)(0!==d,"clear: bad arguments"),Object(i.n)(t,h,(function(){t.clear(d)}))}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,o=void 0===n?null:n,u=e.buffer,s=void 0===u?6144:u,c=e.drawBuffer,f=void 0===c?0:c,l=e.value,h=void 0===l?[0,0,0,0]:l;Object(i.a)(t),Object(i.n)(t,{framebuffer:o},(function(){switch(s){case 6144:switch(h.constructor){case Int32Array:t.clearBufferiv(s,f,h);break;case Uint32Array:t.clearBufferuiv(s,f,h);break;case Float32Array:default:t.clearBufferfv(s,f,h)}break;case 6145:t.clearBufferfv(6145,0,[h]);break;case 6146:t.clearBufferiv(6146,0,[h]);break;case 34041:var e=Object(r.a)(h,2),n=e[0],i=e[1];t.clearBufferfi(34041,0,n,i);break;default:Object(a.a)(!1,"clear: bad arguments")}}))}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(2),i=n(1),a=n(94),o=function(){function t(e,n){Object(r.a)(this,t),this.name=e,this.type=n,this.sampleSize=1,this.reset()}return Object(i.a)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(a.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(a.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),u=function(){function t(e){var n=e.id,i=e.stats;Object(r.a)(this,t),this.id=n,this.stats={},this._initializeStats(i),Object.seal(this)}return Object(i.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof o?t:new o(e,n)),this.stats[e]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),t}()},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return h}));n(34);var r=n(57),i=n(43),a=n(4),o=n(67),u=n(22);function s(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(u.a)(!1),0}}var c=n(159);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceX,r=void 0===n?0:n,i=e.sourceY,a=void 0===i?0:i,s=e.sourceFormat,c=void 0===s?6408:s,f=e.sourceAttachment,l=void 0===f?36064:f,h=e.target,b=void 0===h?null:h,g=e.sourceWidth,p=e.sourceHeight,y=e.sourceType,m=d(t),O=m.framebuffer,j=m.deleteFramebuffer;Object(u.a)(O);var _=O.gl,x=O.handle,k=O.attachments;g=g||O.width,p=p||O.height,36064===l&&null===x&&(l=1028),Object(u.a)(k[l]),b=v(b,y=y||k[l].type,c,g,p),y=y||Object(o.b)(b);var w=_.bindFramebuffer(36160,x);return _.readPixels(r,a,g,p,c,y,b),_.bindFramebuffer(36160,w||null),j&&O.delete(),b}function l(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceAttachment,r=void 0===n?36064:n,i=e.targetMaxHeight,a=void 0===i?Number.MAX_SAFE_INTEGER:i,u=f(t,{sourceAttachment:r}),s=t.width,c=t.height;c>a;){var l=Object(o.d)({data:u,width:s,height:c});u=l.data,s=l.width,c=l.height}Object(o.a)({data:u,width:s,height:c});var h=document.createElement("canvas");h.width=s,h.height=c;var d=h.getContext("2d"),v=d.createImageData(s,c);return v.data.set(u),d.putImageData(v,0,0),h.toDataURL()}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sourceX,o=void 0===r?0:r,s=n.sourceY,c=void 0===s?0:s,f=n.targetMipmaplevel,l=void 0===f?0:f,h=n.targetInternalFormat,v=void 0===h?6408:h,b=n.targetX,g=n.targetY,p=n.targetZ,y=n.width,m=n.height,O=d(t),j=O.framebuffer,_=O.deleteFramebuffer;Object(u.a)(j);var x=j.gl,k=j.handle,w=void 0!==b||void 0!==g||void 0!==p;b=b||0,g=g||0,p=p||0;var A=x.bindFramebuffer(36160,k);Object(u.a)(e);var E=null;if(e instanceof i.a&&(E=e,y=Number.isFinite(y)?y:E.width,m=Number.isFinite(m)?m:E.height,E.bind(0),e=E.target),w)switch(e){case 3553:case 34067:x.copyTexSubImage2D(e,l,b,g,o,c,y,m);break;case 35866:case 32879:var T=Object(a.a)(x);T.copyTexSubImage3D(e,l,b,g,p,o,c,y,m)}else x.copyTexImage2D(e,l,v,o,c,y,m,0);return E&&E.unbind(),x.bindFramebuffer(36160,A||null),_&&j.delete(),E}function d(t){return t instanceof r.a?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Object(c.b)(t),deleteFramebuffer:!0}}function v(t,e,n,r,i){return t||(e=e||5121,new(Object(o.c)(e,{clamped:!1}))(r*i*s(n)))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(4);function i(t,e,n){var i=n.removedProps,a=void 0===i?{}:i,o=n.deprecatedProps,u=void 0===o?{}:o,s=n.replacedProps,c=void 0===s?{}:s;for(var f in a)if(f in e){var l=a[f]?"".concat(t,".").concat(a[f]):"N/A";r.j.removed("".concat(t,".").concat(f),l)()}for(var h in u)if(h in e){var d=u[h];r.j.deprecated("".concat(t,".").concat(h),"".concat(t,".").concat(d))()}var v=null;for(var b in c)if(b in e){var g=c[b];r.j.deprecated("".concat(t,".").concat(b),"".concat(t,".").concat(g))(),(v=v||Object.assign({},e))[g]=e[b],delete v[b]}return v||e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(2),i=n(1),a=n(6),o=n(7),u=n(3),s=n(108),c=n(20),f=n(72),l=n(44),h=n(35),d=n(25);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=Object.freeze([1,0,0,0,1,0,0,0,1]),g=Object.freeze([0,0,0,0,0,0,0,0,0]),p=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),y={},m=function(t){Object(a.a)(n,t);var e=v(n);function n(t){var i;return Object(r.a)(this,n),i=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?i.copy(t):i.identity(),i}return Object(i.a)(n,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return p}}],[{key:"IDENTITY",get:function(){return y.IDENTITY=y.IDENTITY||Object.freeze(new n(b)),y.IDENTITY}},{key:"ZERO",get:function(){return y.ZERO=y.ZERO||Object.freeze(new n(g)),y.ZERO}}]),Object(i.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"set",value:function(t,e,n,r,i,a,o,u,s){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=u,this[8]=s,this.check()}},{key:"setRowMajor",value:function(t,e,n,r,i,a,o,u,s){return this[0]=t,this[1]=r,this[2]=o,this[3]=e,this[4]=i,this[5]=u,this[6]=n,this[7]=a,this[8]=s,this.check()}},{key:"determinant",value:function(){return l.b(this)}},{key:"identity",value:function(){return this.copy(b)}},{key:"fromQuaternion",value:function(t){return l.c(this,t),this.check()}},{key:"transpose",value:function(){return l.i(this,this),this.check()}},{key:"invert",value:function(){return l.d(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return l.e(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return l.e(this,this,t),this.check()}},{key:"rotate",value:function(t){return l.f(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?l.g(this,this,t):l.g(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return l.h(this,this,t),this.check()}},{key:"transform",value:function(t,e){switch(t.length){case 2:e=h.g(e||[-0,-0],t,this);break;case 3:e=d.m(e||[-0,-0,-0],t,this);break;case 4:e=Object(f.d)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector2",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector3",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}}]),n}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(2),i=n(1),a=n(6),o=n(7),u=n(3),s=n(85),c=n(20),f=n(41),l=n(37),h=n(28);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var v=[0,0,0,1],b=function(t){Object(a.a)(n,t);var e=d(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(r.a)(this,n),t=e.call(this,-0,-0,-0,-0),Array.isArray(i)&&1===arguments.length?t.copy(i):t.set(i,a,o,u),t}return Object(i.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"set",value:function(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}},{key:"fromMatrix3",value:function(t){return l.e(this,t),this.check()}},{key:"identity",value:function(){return l.f(this),this.check()}},{key:"fromAxisRotation",value:function(t,e){return l.p(this,t,e),this.check()}},{key:"setAxisAngle",value:function(t,e){return this.fromAxisRotation(t,e)}},{key:"len",value:function(){return l.h(this)}},{key:"lengthSquared",value:function(){return l.r(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return l.d(this,t)}},{key:"rotationTo",value:function(t,e){return l.n(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return l.a(this,this,t),this.check()}},{key:"calculateW",value:function(){return l.b(this,this),this.check()}},{key:"conjugate",value:function(){return l.c(this,this),this.check()}},{key:"invert",value:function(){return l.g(this,this),this.check()}},{key:"lerp",value:function(t,e,n){return l.i(this,t,e,n),this.check()}},{key:"multiplyRight",value:function(t,e){return Object(f.a)(!e),l.j(this,this,t),this.check()}},{key:"multiplyLeft",value:function(t,e){return Object(f.a)(!e),l.j(this,t,this),this.check()}},{key:"normalize",value:function(){var t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}},{key:"rotateX",value:function(t){return l.k(this,this,t),this.check()}},{key:"rotateY",value:function(t){return l.l(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return l.m(this,this,t),this.check()}},{key:"scale",value:function(t){return l.o(this,this,t),this.check()}},{key:"slerp",value:function(t,e,n){switch(arguments.length){case 1:var r=arguments[0],i=r.start;t=void 0===i?v:i,e=r.target,n=r.ratio;break;case 2:var a=Array.prototype.slice.call(arguments);e=a[0],n=a[1],t=this}return l.q(this,t,e,n),this.check()}},{key:"transformVector4",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return h.o(e,t,this),Object(c.b)(e,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(t,e){return this.setAxisAngle(t,e)}},{key:"premultiply",value:function(t,e){return this.multiplyLeft(t,e)}},{key:"multiply",value:function(t,e){return this.multiplyRight(t,e)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(c.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=Object(c.a)(t)}}]),n}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var r=n(8),i=n(2),a=n(1),o=n(6),u=n(7),s=n(3),c=n(20),f=n(108),l=n(72),h=n(16),d=n(35),v=n(25),b=n(28);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var p=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),y=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),m=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),O={},j=function(t){Object(o.a)(n,t);var e=g(n);function n(t){var r;return Object(i.a)(this,n),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return Object(a.a)(n,[{key:"INDICES",get:function(){return m}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return O.IDENTITY=O.IDENTITY||Object.freeze(new n(p)),O.IDENTITY}},{key:"ZERO",get:function(){return O.ZERO=O.ZERO||Object.freeze(new n(y)),O.ZERO}}]),Object(a.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,e,n,r,i,a,o,u,s,c,f,l,h,d,v,b){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=u,this[8]=s,this[9]=c,this[10]=f,this[11]=l,this[12]=h,this[13]=d,this[14]=v,this[15]=b,this.check()}},{key:"setRowMajor",value:function(t,e,n,r,i,a,o,u,s,c,f,l,h,d,v,b){return this[0]=t,this[1]=i,this[2]=s,this[3]=h,this[4]=e,this[5]=a,this[6]=c,this[7]=d,this[8]=n,this[9]=o,this[10]=f,this[11]=v,this[12]=r,this[13]=u,this[14]=l,this[15]=b,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(p)}},{key:"fromQuaternion",value:function(t){return h.c(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,r=t.right,i=t.bottom,a=t.top,o=t.near,u=t.far;return u===1/0?n._computeInfinitePerspectiveOffCenter(this,e,r,i,a,o):h.d(this,e,r,i,a,o,u),this.check()}},{key:"lookAt",value:function(t,e,n){if(1===arguments.length){var r=t;t=r.eye,e=r.center,n=r.up}return e=e||[0,0,0],n=n||[0,1,0],h.g(this,t,e,n),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,a=t.near,o=void 0===a?.1:a,u=t.far,s=void 0===u?500:u;return h.i(this,e,n,r,i,o,s),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,i=t.aspect,a=void 0===i?1:i,o=t.focalDistance,u=void 0===o?1:o,s=t.near,c=void 0===s?.1:s,f=t.far,l=void 0===f?500:f;if(r>2*Math.PI)throw Error("radians");var h=r/2,d=u*Math.tan(h),v=d*a;return(new n).ortho({left:-v,right:v,bottom:-d,top:d,near:c,far:l})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=void 0===e?void 0:e,r=t.fov,i=void 0===r?45*Math.PI/180:r,a=t.aspect,o=void 0===a?1:a,u=t.near,s=void 0===u?.1:u,c=t.far,f=void 0===c?500:c;if((n=n||i)>2*Math.PI)throw Error("radians");return h.j(this,n,o,s,f),this.check()}},{key:"determinant",value:function(){return h.a(this)}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*a,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*a,t}},{key:"transpose",value:function(){return h.q(this,this),this.check()}},{key:"invert",value:function(){return h.f(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return h.h(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return h.h(this,this,t),this.check()}},{key:"rotateX",value:function(t){return h.l(this,this,t),this.check()}},{key:"rotateY",value:function(t){return h.m(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return h.n(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2];return this.rotateX(n).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(t,e){return h.k(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?h.o(this,this,t):h.o(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return h.p(this,this,t),this.check()}},{key:"transform",value:function(t,e){return 4===t.length?(e=b.n(e||[-0,-0,-0,-0],t,this),Object(c.b)(e,4),e):this.transformAsPoint(t,e)}},{key:"transformAsPoint",value:function(t,e){switch(t.length){case 2:e=d.h(e||[-0,-0],t,this);break;case 3:e=v.n(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformAsVector",value:function(t,e){switch(t.length){case 2:e=Object(l.a)(e||[-0,-0],t,this);break;case 3:e=Object(l.c)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"transformPoint",value:function(t,e){return Object(c.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}},{key:"transformDirection",value:function(t,e){return Object(c.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(t,e,n,r,i,a){var o=2*a/(n-e),u=2*a/(i-r),s=(n+e)/(n-e),c=(i+r)/(i-r),f=-2*a;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=s,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=f,t[15]=0,t}}]),n}(f.a)},function(t,e,n){"use strict";e.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},,,function(t,e,n){"use strict";(function(t){var e=n(149),r=n(36),i=n(90);function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=e.extension,a=e.target,o=e.target2,u=i.b[n];Object(r.a)(u);for(var s=u.meta,c=(void 0===s?{}:s).suffix,f=void 0===c?"":c,l=t.getExtension(n),h=function(){var e=v[d],n="".concat(e).concat(f),r=null;"meta"===e||"function"==typeof t[e]||(l&&"function"==typeof l[n]?r=function(){return l[n].apply(l,arguments)}:"function"==typeof u[e]&&(r=u[e].bind(a))),r&&(a[e]=r,o[e]=r)},d=0,v=Object.keys(u);d<v.length;d++)h()}(void 0!==t?t:window).polyfillContext=function(t){t.luma=t.luma||{};var n=t.luma;return n.polyfilled||(Object(e.a)(t),function(t){t.luma.extensions={};var e,n=a(t.getSupportedExtensions()||[]);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.luma[r]=t.getExtension(r)}}catch(t){n.e(t)}finally{n.f()}}(t),function(t,e){var n,r=a(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;"overrides"!==i&&u(t,{extension:i,target:t.luma,target2:t})}}catch(t){r.e(t)}finally{r.f()}}(t,i.b),function(t,e){var n=e.target,r=e.target2;Object.keys(i.a).forEach((function(e){if("function"==typeof i.a[e]){var a=t[e]?t[e].bind(t):function(){},o=i.a[e].bind(null,t,a);n[e]=o,r[e]=o}}))}(t,{target:n,target2:t}),n.polyfilled=!0),t}}).call(this,n(46))},,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(2),i=n(1),a=n(6),o=n(7),u=n(3),s=n(85),c=n(20),f=n(41);function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(a.a)(n,t);var e=l(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"copy",value:function(t){return Object(f.a)(!1),this}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(c.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(c.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]*=a[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]/=a[o];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return Object(f.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(c.a)(this[t])}},{key:"setComponent",value:function(t,e){return Object(f.a)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}}]),n}(s.a),d=n(19),v=n(25),b=n(72);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var p=[0,0,0],y={},m=function(t){Object(a.a)(n,t);var e=g(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,n),t=e.call(this,-0,-0,-0),1===arguments.length&&Object(d.e)(i)?t.copy(i):(d.b.debug&&(Object(c.a)(i),Object(c.a)(a),Object(c.a)(o)),t[0]=i,t[1]=a,t[2]=o),t}return Object(i.a)(n,null,[{key:"ZERO",get:function(){return y.ZERO=y.ZERO||Object.freeze(new n(0,0,0,0))}}]),Object(i.a)(n,[{key:"set",value:function(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:"fromObject",value:function(t){return d.b.debug&&(Object(c.a)(t.x),Object(c.a)(t.y),Object(c.a)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:"angle",value:function(t){return v.a(this,t)}},{key:"cross",value:function(t){return v.c(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?p:n;return v.i(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?p:n;return v.j(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?p:n;return v.k(this,this,r,e),this.check()}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return v.n(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return Object(b.c)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return v.m(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return Object(b.b)(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return v.o(this,this,t),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(c.a)(t)}}]),n}(h)},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,u,s,c,f,d,v,g=e&&e.length,p=g?e[0]*n:t.length,y=i(t,0,p,n,!0),m=[];if(!y||y.next===y.prev)return m;if(g&&(y=function(t,e,n,r){var o,u,s,c,f,d=[];for(o=0,u=e.length;o<u;o++)s=e[o]*r,c=o<u-1?e[o+1]*r:t.length,(f=i(t,s,c,r,!1))===f.next&&(f.steiner=!0),d.push(b(f));for(d.sort(l),o=0;o<d.length;o++)h(d[o],n),n=a(n,n.next);return n}(t,e,y,n)),t.length>80*n){r=s=t[0],u=c=t[1];for(var O=n;O<p;O+=n)(f=t[O])<r&&(r=f),(d=t[O+1])<u&&(u=d),f>s&&(s=f),d>c&&(c=d);v=0!==(v=Math.max(s-r,c-u))?1/v:0}return o(y,m,n,r,u,v),m}function i(t,e,n,r,i){var a,o;if(i===T(t,e,n,r)>0)for(a=e;a<n;a+=r)o=w(a,t[a],t[a+1],o);else for(a=n-r;a>=e;a-=r)o=w(a,t[a],t[a+1],o);return o&&m(o,o.next)&&(A(o),o=o.next),o}function a(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(A(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function o(t,e,n,r,i,l,h){if(t){!h&&l&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=v(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,a,o,u,s,c=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,r=n,u=0,e=0;e<c&&(u++,r=r.nextZ);e++);for(s=c;u>0||s>0&&r;)0!==u&&(0===s||!r||n.z<=r.z)?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(t,r,i,l);for(var d,b,g=t;t.prev!==t.next;)if(d=t.prev,b=t.next,l?s(t,r,i,l):u(t))e.push(d.i/n),e.push(t.i/n),e.push(b.i/n),A(t),t=b.next,g=b.next;else if((t=b)===g){h?1===h?o(t=c(a(t),e,n),e,n,r,i,l,2):2===h&&f(t,e,n,r,i,l):o(a(t),e,n,r,i,l,1);break}}}function u(t){var e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(g(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(t,e,n,r){var i=t.prev,a=t,o=t.next;if(y(i,a,o)>=0)return!1;for(var u=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,s=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,f=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,l=v(u,s,e,n,r),h=v(c,f,e,n,r),d=t.prevZ,b=t.nextZ;d&&d.z>=l&&b&&b.z<=h;){if(d!==t.prev&&d!==t.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,b!==t.prev&&b!==t.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,b.x,b.y)&&y(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;b&&b.z<=h;){if(b!==t.prev&&b!==t.next&&g(i.x,i.y,a.x,a.y,o.x,o.y,b.x,b.y)&&y(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!m(i,o)&&O(i,r,r.next,o)&&x(i,o)&&x(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),A(r),A(r.next),r=t=o),r=r.next}while(r!==t);return a(r)}function f(t,e,n,r,i,u){var s=t;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&p(s,c)){var f=k(s,c);return s=a(s,s.next),f=a(f,f.next),o(s,e,n,r,i,u),void o(f,e,n,r,i,u)}c=c.next}s=s.next}while(s!==t)}function l(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var u=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=i&&u>o){if(o=u,u===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===o)return n;var s,c=n,f=n.x,l=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=f&&i!==r.x&&g(a<l?i:o,a,f,l,a<l?o:i,a,r.x,r.y)&&(s=Math.abs(a-r.y)/(i-r.x),x(r,t)&&(s<h||s===h&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,h=s)),r=r.next}while(r!==c);return n}(t,e)){var n=k(e,t);a(e,e.next),a(n,n.next)}}function d(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function v(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function b(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,a,o,u){return(i-o)*(e-u)-(t-o)*(a-u)>=0&&(t-o)*(r-u)-(n-o)*(e-u)>=0&&(n-o)*(a-u)-(i-o)*(r-u)>=0}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&O(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||m(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function O(t,e,n,r){var i=_(y(t,e,n)),a=_(y(t,e,r)),o=_(y(n,r,t)),u=_(y(n,r,e));return i!==a&&o!==u||(!(0!==i||!j(t,n,e))||(!(0!==a||!j(t,r,e))||(!(0!==o||!j(n,t,r))||!(0!==u||!j(n,e,r)))))}function j(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function x(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function k(t,e){var n=new E(t.i,t.x,t.y),r=new E(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function w(t,e,n,r){var i=new E(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,a=i?e[0]*n:t.length,o=Math.abs(T(t,0,a,n));if(i)for(var u=0,s=e.length;u<s;u++){var c=e[u]*n,f=u<s-1?e[u+1]*n:t.length;o-=Math.abs(T(t,c,f,n))}var l=0;for(u=0;u<r.length;u+=3){var h=r[u]*n,d=r[u+1]*n,v=r[u+2]*n;l+=Math.abs((t[h]-t[v])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[v+1]-t[h+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[i][a][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(24),i={};function a(t,e){var n;i[t]=!0,void 0!==e&&(n=e,r.global.console&&r.global.console.error&&r.global.console.error(n))}var o=function t(e){var n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(var r=0;r<this.attribs.length;r++){var i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};(o.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var u=function(t){var e=this;this.gl=t,function(t){var e=t.getError;t.getError=function(){var n;do{0!==(n=e.apply(t))&&(i[n]=!0)}while(0!==n);for(n in i)if(i[n])return delete i[n],parseInt(n,10);return 0}}(t);var n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){var i=e.currentVertexArrayObject,a=i.attribs[t];switch(r){case 34975:return a.buffer;case 34338:return a.enabled;case 34339:return a.size;case 34340:return a.stride;case 34341:return a.type;case 34922:return a.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,a,o,u){var s=e.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,t);var c=s.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=r,c.type=i,c.normalized=a,c.stride=o,c.offset=u,c.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",r.global.console&&r.global.console.log&&r.global.console.log(t),e.reset_()}),!0),this.reset_()};function s(t){if("function"!=typeof t.createVertexArray){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var n=t.getExtension;t.getExtension=function(e){var r=n.call(this,e);return r||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new u(this)),this.__OESVertexArrayObject))}}}u.prototype.VERTEX_ARRAY_BINDING_OES=34229,u.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new o(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},u.prototype.createVertexArrayOES=function(){var t=new o(this);return this.vertexArrayObjects.push(t),t},u.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},u.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof o&&t.hasBeenBound&&t.ext===this)},u.prototype.bindVertexArrayOES=function(t){var e=this.gl;if(!t||t.isAlive){var n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(r!==i){r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,u=Math.max(r?r.maxAttrib:0,i.maxAttrib),s=0;s<=u;s++){var c=i.attribs[s],f=r?r.attribs[s]:null;if(r&&c.enabled===f.enabled||(c.enabled?n.enableVertexAttribArray.call(e,s):n.disableVertexAttribArray.call(e,s)),c.enabled){var l=!1;r&&c.buffer===f.buffer||(o!==c.buffer&&(n.bindBuffer.call(e,34962,c.buffer),o=c.buffer),l=!0),(l||c.cached!==f.cached)&&n.vertexAttribPointer.call(e,s,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)}}else a(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(63),i=n(64);function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u=function(){var t=Object(i.b)();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function s(t){var e,n=u(),i=a(t=Array.isArray(t)?t:[t]);try{var o=function(){var t=e.value,i=Object(r.b)(t);n.find((function(t){return i===t}))||n.unshift(i)};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}}function c(){return u()}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return Q}));var r=n(2),i=n(1),a=n(8),o=n(0),u=n(60),s=n(116),c=n(13),f={number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate:function(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function l(t){var e=h(t);return"object"===e?t?"type"in t?Object.assign({},t,f[t.type]):"value"in t?(e=h(t.value),Object.assign({type:e},t,f[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},f[e])}function h(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":Object(c.a)(t)}var d=function(){function t(e){var n=e.name,i=e.vs,a=e.fs,o=e.dependencies,u=void 0===o?[]:o,c=e.uniforms,f=e.getUniforms,h=e.deprecations,d=void 0===h?[]:h,v=e.defines,b=void 0===v?{}:v,g=e.inject,p=void 0===g?{}:g,y=e.vertexShader,m=e.fragmentShader;Object(r.a)(this,t),Object(s.a)("string"==typeof n),this.name=n,this.vs=i||y,this.fs=a||m,this.getModuleUniforms=f,this.dependencies=u,this.deprecations=this._parseDeprecationDefinitions(d),this.defines=b,this.injections=function(t){var e={vs:{},fs:{}};for(var n in t){var r=t[n],i=n.slice(0,2);"string"==typeof r&&(r={order:0,injection:r}),e[i][n]=r}return e}(p),c&&(this.uniforms=function(t){var e={};for(var n in t){var r=l(t[n]);e[n]=r}return e}(c))}return Object(i.a)(t,[{key:"getModuleSource",value:function(t){var e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:Object(s.a)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach((function(n){n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(t){return t.forEach((function(t){switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}})),t}},{key:"_defaultGetUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=this.uniforms;for(var r in n){var i=n[r];r in t&&!i.private?(i.validate&&Object(s.a)(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}]),t}();function v(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t){return p(function t(e,n){return e.map((function(e){return e instanceof d||(Object(s.a)("string"!=typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),Object(s.a)(e.name,"shader module has no name"),(e=new d(e)).dependencies=t(e.dependencies)),e}))}(t))}function p(t){var e={},n={};return y({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((function(t,e){return n[e]-n[t]})).map((function(t){return e[t]}))}function y(t){var e=t.modules,n=t.level,r=t.moduleMap,i=t.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var a,o=v(e);try{for(o.s();!(a=o.n()).done;){var u=a.value;r[u.name]=u,(void 0===i[u.name]||i[u.name]<n)&&(i[u.name]=n)}}catch(t){o.e(t)}finally{o.f()}var s,c=v(e);try{for(c.s();!(s=c.n()).done;){var f=s.value;f.dependencies&&y({modules:f.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(t){c.e(t)}finally{c.f()}}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var O={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},j={};Object.keys(O).forEach((function(t){j[t]=t}));var _={};function x(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=O[e];if(Object(s.a)(r,e),!m(n))return!0;if(e in _)return _[e];var i=r[0],a=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(a,"\nvoid main(void) {}"),u=t.createShader(35633);t.shaderSource(u,o),t.compileShader(u);var c=t.getShaderParameter(u,35713);return t.deleteShader(u),_[e]=c,c}function k(t,e){var n=O[e];Object(s.a)(n,e);var r=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return Object(s.a)(!1===i||!0===i),i}function w(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return k(t,e)}))}var A=n(117);function E(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S,I=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],L=[].concat(I,[[/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1"],[/^[ \t]*varying[ \t]+(.+;)/gm,"out $1"]]),P=[].concat(I,[[/^[ \t]*varying[ \t]+(.+;)/gm,"in $1"]]),R=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],M=[].concat(R,[[/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1"],[/^[ \t]*out[ \t]+(.+;)/gm,"varying $1"]]),C=[].concat(R,[[/^[ \t]*in[ \t]+/gm,"varying "]]),D=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;function B(t,e,n){switch(e){case 300:return N(t,n?L:P);case 100:return n?N(t,M):function(t){var e=(t=N(t,C)).match(D);if(e){var n=e[1];t=t.replace(D,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),"gl_FragColor")}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function N(t,e){var n,r=E(e);try{for(r.s();!(n=r.n()).done;){var i=Object(a.a)(n.value,2),o=i[0],u=i[1];t=t.replace(o,u)}}catch(t){r.e(t)}finally{r.f()}return t}function F(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var z="\n\n".concat(A.a,"\n\n"),V=(S={},Object(o.a)(S,u.b,"vertex"),Object(o.a)(S,u.a,"fragment"),S);function G(t,e){var n=e.vs,r=e.fs,i=g(e.modules||[]);return{gl:t,vs:W(t,Object.assign({},e,{source:n,type:u.b,modules:i})),fs:W(t,Object.assign({},e,{source:r,type:u.a,modules:i})),getUniforms:H(i)}}function W(t,e){var n=e.id,r=e.source,i=e.type,o=e.modules,c=e.defines,f=void 0===c?{}:c,l=e.hookFunctions,h=void 0===l?[]:l,d=e.inject,v=void 0===d?{}:d,b=e.transpileToGLSL100,g=void 0!==b&&b,p=e.prologue,y=void 0===p||p,m=e.log;Object(s.a)("string"==typeof r,"shader source must be a string");var O=i===u.b,_=r.split("\n"),k=100,E="",T=r;0===_[0].indexOf("#version ")?(k=300,E=_[0],T=_.slice(1).join("\n")):E="#version ".concat(k);var S={};o.forEach((function(t){Object.assign(S,t.getDefines())})),Object.assign(S,f);var I=y?"".concat(E,"\n").concat(function(t){var e=t.id,n=t.source,r=t.type;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(V[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){var e=t.type;return"\n#define SHADER_TYPE_".concat(V[e].toUpperCase(),"\n")}({type:i}),"\n").concat(function(t){switch(function(t){var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(t,e){if(t.match(/NVIDIA/i)||e.match(/NVIDIA/i))return"NVIDIA";if(t.match(/INTEL/i)||e.match(/INTEL/i))return"INTEL";if(t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,n){var r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return w(t,j.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),w(t,j.GLSL_DERIVATIVES)&&x(t,j.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),w(t,j.GLSL_FRAG_DATA)&&x(t,j.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),w(t,j.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(var r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;var i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(S),"\n").concat(O?"":"precision highp float;\n\n","\n"):"".concat(E,"\n"),L=function(t){var e={vs:{},fs:{}};return t.forEach((function(t){var n;"string"!=typeof t?t=(n=t).hook:n={};var r=(t=t.trim()).split(":"),i=Object(a.a)(r,2),o=i[0],u=i[1],s=t.replace(/\(.+/,"");e[o][s]=Object.assign(n,{signature:u})})),e}(h),P={},R={},M={};for(var C in v){var D="string"==typeof v[C]?{injection:v[C],order:0}:v[C],N=C.match(/^(v|f)s:(#)?([\w-]+)$/);if(N){var U=N[2],G=N[3];U?"decl"===G?R[C]=[D]:M[C]=[D]:P[C]=[D]}else M[C]=[D]}var W,H=F(o);try{for(H.s();!(W=H.n()).done;){var q=W.value;m&&q.checkDeprecations(T,m),I+=q.getModuleSource(i,k);var X=q.injections[i];for(var Z in X){var Q=Z.match(/^(v|f)s:#([\w-]+)$/);if(Q){var Y="decl"===Q[2]?R:M;Y[Z]=Y[Z]||[],Y[Z].push(X[Z])}else P[Z]=P[Z]||[],P[Z].push(X[Z])}}}catch(t){H.e(t)}finally{H.f()}return I+=z,I=Object(A.c)(I,i,R),I+=function(t,e){var n="";for(var r in t){var i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){var a=e[r];a.sort((function(t,e){return t.order-e.order}));var o,u=F(a);try{for(u.s();!(o=u.n()).done;){var s=o.value;n+="  ".concat(s.injection,"\n")}}catch(t){u.e(t)}finally{u.f()}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(L[i],P),I+=T,I=B(I=Object(A.c)(I,i,M),g?100:k,O)}function H(t){return function(e){var n,r={},i=F(t);try{for(i.s();!(n=i.n()).done;){var a=n.value.getUniforms(e,r);Object.assign(r,a)}}catch(t){i.e(t)}finally{i.f()}return r}}var q=n(219);function X(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Q=function(){function t(e){Object(r.a)(this,t),this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(i.a)(t,null,[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),Object(i.a)(t,[{key:"addDefaultModule",value:function(t){this._defaultModules.find((function(e){return e.name===t.name}))||this._defaultModules.push(t),this.stateHash++}},{key:"removeDefaultModule",value:function(t){var e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((function(t){return t.name!==e})),this.stateHash++}},{key:"addShaderHook",value:function(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}},{key:"get",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.vs,i=void 0===r?"":r,a=n.fs,o=void 0===a?"":a,u=n.defines,s=void 0===u?{}:u,c=n.inject,f=void 0===c?{}:c,l=n.varyings,h=void 0===l?[]:l,d=n.bufferMode,v=void 0===d?35981:d,b=n.transpileToGLSL100,g=void 0!==b&&b,p=this._getModuleList(n.modules),y=this._getHash(i),m=this._getHash(o),O=p.map((function(t){return e._getHash(t.name)})).sort(),j=h.map((function(t){return e._getHash(t)})),_=Object.keys(s).sort(),x=Object.keys(f).sort(),k=[],w=[],A=X(_);try{for(A.s();!(t=A.n()).done;){var E=t.value;k.push(this._getHash(E)),k.push(this._getHash(s[E]))}}catch(t){A.e(t)}finally{A.f()}var T,S=X(x);try{for(S.s();!(T=S.n()).done;){var I=T.value;w.push(this._getHash(I)),w.push(this._getHash(f[I]))}}catch(t){S.e(t)}finally{S.f()}var L="".concat(y,"/").concat(m,"D").concat(k.join("/"),"M").concat(O.join("/"),"I").concat(w.join("/"),"V").concat(j.join("/"),"H").concat(this.stateHash,"B").concat(v).concat(g?"T":"");if(!this._programCache[L]){var P=G(this.gl,{vs:i,fs:o,modules:p,inject:f,defines:s,hookFunctions:this._hookFunctions,transpileToGLSL100:g});this._programCache[L]=new q.a(this.gl,{hash:L,vs:P.vs,fs:P.fs,varyings:h,bufferMode:v}),this._getUniforms[L]=P.getUniforms||function(t){},this._useCounts[L]=0}return this._useCounts[L]++,this._programCache[L]}},{key:"getUniforms",value:function(t){return this._getUniforms[t.hash]||null}},{key:"release",value:function(t){var e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}},{key:"_getHash",value:function(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}},{key:"_getModuleList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(this._defaultModules.length+t.length),n={},r=0,i=0,a=this._defaultModules.length;i<a;++i){var o=this._defaultModules[i],u=o.name;e[r++]=o,n[u]=!0}for(var s=0,c=t.length;s<c;++s){var f=t[s],l=f.name;n[l]||(e[r++]=f,n[l]=!0)}return e.length=r,e}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return K}));var r=n(0),i=n(2),a=n(1),o=n(4),u=n(155),s=n(91),c=n(22),f=n(124),l=n(219),h=n(49),d=n(34),v=n(29),b=n(14),g=n(6),p=n(7),y=n(3),m=n(38),O=null;function j(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!O||O.byteLength<n)&&(O=new ArrayBuffer(n)),O),0,e)}var _=n(209);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(y.a)(t);if(e){var i=Object(y.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}var k="elements must be GL.ELEMENT_ARRAY_BUFFER",w=function(t){Object(g.a)(n,t);var e=x(n);function n(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,n);var o=a.id||a.program&&a.program.id;return(r=e.call(this,t,Object.assign({},a,{id:o}))).buffer=null,r.bufferValue=null,r.isDefaultArray=a.isDefaultArray||!1,r.gl2=t,r.initialize(a),Object.seal(Object(v.a)(r)),r}return Object(a.a)(n,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.constantAttributeZero||(Object(o.i)(t)||"Chrome"===Object(_.a)())}},{key:"getDefaultArray",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new n(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(t){return n.MAX_ATTRIBUTES=n.MAX_ATTRIBUTES||t.getParameter(34921),n.MAX_ATTRIBUTES}},{key:"setConstant",value:function(t,e,r){switch(r.constructor){case Float32Array:n._setConstantFloatArray(t,e,r);break;case Int32Array:n._setConstantIntArray(t,e,r);break;case Uint32Array:n._setConstantUintArray(t,e,r);break;default:Object(c.a)(!1)}}}]),Object(a.a)(n,[{key:"delete",value:function(){return Object(b.a)(Object(y.a)(n.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete(),this}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:"setProps",value:function(t){return this}},{key:"setElementBuffer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(c.a)(!e||34963===e.target,k),this.bind((function(){t.gl.bindBuffer(34963,e?e.handle:null)})),this}},{key:"setBuffer",value:function(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);var r=n.size,i=n.type,a=n.stride,u=n.offset,s=n.normalized,f=n.integer,l=n.divisor,h=this.gl,d=this.gl2;return t=Number(t),this.bind((function(){h.bindBuffer(34962,e.handle),f?(Object(c.a)(Object(o.i)(h)),d.vertexAttribIPointer(t,r,i,a,u)):h.vertexAttribPointer(t,r,i,s,a,u),h.enableVertexAttribArray(t),d.vertexAttribDivisor(t,l||0)})),this}},{key:"enable",value:function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===t&&!n.isSupported(this.gl,{constantAttributeZero:!0});return i||(t=Number(t),this.bind((function(){return r?e.gl.enableVertexAttribArray(t):e.gl.disableVertexAttribArray(t)}))),this}},{key:"getConstantBuffer",value:function(t,e){var n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t,a=!this.buffer;if(this.buffer=this.buffer||new d.a(this.gl,r),a=(a=a||this.buffer.reallocate(r))||!this._compareConstantArrayValues(n,this.bufferValue)){var o=j(e.constructor,i);!function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,a=t.count,o=void 0===a?1:a,u=n.length,s=o*u,c=0,f=i;c<u;c++)e[f++]=n[c];for(;c<s;)c<s-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+s-c),c=s)}({target:o,source:n,start:0,count:i}),this.buffer.subData(o),this.bufferValue=e}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(t){return Array.isArray(t)?new Float32Array(t):t}},{key:"_compareConstantArrayValues",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(t){return this.gl2.deleteVertexArray(t),[this.elements]}},{key:"_bindHandle",value:function(t){this.gl2.bindVertexArray(t)}},{key:"_getParameter",value:function(t,e){var n=this,r=e.location;return Object(c.a)(Number.isFinite(r)),this.bind((function(){switch(t){case 34373:return n.gl.getVertexAttribOffset(r,t);default:return n.gl.getVertexAttrib(r,t)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return n.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantIntArray",value:function(t,e,n){switch(Object(c.a)(Object(o.i)(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantUintArray",value:function(t,e,n){switch(Object(c.a)(Object(o.i)(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Object(c.a)(!1)}}}]),n}(m.a),A=n(202),E=/^(.+)__LOCATION_([0-9]+)$/,T=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],S=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new w(e),Object(A.a)(this,"VertexArray","v6.0",T),this.initialize(n),Object.seal(this)}return Object(a.a)(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(t){var e=this;return Object.assign(this.attributes,t),this.vertexArrayObject.bind((function(){for(var n in t){var r=t[n];e._setAttribute(n,r)}e.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}},{key:"setBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);var r=this._resolveLocationAndAccessor(t,e,e.accessor,n),i=r.location,a=r.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,e,a)),this}},{key:"setConstant",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n)),i=r.location,a=r.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[i]=e,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.vertexArrayObject.setElementBuffer(null),t.buffer=t.buffer||new d.a(t.gl,{accessor:{size:4}});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof d.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof d.a&&t.setBuffer(e,n)}})),this}},{key:"bindForDraw",value:function(t,e,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(t,e),r=n()})),r}},{key:"_resolveLocationAndAccessor",value:function(t,e,n,r){var i=this,a={location:-1,accessor:null},u=this._getAttributeIndex(t),s=u.location,f=u.name;if(!Number.isFinite(s)||s<0)return this.unused[t]=e,o.j.once(3,(function(){return"unused value ".concat(t," in ").concat(i.id)}))(),a;var l=this._getAttributeInfo(f||s);if(!l)return a;var d=this.accessors[s]||{},v=h.a.resolve(l.accessor,d,n,r),b=v.size,g=v.type;return Object(c.a)(Number.isFinite(b)&&Number.isFinite(g)),{location:s,accessor:v}}},{key:"_getAttributeInfo",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:"_getAttributeIndex",value:function(t){var e=Number(t);if(Number.isFinite(e))return{location:e};var n=E.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(t,e){if(e instanceof d.a)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof d.a){var n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){var i=e;this.setConstant(t,i)}else{if(!(e.buffer instanceof d.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var a=e;this.setBuffer(t,a.buffer,a)}}},{key:"_setConstantAttributes",value:function(t,e){var n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(t,e){if(w.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(t,e){w.setConstant(this.gl,t,e)}},{key:"_updateDrawParams",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:"_updateDrawParamsForLocation",value:function(t,e){var n=this.values[e],r=this.accessors[e];if(n){var i=r.divisor>0;if(t.isInstanced=t.isInstanced||i,n instanceof d.a){var a=n;if(i){var o=a.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,o)}else{var u=a.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,u)}}}}},{key:"setElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.j.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}]),t}(),I=n(210),L=n(74),P=n(62);function R(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,a=void 0===i?1:i,o="[",u=0;u<t.length&&u<r;++u)u>0&&(o+=",".concat(u%a==0?" ":"")),o+=M(t[u],e);var s=t.length>r?"...":"]";return"".concat(o).concat(s)}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=e.isInteger,i=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return R(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return i?"0":"0.";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var a=t.toPrecision(2),o=a.indexOf(".0");return o===a.length-2?a.slice(0,-1):a}function C(t,e,n,i){var a,o,u=t.gl;if(!e)return o={},Object(r.a)(o,i,"null"),Object(r.a)(o,"Format ","N/A"),o;var s,c,f,l="NOT PROVIDED",h=1,v=0,b=0;if(n&&(l=n.type,h=n.size,s=-1!==(l=String(l).replace("Array","")).indexOf("nt")),e instanceof d.a){var g,p,y=e,m=y.getDebugData(),O=m.data;if(c=m.changed?"*":"",f=O,v=(b=y.byteLength)/O.BYTES_PER_ELEMENT/h,n){var j=n.divisor>0;p="".concat(j?"I ":"P "," ").concat(v," (x").concat(h,"=").concat(b," bytes ").concat(Object(L.a)(u,l),")")}else s=!0,p="".concat(b," bytes");return g={},Object(r.a)(g,i,"".concat(c).concat(M(f,{size:h,isInteger:s}))),Object(r.a)(g,"Format ",p),g}return f=e,h=e.length,s=-1!==(l=String(e.constructor.name).replace("Array","")).indexOf("nt"),a={},Object(r.a)(a,i,"".concat(M(f,{size:h,isInteger:s})," (constant)")),Object(r.a)(a,"Format ","".concat(h,"x").concat(l," (constant)")),a}function D(t,e){var n=e.type,r=e.size,i=Object(P.b)(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function B(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(t){var e=t.header,n=void 0===e?"Uniforms":e,i=t.program,a=t.uniforms,o=t.undefinedOnly,u=void 0!==o&&o;Object(c.a)(i);var s,f=i._uniformSetters,l={},h=Object.keys(f).sort(),d=0,v=B(h);try{for(v.s();!(s=v.n()).done;){var b=s.value;b.match(".*_.*")||b.match(".*Matrix")||U({table:l,header:n,uniforms:a,uniformName:b,undefinedOnly:u})&&d++}}catch(t){v.e(t)}finally{v.f()}var g,p=B(h);try{for(p.s();!(g=p.n()).done;){var y=g.value;y.match(".*Matrix")&&U({table:l,header:n,uniforms:a,uniformName:y,undefinedOnly:u})&&d++}}catch(t){p.e(t)}finally{p.f()}var m,O=B(h);try{for(O.s();!(m=O.n()).done;){var j=m.value;l[j]||U({table:l,header:n,uniforms:a,uniformName:j,undefinedOnly:u})&&d++}}catch(t){O.e(t)}finally{O.f()}var _=0,x={};if(!u)for(var k in a){var w=a[k];l[k]||(_++,x[k]=Object(r.a)({Type:"NOT USED: ".concat(w)},n,M(w)))}return{table:l,count:d,unusedTable:x,unusedCount:_}}function U(t){var e,n=t.table,i=t.header,a=t.uniforms,o=t.uniformName,u=t.undefinedOnly,s=a[o],c=function(t){return null!=t}(s);return(!u||!c)&&(n[o]=(e={},Object(r.a)(e,i,c?M(s):"N/A"),Object(r.a)(e,"Uniform Type",c?s:"NOT PROVIDED"),e),!0)}function z(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t){var e=t.accessor,n=e.type,r=e.size,i=Object(P.b)(n,r);return i?"".concat(i.name," ").concat(t.name):t.name}function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var q={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function X(t,e){var n=(e||{}).attributeMap,r=void 0===n?q:n;return r&&r[t]||t}function Z(t,e){var n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Object(c.a)(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var Q=function(){},Y={},K=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t);var r=n.id,a=void 0===r?Object(s.c)("model"):r;Object(c.a)(Object(o.h)(e)),this.id=a,this.gl=e,this.id=n.id||Object(s.c)("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}return Object(a.a)(t,[{key:"initialize",value:function(t){this.props={},this.programManager=t.programManager||u.a.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var e=t.program,n=void 0===e?null:e,r=t.vs,i=t.fs,a=t.modules,o=t.defines,s=t.inject,f=t.varyings,l=t.bufferMode,h=t.transpileToGLSL100;this.programProps={program:n,vs:r,fs:i,modules:a,defines:o,inject:s,varyings:f,bufferMode:l,transpileToGLSL100:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},Object(c.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(t){this._setModelProps(t)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(t){var e=t.program,n=t.vs,r=t.fs,i=t.modules,a=t.defines,o=t.inject,u=t.varyings,s=t.bufferMode,c=t.transpileToGLSL100;this.programProps={program:e,vs:n,fs:r,modules:i,defines:a,inject:o,varyings:u,bufferMode:s,transpileToGLSL100:c},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(t){return this.drawMode=t,this}},{key:"setVertexCount",value:function(t){return Object(c.a)(Number.isFinite(t)),this.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return Object(c.a)(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){var r={},i=e.indices;for(var a in e.attributes){var o=e.attributes[a],u=X(a,n);if("indices"===a)i=o;else if(o.constant)r[u]=o.value;else{var s=o.value,f=H({},o);delete f.value,r[u]=[new d.a(t,s),f],Z(a,f)}}if(i){var l=i.value||i;Object(c.a)(l instanceof Uint16Array||l instanceof Uint32Array,'attribute array for "indices" must be of integer type');var h={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new d.a(t,{data:l,target:34963}),h]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s.a)(t))return this;var e={};for(var n in t){var r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}},{key:"getModuleUniforms",value:function(t){this._checkProgram();var e=this.programManager.getUniforms(this.program);return e?e(t):{}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return Object(f.a)(this.program.gl,t),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var e,n=t.moduleSettings,r=void 0===n?null:n,i=t.framebuffer,a=t.uniforms,u=void 0===a?{}:a,s=t.attributes,c=void 0===s?{}:s,f=t.transformFeedback,l=void 0===f?this.transformFeedback:f,h=t.parameters,d=void 0===h?{}:h,v=t.vertexArray,b=void 0===v?this.vertexArray:v;this.setAttributes(c),this.updateModuleSettings(r),this.setUniforms(u),o.j.priority>=2&&(e=this._logDrawCallStart(2));var g=this.vertexArray.getDrawParams(),p=this.props,y=p.isIndexed,m=void 0===y?g.isIndexed:y,O=p.indexType,j=void 0===O?g.indexType:O,_=p.indexOffset,x=void 0===_?g.indexOffset:_,k=p.vertexArrayInstanced,w=void 0===k?g.isInstanced:k;w&&!this.isInstanced&&o.j.warn("Found instanced attributes on non-instanced model",this.id)();var A=this.isInstanced,E=this.instanceCount,T=this.props,S=T.onBeforeRender,I=void 0===S?Q:S,L=T.onAfterRender,P=void 0===L?Q:L;I(),this.program.setUniforms(this.uniforms);var R=this.program.draw(Object.assign(Y,t,{logPriority:e,uniforms:null,framebuffer:i,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:b,transformFeedback:l,isIndexed:m,indexType:j,isInstanced:A,instanceCount:E,offset:m?x:0}));return P(),o.j.priority>=2&&this._logDrawCallEnd(e,b,i),R}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,n=void 0===e||e,i=t.feedbackBuffers,a=t.unbindModels,o=void 0===a?[]:a,u=t.parameters;i&&this._setFeedbackBuffers(i),n&&(u=Object.assign({},u,Object(r.a)({},35977,n))),o.forEach((function(t){return t.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},t,{parameters:u}))}finally{o.forEach((function(t){return t.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.j.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}},{key:"_setModelProps",value:function(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}},{key:"_checkProgram",value:function(){if(this._programDirty||this.programManager.stateHash!==this._programManagerState){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var e=this.programProps,n=e.vs,r=e.fs,i=e.modules,a=e.inject,o=e.defines,u=e.varyings,s=e.bufferMode,f=e.transpileToGLSL100;t=this.programManager.get({vs:n,fs:r,modules:i,inject:a,defines:o,varyings:u,bufferMode:s,transpileToGLSL100:f}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(c.a)(t instanceof l.a,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new S(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var t in this.geometryBuffers){var e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof d.a&&e.delete()}}},{key:"_setAnimationProps",value:function(t){this.animated&&Object(c.a)(t,"Model.draw(): animated uniforms but no animationProps")}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s.a)(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new I.a(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),o.j.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:o.j.level<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,n,i){if(void 0!==t){var a=function(t){var e=t.vertexArray,n=t.header,r=void 0===n?"Attributes":n;if(!e.configuration)return{};var i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=C(e,e.elements,null,r));var a=e.values;for(var o in a){var u=e._getAttributeInfo(o);if(u){var s="".concat(o,": ").concat(u.name),c=e.accessors[u.location];c&&(s="".concat(o,": ").concat(D(u.name,c))),i[s]=C(e,a[o],c,r)}}return i}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),u=F({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),s=u.table,c=u.unusedTable,f=u.unusedCount,l=F({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),h=l.table;l.count>0&&o.j.log("MISSING UNIFORMS",Object.keys(h))(),f>0&&o.j.log("UNUSED UNIFORMS",Object.keys(c))();var d=function(t){var e,n={},i="Accessors for ".concat(t.id),a=z(t.attributeInfos);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(o){var u=G(o);n["in ".concat(u)]=Object(r.a)({},i,JSON.stringify(o.accessor))}}}catch(t){a.e(t)}finally{a.f()}var s,c=z(t.varyingInfos);try{for(c.s();!(s=c.n()).done;){var f=s.value;if(f){var l=G(f);n["out ".concat(l)]=Object(r.a)({},i,JSON.stringify(f.accessor))}}}catch(t){c.e(t)}finally{c.f()}return n}(this.vertexArray.configuration);o.j.table(t,a)(),o.j.table(t,s)(),o.j.table(t+1,d)(),i&&i.log({logLevel:2,message:"Rendered to ".concat(i.id)}),o.j.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),t}()},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return A}));var r=n(0),i=n(87),a=n(5),o=n.n(a),u=n(12),s=n(2),c=n(1),f=n(29),l=n(6),h=n(7),d=n(3),v=n(4),b=n(43);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var p=[34069,34070,34071,34072,34073,34074],y=function(t){Object(l.a)(r,t);var e,n=g(r);function r(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,r),Object(v.b)(t),(e=n.call(this,t,Object.assign({},i,{target:34067}))).initialize(i),Object.seal(Object(f.a)(e)),e}return Object(c.a)(r,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mipmaps,r=void 0===n||n,i=e.parameters,a=void 0===i?{}:i;return this.opts=e,this.setCubeMapImageData(e).then((function(){t.loaded=!0,r&&t.generateMipmap(e),t.setParameters(a)})),this}},{key:"subImage",value:function(t){var e=t.face,n=t.data,r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a,u=t.mipmapLevel,s=void 0===u?0:u;return this._subImage({target:e,data:n,x:i,y:o,mipmapLevel:s})}},{key:"setCubeMapImageData",value:(e=Object(u.a)(o.a.mark((function t(e){var n,r,i,a,u,s,c,f,l,h,d,b,g,y=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.width,r=e.height,i=e.pixels,a=e.data,u=e.border,s=void 0===u?0:u,c=e.format,f=void 0===c?6408:c,l=e.type,h=void 0===l?5121:l,d=this.gl,b=i||a,t.next=5,Promise.all(p.map((function(t){var e=b[t];return Promise.all(Array.isArray(e)?e:[e])})));case 5:g=t.sent,this.bind(),p.forEach((function(t,e){g[e].length>1&&!1!==y.opts.mipmaps&&v.j.warn("".concat(y.id," has mipmap and multiple LODs."))(),g[e].forEach((function(e,i){n&&r?d.texImage2D(t,i,f,n,r,s,f,h,e):d.texImage2D(t,i,f,f,h,e)}))})),this.unbind();case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"setImageDataForFace",value:function(t){var e=this,n=t.face,r=t.width,i=t.height,a=t.pixels,o=t.data,u=t.border,s=void 0===u?0:u,c=t.format,f=void 0===c?6408:c,l=t.type,h=void 0===l?5121:l,d=this.gl,v=a||o;return this.bind(),v instanceof Promise?v.then((function(r){return e.setImageDataForFace(Object.assign({},t,{face:n,data:r,pixels:r}))})):this.width||this.height?d.texImage2D(n,0,f,r,i,s,f,h,v):d.texImage2D(n,0,f,f,h,v),this}}]),r}(b.a);y.FACES=p;var m=n(65),O=n(34);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var _=function(t){Object(l.a)(n,t);var e=j(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,n),Object(v.a)(t),i=Object.assign({depth:1},i,{target:32879,unpackFlipY:!1}),(r=e.call(this,t,i)).initialize(i),Object.seal(Object(f.a)(r)),r}return Object(c.a)(n,null,[{key:"isSupported",value:function(t){return Object(v.i)(t)}}]),Object(c.a)(n,[{key:"setImageData",value:function(t){var e=this,n=t.level,r=void 0===n?0:n,i=t.dataFormat,a=void 0===i?6408:i,o=t.width,u=t.height,s=t.depth,c=void 0===s?1:s,f=t.border,l=void 0===f?0:f,h=t.format,d=t.type,b=void 0===d?5121:d,g=t.offset,p=void 0===g?0:g,y=t.data,j=t.parameters,_=void 0===j?{}:j;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(v.n)(this.gl,_,(function(){ArrayBuffer.isView(y)&&e.gl.texImage3D(e.target,r,a,o,u,c,l,h,b,y),y instanceof O.a&&(e.gl.bindBuffer(35052,y.handle),e.gl.texImage3D(e.target,r,a,o,u,c,l,h,b,p))})),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var x=m.a[this.dataFormat]||4,k=m.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*x*k,"Texture")}return this.loaded=!0,this}}]),n}(b.a),x=n(57),k=n(22);function w(t,e){Object(k.a)(t instanceof i.a||t instanceof y||t instanceof _);var n=t.constructor,r=t.gl,a=t.width,o=t.height,u=t.format,s=t.type,c=t.dataFormat,f=t.border,l=t.mipmaps;return new n(r,Object.assign({width:a,height:o,format:u,type:s,dataFormat:c,border:f,mipmaps:l},e))}function A(t,e){var n=t.gl,i=t.width,a=t.height,o=t.id;return new x.a(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:a,attachments:Object(r.a)({},36064,t)}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};var i={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){var n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){var i=Array.from(t.pickingHighlightColor,(function(t){return t/255}));Number.isFinite(i[3])||(i[3]=1),e.picking_uHighlightColor=i}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(4);function i(t,e,n,i){var a="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach((function(t){o.methodName||(o[t]=function(){throw r.j.removed("Calling removed method ".concat(e,".").concat(t,": "),a)(),new Error(t)})}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return f}));var r=n(123),i=n(4),a=n(22);function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){return c(t,e)}function c(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return l(t,e)}))}function f(t){for(var e in t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},r.b)void 0===t.luma.caps[e]&&(t.luma.caps[e]=l(t,e));return t.luma.caps}function l(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){var n,u=r.b[e];Object(a.a)(u,e);var s=Object(i.i)(t)&&u[1]||u[0];if("function"==typeof s)n=s(t);else if(Array.isArray(s)){n=!0;var c,f=o(s);try{for(f.s();!(c=f.n()).done;){var l=c.value;n=n&&Boolean(t.getExtension(l))}}catch(t){f.e(t)}finally{f.f()}}else"string"==typeof s?n=Boolean(t.getExtension(s)):"boolean"==typeof s?n=s:Object(a.a)(!1);return n}(t,e)),t.luma.caps[e]||i.j.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(2),i=n(29),a=n(1),o=n(6),u=n(7),s=n(3),c=n(4),f=n(38),l=n(34),h=n(91);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var v=function(t){Object(o.a)(n,t);var e=d(n);function n(t){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,n),Object(c.a)(t),(a=e.call(this,t,o)).initialize(o),a.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(i.a)(a)),a}return Object(a.a)(n,null,[{key:"isSupported",value:function(t){return Object(c.i)(t)}}]),Object(a.a)(n,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(h.a)(this.buffers)||this.bind((function(){return t._unbindBuffers()})),this.setProps(e),this}},{key:"setProps",value:function(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}},{key:"setBuffers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in e)t.setBuffer(n,e[n])})),this}},{key:"setBuffer",value:function(t,e){var n=this,r=this._getVaryingIndex(t),i=this._getBufferParams(e),a=i.buffer,o=i.byteSize,u=i.byteOffset;return r<0?(this.unused[t]=a,c.j.warn((function(){return"".concat(n.id," unused varying buffer ").concat(t)}))(),this):(this.buffers[r]=e,this.bindOnUse||this._bindBuffer(r,a,u,o),this)}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(t){var e,n,r;return t instanceof l.a==!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}},{key:"_getVaryingInfo",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:"_getVaryingIndex",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers){var e=this._getBufferParams(this.buffers[t]),n=e.buffer,r=e.byteSize,i=e.byteOffset;this._bindBuffer(t,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:"_bindBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}]),n}(f.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(0),i=n(2),a=n(1),o=n(91),u=n(22);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var c={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?Object(o.c)("geometry"):n,a=e.drawMode,u=void 0===a?c.TRIANGLES:a,s=e.attributes,f=void 0===s?{}:s,l=e.indices,h=void 0===l?null:l,d=e.vertexCount,v=void 0===d?null:d;this.id=r,this.drawMode=0|u,this.attributes={},this.userData={},this._setAttributes(f,h),this.vertexCount=v||this._calculateVertexCount(this.attributes,this.indices)}return Object(a.a)(t,null,[{key:"DRAW_MODE",get:function(){return c}}]),Object(a.a)(t,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}},{key:"_setAttributes",value:function(t,e){for(var n in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){var r=t[n];r=ArrayBuffer.isView(r)?{value:r}:r,Object(u.a)(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(Object(u.a)(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(t,e){if(e)return e.value.length;var n=1/0;for(var r in t){var i=t[r],a=i.value,o=i.size;!i.constant&&a&&o>=1&&(n=Math.min(n,a.length/o))}return Object(u.a)(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),t}()},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c}));var i=n(13),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},o=a.global||a.self||a.window,u="object"!==(void 0===r?"undefined":Object(i.a)(r))||"[object process]"!==String(r)||r.browser,s=void 0!==r&&r.version&&r.version.match(/v([0-9]*)/),c=s&&parseFloat(s[1])||0}).call(this,n(46),n(55))},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(0),i=n(2),a=n(1),o=n(128);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c={id:"request-scheduler",throttleRequests:!0,maxRequests:6},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t),this.props=s(s({},c),e),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new o.a({id:e.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever"),this._deferredUpdate=null}return Object(a.a)(t,[{key:"scheduleRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(t))return this.requestMap.get(t);var n={handle:t,getPriority:e},r=new Promise((function(t){return n.resolve=t,n}));return this.requestQueue.push(n),this.requestMap.set(t,r),this._issueNewRequests(),r}},{key:"_issueRequest",value:function(t){var e=this,n=t.handle,r=t.resolve,i=!1,a=function(){i||(i=!0,e.requestMap.delete(n),e.activeRequestCount--,e._issueNewRequests())};return this.activeRequestCount++,r?r({done:a}):Promise.resolve({done:a})}},{key:"_issueNewRequests",value:function(){var t=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return t._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this._deferredUpdate=null;var t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(var e=0;e<t;++e)if(this.requestQueue.length>0){var n=this.requestQueue.shift();this._issueRequest(n)}}}},{key:"_updateAllRequests",value:function(){for(var t=this.requestQueue,e=0;e<t.length;++e){var n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort((function(t,e){return t.priority-e.priority}))}},{key:"_updateRequest",value:function(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(8),i=n(2),a=n(1);function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=1,c=1,f=function(){function t(){Object(i.a)(this,t),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(a.a)(t,[{key:"addChannel",value:function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,a=t.rate,o=void 0===a?1:a,u=t.repeat,c=s++,f={time:0,delay:n,duration:i,rate:o,repeat:void 0===u?1:u};return this._setChannelTime(f,this.time),this.channels.set(c,f),c}},{key:"removeChannel",value:function(t){this.channels.delete(t);var e,n=o(this.animations);try{for(n.s();!(e=n.n()).done;){var i=Object(r.a)(e.value,2),a=i[0];i[1].channel===t&&this.detachAnimation(a)}}catch(t){n.e(t)}finally{n.f()}}},{key:"isFinished",value:function(t){var e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}},{key:"getTime",value:function(t){if(void 0===t)return this.time;var e=this.channels.get(t);return void 0===e?-1:e.time}},{key:"setTime",value:function(t){this.time=Math.max(0,t);var e,n=o(this.channels.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;this._setChannelTime(r,this.time)}}catch(t){n.e(t)}finally{n.f()}var i,a=o(this.animations.values());try{for(a.s();!(i=a.n()).done;){var u=i.value,s=u.animation,c=u.channel;s.setTime(this.getTime(c))}}catch(t){a.e(t)}finally{a.f()}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(t,e){var n=c++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}},{key:"detachAnimation",value:function(t){this.animations.delete(t)}},{key:"update",value:function(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}},{key:"_setChannelTime",value:function(t,e){var n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}]),t}()},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return Ct}));var r=n(5),i=n.n(r),a=n(12),o=n(21),u=n(63),s=n(64),c=n(52);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.3.13";Object(c.a)(t,"no loader provided");var n=t.version;e&&n&&(e=l(e),n=l(n))}function l(t){var e=t.split(".").map(Number);return{major:e[0],minor:e[1]}}var h=n(86),d=n(13),v=n(125);function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t){if(v.toArrayBuffer&&(t=v.toArrayBuffer(t)),t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.buffer;if("string"==typeof t){var e=t;return(new TextEncoder).encode(e).buffer}return t&&"object"===Object(d.a)(t)&&t._toArrayBuffer?t._toArrayBuffer():Object(c.a)(!1)}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e.map((function(t){return t instanceof ArrayBuffer?new Uint8Array(t):t})),a=i.reduce((function(t,e){return t+e.byteLength}),0),o=new Uint8Array(a),u=0,s=b(i);try{for(s.s();!(r=s.n()).done;){var c=r.value;o.set(c,u),u+=c.byteLength}}catch(t){s.e(t)}finally{s.f()}return o.buffer}function m(t){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(i.a.mark((function t(e){var n,r,a,o,u,s,f,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=[],a=!0,o=!1,t.prev=4,s=Object(h.a)(e);case 6:return t.next=8,s.next();case 8:return f=t.sent,a=f.done,t.next=12,f.value;case 12:if(l=t.sent,a){t.next=19;break}"string"==typeof(d=l)?r.push(d):n.push(d);case 16:a=!0,t.next=6;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),o=!0,u=t.t0;case 25:if(t.prev=25,t.prev=26,a||null==s.return){t.next=30;break}return t.next=30,s.return();case 30:if(t.prev=30,!o){t.next=33;break}throw u;case 33:return t.finish(30);case 34:return t.finish(25);case 35:if(!(r.length>0)){t.next=38;break}return Object(c.a)(0===n.length),t.abrupt("return",r.join(""));case 38:return t.abrupt("return",y.apply(void 0,n));case 39:case"end":return t.stop()}}),t,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}var j=i.a.mark(_);function _(t){var e,n,r,a,o,u,s,c=arguments;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=c.length>1&&void 0!==c[1]?c[1]:{},n=e.chunkSize,r=void 0===n?262144:n,a=0,o=new TextEncoder;case 4:if(!(a<t.length)){i.next=12;break}return u=Math.min(t.length-a,r),s=t.slice(a,a+u),a+=u,i.next=10,o.encode(s);case 10:i.next=4;break;case 12:case"end":return i.stop()}}),j)}var x=i.a.mark(k);function k(t){var e,n,r,a,o,u,s,c=arguments;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=c.length>1&&void 0!==c[1]?c[1]:{},n=e.chunkSize,r=void 0===n?262144:n,a=0;case 3:if(!(a<t.byteLength)){i.next=14;break}return o=Math.min(t.byteLength-a,r),u=new ArrayBuffer(o),s=new Uint8Array(t,a,o),new Uint8Array(u).set(s),a+=o,i.next=12,u;case 12:i.next=3;break;case 14:case"end":return i.stop()}}),x)}var w=n(66),A=n(89);function E(t){return T.apply(this,arguments)}function T(){return(T=Object(A.a)(i.a.mark((function t(e){var n,r,a,o,u,s=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},r=n.chunkSize||1048576,a=0;case 3:if(!(a<e.size)){t.next=13;break}return o=a+r,t.next=7,Object(w.a)(S(e,a,o));case 7:return u=t.sent,a=o,t.next=11,u;case 11:t.next=3;break;case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e,n){return I.apply(this,arguments)}function I(){return(I=Object(a.a)(i.a.mark((function t(e,n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,i){var a=e.slice(n,r),o=new FileReader;o.onload=function(e){return t(e.target&&e.target.result)},o.onerror=function(t){return i(t)},o.readAsArrayBuffer(a)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var L=n(212);function P(t){if(L.b||L.c>=10){if("function"==typeof t[Symbol.asyncIterator])return function(t){return R.apply(this,arguments)}(t);if("function"==typeof t.getIterator)return t.getIterator()}return L.b?function(t){return M.apply(this,arguments)}(t):function(t){return C.apply(this,arguments)}(t)}function R(){return(R=Object(A.a)(i.a.mark((function t(e){var n,r,a,o,u,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!0,r=!1,t.prev=2,o=Object(h.a)(e);case 4:return t.next=6,Object(w.a)(o.next());case 6:return u=t.sent,n=u.done,t.next=10,Object(w.a)(u.value);case 10:if(s=t.sent,n){t.next=18;break}return c=s,t.next=15,p(c);case 15:n=!0,t.next=4;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),r=!0,a=t.t0;case 24:if(t.prev=24,t.prev=25,n||null==o.return){t.next=29;break}return t.next=29,Object(w.a)(o.return());case 29:if(t.prev=29,!r){t.next=32;break}throw a;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}}),t,null,[[2,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function M(){return(M=Object(A.a)(i.a.mark((function t(e){var n,r,a,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getReader(),t.prev=1;case 2:return t.next=5,Object(w.a)(n.read());case 5:if(r=t.sent,a=r.done,o=r.value,!a){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,p(o);case 12:t.next=2;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n.releaseLock();case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}function C(){return(C=Object(A.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.a)(e);case 2:e=t.sent;case 3:if(null===(n=e.read())){t.next=9;break}return t.next=8,p(n);case 8:return t.abrupt("continue",3);case 9:if(!e._readableState.ended){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,Object(w.a)(D(e));case 13:t.next=3;break;case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){return B.apply(this,arguments)}function B(){return(B=Object(a.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.once("readable",t)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t?_(t,e):t instanceof ArrayBuffer?k(t,e):Object(o.b)(t)?E(t,e):Object(o.h)(t)?P(t):Object(o.i)(t)?P(t.body):Object(c.a)(!1)}var F=n(79),U="Cannot convert supplied data type";function z(t,e){if(e.text&&"string"==typeof t)return t;if(t instanceof ArrayBuffer){var n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)||Object(o.c)(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);var r=t.buffer,i=t.byteLength||t.length;return 0===t.byteOffset&&i===r.byteLength||(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(U)}function V(t,e){return G.apply(this,arguments)}function G(){return(G=Object(a.a)(i.a.mark((function t(e,n){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e instanceof ArrayBuffer||ArrayBuffer.isView(e),"string"!=typeof e&&!r){t.next=3;break}return t.abrupt("return",z(e,n));case 3:if(!Object(o.b)(e)){t.next=7;break}return t.next=6,Object(F.b)(e);case 6:e=t.sent;case 7:if(!Object(o.i)(e)){t.next=21;break}return a=e,t.next=11,Object(F.a)(a);case 11:if(!n.binary){t.next=17;break}return t.next=14,a.arrayBuffer();case 14:t.t0=t.sent,t.next=20;break;case 17:return t.next=19,a.text();case 19:t.t0=t.sent;case 20:return t.abrupt("return",t.t0);case 21:if(Object(o.h)(e)&&(e=N(e)),!Object(o.d)(e)&&!Object(o.a)(e)){t.next=24;break}return t.abrupt("return",m(e));case 24:throw new Error(U);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var W=n(11),H=n(0);function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){Object(H.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n||(t=X({fetch:Object(s.a)(e||{},t)},t),Array.isArray(t.loaders)||(t.loaders=null),t)}function Q(t,e){if(!e&&t&&!Array.isArray(t))return t;var n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){var r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[].concat(Object(W.a)(n),Object(W.a)(r)):r}return n&&n.length?n:null}var Y=n(2),K=n(1),$=new Map;function J(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n}")}function tt(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=n||new Set;if(t){if(et(t))r.add(t);else if(et(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===Object(d.a)(t))for(var i in t)tt(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function et(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var nt=0;function rt(t){var e=t.data;(0,t.resolve)(e)}var it=function(){function t(e){var n=e.source,r=e.name,i=void 0===r?"web-worker-".concat(nt++):r,a=e.onMessage;Object(Y.a)(this,t);var o=function(t){if(Object(c.a)("string"==typeof t,"worker source"),t.startsWith("url(")&&t.endsWith(")")){var e=t.match(/^url\((.*)\)$/)[1];if(e&&!e.startsWith("http"))return e;t=J(e)}var n=$.get(t);if(!n){var r=new Blob([t],{type:"application/javascript"});n=URL.createObjectURL(r),$.set(t,n)}return n}(n,i);this.worker=new Worker(o,{name:i}),this.name=i,this.onMessage=a||rt}var e;return Object(K.a)(t,[{key:"process",value:(e=Object(a.a)(i.a.mark((function t(e){var n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){n.worker.onmessage=function(e){n.onMessage({worker:n.worker,data:e.data,resolve:t,reject:r})},n.worker.onerror=function(t){var e="".concat(n.name,": WorkerThread.process() failed");t.message&&(e+=" ".concat(t.message," ").concat(t.filename,":").concat(t.lineno,":").concat(t.colno));var i=new Error(e);console.error(t),r(i)};var i=tt(e);n.worker.postMessage(e,i)})));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),t}(),at=function(){function t(e){var n=e.source,r=e.name,i=void 0===r?"unnamed":r,a=e.maxConcurrency,o=void 0===a?1:a,u=e.onMessage,s=e.onDebug,c=void 0===s?function(){}:s,f=e.reuseWorkers,l=void 0===f||f;Object(Y.a)(this,t),this.source=n,this.name=i,this.maxConcurrency=o,this.onMessage=u,this.onDebug=c,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=l}var e;return Object(K.a)(t,[{key:"destroy",value:function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0}},{key:"process",value:function(t,e){var n=this;return new Promise((function(r,i){n.jobQueue.push({data:t,jobName:e,resolve:r,reject:i}),n._startQueuedJob()}))}},{key:"_startQueuedJob",value:(e=Object(a.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.jobQueue.length){t.next=2;break}return t.abrupt("return");case 2:if(e=this._getAvailableWorker()){t.next=5;break}return t.abrupt("return");case 5:return n=this.jobQueue.shift(),this.onDebug({message:"processing",worker:e.name,job:n.jobName,backlog:this.jobQueue.length}),t.prev=7,t.t0=n,t.next=11,e.process(n.data);case 11:t.t1=t.sent,t.t0.resolve.call(t.t0,t.t1),t.next=18;break;case 15:t.prev=15,t.t2=t.catch(7),n.reject(t.t2);case 18:return t.prev=18,this._onWorkerDone(e),t.finish(18);case 21:case"end":return t.stop()}}),t,this,[[7,15,18,21]])}))),function(){return e.apply(this,arguments)})},{key:"_onWorkerDone",value:function(t){this.isDestroyed?t.destroy():(this.reuseWorkers?this.idleQueue.push(t):(t.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new it({source:this.source,onMessage:this.onMessage,name:t})}return null}}]),t}(),ot=function(){function t(e){var n=e.maxConcurrency,r=void 0===n?5:n,i=e.onMessage,a=void 0===i?null:i,o=e.onDebug,u=void 0===o?function(){}:o,s=e.reuseWorkers,c=void 0===s||s;Object(Y.a)(this,t),this.maxConcurrency=r,this.onMessage=a,this.onDebug=u,this.workerPools=new Map,this.reuseWorkers=c}var e;return Object(K.a)(t,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),Object(K.a)(t,[{key:"setProps",value:function(t){"maxConcurrency"in t&&(this.maxConcurrency=t.maxConcurrency),"onDebug"in t&&(this.onDebug=t.onDebug),"reuseWorkers"in t&&(this.reuseWorkers=t.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach((function(t){return t.destroy()}))}},{key:"process",value:(e=Object(a.a)(i.a.mark((function t(e,n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this._getWorkerPool(e,n),t.abrupt("return",a.process(r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"_getWorkerPool",value:function(t,e){var n=this.workerPools.get(e);return n||(n=new at({source:t,name:e,onMessage:ut.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(e,n)),n}}]),t}();function ut(t,e){var n=e.worker,r=e.data,i=e.resolve,a=e.reject;if(t)t({worker:n,data:r,resolve:i,reject:a});else switch(r.type){case"done":i(r.result);break;case"error":a(r.message)}}function st(t,e,n,r){if(!ot.isSupported())return!1;var i=n&&n[t.id];return!!("local"===n.worker&&i&&i.localWorkerUrl||n.worker&&i&&i.workerUrl)&&(!t.useWorker||t.useWorker(n))}function ct(t,e,n,r){var i=(n||{}).worker,a=n&&n[t.id]||{},o="local"===i?a.localWorkerUrl:a.workerUrl,u="url(".concat(o,")"),s=t.name,c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};t.maxConcurrency&&(e.maxConcurrency=t.maxConcurrency);t.onDebug&&(e.onDebug=t.onDebug);"reuseWorkers"in t&&(e.reuseWorkers=t.reuseWorkers);ft||(ft=new ot({onMessage:lt}));return ft.setProps(e),ft}(n);n=JSON.parse(JSON.stringify(n));var f="2.3.13"!==t.version?"(core version ".concat("2.3.13",")"):"";return c.process(u,"".concat(s,"-worker@").concat(t.version).concat(f),{arraybuffer:p(e),options:n,source:"loaders.gl@".concat("2.3.13"),type:"parse"})}var ft=null;function lt(t){return ht.apply(this,arguments)}function ht(){return(ht=Object(a.a)(i.a.mark((function t(e){var n,r,a,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.worker,r=e.data,a=e.resolve,o=e.reject,t.t0=r.type,t.next="done"===t.t0?4:"parse"===t.t0?6:"error"===t.t0?17:19;break;case 4:return a(r.result),t.abrupt("break",19);case 6:return t.prev=6,t.next=9,Lt(r.arraybuffer,r.options,r.url);case 9:u=t.sent,n.postMessage({type:"parse-done",id:r.id,result:u},tt(u)),t.next=16;break;case 13:t.prev=13,t.t1=t.catch(6),n.postMessage({type:"parse-error",id:r.id,message:t.t1.message});case 16:return t.abrupt("break",19);case 17:return o(r.message),t.abrupt("break",19);case 19:case"end":return t.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}var dt=n(73),vt=n(150);function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){Object(H.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return yt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mt=/\.([^.]+)$/;function Ot(t){return jt.apply(this,arguments)}function jt(){return(jt=Object(a.a)(i.a.mark((function t(e){var n,r,a,u,s=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:[],r=s.length>2&&void 0!==s[2]?s[2]:{},a=s.length>3&&void 0!==s[3]?s[3]:{},!(u=_t(e,n,gt(gt({},r),{},{nothrow:!0}),a))){t.next=6;break}return t.abrupt("return",u);case 6:if(!Object(o.b)(e)){t.next=11;break}return t.next=9,S(e,0,10);case 9:e=t.sent,u=_t(e,n,r,a);case 11:if(u||r.nothrow){t.next=13;break}throw new Error(xt(e));case 13:return t.abrupt("return",u);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e&&!Array.isArray(e))return Object(u.b)(e);kt(e=[].concat(Object(W.a)(e||[]),Object(W.a)(Object(vt.a)())));var i=Object(dt.b)(t),a=i.url,o=i.type,s=wt(e,a||r.url);if(!(s=(s=s||At(e,o))||Et(e,t))&&!n.nothrow)throw new Error(xt(t));return s}function xt(t){var e=Object(dt.b)(t),n=e.url,r=e.type,i="No valid loader found";return t&&(i+=' data: "'.concat(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return It(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){var n=0;return It(t,n,e)}return""}(t),'", contentType: "').concat(r,'"')),n&&(i+=" url: ".concat(n)),i}function kt(t){var e,n=pt(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;Object(u.b)(r)}}catch(t){n.e(t)}finally{n.f()}}function wt(t,e){var n=e&&e.match(mt),r=n&&n[1];return r&&function(t,e){e=e.toLowerCase();var n,r=pt(t);try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=pt(a.extensions);try{for(o.s();!(i=o.n()).done;){if(i.value.toLowerCase()===e)return a}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}return null}(t,r)}function At(t,e){var n,r=pt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.mimeTypes&&i.mimeTypes.includes(e))return i;if(e==="application/x.".concat(i.id))return i}}catch(t){r.e(t)}finally{r.f()}return null}function Et(t,e){if(!e)return null;var n,r=pt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"==typeof e){if(Tt(e,i))return i}else if(ArrayBuffer.isView(e)){if(St(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer){if(St(e,0,i))return i}}}catch(t){r.e(t)}finally{r.f()}return null}function Tt(t,e){return e.testText&&e.testText(t)}function St(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((function(r){return function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;for(var r=new Uint8Array(t),i=new Uint8Array(e),a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(r,t,r.byteLength);switch(Object(d.a)(r)){case"function":return r(t,n);case"string":var i=It(t,e,r.length);return r===i;default:return!1}}(t,e,n,r)}))}function It(t,e,n){if(t.byteLength<e+n)return"";for(var r=new DataView(t),i="",a=0;a<n;a++)i+=String.fromCharCode(r.getUint8(e+a));return i}function Lt(t,e,n,r){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(a.a)(i.a.mark((function t(e,n,r,a){var o,f,l,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(c.a)(!a||"string"!=typeof a,"parse no longer accepts final url"),!n||Array.isArray(n)||Object(u.a)(n)||(a=r,r=n,n=null),t.next=4,e;case 4:return e=t.sent,r=r||{},o=Object(dt.b)(e),f=o.url,l=Q(n,a),t.next=10,Ot(e,l,r);case 10:if(h=t.sent){t.next=13;break}return t.abrupt("return",null);case 13:return r=Object(s.c)(r,h,l,f),a=Z({url:f,parse:Lt,loaders:l},r,a),t.next=17,Rt(h,e,r,a);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rt(t,e,n,r){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(a.a)(i.a.mark((function t(e,n,r,a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(e),t.next=3,V(n,e);case 3:if(n=t.sent,!e.parseTextSync||"string"!=typeof n){t.next=7;break}return r.dataType="text",t.abrupt("return",e.parseTextSync(n,r,a,e));case 7:if(!st(e,0,r)){t.next=11;break}return t.next=10,ct(e,n,r);case 10:return t.abrupt("return",t.sent);case 11:if(!e.parseText||"string"!=typeof n){t.next=15;break}return t.next=14,e.parseText(n,r,a,e);case 14:return t.abrupt("return",t.sent);case 15:if(!e.parse){t.next=19;break}return t.next=18,e.parse(n,r,a,e);case 18:return t.abrupt("return",t.sent);case 19:return Object(c.a)(!e.parseSync),t.abrupt("return",Object(c.a)(!1));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ct(t,e,n){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(a.a)(i.a.mark((function t(e,n,r){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(n)||Object(u.a)(n)||(r=n,n=null),a=Object(s.a)(r||{}),c=e,"string"!=typeof e){t.next=9;break}return t.next=6,a(e);case 6:c=t.sent,t.next=10;break;case 9:e=null;case 10:if(!Object(o.b)(e)){t.next=15;break}return t.next=13,a(e);case 13:c=t.sent,e=null;case 15:return t.next=17,Lt(c,n,r);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},function(t,e,n){"use strict";var r=n(5),i=n.n(r),a=n(12);function o(t,e){if(!t)throw new Error(e)}var u=n(98),s=u.a._parseImageNode,c="undefined"!=typeof Image,f="undefined"!=typeof ImageBitmap,l=Boolean(s),h=!!u.b||l;var d=n(13);function v(t){var e=g(t);if(!e)throw new Error("Not an image");return e}function b(t){switch(v(t)){case"data":return t;case"image":case"imagebitmap":var e=document.createElement("canvas"),n=e.getContext("2d");if(n)return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:return o(!1)}}function g(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"===Object(d.a)(t)&&t.data&&t.width&&t.height?"data":null}var p=/^data:image\/svg\+xml/,y=/\.svg((\?|#).*)?$/;function m(t){return t&&(p.test(t)||y.test(t))}function O(t,e){if(m(e)){var n=(new TextDecoder).decode(t);return"data:image/svg+xml;base64,".concat(btoa(n))}return j(t,e)}function j(t,e){if(m(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function _(t,e,n){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(i.a.mark((function t(e,n,r){var a,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=O(e,r),o=self.URL||self.webkitURL,u="string"!=typeof a&&o.createObjectURL(a),t.prev=3,t.next=6,k(u||a,n);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,u&&o.revokeObjectURL(u),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])})))).apply(this,arguments)}function k(t,e){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new Image).src=e,!(n.image&&n.image.decode&&r.decode)){t.next=6;break}return t.next=5,r.decode();case 5:return t.abrupt("return",r);case 6:return t.next=8,new Promise((function(t,n){try{r.onload=function(){return t(r)},r.onerror=function(t){return n(new Error("Could not load image ".concat(e,": ").concat(t)))}}catch(t){n(t)}}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A={},E=!0;function T(t,e,n){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(i.a.mark((function t(e,n,r){var a,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m(r)){t.next=7;break}return t.next=3,_(e,n,r);case 3:o=t.sent,a=o,t.next=8;break;case 7:a=j(e,r);case 8:return u=n&&n.imagebitmap,t.next=11,I(a,u);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return L.apply(this,arguments)}function L(){return(L=Object(a.a)(i.a.mark((function t(e){var n,r=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!P(n=r.length>1&&void 0!==r[1]?r[1]:null)&&E||(n=null),!n){t.next=13;break}return t.prev=3,t.next=6,createImageBitmap(e,n);case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(3),console.warn(t.t0),E=!1;case 13:return t.next=15,createImageBitmap(e);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function P(t){for(var e in t||A)return!1;return!0}function R(t){var e=M(t);return function(t){var e=M(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,!1)))return null;return{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}(e)||function(t){var e=M(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2)))return null;var n=function(){for(var t=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)t.add(e);var n=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:n}}(),r=n.tableMarkers,i=n.sofMarkers,a=2;for(;a+9<e.byteLength;){var o=e.getUint16(a,!1);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(a+5,!1),width:e.getUint16(a+7,!1)};if(!r.has(o))return null;a+=2,a+=e.getUint16(a,!1)}return null}(e)||function(t){var e=M(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,!1)))return null;return{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}(e)||function(t){var e=M(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,!1)&&e.getUint32(2,!0)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}(e)}function M(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function C(t,e){var n=(R(t)||{}).mimeType,r=u.a._parseImageNode;return o(r),r(t,n,e)}function D(){return(D=Object(a.a)(i.a.mark((function t(e,n,r){var a,u,s,c,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(n=n||{}).image||{},u=a.type||"auto",s=(r||{}).url,c=B(u),t.t0=c,t.next="imagebitmap"===t.t0?8:"image"===t.t0?12:"data"===t.t0?16:20;break;case 8:return t.next=10,T(e,n,s);case 10:return f=t.sent,t.abrupt("break",21);case 12:return t.next=14,_(e,n,s);case 14:return f=t.sent,t.abrupt("break",21);case 16:return t.next=18,C(e,n);case 18:return f=t.sent,t.abrupt("break",21);case 20:o(!1);case 21:return"data"===u&&(f=b(f)),t.abrupt("return",f);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t){switch(t){case"auto":case"data":return function(){if(f)return"imagebitmap";if(c)return"image";if(h)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return f||c||h;case"imagebitmap":return f;case"image":return c;case"data":return h;case"html":return c;case"ndarray":return h;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}var N={id:"image",name:"Images",version:"2.3.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(t,e,n){return D.apply(this,arguments)},tests:[function(t){return Boolean(R(new DataView(t)))}],options:{image:{type:"auto",decode:!0}}};e.a=N},function(t,e,n){"use strict";n.d(e,"a",(function(){return J}));var r,i=n(2),a=n(1),o=n(29),u=n(14),s=n(6),c=n(7),f=n(3),l=n(38),h=n(43),d=n(57),v=n(0),b=n(4),g=n(80),p=n(22),y=(r={},Object(v.a)(r,5126,R.bind(null,"uniform1fv",k,1,M)),Object(v.a)(r,35664,R.bind(null,"uniform2fv",k,2,M)),Object(v.a)(r,35665,R.bind(null,"uniform3fv",k,3,M)),Object(v.a)(r,35666,R.bind(null,"uniform4fv",k,4,M)),Object(v.a)(r,5124,R.bind(null,"uniform1iv",w,1,M)),Object(v.a)(r,35667,R.bind(null,"uniform2iv",w,2,M)),Object(v.a)(r,35668,R.bind(null,"uniform3iv",w,3,M)),Object(v.a)(r,35669,R.bind(null,"uniform4iv",w,4,M)),Object(v.a)(r,35670,R.bind(null,"uniform1iv",w,1,M)),Object(v.a)(r,35671,R.bind(null,"uniform2iv",w,2,M)),Object(v.a)(r,35672,R.bind(null,"uniform3iv",w,3,M)),Object(v.a)(r,35673,R.bind(null,"uniform4iv",w,4,M)),Object(v.a)(r,35674,R.bind(null,"uniformMatrix2fv",k,4,C)),Object(v.a)(r,35675,R.bind(null,"uniformMatrix3fv",k,9,C)),Object(v.a)(r,35676,R.bind(null,"uniformMatrix4fv",k,16,C)),Object(v.a)(r,35678,P),Object(v.a)(r,35680,P),Object(v.a)(r,5125,R.bind(null,"uniform1uiv",A,1,M)),Object(v.a)(r,36294,R.bind(null,"uniform2uiv",A,2,M)),Object(v.a)(r,36295,R.bind(null,"uniform3uiv",A,3,M)),Object(v.a)(r,36296,R.bind(null,"uniform4uiv",A,4,M)),Object(v.a)(r,35685,R.bind(null,"uniformMatrix2x3fv",k,6,C)),Object(v.a)(r,35686,R.bind(null,"uniformMatrix2x4fv",k,8,C)),Object(v.a)(r,35687,R.bind(null,"uniformMatrix3x2fv",k,6,C)),Object(v.a)(r,35688,R.bind(null,"uniformMatrix3x4fv",k,12,C)),Object(v.a)(r,35689,R.bind(null,"uniformMatrix4x2fv",k,8,C)),Object(v.a)(r,35690,R.bind(null,"uniformMatrix4x3fv",k,12,C)),Object(v.a)(r,35678,P),Object(v.a)(r,35680,P),Object(v.a)(r,35679,P),Object(v.a)(r,35682,P),Object(v.a)(r,36289,P),Object(v.a)(r,36292,P),Object(v.a)(r,36293,P),Object(v.a)(r,36298,P),Object(v.a)(r,36299,P),Object(v.a)(r,36300,P),Object(v.a)(r,36303,P),Object(v.a)(r,36306,P),Object(v.a)(r,36307,P),Object(v.a)(r,36308,P),Object(v.a)(r,36311,P),r),m={},O={},j={},_=[0];function x(t,e,n,r){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(_[0]=t,t=_);var i=t.length;if(i%e&&b.j.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;var a=r[i];a||(a=new n(i),r[i]=a);for(var o=0;o<i;o++)a[o]=t[o];return a}function k(t,e){return x(t,e,Float32Array,m)}function w(t,e){return x(t,e,Int32Array,O)}function A(t,e){return x(t,e,Uint32Array,j)}function E(t,e,n){var r=y[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function T(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function S(t,e,n){for(var r in t){var i=t[r];if((!n||Boolean(n[r]))&&!I(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function I(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof h.a||(t instanceof g.a||t instanceof d.a&&Boolean(t.texture))))}function L(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e])for(var r=t[e],i=0,a=n.length;i<a;++i)r[i]=n[i];else t[e]=n.slice();else t[e]=n}function P(){var t=null;return function(e,n,r){var i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function R(t,e,n,r){var i=null,a=null;return function(o,u,s){var c=e(s,n),f=c.length,l=!1;if(null===i)i=new Float32Array(f),a=f,l=!0;else{Object(p.a)(a===f,"Uniform length cannot change.");for(var h=0;h<f;++h)if(c[h]!==i[h]){l=!0;break}}return l&&(r(o,t,u,c),i.set(c)),l}}function M(t,e,n,r){t[e](n,r)}function C(t,e,n,r){t[e](n,!1,r)}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function B(t,e,n,r){for(var i=t.split(/\r?\n/),a={},o={},u=r||D(e)||"(unnamed)",s="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(u),c=0;c<i.length;c++){var f=i[c];if(!(f.length<=1)){var l=f.split(":"),h=l[0],d=parseInt(l[2],10);if(isNaN(d))throw new Error("GLSL compilation error in ".concat(s,": ").concat(t));"WARNING"!==h?a[d]=f:o[d]=f}}var v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((function(t,r){var a=String(r+e),o=a.length;return F(a,i-o)+n+t}))}(e);return{shaderName:s,errors:N(a,v),warnings:N(o,v)}}function N(t,e){for(var n="",r=0;r<e.length;r++){var i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){var a=t[r+1],o=a.split(":",3),u=o[0],s=parseInt(o[1],10)||0,c=a.substring(o.join(":").length+1).trim();n+=F("^^^ ".concat(u,": ").concat(c,"\n\n"),s)}}return n}function F(t,e){for(var n="",r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}var U=n(91);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var V=function(t){Object(s.a)(n,t);var e=z(n);function n(t,r){var a;Object(i.a)(this,n),Object(b.b)(t),Object(p.a)("string"==typeof r.source,"Shader: GLSL source code must be a JavaScript string");var o=D(r.source,null)||r.id||Object(U.c)("unnamed ".concat(n.getTypeName(r.shaderType)));return(a=e.call(this,t,{id:o})).shaderType=r.shaderType,a.source=r.source,a.initialize(r),a}return Object(a.a)(n,null,[{key:"getTypeName",value:function(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(p.a)(!1),"unknown"}}}]),Object(a.a)(n,[{key:"initialize",value:function(t){var e=t.source,n=D(e,null);n&&(this.id=Object(U.c)(n)),this._compile(e)}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:"toString",value:function(){return"".concat(n.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return D(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var e=this.getParameter(35713);if(!e){var n=this.gl.getShaderInfoLog(this.handle),r=B(n,this.source,this.shaderType,this.id),i=r.shaderName,a=r.errors,o=r.warnings;throw b.j.error("GLSL compilation errors in ".concat(i,"\n").concat(a))(),b.j.warn("GLSL compilation warnings in ".concat(i,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),n}(l.a),G=function(t){Object(s.a)(n,t);var e=z(n);function n(t,r){return Object(i.a)(this,n),"string"==typeof r&&(r={source:r}),e.call(this,t,Object.assign({},r,{shaderType:35633}))}return Object(a.a)(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),n}(V),W=function(t){Object(s.a)(n,t);var e=z(n);function n(t,r){return Object(i.a)(this,n),"string"==typeof r&&(r={source:r}),e.call(this,t,Object.assign({},r,{shaderType:35632}))}return Object(a.a)(n,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),n}(V),H=n(49),q=n(62),X=function(){function t(e){Object(i.a)(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return Object(a.a)(t,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),r=0;r<n;r++){var i=e.getActiveAttrib(t.handle,r),a=i.name,o=i.type,u=i.size,s=e.getAttribLocation(t.handle,a);s>=0&&this._addAttribute(s,a,o,u)}this.attributeInfos.sort((function(t,e){return t.location-e.location}))}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if(Object(b.i)(e)){for(var n=e.getProgramParameter(t.handle,35971),r=0;r<n;r++){var i=e.getTransformFeedbackVarying(t.handle,r),a=i.name,o=i.type,u=i.size;this._addVarying(r,a,o,u)}this.varyingInfos.sort((function(t,e){return t.location-e.location}))}}},{key:"_addAttribute",value:function(t,e,n,r){var i=Object(q.a)(n),a={type:i.type,size:r*i.components};this._inferProperties(t,e,a);var o={location:t,name:e,accessor:new H.a(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[t]=o,this.attributeInfosByName[o.name]=o}},{key:"_inferProperties",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:"_addVarying",value:function(t,e,n,r){var i=Object(q.a)(n),a=i.type,o=i.components,u={location:t,name:e,accessor:new H.a({type:a,size:r*o})};this.varyingInfos.push(u),this.varyingInfosByName[u.name]=u}}]),t}(),Z=n(74);function Q(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var $=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],J=function(t){Object(s.a)(n,t);var e=K(n);function n(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,n),(r=e.call(this,t,a)).stubRemovedMethods("Program","v6.0",$),r._isCached=!1,r.initialize(a),Object.seal(Object(o.a)(r)),r._setId(a.id),r}return Object(a.a)(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.hash,n=t.vs,r=t.fs,i=t.varyings,a=t.bufferMode,o=void 0===a?35981:a;return this.hash=e||"",this.vs="string"==typeof n?new G(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new W(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,Object(p.a)(this.vs instanceof G),Object(p.a)(this.fs instanceof W),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(Object(b.a)(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new X(this),this.setProps(t)}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(u.a)(Object(f.a)(n.prototype),"delete",this).call(this,t)}},{key:"setProps",value:function(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}},{key:"draw",value:function(t){var e=this,n=t.logPriority,r=t.drawMode,i=void 0===r?4:r,a=t.vertexCount,o=t.offset,u=void 0===o?0:o,s=t.start,c=t.end,f=t.isIndexed,l=void 0!==f&&f,h=t.indexType,d=void 0===h?5123:h,v=t.instanceCount,g=void 0===v?0:v,y=t.isInstanced,m=void 0===y?g>0:y,O=t.vertexArray,j=void 0===O?null:O,_=t.transformFeedback,x=t.framebuffer,k=t.parameters,w=void 0===k?{}:k,A=t.uniforms,E=t.samplers;if((A||E)&&(b.j.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(A||{})),b.j.priority>=n){var T=x?x.id:"default",S="mode=".concat(Object(Z.a)(this.gl,i)," verts=").concat(a," ")+"instances=".concat(g," indexType=").concat(Object(Z.a)(this.gl,d)," ")+"isInstanced=".concat(m," isIndexed=").concat(l," ")+"Framebuffer=".concat(T);b.j.log(n,S)()}return Object(p.a)(j),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===a||m&&0===g)&&(j.bindForDraw(a,g,(function(){if(void 0!==x&&(w=Object.assign({},w,{framebuffer:x})),_){var t=Object(q.c)(i);_.begin(t)}e._bindTextures(),Object(b.n)(e.gl,w,(function(){l&&m?e.gl2.drawElementsInstanced(i,a,d,u,g):l&&Object(b.i)(e.gl)&&!isNaN(s)&&!isNaN(c)?e.gl2.drawRangeElements(i,s,c,a,d,u):l?e.gl.drawElements(i,a,d,u):m?e.gl2.drawArraysInstanced(i,u,a,g):e.gl.drawArrays(i,u,a)})),_&&_.end()})),!0)}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in b.j.priority>=2&&S(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle),t){var n=t[e],r=this._uniformSetters[e];if(r){var i=n,a=!1;if(i instanceof d.a&&(i=i.texture),i instanceof h.a)if(a=this.uniforms[e]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var o=i,u=r.textureIndex;o.bind(u),i=u,this._textureUniforms[e]=o}else i=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(i)||a)&&L(this.uniforms,e,n)}}return this}},{key:"_areTexturesRenderable",value:function(){var t=!0;for(var e in this._textureUniforms){var n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}},{key:"_bindTextures",value:function(){for(var t in this._textureUniforms){var e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(t){var e,n={},r=Q(this.gl.getAttachedShaders(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new G({handle:i});break;case 35632:n.fs=new W({handle:i})}}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=Object(U.c)(e)}}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}},{key:"_compileAndLink",value:function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),b.j.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),b.j.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||b.j.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var n=this.gl.getActiveUniform(this.handle,e),r=T(n.name).name,i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=E(t,i,n),n.size>1)for(var a=0;a<n.size;a++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(a,"]")),this._uniformSetters["".concat(r,"[").concat(a,"]")]=E(t,i,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}},{key:"getUniformBlockIndex",value:function(t){return this.gl2.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"uniformBlockBinding",value:function(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}]),n}(l.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var r=n(2),i=n(1),a=n(8),o=n(116),u="void main() {gl_FragColor = vec4(0);}",s="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",c="#version 300 es\n".concat(s);function f(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\s+/,"").split(/\s+/),r=Object(a.a)(n,3),i=r[0],o=r[1],u=r[2];return e.includes(i)&&o&&u?{qualifier:i,type:o,name:u.split(";")[0]}:null}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,a=t.output;if(!r)return 300===n?c:n>300?"#version ".concat(n,"\n").concat(s):u;var o=d(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function h(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Object(o.a)(!1),null}}function d(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Object(o.a)(!1),null}}var v=n(4),b=n(34),g=n(210),p=n(22);function y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(i.a)(t,[{key:"setupResources",value:function(t){var e,n=y(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._setupTransformFeedback(r,t)}}catch(t){n.e(t)}finally{n.f()}}},{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.varyings;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.transformFeedback,i=Object.assign({},n,t.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}},{key:"getBuffer",value:function(t){var e=this.bindings[this.currentIndex].feedbackBuffers,n=t?e[t]:null;return n?n instanceof b.a?n:n.buffer:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=this.getBuffer(e);return n?n.getData():null}},{key:"delete",value:function(){for(var t in this.resources)this.resources[t].delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(p.a)(Object(v.i)(this.gl))}},{key:"_getFeedbackBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?{}:e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var a=this.feedbackMap[i];i in n&&(r[a]=i)}for(var o in Object.assign(r,t.feedbackBuffers),r){var u=r[o];if("string"==typeof u){var s=n[u],c=s.byteLength,f=s.usage,l=s.accessor;r[o]=this._createNewBuffer(o,{byteLength:c,usage:f,accessor:l})}}return r}},{key:"_setupBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=void 0===e?null:e;Object.assign(this.feedbackMap,t.feedbackMap);var r=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(t,e){var n=e.model.program;t.transformFeedback=new g.a(this.gl,{program:n,buffers:t.feedbackBuffers})}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){var e=this._swapBuffers(this.bindings[this.currentIndex]),n=e.sourceBuffers,r=e.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}},{key:"_swapBuffers",value:function(t){if(!this.feedbackMap)return null;var e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],Object(p.a)(n[i]instanceof b.a)}return{sourceBuffers:e,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(t,e){var n=new b.a(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),t}(),j=n(0),_=n(129),x=n(87),k=n(57),w=n(159);function A(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var E,T=n(117),S={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function I(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,a=Object.keys(n).length,u=null,s={},c=e,l={};if(a>0||r){var h=c.split("\n"),d=h.slice();if(h.forEach((function(t,e,i){if(a>0){var c=function(t,e){var n={},r=function(t){return f(t,["attribute","in"])}(t);if(!r)return null;var i=r.type,a=r.name;if(a&&e[a]){var u="// ".concat(t," => Replaced by Transform with a sampler"),s=function(t){var e="".concat("transform_uSampler_").concat(t),n="".concat("transform_uSize_").concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(a),c=s.samplerName,l=s.sizeName,h=s.uniformDeclerations,d=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Object(o.a)(!1),null}}(i),v="  ".concat(i," ").concat(a," = transform_getInput(").concat(c,", ").concat(l,").").concat(d,";\n");return n[c]=a,{updatedLine:u,inject:{"vs:#decl":h,"vs:#main-start":v},samplerTextureMap:n}}return null}(t,n);if(c){var h=c.updatedLine,v=c.inject;d[e]=h,l=Object(T.b)([l,v]),Object.assign(s,c.samplerTextureMap),a--}}r&&!u&&(u=function(t,e){var n=f(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){Object(p.a)(i);var v="".concat("transform_uSize_").concat(r),b={"vs:#decl":"uniform vec2 ".concat(v,";\n"),"vs:#main-start":"     vec2 ".concat("transform_position"," = transform_getPos(").concat(v,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n")};l=Object(T.b)([l,b])}c=d.join("\n")}return{vs:c,targetTextureType:u,inject:l,samplerTextureMap:s}}function L(t){var e,n,r=t.sourceTextureMap,i=t.targetTextureVarying,a=t.targetTexture,o={};for(var u in i&&(e=a.width,n=a.height,o["".concat("transform_uSize_").concat(i)]=[e,n]),r){var s=r[u];e=s.width,n=s.height,o["".concat("transform_uSize_").concat(u)]=[e,n]}return o}var P=(E={},Object(j.a)(E,10241,9728),Object(j.a)(E,10240,9728),Object(j.a)(E,10242,33071),Object(j.a)(E,10243,33071),E),R=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(i.a)(t,[{key:"updateModelProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}},{key:"getDrawOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.sourceTextures,i=e.framebuffer,a=e.targetTexture,o=Object.assign({},n,t.attributes),u=Object.assign({},t.uniforms),s=Object.assign({},t.parameters),c=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var f in o.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var l=this.samplerTextureMap[f];u[f]=r[l]}this._setSourceTextureParameters();var h=L({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:a});Object.assign(u,h)}return this.hasTargetTexture&&(c=!1,s.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:u,discard:c,parameters:s}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.packed,n=void 0!==e&&e,r=this.bindings[this.currentIndex].framebuffer,i=Object(_.c)(r);if(!n)return i;for(var a=i.constructor,o=h(this.targetTextureType),u=new a(i.length*o/4),s=0,c=0;c<i.length;c+=4)for(var f=0;f<o;f++)u[s++]=i[c+f];return u}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._targetTextureVarying,n=t._swapTexture;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}},{key:"_createTargetTexture",value:function(t){var e=t.sourceTextures,n=t.textureOrReference;if(n instanceof x.a)return n;var r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=t._sourceTextures,r=void 0===n?{}:n,i=t._targetTexture,a=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:r,targetTexture:a}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}},{key:"_updateElementIDBuffer",value:function(t){if(!("number"!=typeof t||this.elementCount>=t)){var e=new Float32Array(t);e.forEach((function(t,e,n){n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new b.a(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}}},{key:"_updateBindings",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){var e=this._swapTextures(this.bindings[this.currentIndex]),n=e.sourceTextures,r=e.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(t,e){var n=e.sourceBuffers,r=e.sourceTextures,i=e.targetTexture;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;var a=i.width,o=i.height,u=t.framebuffer;u?(u.update({attachments:Object(j.a)({},36064,i),resizeAttachments:!1}),u.resize({width:a,height:o})):t.framebuffer=new k.a(this.gl,{id:"transform-framebuffer",width:a,height:o,attachments:Object(j.a)({},36064,i)})}return t}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex,e=this.bindings[t].sourceTextures;for(var n in e)e[n].setParameters(P)}},{key:"_swapTextures",value:function(t){if(!this._swapTexture)return null;var e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(t){var e,n=Object(w.a)(t,{parameters:(e={},Object(j.a)(e,10241,9728),Object(j.a)(e,10240,9728),Object(j.a)(e,10242,33071),Object(j.a)(e,10243,33071),e),pixelStore:Object(j.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceTextures,r=e.targetTexture,i=I({vs:t.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),a=i.vs,o=i.uniforms,u=i.targetTextureType,s=i.inject,c=i.samplerTextureMap,f=Object(T.b)([t.inject||{},s]);this.targetTextureType=u,this.samplerTextureMap=c;var h=t._fs||l({version:A(a),input:this.targetTextureVarying,inputType:u,output:"transform_output"}),d=this.hasSourceTextures||this.targetTextureVarying?[S].concat(t.modules||[]):t.modules;return{vs:a,fs:h,modules:d,uniforms:o,inject:f}}}]),t}(),M=n(91),C=n(156);function D(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var N=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(i.a)(t,null,[{key:"isSupported",value:function(t){return Object(v.i)(t)}}]),Object(i.a)(t,[{key:"delete",value:function(){var t=this.model,e=this.bufferTransform,n=this.textureTransform;t&&t.delete(),e&&e.delete(),n&&n.delete()}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRenderTarget,n=void 0===e||e,r=this._updateDrawOptions(t);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var t,e=!1,n=D([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(n.s();!(t=n.n()).done;){var r=t.value;e=e||r.swap()}}catch(t){n.e(t)}finally{n.f()}Object(p.a)(e,"Nothing to swap")}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}},{key:"getData",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=D(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.getData(e);if(a)return a}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);var e,n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=D(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.update(t)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new C.a(e,Object.assign({},t,{fs:t.fs||l({version:A(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(t){var e,n=Object.assign({},t),r=D([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(r.s();!(e=r.n()).done;){n=e.value.updateModelProps(n)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"_buildResourceTransforms",value:function(t,e){(function(t){if(!Object(M.a)(t.feedbackBuffers)||!Object(M.a)(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new O(t,e)),function(t){if(!Object(M.a)(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new R(t,e)),Object(p.a)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(t){var e,n=Object.assign({},t),r=D([this.bufferTransform,this.textureTransform].filter(Boolean));try{for(r.s();!(e=r.n()).done;){var i=e.value;n=Object.assign(n,i.getDrawOptions(n))}}catch(t){r.e(t)}finally{r.f()}return n}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o={lightSources:{}};function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?[0,0,0]:e,r=t.intensity,i=void 0===r?1:r;return n.map((function(t){return t*i/255}))}function s(t){var e=t.ambientLight,n=t.pointLights,r=void 0===n?[]:n,i=t.directionalLights,a=void 0===i?[]:i,o={};return o["lighting_uAmbientLight.color"]=e?u(e):[0,0,0],r.forEach((function(t,e){o["lighting_uPointLight[".concat(e,"].color")]=u(t),o["lighting_uPointLight[".concat(e,"].position")]=t.position,o["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),o.lighting_uPointLightCount=r.length,a.forEach((function(t,e){o["lighting_uDirectionalLight[".concat(e,"].color")]=u(t),o["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),o.lighting_uDirectionalLightCount=a.length,o}var c={name:"lights",vs:r,fs:r,getUniforms:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if("lightSources"in e){var n=e.lightSources||{},r=n.ambientLight,a=n.pointLights,u=n.directionalLights,c=r||a&&a.length>0||u&&u.length>0;return c?Object.assign({},s({ambientLight:r,pointLights:a,directionalLights:u}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){var f,l={pointLights:[],directionalLights:[]},h=i(e.lights||[]);try{for(h.s();!(f=h.n()).done;){var d=f.value;switch(d.type){case"ambient":l.ambientLight=d;break;case"directional":l.directionalLights.push(d);break;case"point":l.pointLights.push(d)}}}catch(t){h.e(t)}finally{h.f()}return t({lightSources:l})}return{}},defines:{MAX_LIGHTS:3}},f="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",l={};function h(t){var e=t.ambient,n=void 0===e?.35:e,r=t.diffuse,i=void 0===r?.6:r,a=t.shininess,o=void 0===a?32:a,u=t.specularColor;return{lighting_uAmbient:n,lighting_uDiffuse:i,lighting_uShininess:o,lighting_uSpecularColor:(void 0===u?[30,30,30]:u).map((function(t){return t/255}))}}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;if(!("material"in t))return{};var e=t.material;return e?h(e):{lighting_uEnabled:!1}}var v={name:"gouraud-lighting",dependencies:[c],vs:f,defines:{LIGHTING_VERTEX:1},getUniforms:d}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var r=n(13),i=n(5),a=n.n(i),o=n(12),u=n(2),s=n(1),c=n(4),f=n(100),l=n(22),h=n(29),d=n(6),v=n(7),b=n(3),g=n(38),p=n(203),y=n(123);function m(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(b.a)(t);if(e){var i=Object(b.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}var _=function(t){Object(d.a)(n,t);var e=j(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,n),(r=e.call(this,t,i)).target=null,r._queryPending=!1,r._pollingPromise=null,Object.seal(Object(h.a)(r)),r}return Object(s.a)(n,null,[{key:"isSupported",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(c.i)(t),i=Object(p.c)(t,y.a.TIMER_QUERY),a=r||i,o=m(n);try{for(o.s();!(e=o.n()).done;){var u=e.value;switch(u){case"queries":a=a&&r;break;case"timers":a=a&&i;break;default:Object(l.a)(!1)}}}catch(t){o.e(t)}finally{o.f()}return a}}]),Object(s.a)(n,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.conservative,n=void 0!==e&&e;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}},{key:"isTimerDisjoint",value:function(){return this.gl2.getParameter(36795)}},{key:"getResult",value:function(){return this.gl2.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function a(){t.isResultAvailable()?(r(t.getResult()),t._pollingPromise=null):n++>e?(i("Timed out"),t._pollingPromise=null):requestAnimationFrame(a)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return n.isSupported(this.gl)?this.gl2.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl2.deleteQuery(this.handle)}}]),n}(g.a);function x(t){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var k=n(57),w=n(24),A=Object(w.isBrowser)()&&"undefined"!=typeof document,E=0,T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,t);var n=e.onCreateContext,r=void 0===n?function(t){return Object(c.c)(t)}:n,i=e.onAddHTML,a=void 0===i?null:i,o=e.onInitialize,s=void 0===o?function(){}:o,l=e.onRender,h=void 0===l?function(){}:l,d=e.onFinalize,v=void 0===d?function(){}:d,b=e.onError,g=e.gl,p=void 0===g?null:g,y=e.glOptions,m=void 0===y?{}:y,O=e.debug,j=void 0!==O&&O,_=e.createFramebuffer,x=void 0!==_&&_,k=e.autoResizeViewport,w=void 0===k||k,A=e.autoResizeDrawingBuffer,T=void 0===A||A,S=e.stats,I=void 0===S?f.a.get("animation-loop-".concat(E++)):S,L=e.useDevicePixels,P=void 0===L||L;"useDevicePixelRatio"in e&&(c.j.deprecated("useDevicePixelRatio","useDevicePixels")(),P=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:a,onInitialize:s,onRender:h,onFinalize:v,onError:b,gl:p,glOptions:m,debug:j,createFramebuffer:x},this.gl=p,this.needsRedraw=null,this.timeline=null,this.stats=I,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:T,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var e;return Object(s.a)(t,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(t){return Object(l.a)("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;var n=this._getPageLoadPromise().then((function(){return!t._running||t._initialized?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t._gpuTimeQuery=_.isSupported(t.gl,["timers"])?new _(t.gl):null,t._initialized=!0,t.onInitialize(t.animationProps))})).then((function(e){t._running&&(t._addCallbackData(e||{}),!1!==e&&t._startLoop())}));return this.props.onError&&n.catch(this.props.onError),this}},{key:"redraw",value:function(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),x(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(t){return this.timeline=t,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var t=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(e){t._resolveNextFrame=e}))),this._nextFramePromise}},{key:"toDataURL",value:(e=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setNeedsRedraw("toDataURL"),t.next=3,this.waitForRender();case 3:return t.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"isContextLost",value:function(){return this.gl.isContextLost()}},{key:"onCreateContext",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:"onInitialize",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:"onRender",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:"onFinalize",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:"setViewParameters",value:function(){return c.j.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var t=this;x(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function e(){t._running&&(t.redraw(),t._animationFrameId=t._requestAnimationFrame(e))}))}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=A?new Promise((function(t,e){A&&"complete"===document.readyState?t(document):window.addEventListener("load",(function(){t(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}},{key:"_requestAnimationFrame",value:function(t){var e;this.display&&this.display.requestAnimationFrame(t)||(e=t,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60))}},{key:"_renderFrame",value:function(){var t;this.display?(t=this.display)._renderFrame.apply(t,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var t=this._getSizeAndAspect(),e=t.width,n=t.height,r=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"===Object(r.a)(t)&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Object(c.g)(this.props.gl,t):this.onCreateContext(t),!Object(c.h)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(c.k)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&Object(c.l)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new k.a(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var t=this.gl.canvas;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}()}]]);