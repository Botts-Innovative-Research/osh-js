(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* unused harmony export MAX_LONG */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return isDefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return hasValue; });\n/* unused harmony export hex2rgb */\n/* unused harmony export hasType */\n/* unused harmony export isObject */\n/* unused harmony export isArray */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return isFunction; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return assertDefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return assertTrue; });\n/* unused harmony export assertType */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return assertBoolean; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return assertString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return assertNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return assertPositive; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return assertObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return assertArray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return assertFunction; });\n/* unused harmony export assertHasValue */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return randomUUID; });\n/* unused harmony export stampUUID */\n/* unused harmony export ParseBytes */\n/* unused harmony export ReadData */\n/* unused harmony export GetResultObject */\n/* unused harmony export isOpera */\n/* unused harmony export isFirefox */\n/* unused harmony export isSafari */\n/* unused harmony export isChrome */\n/* unused harmony export isBlink */\n/* unused harmony export isArrayIntersect */\n/* unused harmony export isElement */\n/* unused harmony export isWebWorker */\n/* unused harmony export takeScreenShot */\n/* unused harmony export removeCss */\n/* unused harmony export addCss */\n/* unused harmony export removeLastCharIfExist */\n/* unused harmony export roundHalf */\n/* unused harmony export debounce */\n/* unused harmony export throttle */\n/* unused harmony export merge */\n/* unused harmony export rgbaToArray */\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/** * @module Utils */\n\n/** Maximum value of a long */\nconst MAX_LONG = Math.pow(2, 53) + 1;\n/**\n * Global helper method to test if a letiable or object attribute is defined\n */\n\nfunction isDefined(v) {\n  return typeof v !== \'undefined\' && v !== null;\n}\n/**\n Global helper method to test if a letiable or object attribute has a value,\n that is it is defined and non null\n */\n\nfunction hasValue(v) {\n  return isDefined(v) && v !== null;\n}\n/**\n Global helper method to transform hex color into RGBA\n */\n\nfunction hex2rgb(hex) {\n  const [r, g, b] = hex.match(/\\w\\w/g).map(x => parseInt(x, 16));\n  return [r, g, b];\n}\n/**\n Global helper method to test if a letiable or object attribute is of a particular type\n */\n\nfunction hasType(v, expectedType) {\n  let hasVal = hasValue(v);\n  return hasVal && typeof v === expectedType;\n}\n/**\n Global helper method to test if a letiable or object attribute is an object\n */\n\nfunction isObject(v, letName) {\n  return hasType(v, \'object\', letName);\n}\n/**\n Global helper method to test if a letiable or object attribute is an array\n */\n\nfunction isArray(v) {\n  return isDefined(v) && Array.isArray(v);\n}\n/**\n Global helper method to test if a letiable or object attribute is a function\n */\n\nfunction isFunction(v, letName) {\n  return hasType(v, \'function\', letName);\n}\n/**\n Assert that a letiable or object attribute is defined\n **/\n\nfunction assertDefined(v, letName = \'letiable\') {\n  if (!isDefined(v)) {\n    throw letName + " must be defined";\n  }\n\n  return v;\n}\nfunction assertTrue(v, letName = \'letiable\') {\n  if (!isDefined(v) || !v) {\n    throw letName;\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\n\nfunction assertType(v, expectedType, letName = \'letiable\') {\n  assertDefined(v, letName);\n\n  if (typeof v !== expectedType) {\n    throw letName + " must be of type " + expectedType;\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is a string\n **/\n\nfunction assertBoolean(v, letName) {\n  return assertType(v, \'boolean\', letName);\n}\n/**\n Assert that a letiable or object attribute is a string\n **/\n\nfunction assertString(v, letName) {\n  return assertType(v, \'string\', letName);\n}\n/**\n Assert that a letiable or object attribute is a number\n **/\n\nfunction assertNumber(v, letName) {\n  return assertType(v, \'number\', letName);\n}\n/**\n Assert that a letiable or object attribute is a number\n **/\n\nfunction assertPositive(v, letName) {\n  assertNumber(v, letName);\n\n  if (v <= 0) {\n    throw letName + " must be a positive number";\n  }\n}\n/**\n Assert that a letiable or object attribute is an object\n **/\n\nfunction assertObject(v, letName) {\n  return assertType(v, \'object\', letName);\n}\n/**\n Assert that a letiable or object attribute is an object\n **/\n\nfunction assertArray(v, letName = \'letiable\') {\n  assertDefined(v, letName);\n\n  if (!Array.isArray(v)) {\n    throw letName + " must be an array";\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is a function\n **/\n\nfunction assertFunction(v, letName) {\n  return assertType(v, \'function\', letName);\n}\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\n\nfunction assertHasValue(v, letName = \'letiable\') {\n  assertDefined(v, letName);\n\n  if (!hasValue(v)) {\n    throw letName + " must not be null";\n  }\n\n  return v;\n}\n/**\n *\n * @return {String}\n */\n\nfunction randomUUID() {\n  return \'xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx\'.replace(/[xy]/g, function (c) {\n    let r = Math.random() * 16 | 0,\n        v = c === \'x\' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n/**\n * This function stamps/embeds a UUID into an object and returns the UUID generated for it\n * @return {String}\n */\n\nfunction stampUUID(obj) {\n  obj._osh_id = obj._osh_id || randomUUID();\n  return obj._osh_id;\n} //buffer is an ArrayBuffer object, the offset if specified in bytes, and the type is a string\n//corresponding to an OGC data type.\n//See http://def.seegrid.csiro.au/sissvoc/ogc-def/resource?uri=http://www.opengis.net/def/dataType/OGC/0/\n\n/**\n *\n * @param buffer\n * @param offset\n * @param type\n * @return {*}\n */\n\nfunction ParseBytes(buffer, offset, type) {\n  let view = new DataView(buffer); //Note: There exist types not listed in the map below that have OGC definitions, but no appropriate\n  //methods or corresponding types available for parsing in javascript. They are float128, float16, signedLong,\n  //and unsignedLong\n\n  let typeMap = {\n    double: function (offset) {\n      return {\n        val: view.getFloat64(offset),\n        bytes: 8\n      };\n    },\n    float64: function (offset) {\n      return {\n        val: view.getFloat64(offset),\n        bytes: 8\n      };\n    },\n    float32: function (offset) {\n      return {\n        val: view.getFloat32(offset),\n        bytes: 4\n      };\n    },\n    signedByte: function (offset) {\n      return {\n        val: view.getInt8(offset),\n        bytes: 1\n      };\n    },\n    signedInt: function (offset) {\n      return {\n        val: view.getInt32(offset),\n        bytes: 4\n      };\n    },\n    signedShort: function (offset) {\n      return {\n        val: view.getInt16(offset),\n        bytes: 2\n      };\n    },\n    unsignedByte: function (offset) {\n      return {\n        val: view.getUint8(offset),\n        bytes: 1\n      };\n    },\n    unsignedInt: function (offset) {\n      return {\n        val: view.getUint32(offset),\n        bytes: 4\n      };\n    },\n    unsignedShort: function (offset) {\n      return {\n        val: view.getUint16(offset),\n        bytes: 2\n      };\n    } //TODO: string-utf-8:\n\n  };\n  return typeMap[type](offset);\n} //This function recursivley iterates over the resultStructure to fill in\n//values read from data which should be an ArrayBuffer containing the payload from a websocket\n\n/**\n *\n * @param struct\n * @param data\n * @param offsetBytes\n * @return {*}\n */\n\nfunction ReadData(struct, data, offsetBytes) {\n  let offset = offsetBytes;\n\n  for (let i = 0; i < struct.fields.length; i++) {\n    let currFieldStruct = struct.fields[i];\n\n    if (isDefined(currFieldStruct.type) && currFieldStruct.type !== null) {\n      let ret = ParseBytes(data, offset, currFieldStruct.type);\n      currFieldStruct.val = ret.val;\n      offset += ret.bytes;\n    } else if (isDefined(currFieldStruct.count) && currFieldStruct.count !== null) {\n      //check if count is a reference to another letiable\n      if (isNaN(currFieldStruct.count)) {\n        let id = currFieldStruct.count;\n        let fieldName = struct.id2FieldMap[id];\n        currFieldStruct.count = struct.findFieldByName(fieldName).val;\n      }\n\n      for (let c = 0; c < currFieldStruct.count; c++) {\n        for (let j = 0; j < currFieldStruct.fields.length; j++) {\n          let field = JSON.parse(JSON.stringify(currFieldStruct.fields[j]));\n          offset = ReadData(field, data, offset);\n          currFieldStruct.val.push(field);\n        }\n      }\n    }\n  }\n\n  return offset;\n}\n/**\n *\n * @param resultStructure\n * @return {{}}\n */\n\nfunction GetResultObject(resultStructure) {\n  //TODO: handle cases for nested arrays / matrix data types\n  let result = {};\n\n  for (let i = 0; i < resultStructure.fields.length; i++) {\n    if (isDefined(resultStructure.fields[i].count)) {\n      result[resultStructure.fields[i].name] = [];\n\n      for (let c = 0; c < resultStructure.fields[i].count; c++) {\n        let item = {};\n\n        for (let k = 0; k < resultStructure.fields[i].val[c].fields.length; k++) {\n          item[resultStructure.fields[i].val[c].fields[k].name] = resultStructure.fields[i].val[c].fields[k].val;\n        }\n\n        result[resultStructure.fields[i].name].push(item);\n      }\n    } else {\n      result[resultStructure.fields[i].name] = resultStructure.fields[i].val;\n    }\n  }\n\n  return result;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isOpera() {\n  return !!window.opr && !!opr.addons || !!window.opera || navigator.userAgent.indexOf(\' OPR/\') >= 0;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isFirefox() {\n  return typeof InstallTrigger !== \'undefined\';\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isSafari() {\n  return Object.prototype.toString.call(window.HTMLElement).indexOf(\'Constructor\') > 0;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isChrome() {\n  return !!window.chrome && !!window.chrome.webstore;\n}\n/**\n *\n * @return {*|boolean}\n */\n\nfunction isBlink() {\n  return (isChrome || isOpera) && !!window.CSS;\n}\n/**\n *\n * @param a\n * @param b\n * @return {boolean}\n */\n\nfunction isArrayIntersect(a, b) {\n  return a.filter(function (element) {\n    return b.indexOf(element) > -1;\n  }).length > 0;\n}\n/**\n *\n * @param o\n * @return {boolean}\n */\n\nfunction isElement(o) {\n  return typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2\n  o && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName === "string";\n}\n/**\n *\n * @return {*}\n */\n\nfunction isWebWorker() {\n  return isDefined(Worker);\n}\n/**\n *\n * @param div\n */\n\nfunction takeScreenShot(div) {}\n/**\n * Remove a css class from a the div given as argument.\n * @param div the div to remove the class from\n * @param css the css class to remove\n */\n\nfunction removeCss(div, css) {\n  let divCss = div.className;\n  css = divCss.replace(css, "");\n  div.className = css;\n}\n/**\n * Add a css class to a the div given as argument.\n * @param div the div to add the class to\n * @param css the css class to add\n */\n\nfunction addCss(div, css) {\n  div.setAttribute("class", div.className + " " + css);\n}\n/**\n * Removes the last character of a {string} object.\n * @param {string} value - The input {string}\n * @return {string} The value without the last character\n */\n\nfunction removeLastCharIfExist(value) {\n  if (!isDefined(undefined) || value === null || value.length === 0 || !value.endsWith("/")) {\n    return value;\n  }\n\n  return value.substring(0, value.length - 1);\n}\n/**\n * Round off number to nearest 0.5\n * @param {Number} num - The number to round off\n * @return {number} The rounded number\n */\n\nfunction roundHalf(num) {\n  return Math.round(num * 2) / 2;\n}\n/**\n * Returns a function that, as long as it continues to be invoked,\n * will not be executed. The function will only be executed when\n * it will stop being called for more than N milliseconds.\n * If the `immediate` parameter is true, then the function\n * will be executed at the first call instead of the last.\n * Parameters :\n * - func: the function to `debouncer`.\n * - wait: the number of milliseconds (N) to wait before\n * call func()\n * - immediate (optional): Call func() at the first invocation\n * instead of the last one (Default false)\n * - context (optional): the context in which to call func()\n * (this by default)\n */\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\nfunction debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n\n  var later = function () {\n    var now = new Date().getTime(),\n        last = now - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function () {\n    context = this;\n    args = arguments;\n    timestamp = new Date().getTime();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n}\n;\nfunction throttle(func, wait, leading, trailing, context) {\n  var ctx, args, result;\n  var timeout = null;\n  var previous = 0;\n\n  var later = function () {\n    previous = new Date();\n    timeout = null;\n    result = func.apply(ctx, args);\n  };\n\n  return function () {\n    var now = new Date();\n    if (!previous && !leading) previous = now;\n    var remaining = wait - (now - previous);\n    ctx = context || this;\n    args = arguments;\n\n    if (remaining <= 0) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(ctx, args);\n    } else if (!timeout && trailing) {\n      // Sinon on s’endort pendant le temps restant\n      timeout = setTimeout(later, remaining);\n    }\n\n    return result;\n  };\n}\n;\nfunction merge(target, source) {\n  // Iterate through `source` properties and if an `Object` set property to merge of `target` and `source` properties\n  for (const key of Object.keys(source)) {\n    if (source[key] instanceof Object && key in target) Object.assign(source[key], merge(target[key], source[key]));\n  } // Join `target` and modified `source`\n\n\n  Object.assign(target || {}, source);\n  return target;\n}\n;\nfunction rgbaToArray(str) {\n  let startIdxValue = str.indexOf(\'(\') + 1;\n  let endIdxValue = str.indexOf(\')\');\n  let values = str.substr(startIdxValue, endIdxValue - startIdxValue);\n  return values.split(\',\').map(Number);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91dGlscy9VdGlscy5qcz9mODdlIl0sIm5hbWVzIjpbIk1BWF9MT05HIiwiTWF0aCIsInBvdyIsImlzRGVmaW5lZCIsInYiLCJoYXNWYWx1ZSIsImhleDJyZ2IiLCJoZXgiLCJyIiwiZyIsImIiLCJtYXRjaCIsIm1hcCIsIngiLCJwYXJzZUludCIsImhhc1R5cGUiLCJleHBlY3RlZFR5cGUiLCJoYXNWYWwiLCJpc09iamVjdCIsImxldE5hbWUiLCJpc0FycmF5IiwiQXJyYXkiLCJpc0Z1bmN0aW9uIiwiYXNzZXJ0RGVmaW5lZCIsImFzc2VydFRydWUiLCJhc3NlcnRUeXBlIiwiYXNzZXJ0Qm9vbGVhbiIsImFzc2VydFN0cmluZyIsImFzc2VydE51bWJlciIsImFzc2VydFBvc2l0aXZlIiwiYXNzZXJ0T2JqZWN0IiwiYXNzZXJ0QXJyYXkiLCJhc3NlcnRGdW5jdGlvbiIsImFzc2VydEhhc1ZhbHVlIiwicmFuZG9tVVVJRCIsInJlcGxhY2UiLCJjIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdGFtcFVVSUQiLCJvYmoiLCJfb3NoX2lkIiwiUGFyc2VCeXRlcyIsImJ1ZmZlciIsIm9mZnNldCIsInR5cGUiLCJ2aWV3IiwiRGF0YVZpZXciLCJ0eXBlTWFwIiwiZG91YmxlIiwidmFsIiwiZ2V0RmxvYXQ2NCIsImJ5dGVzIiwiZmxvYXQ2NCIsImZsb2F0MzIiLCJnZXRGbG9hdDMyIiwic2lnbmVkQnl0ZSIsImdldEludDgiLCJzaWduZWRJbnQiLCJnZXRJbnQzMiIsInNpZ25lZFNob3J0IiwiZ2V0SW50MTYiLCJ1bnNpZ25lZEJ5dGUiLCJnZXRVaW50OCIsInVuc2lnbmVkSW50IiwiZ2V0VWludDMyIiwidW5zaWduZWRTaG9ydCIsImdldFVpbnQxNiIsIlJlYWREYXRhIiwic3RydWN0IiwiZGF0YSIsIm9mZnNldEJ5dGVzIiwiaSIsImZpZWxkcyIsImxlbmd0aCIsImN1cnJGaWVsZFN0cnVjdCIsInJldCIsImNvdW50IiwiaXNOYU4iLCJpZCIsImZpZWxkTmFtZSIsImlkMkZpZWxkTWFwIiwiZmluZEZpZWxkQnlOYW1lIiwiaiIsImZpZWxkIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwicHVzaCIsIkdldFJlc3VsdE9iamVjdCIsInJlc3VsdFN0cnVjdHVyZSIsInJlc3VsdCIsIm5hbWUiLCJpdGVtIiwiayIsImlzT3BlcmEiLCJ3aW5kb3ciLCJvcHIiLCJhZGRvbnMiLCJvcGVyYSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJpc0ZpcmVmb3giLCJJbnN0YWxsVHJpZ2dlciIsImlzU2FmYXJpIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiY2FsbCIsIkhUTUxFbGVtZW50IiwiaXNDaHJvbWUiLCJjaHJvbWUiLCJ3ZWJzdG9yZSIsImlzQmxpbmsiLCJDU1MiLCJpc0FycmF5SW50ZXJzZWN0IiwiYSIsImZpbHRlciIsImVsZW1lbnQiLCJpc0VsZW1lbnQiLCJvIiwibm9kZVR5cGUiLCJub2RlTmFtZSIsImlzV2ViV29ya2VyIiwiV29ya2VyIiwidGFrZVNjcmVlblNob3QiLCJkaXYiLCJyZW1vdmVDc3MiLCJjc3MiLCJkaXZDc3MiLCJjbGFzc05hbWUiLCJhZGRDc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVMYXN0Q2hhcklmRXhpc3QiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImVuZHNXaXRoIiwic3Vic3RyaW5nIiwicm91bmRIYWxmIiwibnVtIiwicm91bmQiLCJkZWJvdW5jZSIsImZ1bmMiLCJ3YWl0IiwiaW1tZWRpYXRlIiwidGltZW91dCIsImFyZ3MiLCJjb250ZXh0IiwidGltZXN0YW1wIiwibGF0ZXIiLCJub3ciLCJEYXRlIiwiZ2V0VGltZSIsImxhc3QiLCJzZXRUaW1lb3V0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJjYWxsTm93IiwidGhyb3R0bGUiLCJsZWFkaW5nIiwidHJhaWxpbmciLCJjdHgiLCJwcmV2aW91cyIsInJlbWFpbmluZyIsImNsZWFyVGltZW91dCIsIm1lcmdlIiwidGFyZ2V0Iiwic291cmNlIiwia2V5Iiwia2V5cyIsImFzc2lnbiIsInJnYmFUb0FycmF5Iiwic3RyIiwic3RhcnRJZHhWYWx1ZSIsImVuZElkeFZhbHVlIiwidmFsdWVzIiwic3Vic3RyIiwic3BsaXQiLCJOdW1iZXIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDTyxNQUFNQSxRQUFRLEdBQUdDLElBQUksQ0FBQ0MsR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFaLElBQWtCLENBQW5DO0FBRVA7QUFDQTtBQUNBOztBQUNPLFNBQVNDLFNBQVQsQ0FBbUJDLENBQW5CLEVBQXNCO0VBQ3pCLE9BQU8sT0FBUUEsQ0FBUixLQUFlLFdBQWYsSUFBOEJBLENBQUMsS0FBSyxJQUEzQztBQUNIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsUUFBVCxDQUFrQkQsQ0FBbEIsRUFBcUI7RUFDeEIsT0FBT0QsU0FBUyxDQUFDQyxDQUFELENBQVQsSUFBZ0JBLENBQUMsS0FBSyxJQUE3QjtBQUNIO0FBRUQ7QUFDQTtBQUNBOztBQUNPLFNBQVNFLE9BQVQsQ0FBaUJDLEdBQWpCLEVBQXFCO0VBQ3hCLE1BQU0sQ0FBQ0MsQ0FBRCxFQUFJQyxDQUFKLEVBQU9DLENBQVAsSUFBWUgsR0FBRyxDQUFDSSxLQUFKLENBQVUsT0FBVixFQUFtQkMsR0FBbkIsQ0FBdUJDLENBQUMsSUFBSUMsUUFBUSxDQUFDRCxDQUFELEVBQUksRUFBSixDQUFwQyxDQUFsQjtFQUNBLE9BQU8sQ0FBQ0wsQ0FBRCxFQUFJQyxDQUFKLEVBQU9DLENBQVAsQ0FBUDtBQUNIO0FBQ0Q7QUFDQTtBQUNBOztBQUNPLFNBQVNLLE9BQVQsQ0FBaUJYLENBQWpCLEVBQW9CWSxZQUFwQixFQUFrQztFQUNyQyxJQUFJQyxNQUFNLEdBQUdaLFFBQVEsQ0FBQ0QsQ0FBRCxDQUFyQjtFQUNBLE9BQU9hLE1BQU0sSUFBSSxPQUFRYixDQUFSLEtBQWVZLFlBQWhDO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7O0FBQ08sU0FBU0UsUUFBVCxDQUFrQmQsQ0FBbEIsRUFBcUJlLE9BQXJCLEVBQThCO0VBQ2pDLE9BQU9KLE9BQU8sQ0FBQ1gsQ0FBRCxFQUFJLFFBQUosRUFBY2UsT0FBZCxDQUFkO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsT0FBVCxDQUFpQmhCLENBQWpCLEVBQW9CO0VBQ3ZCLE9BQU9ELFNBQVMsQ0FBQ0MsQ0FBRCxDQUFULElBQWdCaUIsS0FBSyxDQUFDRCxPQUFOLENBQWNoQixDQUFkLENBQXZCO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7O0FBQ08sU0FBU2tCLFVBQVQsQ0FBb0JsQixDQUFwQixFQUF1QmUsT0FBdkIsRUFBZ0M7RUFDbkMsT0FBT0osT0FBTyxDQUFDWCxDQUFELEVBQUksVUFBSixFQUFnQmUsT0FBaEIsQ0FBZDtBQUNIO0FBRUQ7QUFDQTtBQUNBOztBQUNPLFNBQVNJLGFBQVQsQ0FBdUJuQixDQUF2QixFQUEwQmUsT0FBTyxHQUFHLFVBQXBDLEVBQWdEO0VBQ25ELElBQUksQ0FBQ2hCLFNBQVMsQ0FBQ0MsQ0FBRCxDQUFkLEVBQW1CO0lBQ2YsTUFBTWUsT0FBTyxHQUFHLGtCQUFoQjtFQUNIOztFQUNELE9BQU9mLENBQVA7QUFDSDtBQUVNLFNBQVNvQixVQUFULENBQW9CcEIsQ0FBcEIsRUFBdUJlLE9BQU8sR0FBRyxVQUFqQyxFQUE2QztFQUNoRCxJQUFJLENBQUNoQixTQUFTLENBQUNDLENBQUQsQ0FBVixJQUFpQixDQUFDQSxDQUF0QixFQUF5QjtJQUNyQixNQUFNZSxPQUFOO0VBQ0g7O0VBQ0QsT0FBT2YsQ0FBUDtBQUNIO0FBQ0Q7QUFDQTtBQUNBOztBQUNPLFNBQVNxQixVQUFULENBQW9CckIsQ0FBcEIsRUFBdUJZLFlBQXZCLEVBQXFDRyxPQUFPLEdBQUcsVUFBL0MsRUFBMkQ7RUFDOURJLGFBQWEsQ0FBQ25CLENBQUQsRUFBSWUsT0FBSixDQUFiOztFQUNBLElBQUksT0FBUWYsQ0FBUixLQUFlWSxZQUFuQixFQUFpQztJQUM3QixNQUFNRyxPQUFPLEdBQUcsbUJBQVYsR0FBZ0NILFlBQXRDO0VBQ0g7O0VBQ0QsT0FBT1osQ0FBUDtBQUNIO0FBRUQ7QUFDQTtBQUNBOztBQUNPLFNBQVNzQixhQUFULENBQXVCdEIsQ0FBdkIsRUFBMEJlLE9BQTFCLEVBQW1DO0VBQ3RDLE9BQU9NLFVBQVUsQ0FBQ3JCLENBQUQsRUFBSSxTQUFKLEVBQWVlLE9BQWYsQ0FBakI7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7QUFDTyxTQUFTUSxZQUFULENBQXNCdkIsQ0FBdEIsRUFBeUJlLE9BQXpCLEVBQWtDO0VBQ3JDLE9BQU9NLFVBQVUsQ0FBQ3JCLENBQUQsRUFBSSxRQUFKLEVBQWNlLE9BQWQsQ0FBakI7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7QUFDTyxTQUFTUyxZQUFULENBQXNCeEIsQ0FBdEIsRUFBeUJlLE9BQXpCLEVBQWtDO0VBQ3JDLE9BQU9NLFVBQVUsQ0FBQ3JCLENBQUQsRUFBSSxRQUFKLEVBQWNlLE9BQWQsQ0FBakI7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7QUFDTyxTQUFTVSxjQUFULENBQXdCekIsQ0FBeEIsRUFBMkJlLE9BQTNCLEVBQW9DO0VBQ3ZDUyxZQUFZLENBQUN4QixDQUFELEVBQUllLE9BQUosQ0FBWjs7RUFDQSxJQUFJZixDQUFDLElBQUksQ0FBVCxFQUFZO0lBQ1IsTUFBTWUsT0FBTyxHQUFHLDRCQUFoQjtFQUNIO0FBQ0o7QUFFRDtBQUNBO0FBQ0E7O0FBQ08sU0FBU1csWUFBVCxDQUFzQjFCLENBQXRCLEVBQXlCZSxPQUF6QixFQUFrQztFQUNyQyxPQUFPTSxVQUFVLENBQUNyQixDQUFELEVBQUksUUFBSixFQUFjZSxPQUFkLENBQWpCO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7O0FBQ08sU0FBU1ksV0FBVCxDQUFxQjNCLENBQXJCLEVBQXdCZSxPQUFPLEdBQUcsVUFBbEMsRUFBOEM7RUFDakRJLGFBQWEsQ0FBQ25CLENBQUQsRUFBSWUsT0FBSixDQUFiOztFQUNBLElBQUksQ0FBQ0UsS0FBSyxDQUFDRCxPQUFOLENBQWNoQixDQUFkLENBQUwsRUFBdUI7SUFDbkIsTUFBTWUsT0FBTyxHQUFHLG1CQUFoQjtFQUNIOztFQUNELE9BQU9mLENBQVA7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7QUFDTyxTQUFTNEIsY0FBVCxDQUF3QjVCLENBQXhCLEVBQTJCZSxPQUEzQixFQUFvQztFQUN2QyxPQUFPTSxVQUFVLENBQUNyQixDQUFELEVBQUksVUFBSixFQUFnQmUsT0FBaEIsQ0FBakI7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7QUFDTyxTQUFTYyxjQUFULENBQXdCN0IsQ0FBeEIsRUFBMkJlLE9BQU8sR0FBRyxVQUFyQyxFQUFpRDtFQUNwREksYUFBYSxDQUFDbkIsQ0FBRCxFQUFJZSxPQUFKLENBQWI7O0VBQ0EsSUFBSSxDQUFDZCxRQUFRLENBQUNELENBQUQsQ0FBYixFQUFrQjtJQUNkLE1BQU1lLE9BQU8sR0FBRyxtQkFBaEI7RUFDSDs7RUFDRCxPQUFPZixDQUFQO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxTQUFTOEIsVUFBVCxHQUFzQjtFQUN6QixPQUFPLHVDQUF1Q0MsT0FBdkMsQ0FBK0MsT0FBL0MsRUFBd0QsVUFBVUMsQ0FBVixFQUFhO0lBQ3hFLElBQUk1QixDQUFDLEdBQUdQLElBQUksQ0FBQ29DLE1BQUwsS0FBZ0IsRUFBaEIsR0FBcUIsQ0FBN0I7SUFBQSxJQUFnQ2pDLENBQUMsR0FBR2dDLENBQUMsS0FBSyxHQUFOLEdBQVk1QixDQUFaLEdBQWlCQSxDQUFDLEdBQUcsR0FBSixHQUFVLEdBQS9EO0lBQ0EsT0FBT0osQ0FBQyxDQUFDa0MsUUFBRixDQUFXLEVBQVgsQ0FBUDtFQUNILENBSE0sQ0FBUDtBQUlIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsU0FBVCxDQUFtQkMsR0FBbkIsRUFBd0I7RUFDM0JBLEdBQUcsQ0FBQ0MsT0FBSixHQUFjRCxHQUFHLENBQUNDLE9BQUosSUFBZVAsVUFBVSxFQUF2QztFQUNBLE9BQU9NLEdBQUcsQ0FBQ0MsT0FBWDtBQUNILEMsQ0FFRDtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsVUFBVCxDQUFvQkMsTUFBcEIsRUFBNEJDLE1BQTVCLEVBQW9DQyxJQUFwQyxFQUEwQztFQUM3QyxJQUFJQyxJQUFJLEdBQUcsSUFBSUMsUUFBSixDQUFhSixNQUFiLENBQVgsQ0FENkMsQ0FHN0M7RUFDQTtFQUNBOztFQUNBLElBQUlLLE9BQU8sR0FBRztJQUNWQyxNQUFNLEVBQUUsVUFBVUwsTUFBVixFQUFrQjtNQUN0QixPQUFPO1FBQUNNLEdBQUcsRUFBRUosSUFBSSxDQUFDSyxVQUFMLENBQWdCUCxNQUFoQixDQUFOO1FBQStCUSxLQUFLLEVBQUU7TUFBdEMsQ0FBUDtJQUNILENBSFM7SUFJVkMsT0FBTyxFQUFFLFVBQVVULE1BQVYsRUFBa0I7TUFDdkIsT0FBTztRQUFDTSxHQUFHLEVBQUVKLElBQUksQ0FBQ0ssVUFBTCxDQUFnQlAsTUFBaEIsQ0FBTjtRQUErQlEsS0FBSyxFQUFFO01BQXRDLENBQVA7SUFDSCxDQU5TO0lBT1ZFLE9BQU8sRUFBRSxVQUFVVixNQUFWLEVBQWtCO01BQ3ZCLE9BQU87UUFBQ00sR0FBRyxFQUFFSixJQUFJLENBQUNTLFVBQUwsQ0FBZ0JYLE1BQWhCLENBQU47UUFBK0JRLEtBQUssRUFBRTtNQUF0QyxDQUFQO0lBQ0gsQ0FUUztJQVVWSSxVQUFVLEVBQUUsVUFBVVosTUFBVixFQUFrQjtNQUMxQixPQUFPO1FBQUNNLEdBQUcsRUFBRUosSUFBSSxDQUFDVyxPQUFMLENBQWFiLE1BQWIsQ0FBTjtRQUE0QlEsS0FBSyxFQUFFO01BQW5DLENBQVA7SUFDSCxDQVpTO0lBYVZNLFNBQVMsRUFBRSxVQUFVZCxNQUFWLEVBQWtCO01BQ3pCLE9BQU87UUFBQ00sR0FBRyxFQUFFSixJQUFJLENBQUNhLFFBQUwsQ0FBY2YsTUFBZCxDQUFOO1FBQTZCUSxLQUFLLEVBQUU7TUFBcEMsQ0FBUDtJQUNILENBZlM7SUFnQlZRLFdBQVcsRUFBRSxVQUFVaEIsTUFBVixFQUFrQjtNQUMzQixPQUFPO1FBQUNNLEdBQUcsRUFBRUosSUFBSSxDQUFDZSxRQUFMLENBQWNqQixNQUFkLENBQU47UUFBNkJRLEtBQUssRUFBRTtNQUFwQyxDQUFQO0lBQ0gsQ0FsQlM7SUFtQlZVLFlBQVksRUFBRSxVQUFVbEIsTUFBVixFQUFrQjtNQUM1QixPQUFPO1FBQUNNLEdBQUcsRUFBRUosSUFBSSxDQUFDaUIsUUFBTCxDQUFjbkIsTUFBZCxDQUFOO1FBQTZCUSxLQUFLLEVBQUU7TUFBcEMsQ0FBUDtJQUNILENBckJTO0lBc0JWWSxXQUFXLEVBQUUsVUFBVXBCLE1BQVYsRUFBa0I7TUFDM0IsT0FBTztRQUFDTSxHQUFHLEVBQUVKLElBQUksQ0FBQ21CLFNBQUwsQ0FBZXJCLE1BQWYsQ0FBTjtRQUE4QlEsS0FBSyxFQUFFO01BQXJDLENBQVA7SUFDSCxDQXhCUztJQXlCVmMsYUFBYSxFQUFFLFVBQVV0QixNQUFWLEVBQWtCO01BQzdCLE9BQU87UUFBQ00sR0FBRyxFQUFFSixJQUFJLENBQUNxQixTQUFMLENBQWV2QixNQUFmLENBQU47UUFBOEJRLEtBQUssRUFBRTtNQUFyQyxDQUFQO0lBQ0gsQ0EzQlMsQ0E0QlY7O0VBNUJVLENBQWQ7RUE4QkEsT0FBT0osT0FBTyxDQUFDSCxJQUFELENBQVAsQ0FBY0QsTUFBZCxDQUFQO0FBQ0gsQyxDQUVEO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU3dCLFFBQVQsQ0FBa0JDLE1BQWxCLEVBQTBCQyxJQUExQixFQUFnQ0MsV0FBaEMsRUFBNkM7RUFDaEQsSUFBSTNCLE1BQU0sR0FBRzJCLFdBQWI7O0VBQ0EsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSCxNQUFNLENBQUNJLE1BQVAsQ0FBY0MsTUFBbEMsRUFBMENGLENBQUMsRUFBM0MsRUFBK0M7SUFDM0MsSUFBSUcsZUFBZSxHQUFHTixNQUFNLENBQUNJLE1BQVAsQ0FBY0QsQ0FBZCxDQUF0Qjs7SUFDQSxJQUFJckUsU0FBUyxDQUFDd0UsZUFBZSxDQUFDOUIsSUFBakIsQ0FBVCxJQUFtQzhCLGVBQWUsQ0FBQzlCLElBQWhCLEtBQXlCLElBQWhFLEVBQXNFO01BQ2xFLElBQUkrQixHQUFHLEdBQUdsQyxVQUFVLENBQUM0QixJQUFELEVBQU8xQixNQUFQLEVBQWUrQixlQUFlLENBQUM5QixJQUEvQixDQUFwQjtNQUNBOEIsZUFBZSxDQUFDekIsR0FBaEIsR0FBc0IwQixHQUFHLENBQUMxQixHQUExQjtNQUNBTixNQUFNLElBQUlnQyxHQUFHLENBQUN4QixLQUFkO0lBQ0gsQ0FKRCxNQUlPLElBQUlqRCxTQUFTLENBQUN3RSxlQUFlLENBQUNFLEtBQWpCLENBQVQsSUFBb0NGLGVBQWUsQ0FBQ0UsS0FBaEIsS0FBMEIsSUFBbEUsRUFBd0U7TUFDM0U7TUFDQSxJQUFJQyxLQUFLLENBQUNILGVBQWUsQ0FBQ0UsS0FBakIsQ0FBVCxFQUFrQztRQUM5QixJQUFJRSxFQUFFLEdBQUdKLGVBQWUsQ0FBQ0UsS0FBekI7UUFDQSxJQUFJRyxTQUFTLEdBQUdYLE1BQU0sQ0FBQ1ksV0FBUCxDQUFtQkYsRUFBbkIsQ0FBaEI7UUFDQUosZUFBZSxDQUFDRSxLQUFoQixHQUF3QlIsTUFBTSxDQUFDYSxlQUFQLENBQXVCRixTQUF2QixFQUFrQzlCLEdBQTFEO01BQ0g7O01BQ0QsS0FBSyxJQUFJZCxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHdUMsZUFBZSxDQUFDRSxLQUFwQyxFQUEyQ3pDLENBQUMsRUFBNUMsRUFBZ0Q7UUFDNUMsS0FBSyxJQUFJK0MsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR1IsZUFBZSxDQUFDRixNQUFoQixDQUF1QkMsTUFBM0MsRUFBbURTLENBQUMsRUFBcEQsRUFBd0Q7VUFDcEQsSUFBSUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0QsSUFBSSxDQUFDRSxTQUFMLENBQWVaLGVBQWUsQ0FBQ0YsTUFBaEIsQ0FBdUJVLENBQXZCLENBQWYsQ0FBWCxDQUFaO1VBQ0F2QyxNQUFNLEdBQUd3QixRQUFRLENBQUNnQixLQUFELEVBQVFkLElBQVIsRUFBYzFCLE1BQWQsQ0FBakI7VUFDQStCLGVBQWUsQ0FBQ3pCLEdBQWhCLENBQW9Cc0MsSUFBcEIsQ0FBeUJKLEtBQXpCO1FBQ0g7TUFDSjtJQUNKO0VBQ0o7O0VBQ0QsT0FBT3hDLE1BQVA7QUFDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBUzZDLGVBQVQsQ0FBeUJDLGVBQXpCLEVBQTBDO0VBQzdDO0VBQ0EsSUFBSUMsTUFBTSxHQUFHLEVBQWI7O0VBQ0EsS0FBSyxJQUFJbkIsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR2tCLGVBQWUsQ0FBQ2pCLE1BQWhCLENBQXVCQyxNQUEzQyxFQUFtREYsQ0FBQyxFQUFwRCxFQUF3RDtJQUNwRCxJQUFJckUsU0FBUyxDQUFDdUYsZUFBZSxDQUFDakIsTUFBaEIsQ0FBdUJELENBQXZCLEVBQTBCSyxLQUEzQixDQUFiLEVBQWdEO01BQzVDYyxNQUFNLENBQUNELGVBQWUsQ0FBQ2pCLE1BQWhCLENBQXVCRCxDQUF2QixFQUEwQm9CLElBQTNCLENBQU4sR0FBeUMsRUFBekM7O01BQ0EsS0FBSyxJQUFJeEQsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3NELGVBQWUsQ0FBQ2pCLE1BQWhCLENBQXVCRCxDQUF2QixFQUEwQkssS0FBOUMsRUFBcUR6QyxDQUFDLEVBQXRELEVBQTBEO1FBQ3RELElBQUl5RCxJQUFJLEdBQUcsRUFBWDs7UUFDQSxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdKLGVBQWUsQ0FBQ2pCLE1BQWhCLENBQXVCRCxDQUF2QixFQUEwQnRCLEdBQTFCLENBQThCZCxDQUE5QixFQUFpQ3FDLE1BQWpDLENBQXdDQyxNQUE1RCxFQUFvRW9CLENBQUMsRUFBckUsRUFBeUU7VUFDckVELElBQUksQ0FBQ0gsZUFBZSxDQUFDakIsTUFBaEIsQ0FBdUJELENBQXZCLEVBQTBCdEIsR0FBMUIsQ0FBOEJkLENBQTlCLEVBQWlDcUMsTUFBakMsQ0FBd0NxQixDQUF4QyxFQUEyQ0YsSUFBNUMsQ0FBSixHQUF3REYsZUFBZSxDQUFDakIsTUFBaEIsQ0FBdUJELENBQXZCLEVBQTBCdEIsR0FBMUIsQ0FBOEJkLENBQTlCLEVBQWlDcUMsTUFBakMsQ0FBd0NxQixDQUF4QyxFQUEyQzVDLEdBQW5HO1FBQ0g7O1FBQ0R5QyxNQUFNLENBQUNELGVBQWUsQ0FBQ2pCLE1BQWhCLENBQXVCRCxDQUF2QixFQUEwQm9CLElBQTNCLENBQU4sQ0FBdUNKLElBQXZDLENBQTRDSyxJQUE1QztNQUNIO0lBQ0osQ0FURCxNQVNPO01BQ0hGLE1BQU0sQ0FBQ0QsZUFBZSxDQUFDakIsTUFBaEIsQ0FBdUJELENBQXZCLEVBQTBCb0IsSUFBM0IsQ0FBTixHQUF5Q0YsZUFBZSxDQUFDakIsTUFBaEIsQ0FBdUJELENBQXZCLEVBQTBCdEIsR0FBbkU7SUFDSDtFQUNKOztFQUNELE9BQU95QyxNQUFQO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxTQUFTSSxPQUFULEdBQW1CO0VBQ3RCLE9BQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUNDLEdBQVQsSUFBZ0IsQ0FBQyxDQUFDQSxHQUFHLENBQUNDLE1BQXZCLElBQWtDLENBQUMsQ0FBQ0YsTUFBTSxDQUFDRyxLQUEzQyxJQUFvREMsU0FBUyxDQUFDQyxTQUFWLENBQW9CQyxPQUFwQixDQUE0QixPQUE1QixLQUF3QyxDQUFuRztBQUNIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsU0FBVCxHQUFxQjtFQUN4QixPQUFPLE9BQU9DLGNBQVAsS0FBMEIsV0FBakM7QUFDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUNPLFNBQVNDLFFBQVQsR0FBb0I7RUFDdkIsT0FBT0MsTUFBTSxDQUFDQyxTQUFQLENBQWlCckUsUUFBakIsQ0FBMEJzRSxJQUExQixDQUErQlosTUFBTSxDQUFDYSxXQUF0QyxFQUFtRFAsT0FBbkQsQ0FBMkQsYUFBM0QsSUFBNEUsQ0FBbkY7QUFDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUNPLFNBQVNRLFFBQVQsR0FBb0I7RUFDdkIsT0FBTyxDQUFDLENBQUNkLE1BQU0sQ0FBQ2UsTUFBVCxJQUFtQixDQUFDLENBQUNmLE1BQU0sQ0FBQ2UsTUFBUCxDQUFjQyxRQUExQztBQUNIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsT0FBVCxHQUFtQjtFQUN0QixPQUFPLENBQUNILFFBQVEsSUFBSWYsT0FBYixLQUF5QixDQUFDLENBQUNDLE1BQU0sQ0FBQ2tCLEdBQXpDO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsZ0JBQVQsQ0FBMEJDLENBQTFCLEVBQTZCMUcsQ0FBN0IsRUFBZ0M7RUFDbkMsT0FBTzBHLENBQUMsQ0FBQ0MsTUFBRixDQUFTLFVBQVVDLE9BQVYsRUFBbUI7SUFDL0IsT0FBTzVHLENBQUMsQ0FBQzRGLE9BQUYsQ0FBVWdCLE9BQVYsSUFBcUIsQ0FBQyxDQUE3QjtFQUNILENBRk0sRUFFSjVDLE1BRkksR0FFSyxDQUZaO0FBR0g7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNPLFNBQVM2QyxTQUFULENBQW1CQyxDQUFuQixFQUFzQjtFQUN6QixPQUNFLE9BQU9YLFdBQVAsS0FBdUIsUUFBdkIsR0FBa0NXLENBQUMsWUFBWVgsV0FBL0MsR0FBNkQ7RUFDM0RXLENBQUMsSUFBSSxPQUFPQSxDQUFQLEtBQWEsUUFBbEIsSUFBOEJBLENBQUMsS0FBSyxJQUFwQyxJQUE0Q0EsQ0FBQyxDQUFDQyxRQUFGLEtBQWUsQ0FBM0QsSUFBZ0UsT0FBT0QsQ0FBQyxDQUFDRSxRQUFULEtBQXNCLFFBRjFGO0FBSUg7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxTQUFTQyxXQUFULEdBQXVCO0VBQzFCLE9BQU94SCxTQUFTLENBQUN5SCxNQUFELENBQWhCO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxTQUFTQyxjQUFULENBQXdCQyxHQUF4QixFQUE2QixDQUNuQztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsU0FBVCxDQUFtQkQsR0FBbkIsRUFBd0JFLEdBQXhCLEVBQTZCO0VBQ2hDLElBQUlDLE1BQU0sR0FBR0gsR0FBRyxDQUFDSSxTQUFqQjtFQUNBRixHQUFHLEdBQUdDLE1BQU0sQ0FBQzlGLE9BQVAsQ0FBZTZGLEdBQWYsRUFBb0IsRUFBcEIsQ0FBTjtFQUNBRixHQUFHLENBQUNJLFNBQUosR0FBZ0JGLEdBQWhCO0FBQ0g7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNPLFNBQVNHLE1BQVQsQ0FBZ0JMLEdBQWhCLEVBQXFCRSxHQUFyQixFQUEwQjtFQUM3QkYsR0FBRyxDQUFDTSxZQUFKLENBQWlCLE9BQWpCLEVBQTBCTixHQUFHLENBQUNJLFNBQUosR0FBZ0IsR0FBaEIsR0FBc0JGLEdBQWhEO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNPLFNBQVNLLHFCQUFULENBQStCQyxLQUEvQixFQUFzQztFQUN6QyxJQUFJLENBQUNuSSxTQUFTLENBQUNvSSxTQUFELENBQVYsSUFBeUJELEtBQUssS0FBSyxJQUFuQyxJQUEyQ0EsS0FBSyxDQUFDNUQsTUFBTixLQUFpQixDQUE1RCxJQUFpRSxDQUFDNEQsS0FBSyxDQUFDRSxRQUFOLENBQWUsR0FBZixDQUF0RSxFQUEyRjtJQUN2RixPQUFPRixLQUFQO0VBQ0g7O0VBRUQsT0FBT0EsS0FBSyxDQUFDRyxTQUFOLENBQWdCLENBQWhCLEVBQW1CSCxLQUFLLENBQUM1RCxNQUFOLEdBQWUsQ0FBbEMsQ0FBUDtBQUNIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxTQUFTZ0UsU0FBVCxDQUFtQkMsR0FBbkIsRUFBd0I7RUFDM0IsT0FBTzFJLElBQUksQ0FBQzJJLEtBQUwsQ0FBV0QsR0FBRyxHQUFDLENBQWYsSUFBa0IsQ0FBekI7QUFDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNPLFNBQVNFLFFBQVQsQ0FBa0JDLElBQWxCLEVBQXdCQyxJQUF4QixFQUE4QkMsU0FBOUIsRUFBeUM7RUFDNUMsSUFBSUMsT0FBSixFQUFhQyxJQUFiLEVBQW1CQyxPQUFuQixFQUE0QkMsU0FBNUIsRUFBdUN6RCxNQUF2Qzs7RUFFQSxJQUFJMEQsS0FBSyxHQUFHLFlBQVc7SUFDbkIsSUFBSUMsR0FBRyxHQUFHLElBQUlDLElBQUosR0FBV0MsT0FBWCxFQUFWO0lBQUEsSUFDSUMsSUFBSSxHQUFHSCxHQUFHLEdBQUdGLFNBRGpCOztJQUdBLElBQUlLLElBQUksR0FBR1YsSUFBUCxJQUFlVSxJQUFJLElBQUksQ0FBM0IsRUFBOEI7TUFDMUJSLE9BQU8sR0FBR1MsVUFBVSxDQUFDTCxLQUFELEVBQVFOLElBQUksR0FBR1UsSUFBZixDQUFwQjtJQUNILENBRkQsTUFFTztNQUNIUixPQUFPLEdBQUcsSUFBVjs7TUFDQSxJQUFJLENBQUNELFNBQUwsRUFBZ0I7UUFDWnJELE1BQU0sR0FBR21ELElBQUksQ0FBQ2EsS0FBTCxDQUFXUixPQUFYLEVBQW9CRCxJQUFwQixDQUFUO1FBQ0EsSUFBSSxDQUFDRCxPQUFMLEVBQWNFLE9BQU8sR0FBR0QsSUFBSSxHQUFHLElBQWpCO01BQ2pCO0lBQ0o7RUFDSixDQWJEOztFQWVBLE9BQU8sWUFBVztJQUNkQyxPQUFPLEdBQUcsSUFBVjtJQUNBRCxJQUFJLEdBQUdVLFNBQVA7SUFDQVIsU0FBUyxHQUFHLElBQUlHLElBQUosR0FBV0MsT0FBWCxFQUFaO0lBQ0EsSUFBSUssT0FBTyxHQUFHYixTQUFTLElBQUksQ0FBQ0MsT0FBNUI7SUFDQSxJQUFJLENBQUNBLE9BQUwsRUFBY0EsT0FBTyxHQUFHUyxVQUFVLENBQUNMLEtBQUQsRUFBUU4sSUFBUixDQUFwQjs7SUFDZCxJQUFJYyxPQUFKLEVBQWE7TUFDVGxFLE1BQU0sR0FBR21ELElBQUksQ0FBQ2EsS0FBTCxDQUFXUixPQUFYLEVBQW9CRCxJQUFwQixDQUFUO01BQ0FDLE9BQU8sR0FBR0QsSUFBSSxHQUFHLElBQWpCO0lBQ0g7O0lBRUQsT0FBT3ZELE1BQVA7RUFDSCxDQVpEO0FBYUg7QUFBQTtBQUVNLFNBQVNtRSxRQUFULENBQWtCaEIsSUFBbEIsRUFBd0JDLElBQXhCLEVBQThCZ0IsT0FBOUIsRUFBdUNDLFFBQXZDLEVBQWlEYixPQUFqRCxFQUEwRDtFQUM3RCxJQUFJYyxHQUFKLEVBQVNmLElBQVQsRUFBZXZELE1BQWY7RUFDQSxJQUFJc0QsT0FBTyxHQUFHLElBQWQ7RUFDQSxJQUFJaUIsUUFBUSxHQUFHLENBQWY7O0VBQ0EsSUFBSWIsS0FBSyxHQUFHLFlBQVc7SUFDbkJhLFFBQVEsR0FBRyxJQUFJWCxJQUFKLEVBQVg7SUFDQU4sT0FBTyxHQUFHLElBQVY7SUFDQXRELE1BQU0sR0FBR21ELElBQUksQ0FBQ2EsS0FBTCxDQUFXTSxHQUFYLEVBQWdCZixJQUFoQixDQUFUO0VBQ0gsQ0FKRDs7RUFLQSxPQUFPLFlBQVc7SUFDZCxJQUFJSSxHQUFHLEdBQUcsSUFBSUMsSUFBSixFQUFWO0lBQ0EsSUFBSSxDQUFDVyxRQUFELElBQWEsQ0FBQ0gsT0FBbEIsRUFBMkJHLFFBQVEsR0FBR1osR0FBWDtJQUMzQixJQUFJYSxTQUFTLEdBQUdwQixJQUFJLElBQUlPLEdBQUcsR0FBR1ksUUFBVixDQUFwQjtJQUNBRCxHQUFHLEdBQUdkLE9BQU8sSUFBSSxJQUFqQjtJQUNBRCxJQUFJLEdBQUdVLFNBQVA7O0lBQ0EsSUFBSU8sU0FBUyxJQUFJLENBQWpCLEVBQW9CO01BQ2hCQyxZQUFZLENBQUNuQixPQUFELENBQVo7TUFDQUEsT0FBTyxHQUFHLElBQVY7TUFDQWlCLFFBQVEsR0FBR1osR0FBWDtNQUNBM0QsTUFBTSxHQUFHbUQsSUFBSSxDQUFDYSxLQUFMLENBQVdNLEdBQVgsRUFBZ0JmLElBQWhCLENBQVQ7SUFDSCxDQUxELE1BS08sSUFBSSxDQUFDRCxPQUFELElBQVllLFFBQWhCLEVBQTBCO01BQzdCO01BQ0FmLE9BQU8sR0FBR1MsVUFBVSxDQUFDTCxLQUFELEVBQVFjLFNBQVIsQ0FBcEI7SUFDSDs7SUFDRCxPQUFPeEUsTUFBUDtFQUNILENBaEJEO0FBaUJIO0FBQUE7QUFFTSxTQUFTMEUsS0FBVCxDQUFnQkMsTUFBaEIsRUFBd0JDLE1BQXhCLEVBQWdDO0VBQ25DO0VBQ0EsS0FBSyxNQUFNQyxHQUFYLElBQWtCOUQsTUFBTSxDQUFDK0QsSUFBUCxDQUFZRixNQUFaLENBQWxCLEVBQXVDO0lBQ25DLElBQUlBLE1BQU0sQ0FBQ0MsR0FBRCxDQUFOLFlBQXVCOUQsTUFBdkIsSUFBaUM4RCxHQUFHLElBQUlGLE1BQTVDLEVBQW9ENUQsTUFBTSxDQUFDZ0UsTUFBUCxDQUFjSCxNQUFNLENBQUNDLEdBQUQsQ0FBcEIsRUFBMkJILEtBQUssQ0FBQ0MsTUFBTSxDQUFDRSxHQUFELENBQVAsRUFBY0QsTUFBTSxDQUFDQyxHQUFELENBQXBCLENBQWhDO0VBQ3ZELENBSmtDLENBTW5DOzs7RUFDQTlELE1BQU0sQ0FBQ2dFLE1BQVAsQ0FBY0osTUFBTSxJQUFJLEVBQXhCLEVBQTRCQyxNQUE1QjtFQUNBLE9BQU9ELE1BQVA7QUFDSDtBQUFBO0FBRU0sU0FBU0ssV0FBVCxDQUFxQkMsR0FBckIsRUFBMEI7RUFDN0IsSUFBSUMsYUFBYSxHQUFHRCxHQUFHLENBQUN0RSxPQUFKLENBQVksR0FBWixJQUFtQixDQUF2QztFQUNBLElBQUl3RSxXQUFXLEdBQUdGLEdBQUcsQ0FBQ3RFLE9BQUosQ0FBWSxHQUFaLENBQWxCO0VBQ0EsSUFBSXlFLE1BQU0sR0FBR0gsR0FBRyxDQUFDSSxNQUFKLENBQVdILGFBQVgsRUFBMEJDLFdBQVcsR0FBQ0QsYUFBdEMsQ0FBYjtFQUNBLE9BQU9FLE1BQU0sQ0FBQ0UsS0FBUCxDQUFhLEdBQWIsRUFBa0JySyxHQUFsQixDQUFzQnNLLE1BQXRCLENBQVA7QUFDSCIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKiogKiBAbW9kdWxlIFV0aWxzICovXG5cbi8qKiBNYXhpbXVtIHZhbHVlIG9mIGEgbG9uZyAqL1xuZXhwb3J0IGNvbnN0IE1BWF9MT05HID0gTWF0aC5wb3coMiwgNTMpICsgMTtcblxuLyoqXG4gKiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBkZWZpbmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RlZmluZWQodikge1xuICAgIHJldHVybiB0eXBlb2YgKHYpICE9PSAndW5kZWZpbmVkJyAmJiB2ICE9PSBudWxsO1xufVxuXG4vKipcbiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBoYXMgYSB2YWx1ZSxcbiB0aGF0IGlzIGl0IGlzIGRlZmluZWQgYW5kIG5vbiBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNWYWx1ZSh2KSB7XG4gICAgcmV0dXJuIGlzRGVmaW5lZCh2KSAmJiB2ICE9PSBudWxsO1xufVxuXG4vKipcbiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0cmFuc2Zvcm0gaGV4IGNvbG9yIGludG8gUkdCQVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGV4MnJnYihoZXgpe1xuICAgIGNvbnN0IFtyLCBnLCBiXSA9IGhleC5tYXRjaCgvXFx3XFx3L2cpLm1hcCh4ID0+IHBhcnNlSW50KHgsIDE2KSk7XG4gICAgcmV0dXJuIFtyLCBnLCBiXTtcbn1cbi8qKlxuIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRlc3QgaWYgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIG9mIGEgcGFydGljdWxhciB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNUeXBlKHYsIGV4cGVjdGVkVHlwZSkge1xuICAgIGxldCBoYXNWYWwgPSBoYXNWYWx1ZSh2KTtcbiAgICByZXR1cm4gaGFzVmFsICYmIHR5cGVvZiAodikgPT09IGV4cGVjdGVkVHlwZTtcbn1cblxuLyoqXG4gR2xvYmFsIGhlbHBlciBtZXRob2QgdG8gdGVzdCBpZiBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYW4gb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGhhc1R5cGUodiwgJ29iamVjdCcsIGxldE5hbWUpO1xufVxuXG4vKipcbiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhbiBhcnJheVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2KSB7XG4gICAgcmV0dXJuIGlzRGVmaW5lZCh2KSAmJiBBcnJheS5pc0FycmF5KHYpO1xufVxuXG4vKipcbiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhIGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gaGFzVHlwZSh2LCAnZnVuY3Rpb24nLCBsZXROYW1lKTtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGRlZmluZWRcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnREZWZpbmVkKHYsIGxldE5hbWUgPSAnbGV0aWFibGUnKSB7XG4gICAgaWYgKCFpc0RlZmluZWQodikpIHtcbiAgICAgICAgdGhyb3cgbGV0TmFtZSArIFwiIG11c3QgYmUgZGVmaW5lZFwiO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRydWUodiwgbGV0TmFtZSA9ICdsZXRpYWJsZScpIHtcbiAgICBpZiAoIWlzRGVmaW5lZCh2KSB8fCAhdikge1xuICAgICAgICB0aHJvdyBsZXROYW1lO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBkZWZpbmVkIGFuZCBub24tbnVsbFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFR5cGUodiwgZXhwZWN0ZWRUeXBlLCBsZXROYW1lID0gJ2xldGlhYmxlJykge1xuICAgIGFzc2VydERlZmluZWQodiwgbGV0TmFtZSk7XG4gICAgaWYgKHR5cGVvZiAodikgIT09IGV4cGVjdGVkVHlwZSkge1xuICAgICAgICB0aHJvdyBsZXROYW1lICsgXCIgbXVzdCBiZSBvZiB0eXBlIFwiICsgZXhwZWN0ZWRUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGEgc3RyaW5nXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Qm9vbGVhbih2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGFzc2VydFR5cGUodiwgJ2Jvb2xlYW4nLCBsZXROYW1lKTtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGEgc3RyaW5nXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0U3RyaW5nKHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gYXNzZXJ0VHlwZSh2LCAnc3RyaW5nJywgbGV0TmFtZSk7XG59XG5cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhIG51bWJlclxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE51bWJlcih2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGFzc2VydFR5cGUodiwgJ251bWJlcicsIGxldE5hbWUpO1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYSBudW1iZXJcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRQb3NpdGl2ZSh2LCBsZXROYW1lKSB7XG4gICAgYXNzZXJ0TnVtYmVyKHYsIGxldE5hbWUpO1xuICAgIGlmICh2IDw9IDApIHtcbiAgICAgICAgdGhyb3cgbGV0TmFtZSArIFwiIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIjtcbiAgICB9XG59XG5cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhbiBvYmplY3RcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRPYmplY3QodiwgbGV0TmFtZSkge1xuICAgIHJldHVybiBhc3NlcnRUeXBlKHYsICdvYmplY3QnLCBsZXROYW1lKTtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGFuIG9iamVjdFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEFycmF5KHYsIGxldE5hbWUgPSAnbGV0aWFibGUnKSB7XG4gICAgYXNzZXJ0RGVmaW5lZCh2LCBsZXROYW1lKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgdGhyb3cgbGV0TmFtZSArIFwiIG11c3QgYmUgYW4gYXJyYXlcIjtcbiAgICB9XG4gICAgcmV0dXJuIHY7XG59XG5cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhIGZ1bmN0aW9uXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RnVuY3Rpb24odiwgbGV0TmFtZSkge1xuICAgIHJldHVybiBhc3NlcnRUeXBlKHYsICdmdW5jdGlvbicsIGxldE5hbWUpO1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgZGVmaW5lZCBhbmQgbm9uLW51bGxcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRIYXNWYWx1ZSh2LCBsZXROYW1lID0gJ2xldGlhYmxlJykge1xuICAgIGFzc2VydERlZmluZWQodiwgbGV0TmFtZSk7XG4gICAgaWYgKCFoYXNWYWx1ZSh2KSkge1xuICAgICAgICB0aHJvdyBsZXROYW1lICsgXCIgbXVzdCBub3QgYmUgbnVsbFwiO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tVVVJRCgpIHtcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgteHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xuICAgICAgICBsZXQgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDAsIHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpO1xuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgfSk7XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBzdGFtcHMvZW1iZWRzIGEgVVVJRCBpbnRvIGFuIG9iamVjdCBhbmQgcmV0dXJucyB0aGUgVVVJRCBnZW5lcmF0ZWQgZm9yIGl0XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFtcFVVSUQob2JqKSB7XG4gICAgb2JqLl9vc2hfaWQgPSBvYmouX29zaF9pZCB8fCByYW5kb21VVUlEKCk7XG4gICAgcmV0dXJuIG9iai5fb3NoX2lkO1xufVxuXG4vL2J1ZmZlciBpcyBhbiBBcnJheUJ1ZmZlciBvYmplY3QsIHRoZSBvZmZzZXQgaWYgc3BlY2lmaWVkIGluIGJ5dGVzLCBhbmQgdGhlIHR5cGUgaXMgYSBzdHJpbmdcbi8vY29ycmVzcG9uZGluZyB0byBhbiBPR0MgZGF0YSB0eXBlLlxuLy9TZWUgaHR0cDovL2RlZi5zZWVncmlkLmNzaXJvLmF1L3Npc3N2b2Mvb2djLWRlZi9yZXNvdXJjZT91cmk9aHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9kZWYvZGF0YVR5cGUvT0dDLzAvXG4vKipcbiAqXG4gKiBAcGFyYW0gYnVmZmVyXG4gKiBAcGFyYW0gb2Zmc2V0XG4gKiBAcGFyYW0gdHlwZVxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBhcnNlQnl0ZXMoYnVmZmVyLCBvZmZzZXQsIHR5cGUpIHtcbiAgICBsZXQgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuXG4gICAgLy9Ob3RlOiBUaGVyZSBleGlzdCB0eXBlcyBub3QgbGlzdGVkIGluIHRoZSBtYXAgYmVsb3cgdGhhdCBoYXZlIE9HQyBkZWZpbml0aW9ucywgYnV0IG5vIGFwcHJvcHJpYXRlXG4gICAgLy9tZXRob2RzIG9yIGNvcnJlc3BvbmRpbmcgdHlwZXMgYXZhaWxhYmxlIGZvciBwYXJzaW5nIGluIGphdmFzY3JpcHQuIFRoZXkgYXJlIGZsb2F0MTI4LCBmbG9hdDE2LCBzaWduZWRMb25nLFxuICAgIC8vYW5kIHVuc2lnbmVkTG9uZ1xuICAgIGxldCB0eXBlTWFwID0ge1xuICAgICAgICBkb3VibGU6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldEZsb2F0NjQob2Zmc2V0KSwgYnl0ZXM6IDh9O1xuICAgICAgICB9LFxuICAgICAgICBmbG9hdDY0OiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbDogdmlldy5nZXRGbG9hdDY0KG9mZnNldCksIGJ5dGVzOiA4fTtcbiAgICAgICAgfSxcbiAgICAgICAgZmxvYXQzMjogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0RmxvYXQzMihvZmZzZXQpLCBieXRlczogNH07XG4gICAgICAgIH0sXG4gICAgICAgIHNpZ25lZEJ5dGU6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldEludDgob2Zmc2V0KSwgYnl0ZXM6IDF9O1xuICAgICAgICB9LFxuICAgICAgICBzaWduZWRJbnQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldEludDMyKG9mZnNldCksIGJ5dGVzOiA0fTtcbiAgICAgICAgfSxcbiAgICAgICAgc2lnbmVkU2hvcnQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldEludDE2KG9mZnNldCksIGJ5dGVzOiAyfTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5zaWduZWRCeXRlOiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbDogdmlldy5nZXRVaW50OChvZmZzZXQpLCBieXRlczogMX07XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2lnbmVkSW50OiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbDogdmlldy5nZXRVaW50MzIob2Zmc2V0KSwgYnl0ZXM6IDR9O1xuICAgICAgICB9LFxuICAgICAgICB1bnNpZ25lZFNob3J0OiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbDogdmlldy5nZXRVaW50MTYob2Zmc2V0KSwgYnl0ZXM6IDJ9O1xuICAgICAgICB9LFxuICAgICAgICAvL1RPRE86IHN0cmluZy11dGYtODpcbiAgICB9O1xuICAgIHJldHVybiB0eXBlTWFwW3R5cGVdKG9mZnNldCk7XG59XG5cbi8vVGhpcyBmdW5jdGlvbiByZWN1cnNpdmxleSBpdGVyYXRlcyBvdmVyIHRoZSByZXN1bHRTdHJ1Y3R1cmUgdG8gZmlsbCBpblxuLy92YWx1ZXMgcmVhZCBmcm9tIGRhdGEgd2hpY2ggc2hvdWxkIGJlIGFuIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgdGhlIHBheWxvYWQgZnJvbSBhIHdlYnNvY2tldFxuLyoqXG4gKlxuICogQHBhcmFtIHN0cnVjdFxuICogQHBhcmFtIGRhdGFcbiAqIEBwYXJhbSBvZmZzZXRCeXRlc1xuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJlYWREYXRhKHN0cnVjdCwgZGF0YSwgb2Zmc2V0Qnl0ZXMpIHtcbiAgICBsZXQgb2Zmc2V0ID0gb2Zmc2V0Qnl0ZXM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJ1Y3QuZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjdXJyRmllbGRTdHJ1Y3QgPSBzdHJ1Y3QuZmllbGRzW2ldO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKGN1cnJGaWVsZFN0cnVjdC50eXBlKSAmJiBjdXJyRmllbGRTdHJ1Y3QudHlwZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IHJldCA9IFBhcnNlQnl0ZXMoZGF0YSwgb2Zmc2V0LCBjdXJyRmllbGRTdHJ1Y3QudHlwZSk7XG4gICAgICAgICAgICBjdXJyRmllbGRTdHJ1Y3QudmFsID0gcmV0LnZhbDtcbiAgICAgICAgICAgIG9mZnNldCArPSByZXQuYnl0ZXM7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNEZWZpbmVkKGN1cnJGaWVsZFN0cnVjdC5jb3VudCkgJiYgY3VyckZpZWxkU3RydWN0LmNvdW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAvL2NoZWNrIGlmIGNvdW50IGlzIGEgcmVmZXJlbmNlIHRvIGFub3RoZXIgbGV0aWFibGVcbiAgICAgICAgICAgIGlmIChpc05hTihjdXJyRmllbGRTdHJ1Y3QuY291bnQpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlkID0gY3VyckZpZWxkU3RydWN0LmNvdW50O1xuICAgICAgICAgICAgICAgIGxldCBmaWVsZE5hbWUgPSBzdHJ1Y3QuaWQyRmllbGRNYXBbaWRdO1xuICAgICAgICAgICAgICAgIGN1cnJGaWVsZFN0cnVjdC5jb3VudCA9IHN0cnVjdC5maW5kRmllbGRCeU5hbWUoZmllbGROYW1lKS52YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGN1cnJGaWVsZFN0cnVjdC5jb3VudDsgYysrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjdXJyRmllbGRTdHJ1Y3QuZmllbGRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3VyckZpZWxkU3RydWN0LmZpZWxkc1tqXSkpO1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBSZWFkRGF0YShmaWVsZCwgZGF0YSwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgY3VyckZpZWxkU3RydWN0LnZhbC5wdXNoKGZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHJlc3VsdFN0cnVjdHVyZVxuICogQHJldHVybiB7e319XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBHZXRSZXN1bHRPYmplY3QocmVzdWx0U3RydWN0dXJlKSB7XG4gICAgLy9UT0RPOiBoYW5kbGUgY2FzZXMgZm9yIG5lc3RlZCBhcnJheXMgLyBtYXRyaXggZGF0YSB0eXBlc1xuICAgIGxldCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdFN0cnVjdHVyZS5maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChyZXN1bHRTdHJ1Y3R1cmUuZmllbGRzW2ldLmNvdW50KSkge1xuICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0ubmFtZV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS5jb3VudDsgYysrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHJlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0udmFsW2NdLmZpZWxkcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtW3Jlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0udmFsW2NdLmZpZWxkc1trXS5uYW1lXSA9IHJlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0udmFsW2NdLmZpZWxkc1trXS52YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRTdHJ1Y3R1cmUuZmllbGRzW2ldLm5hbWVdLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS5uYW1lXSA9IHJlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0udmFsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09wZXJhKCkge1xuICAgIHJldHVybiAoISF3aW5kb3cub3ByICYmICEhb3ByLmFkZG9ucykgfHwgISF3aW5kb3cub3BlcmEgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCcgT1BSLycpID49IDA7XG59XG5cbi8qKlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0ZpcmVmb3goKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBJbnN0YWxsVHJpZ2dlciAhPT0gJ3VuZGVmaW5lZCc7XG59XG5cbi8qKlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NhZmFyaSgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdy5IVE1MRWxlbWVudCkuaW5kZXhPZignQ29uc3RydWN0b3InKSA+IDA7XG59XG5cbi8qKlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Nocm9tZSgpIHtcbiAgICByZXR1cm4gISF3aW5kb3cuY2hyb21lICYmICEhd2luZG93LmNocm9tZS53ZWJzdG9yZTtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Knxib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNCbGluaygpIHtcbiAgICByZXR1cm4gKGlzQ2hyb21lIHx8IGlzT3BlcmEpICYmICEhd2luZG93LkNTUztcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGFcbiAqIEBwYXJhbSBiXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheUludGVyc2VjdChhLCBiKSB7XG4gICAgcmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBiLmluZGV4T2YoZWxlbWVudCkgPiAtMTtcbiAgICB9KS5sZW5ndGggPiAwO1xufVxuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSBvXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50KG8pIHtcbiAgICByZXR1cm4gKFxuICAgICAgdHlwZW9mIEhUTUxFbGVtZW50ID09PSBcIm9iamVjdFwiID8gbyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IDogLy9ET00yXG4gICAgICAgIG8gJiYgdHlwZW9mIG8gPT09IFwib2JqZWN0XCIgJiYgbyAhPT0gbnVsbCAmJiBvLm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiBvLm5vZGVOYW1lID09PSBcInN0cmluZ1wiXG4gICAgKTtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzV2ViV29ya2VyKCkge1xuICAgIHJldHVybiBpc0RlZmluZWQoV29ya2VyKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGRpdlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGFrZVNjcmVlblNob3QoZGl2KSB7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgY3NzIGNsYXNzIGZyb20gYSB0aGUgZGl2IGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIGRpdiB0aGUgZGl2IHRvIHJlbW92ZSB0aGUgY2xhc3MgZnJvbVxuICogQHBhcmFtIGNzcyB0aGUgY3NzIGNsYXNzIHRvIHJlbW92ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ3NzKGRpdiwgY3NzKSB7XG4gICAgbGV0IGRpdkNzcyA9IGRpdi5jbGFzc05hbWU7XG4gICAgY3NzID0gZGl2Q3NzLnJlcGxhY2UoY3NzLCBcIlwiKTtcbiAgICBkaXYuY2xhc3NOYW1lID0gY3NzO1xufVxuXG5cbi8qKlxuICogQWRkIGEgY3NzIGNsYXNzIHRvIGEgdGhlIGRpdiBnaXZlbiBhcyBhcmd1bWVudC5cbiAqIEBwYXJhbSBkaXYgdGhlIGRpdiB0byBhZGQgdGhlIGNsYXNzIHRvXG4gKiBAcGFyYW0gY3NzIHRoZSBjc3MgY2xhc3MgdG8gYWRkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDc3MoZGl2LCBjc3MpIHtcbiAgICBkaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZGl2LmNsYXNzTmFtZSArIFwiIFwiICsgY3NzKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBsYXN0IGNoYXJhY3RlciBvZiBhIHtzdHJpbmd9IG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBpbnB1dCB7c3RyaW5nfVxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdmFsdWUgd2l0aG91dCB0aGUgbGFzdCBjaGFyYWN0ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUxhc3RDaGFySWZFeGlzdCh2YWx1ZSkge1xuICAgIGlmICghaXNEZWZpbmVkKHVuZGVmaW5lZCkgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUubGVuZ3RoID09PSAwIHx8ICF2YWx1ZS5lbmRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZS5zdWJzdHJpbmcoMCwgdmFsdWUubGVuZ3RoIC0gMSk7XG59XG5cbi8qKlxuICogUm91bmQgb2ZmIG51bWJlciB0byBuZWFyZXN0IDAuNVxuICogQHBhcmFtIHtOdW1iZXJ9IG51bSAtIFRoZSBudW1iZXIgdG8gcm91bmQgb2ZmXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByb3VuZGVkIG51bWJlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcm91bmRIYWxmKG51bSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSoyKS8yO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLFxuICogd2lsbCBub3QgYmUgZXhlY3V0ZWQuIFRoZSBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgd2hlblxuICogaXQgd2lsbCBzdG9wIGJlaW5nIGNhbGxlZCBmb3IgbW9yZSB0aGFuIE4gbWlsbGlzZWNvbmRzLlxuICogSWYgdGhlIGBpbW1lZGlhdGVgIHBhcmFtZXRlciBpcyB0cnVlLCB0aGVuIHRoZSBmdW5jdGlvblxuICogd2lsbCBiZSBleGVjdXRlZCBhdCB0aGUgZmlyc3QgY2FsbCBpbnN0ZWFkIG9mIHRoZSBsYXN0LlxuICogUGFyYW1ldGVycyA6XG4gKiAtIGZ1bmM6IHRoZSBmdW5jdGlvbiB0byBgZGVib3VuY2VyYC5cbiAqIC0gd2FpdDogdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgKE4pIHRvIHdhaXQgYmVmb3JlXG4gKiBjYWxsIGZ1bmMoKVxuICogLSBpbW1lZGlhdGUgKG9wdGlvbmFsKTogQ2FsbCBmdW5jKCkgYXQgdGhlIGZpcnN0IGludm9jYXRpb25cbiAqIGluc3RlYWQgb2YgdGhlIGxhc3Qgb25lIChEZWZhdWx0IGZhbHNlKVxuICogLSBjb250ZXh0IChvcHRpb25hbCk6IHRoZSBjb250ZXh0IGluIHdoaWNoIHRvIGNhbGwgZnVuYygpXG4gKiAodGhpcyBieSBkZWZhdWx0KVxuICovXG5cbi8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3Rcbi8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3Jcbi8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbGFzdCA9IG5vdyAtIHRpbWVzdGFtcDtcblxuICAgICAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgbGVhZGluZywgdHJhaWxpbmcsIGNvbnRleHQpIHtcbiAgICB2YXIgY3R4LCBhcmdzLCByZXN1bHQ7XG4gICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBwcmV2aW91cyA9IDA7XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHByZXZpb3VzID0gbmV3IERhdGU7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGN0eCwgYXJncyk7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZTtcbiAgICAgICAgaWYgKCFwcmV2aW91cyAmJiAhbGVhZGluZykgcHJldmlvdXMgPSBub3c7XG4gICAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgICAgY3R4ID0gY29udGV4dCB8fCB0aGlzO1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGN0eCwgYXJncyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgdHJhaWxpbmcpIHtcbiAgICAgICAgICAgIC8vIFNpbm9uIG9uIHPigJllbmRvcnQgcGVuZGFudCBsZSB0ZW1wcyByZXN0YW50XG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UgKHRhcmdldCwgc291cmNlKSB7XG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGBzb3VyY2VgIHByb3BlcnRpZXMgYW5kIGlmIGFuIGBPYmplY3RgIHNldCBwcm9wZXJ0eSB0byBtZXJnZSBvZiBgdGFyZ2V0YCBhbmQgYHNvdXJjZWAgcHJvcGVydGllc1xuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHNvdXJjZSkpIHtcbiAgICAgICAgaWYgKHNvdXJjZVtrZXldIGluc3RhbmNlb2YgT2JqZWN0ICYmIGtleSBpbiB0YXJnZXQpIE9iamVjdC5hc3NpZ24oc291cmNlW2tleV0sIG1lcmdlKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSkpXG4gICAgfVxuXG4gICAgLy8gSm9pbiBgdGFyZ2V0YCBhbmQgbW9kaWZpZWQgYHNvdXJjZWBcbiAgICBPYmplY3QuYXNzaWduKHRhcmdldCB8fCB7fSwgc291cmNlKVxuICAgIHJldHVybiB0YXJnZXRcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JhVG9BcnJheShzdHIpIHtcbiAgICBsZXQgc3RhcnRJZHhWYWx1ZSA9IHN0ci5pbmRleE9mKCcoJykgKyAxO1xuICAgIGxldCBlbmRJZHhWYWx1ZSA9IHN0ci5pbmRleE9mKCcpJyk7XG4gICAgbGV0IHZhbHVlcyA9IHN0ci5zdWJzdHIoc3RhcnRJZHhWYWx1ZSwgZW5kSWR4VmFsdWUtc3RhcnRJZHhWYWx1ZSk7XG4gICAgcmV0dXJuIHZhbHVlcy5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return DATA_SYNCHRONIZER_TOPIC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return TIME_SYNCHRONIZER_TOPIC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DATASOURCE_DATA_TOPIC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DATASOURCE_TIME_TOPIC; });\n/* unused harmony export FFMPEG_VIEW_DECODE_TOPIC */\n/* unused harmony export MAGIC_END_PACKET */\nconst DATA_SYNCHRONIZER_TOPIC = 'data-synchronizer-';\nconst TIME_SYNCHRONIZER_TOPIC = 'data-synchronizer-time-';\nconst DATASOURCE_DATA_TOPIC = 'datasource-data-';\nconst DATASOURCE_TIME_TOPIC = 'datasource-time-';\nconst FFMPEG_VIEW_DECODE_TOPIC = 'ffmpeg-decode-';\nconst MAGIC_END_PACKET = 'magic-packet';//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9Db25zdGFudHMuanM/YjliMSJdLCJuYW1lcyI6WyJEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyIsIlRJTUVfU1lOQ0hST05JWkVSX1RPUElDIiwiREFUQVNPVVJDRV9EQVRBX1RPUElDIiwiREFUQVNPVVJDRV9USU1FX1RPUElDIiwiRkZNUEVHX1ZJRVdfREVDT0RFX1RPUElDIiwiTUFHSUNfRU5EX1BBQ0tFVCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQU8sTUFBTUEsdUJBQXVCLEdBQUcsb0JBQWhDO0FBQ0EsTUFBTUMsdUJBQXVCLEdBQUcseUJBQWhDO0FBRUEsTUFBTUMscUJBQXFCLEdBQUcsa0JBQTlCO0FBQ0EsTUFBTUMscUJBQXFCLEdBQUcsa0JBQTlCO0FBRUEsTUFBTUMsd0JBQXdCLEdBQUcsZ0JBQWpDO0FBRUEsTUFBTUMsZ0JBQWdCLEdBQUcsY0FBekIiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyA9ICdkYXRhLXN5bmNocm9uaXplci0nO1xuZXhwb3J0IGNvbnN0IFRJTUVfU1lOQ0hST05JWkVSX1RPUElDID0gJ2RhdGEtc3luY2hyb25pemVyLXRpbWUtJztcblxuZXhwb3J0IGNvbnN0IERBVEFTT1VSQ0VfREFUQV9UT1BJQyA9ICdkYXRhc291cmNlLWRhdGEtJztcbmV4cG9ydCBjb25zdCBEQVRBU09VUkNFX1RJTUVfVE9QSUMgPSAnZGF0YXNvdXJjZS10aW1lLSc7XG5cbmV4cG9ydCBjb25zdCBGRk1QRUdfVklFV19ERUNPREVfVE9QSUMgPSAnZmZtcGVnLWRlY29kZS0nO1xuXG5leHBvcnQgY29uc3QgTUFHSUNfRU5EX1BBQ0tFVCA9ICdtYWdpYy1wYWNrZXQnO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Mode; });\n/**\n * Enum for datasource mode.\n * @readonly\n * @enum {{name: string}}\n */\nconst Mode = {\n  REPLAY: "replay",\n  BATCH: "batch",\n  REAL_TIME: "realTime"\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9kYXRhc291cmNlL01vZGUuanM/NGUyNSJdLCJuYW1lcyI6WyJNb2RlIiwiUkVQTEFZIiwiQkFUQ0giLCJSRUFMX1RJTUUiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLE1BQU1BLElBQUksR0FBRztFQUNoQkMsTUFBTSxFQUFFLFFBRFE7RUFFaEJDLEtBQUssRUFBRyxPQUZRO0VBR2hCQyxTQUFTLEVBQUU7QUFISyxDQUFiIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVudW0gZm9yIGRhdGFzb3VyY2UgbW9kZS5cbiAqIEByZWFkb25seVxuICogQGVudW0ge3tuYW1lOiBzdHJpbmd9fVxuICovXG5leHBvcnQgY29uc3QgTW9kZSA9IHtcbiAgICBSRVBMQVk6IFwicmVwbGF5XCIsXG4gICAgQkFUQ0g6ICBcImJhdGNoXCIsXG4gICAgUkVBTF9USU1FOiBcInJlYWxUaW1lXCJcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n')},,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/**\n * This class is in charge of defining a Layer object.\n */\n\nclass Layer {\n  /**\n   *\n   * @param {Object} properties - contains a list of properties\n   * @param {string} properties.name - default name\n   * @param {string} properties.description - default description\n   * @param {string} properties.dataSourceId - default dataSourceId\n   * @param {boolean} properties.visible - defines if the layer is visible\n   * @param {Number} properties.timestamp - defines the timestamp of the data\n   * @param {Function} properties.getTimestamp - function which defines the timestamp of the data\n   */\n  constructor(properties) {\n    this.properties = properties;\n    this.dataSourcesToFn = undefined;\n    this.data = [];\n    this.props = {};\n    this.props.id = "layer-" + Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* randomUUID */ "m"])();\n    this.props.name = \'\';\n    this.props.description = \'\';\n    this.props.dataSourceId = \'\';\n    this.props.visible = true;\n    this.props.filter = true;\n    this.props.timestamp = 0;\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.name)) {\n      this.props.name = properties.name;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.description)) {\n      this.props.description = properties.description;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.dataSourceId)) {\n      this.props.dataSourceId = properties.dataSourceId;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.visible)) {\n      this.props.visible = properties.visible;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.timestamp)) {\n      this.props.timestamp = properties.timestamp;\n    }\n\n    this.initEvents();\n    const that = this;\n\n    if (this.checkFn("filter")) {\n      let fn = function (rec, timestamp, options) {\n        that.props.filter = that.getFunc(\'filter\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'filter\'), fn);\n    } else {\n      this.properties.filter = function (rec, timestamp, options) {\n        return true;\n      };\n\n      let fn = async function (rec, timestamp, options) {\n        that.props.filter = await that.getFunc(\'filter\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'filter\'), fn);\n    }\n\n    if (this.checkFn("getVisible")) {\n      let fn = async function (rec, timestamp, options) {\n        that.props.visible = await that.getFunc(\'getVisible\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getVisible\'), fn);\n    }\n\n    if (this.checkFn("getTimestamp")) {\n      let fn = async rec => {\n        that.props.timestamp = await that.getFunc(\'getTimestamp\')(rec);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getTimestamp\'), fn);\n    }\n  }\n\n  saveState() {\n    this.initialState = { ...this.props\n    };\n  }\n\n  restoreState() {\n    this.props = { ...this.initialState\n    };\n  }\n\n  getFunc(funcName) {\n    return this.properties[funcName].handler || this.properties[funcName];\n  }\n  /**\n   * @private\n   * @param funcName\n   * @return {*}\n   */\n\n\n  checkFn(funcName) {\n    let func = this.properties[funcName];\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isFunction */ "l"])(func)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertDefined */ "c"])(this.properties.dataSourceId, \'dataSourceId\');\n      return true;\n    } else {\n      let isSet = Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(func);\n\n      if (isSet) {\n        Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(func.dataSourceIds, funcName + ".dataSourceIds");\n        Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(func.handler, funcName + ".handler");\n      }\n\n      return isSet;\n    }\n  }\n  /**\n   * @private\n   */\n\n\n  initEvents() {}\n  /**\n   * Clear the layer.\n   */\n\n\n  clear() {}\n  /**\n   * Gets the layer id.\n   * @return {String} the layer id\n   */\n\n\n  getId() {\n    return this.id;\n  }\n  /**\n   * Selects the datasource contained into the list\n   * @param {Array} dataSourceIds the list of datasources\n   */\n\n\n  select(dataSourceIds) {}\n  /**\n   * Adds a function associated to a list of dataSource ids\n   * @param {String[]} dataSourceIds - the list of datasources\n   * @param {Function} fn - the function to add\n   */\n\n\n  addFn(dataSourceIds, fn) {\n    if (!Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(this.dataSourcesToFn)) {\n      this.dataSourcesToFn = {};\n    }\n\n    for (let i = 0; i < dataSourceIds.length; i++) {\n      let dataSourceId = dataSourceIds[i];\n\n      if (!Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(this.dataSourcesToFn[dataSourceId])) {\n        this.dataSourcesToFn[dataSourceId] = [];\n      }\n\n      this.dataSourcesToFn[dataSourceId].push(fn);\n    }\n  }\n  /**\n   *\n   * @param dataSourceId\n   * @param {Object[]} records\n   * @param options\n   */\n\n\n  async setData(dataSourceId, records, options = {}) {\n    // store data into data props\n    this.data = [];\n    options.dataSourceId = dataSourceId;\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(this.dataSourcesToFn)) {\n      if (dataSourceId in this.dataSourcesToFn) {\n        let fnArr = this.dataSourcesToFn[dataSourceId];\n\n        for (let j = 0; j < records.length; j++) {\n          for (let i = 0; i < fnArr.length; i++) {\n            await fnArr[i](records[j].data, records[j].data.timestamp, options);\n\n            if (!this.props.filter) {\n              break;\n            }\n          }\n\n          if (this.props.filter) {\n            this.data.push({ ...this.props\n            });\n          }\n        }\n      }\n    }\n  }\n  /**\n   *\n   * @return {String[]} The list of dataSource ids\n   */\n\n\n  getDataSourcesIds() {\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(this.dataSourcesToFn)) {\n      let res = [];\n\n      for (let i in this.dataSourcesToFn) {\n        res.push(i);\n      }\n\n      return res;\n    } else {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertDefined */ "c"])(this.properties.dataSourceId, \'dataSourceId must be defined\');\n      return [this.properties.dataSourceId];\n    }\n  }\n\n  getDataSourcesIdsByProperty(name) {\n    return this.properties[name].dataSourceIds || [this.properties.dataSourceId];\n  }\n  /**\n   * Inits the layer.\n   */\n\n\n  init() {}\n  /**\n   * Clone current layer properties\n   * @return {Object} a shallow copy of current properties\n   */\n\n\n  getProps() {\n    return {\n      type: this.type,\n      values: this.data\n    };\n  }\n  /**\n   * Reset to default Layer values\n   */\n\n\n  reset() {\n    this.restoreState();\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (Layer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9MYXllci5qcz8yZDFkIl0sIm5hbWVzIjpbIkxheWVyIiwiY29uc3RydWN0b3IiLCJwcm9wZXJ0aWVzIiwiZGF0YVNvdXJjZXNUb0ZuIiwidW5kZWZpbmVkIiwiZGF0YSIsInByb3BzIiwiaWQiLCJyYW5kb21VVUlEIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiZGF0YVNvdXJjZUlkIiwidmlzaWJsZSIsImZpbHRlciIsInRpbWVzdGFtcCIsImlzRGVmaW5lZCIsImluaXRFdmVudHMiLCJ0aGF0IiwiY2hlY2tGbiIsImZuIiwicmVjIiwib3B0aW9ucyIsImdldEZ1bmMiLCJhZGRGbiIsImdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSIsInNhdmVTdGF0ZSIsImluaXRpYWxTdGF0ZSIsInJlc3RvcmVTdGF0ZSIsImZ1bmNOYW1lIiwiaGFuZGxlciIsImZ1bmMiLCJpc0Z1bmN0aW9uIiwiYXNzZXJ0RGVmaW5lZCIsImlzU2V0IiwiaGFzVmFsdWUiLCJhc3NlcnRBcnJheSIsImRhdGFTb3VyY2VJZHMiLCJhc3NlcnRGdW5jdGlvbiIsImNsZWFyIiwiZ2V0SWQiLCJzZWxlY3QiLCJpIiwibGVuZ3RoIiwicHVzaCIsInNldERhdGEiLCJyZWNvcmRzIiwiZm5BcnIiLCJqIiwiZ2V0RGF0YVNvdXJjZXNJZHMiLCJyZXMiLCJpbml0IiwiZ2V0UHJvcHMiLCJ0eXBlIiwidmFsdWVzIiwicmVzZXQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFVQTtBQUNBO0FBQ0E7O0FBQ0EsTUFBTUEsS0FBTixDQUFZO0VBQ1I7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDSjtBQUNBO0FBQ0E7OztFQUNJMEMsaUJBQWlCLEdBQUc7SUFDaEIsSUFBR2pDLHlFQUFTLENBQUMsS0FBS1osZUFBTixDQUFaLEVBQW9DO01BQ2hDLElBQUk4QyxHQUFHLEdBQUcsRUFBVjs7TUFDQSxLQUFLLElBQUlSLENBQVQsSUFBYyxLQUFLdEMsZUFBbkIsRUFBb0M7UUFDaEM4QyxHQUFHLENBQUNOLElBQUosQ0FBU0YsQ0FBVDtNQUNIOztNQUNELE9BQU9RLEdBQVA7SUFDSCxDQU5ELE1BTU87TUFDSGpCLDZFQUFhLENBQUMsS0FBSzlCLFVBQUwsQ0FBZ0JTLFlBQWpCLEVBQStCLDhCQUEvQixDQUFiO01BQ0EsT0FBTyxDQUFDLEtBQUtULFVBQUwsQ0FBZ0JTLFlBQWpCLENBQVA7SUFDSDtFQUNKOztFQUVEYSwyQkFBMkIsQ0FBQ2YsSUFBRCxFQUFPO0lBQzlCLE9BQU8sS0FBS1AsVUFBTCxDQUFnQk8sSUFBaEIsRUFBc0IyQixhQUF0QixJQUF3QyxDQUFDLEtBQUtsQyxVQUFMLENBQWdCUyxZQUFqQixDQUEvQztFQUNIO0VBRUQ7QUFDSjtBQUNBOzs7RUFDSXVDLElBQUksR0FBRyxDQUNOO0VBRUQ7QUFDSjtBQUNBO0FBQ0E7OztFQUNJQyxRQUFRLEdBQUc7SUFDUCxPQUFPO01BQ0hDLElBQUksRUFBRSxLQUFLQSxJQURSO01BRUhDLE1BQU0sRUFBRSxLQUFLaEQ7SUFGVixDQUFQO0VBSUg7RUFFRDtBQUNKO0FBQ0E7OztFQUNJaUQsS0FBSyxHQUFHO0lBQ0osS0FBSzNCLFlBQUw7RUFDSDs7QUFwT087O0FBdU9HM0IsOERBQWYiLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIwIE1hdGhpZXUgRGhhaW5hdXQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmltcG9ydCB7XG4gICAgYXNzZXJ0QXJyYXksXG4gICAgYXNzZXJ0RGVmaW5lZCxcbiAgICBhc3NlcnRGdW5jdGlvbixcbiAgICBoYXNWYWx1ZSxcbiAgICBpc0RlZmluZWQsXG4gICAgaXNGdW5jdGlvbixcbiAgICByYW5kb21VVUlEXG59IGZyb20gXCIuLi8uLi91dGlscy9VdGlscy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgaW4gY2hhcmdlIG9mIGRlZmluaW5nIGEgTGF5ZXIgb2JqZWN0LlxuICovXG5jbGFzcyBMYXllciB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIGNvbnRhaW5zIGEgbGlzdCBvZiBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnRpZXMubmFtZSAtIGRlZmF1bHQgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uIC0gZGVmYXVsdCBkZXNjcmlwdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZCAtIGRlZmF1bHQgZGF0YVNvdXJjZUlkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBwcm9wZXJ0aWVzLnZpc2libGUgLSBkZWZpbmVzIGlmIHRoZSBsYXllciBpcyB2aXNpYmxlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb3BlcnRpZXMudGltZXN0YW1wIC0gZGVmaW5lcyB0aGUgdGltZXN0YW1wIG9mIHRoZSBkYXRhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcGVydGllcy5nZXRUaW1lc3RhbXAgLSBmdW5jdGlvbiB3aGljaCBkZWZpbmVzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIGRhdGFcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZXNUb0ZuID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHt9O1xuICAgICAgICB0aGlzLnByb3BzLmlkID0gXCJsYXllci1cIiArIHJhbmRvbVVVSUQoKTtcbiAgICAgICAgdGhpcy5wcm9wcy5uYW1lID0gJyc7XG4gICAgICAgIHRoaXMucHJvcHMuZGVzY3JpcHRpb24gPSAnJztcbiAgICAgICAgdGhpcy5wcm9wcy5kYXRhU291cmNlSWQgPSAnJztcbiAgICAgICAgdGhpcy5wcm9wcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcm9wcy5maWx0ZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnByb3BzLnRpbWVzdGFtcCA9IDA7XG5cbiAgICAgICAgaWYoaXNEZWZpbmVkKHByb3BlcnRpZXMubmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubmFtZSA9IHByb3BlcnRpZXMubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZihpc0RlZmluZWQocHJvcGVydGllcy5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGVzY3JpcHRpb24gPSBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoaXNEZWZpbmVkKHByb3BlcnRpZXMuZGF0YVNvdXJjZUlkKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5kYXRhU291cmNlSWQgPSBwcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGlzRGVmaW5lZChwcm9wZXJ0aWVzLnZpc2libGUpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnZpc2libGUgPSBwcm9wZXJ0aWVzLnZpc2libGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNEZWZpbmVkKHByb3BlcnRpZXMudGltZXN0YW1wKSl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnRpbWVzdGFtcCA9IHByb3BlcnRpZXMudGltZXN0YW1wO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbml0RXZlbnRzKCk7XG5cbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImZpbHRlclwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gZnVuY3Rpb24ocmVjLHRpbWVzdGFtcCxvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5wcm9wcy5maWx0ZXIgPSB0aGF0LmdldEZ1bmMoJ2ZpbHRlcicpKHJlYyx0aW1lc3RhbXAsb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZmlsdGVyJyksZm4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLmZpbHRlciA9IGZ1bmN0aW9uKHJlYyx0aW1lc3RhbXAsb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgZnVuY3Rpb24gKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5wcm9wcy5maWx0ZXIgPSBhd2FpdCB0aGF0LmdldEZ1bmMoJ2ZpbHRlcicpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhhdC5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2ZpbHRlcicpLGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRWaXNpYmxlXCIpKSB7XG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyBmdW5jdGlvbiAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnByb3BzLnZpc2libGUgPSBhd2FpdCB0aGF0LmdldEZ1bmMoJ2dldFZpc2libGUnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0VmlzaWJsZScpLGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRUaW1lc3RhbXBcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGF0LnByb3BzLnRpbWVzdGFtcCA9IGF3YWl0IHRoYXQuZ2V0RnVuYygnZ2V0VGltZXN0YW1wJykocmVjKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFkZEZuKHRoYXQuZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5KCdnZXRUaW1lc3RhbXAnKSwgZm4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2F2ZVN0YXRlKCkge1xuICAgICAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IHsuLi50aGlzLnByb3BzfTtcbiAgICB9XG5cbiAgICByZXN0b3JlU3RhdGUoKSB7XG4gICAgICAgIHRoaXMucHJvcHMgPSB7Li4udGhpcy5pbml0aWFsU3RhdGV9O1xuICAgIH1cbiAgICBnZXRGdW5jKGZ1bmNOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXNbZnVuY05hbWVdLmhhbmRsZXIgfHwgdGhpcy5wcm9wZXJ0aWVzW2Z1bmNOYW1lXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSBmdW5jTmFtZVxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICovXG4gICAgY2hlY2tGbihmdW5jTmFtZSkge1xuICAgICAgICBsZXQgZnVuYyA9IHRoaXMucHJvcGVydGllc1tmdW5jTmFtZV07XG4gICAgICAgIGlmKGlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgICAgIGFzc2VydERlZmluZWQodGhpcy5wcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZCwgJ2RhdGFTb3VyY2VJZCcpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgaXNTZXQgPSBoYXNWYWx1ZShmdW5jKTtcbiAgICAgICAgICAgIGlmIChpc1NldCkge1xuICAgICAgICAgICAgICAgIGFzc2VydEFycmF5KGZ1bmMuZGF0YVNvdXJjZUlkcywgZnVuY05hbWUgKyBcIi5kYXRhU291cmNlSWRzXCIpO1xuICAgICAgICAgICAgICAgIGFzc2VydEZ1bmN0aW9uKGZ1bmMuaGFuZGxlciwgZnVuY05hbWUgKyBcIi5oYW5kbGVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzU2V0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBpbml0RXZlbnRzKCkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBsYXllci5cbiAgICAgKi9cbiAgICBjbGVhcigpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsYXllciBpZC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBsYXllciBpZFxuICAgICAqL1xuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIHRoZSBkYXRhc291cmNlIGNvbnRhaW5lZCBpbnRvIHRoZSBsaXN0XG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF0YVNvdXJjZUlkcyB0aGUgbGlzdCBvZiBkYXRhc291cmNlc1xuICAgICAqL1xuICAgIHNlbGVjdChkYXRhU291cmNlSWRzKSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGZ1bmN0aW9uIGFzc29jaWF0ZWQgdG8gYSBsaXN0IG9mIGRhdGFTb3VyY2UgaWRzXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXX0gZGF0YVNvdXJjZUlkcyAtIHRoZSBsaXN0IG9mIGRhdGFzb3VyY2VzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gYWRkXG4gICAgICovXG4gICAgYWRkRm4oZGF0YVNvdXJjZUlkcywgZm4pIHtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQodGhpcy5kYXRhU291cmNlc1RvRm4pKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2VzVG9GbiA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVNvdXJjZUlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGRhdGFTb3VyY2VJZCA9IGRhdGFTb3VyY2VJZHNbaV07XG4gICAgICAgICAgICBpZiAoIWlzRGVmaW5lZCh0aGlzLmRhdGFTb3VyY2VzVG9GbltkYXRhU291cmNlSWRdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZXNUb0ZuW2RhdGFTb3VyY2VJZF0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZXNUb0ZuW2RhdGFTb3VyY2VJZF0ucHVzaChmbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhU291cmNlSWRcbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSByZWNvcmRzXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyBzZXREYXRhKGRhdGFTb3VyY2VJZCwgcmVjb3Jkcywgb3B0aW9ucz17fSkge1xuICAgICAgICAvLyBzdG9yZSBkYXRhIGludG8gZGF0YSBwcm9wc1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgb3B0aW9ucy5kYXRhU291cmNlSWQgPSBkYXRhU291cmNlSWQ7XG4gICAgICAgIGlmIChpc0RlZmluZWQodGhpcy5kYXRhU291cmNlc1RvRm4pKSB7XG4gICAgICAgICAgICBpZiAoZGF0YVNvdXJjZUlkIGluIHRoaXMuZGF0YVNvdXJjZXNUb0ZuKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZuQXJyID0gdGhpcy5kYXRhU291cmNlc1RvRm5bZGF0YVNvdXJjZUlkXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlY29yZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbkFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZm5BcnJbaV0ocmVjb3Jkc1tqXS5kYXRhLCByZWNvcmRzW2pdLmRhdGEudGltZXN0YW1wLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5maWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnByb3BzLmZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmdbXX0gVGhlIGxpc3Qgb2YgZGF0YVNvdXJjZSBpZHNcbiAgICAgKi9cbiAgICBnZXREYXRhU291cmNlc0lkcygpIHtcbiAgICAgICAgaWYoaXNEZWZpbmVkKHRoaXMuZGF0YVNvdXJjZXNUb0ZuKSkge1xuICAgICAgICAgICAgbGV0IHJlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLmRhdGFTb3VyY2VzVG9Gbikge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydERlZmluZWQodGhpcy5wcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZCwgJ2RhdGFTb3VyY2VJZCBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5wcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzW25hbWVdLmRhdGFTb3VyY2VJZHMgfHwgIFt0aGlzLnByb3BlcnRpZXMuZGF0YVNvdXJjZUlkXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0cyB0aGUgbGF5ZXIuXG4gICAgICovXG4gICAgaW5pdCgpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBjdXJyZW50IGxheWVyIHByb3BlcnRpZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGEgc2hhbGxvdyBjb3B5IG9mIGN1cnJlbnQgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGdldFByb3BzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgdmFsdWVzOiB0aGlzLmRhdGFcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0byBkZWZhdWx0IExheWVyIHZhbHVlc1xuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnJlc3RvcmVTdGF0ZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGF5ZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/resources/css/view.css\nvar view = __webpack_require__(32);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/Constants.js\nvar Constants = __webpack_require__(2);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/connector/Status.js\n/**\n * Enum for connection status.\n * @readonly\n * @enum {{name: string}}\n */\nconst Status = {\n  CONNECTING: "connecting",\n  CONNECTED: "connected",\n  DISCONNECTED: "disconnected",\n  FETCH_STARTED: \'fetch-start\',\n  FETCH_ENDED: \'fetch-end\',\n  CLOSED: "closed",\n  CLOSED_ERROR: "closed-error"\n};\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/event/EventType.js\nconst EventType = {\n  DATA: \'data\',\n  LAST_TIME: \'last-time\',\n  MASTER_TIME: \'master-time\',\n  STATUS: \'status\',\n  TIME_CHANGED: \'time-changed\'\n};\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/View.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/**\n * The abstract object to represent a view.\n */\n\n\n\n\n\n\nclass View_View {\n  /**\n   * Create a View.\n   * @param {Object} [properties={}] - the properties of the view\n   * @param {string} properties.container - The div element to attach to\n   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces\n   * @param {string[]} properties.supportedLayers - List the supported layers of this View. It is corresponding to the the \'type\' Layer property\n   * @param {boolean} properties.visible - set the default behavior of the visibility of the view\n   * @param {Object[]}  [properties.layers=[]] - The initial layers to add\n   */\n  constructor(properties) {\n    // list of layers\n    this.layers = [];\n    this.lastRec = {};\n    this.dataSources = [];\n    this.broadcastChannels = []; //this.divId = divId;\n\n    this.id = "view-" + Object(Utils["m" /* randomUUID */])();\n    this.css = "";\n\n    if (Object(Utils["k" /* isDefined */])(properties) && Object(Utils["k" /* isDefined */])(properties.css)) {\n      this.css = properties.css;\n    }\n\n    Object(Utils["c" /* assertDefined */])(properties && properties.supportedLayers, \'supportedLayers\');\n    Object(Utils["a" /* assertArray */])(properties.supportedLayers, \'supportedLayers\');\n    Object(Utils["i" /* assertTrue */])(properties.supportedLayers.length > 0, \'supportedLayers.length === 0\');\n    this.supportedLayers = properties.supportedLayers; // inits the view before adding the viewItem\n\n    this.init(properties);\n  }\n  /**\n   * Inits the view component.\n   * @private\n   */\n\n\n  init(properties) {\n    this.properties = properties;\n    this.elementDiv = document.createElement("div");\n    this.elementDiv.setAttribute("id", this.id);\n    this.elementDiv.setAttribute("class", this.css + " osh-view");\n    this.divId = this.id;\n    let parentDivId = Object(Utils["k" /* isDefined */])(properties.container) ? properties.container : document.body;\n    let div = document.getElementById(parentDivId);\n\n    if (!Object(Utils["k" /* isDefined */])(div) || div === null) {\n      document.body.appendChild(this.elementDiv);\n      this.hide();\n      this.container = document.body;\n    } else {\n      div.appendChild(this.elementDiv);\n      this.container = div;\n    }\n\n    this.beforeAddingItems(properties);\n\n    if (Object(Utils["k" /* isDefined */])(properties)) {\n      if (Object(Utils["k" /* isDefined */])(properties.layers)) {\n        for (let i = 0; i < properties.layers.length; i++) {\n          this.addLayer(properties.layers[i]);\n        }\n      }\n\n      if (Object(Utils["k" /* isDefined */])(properties.visible)) {\n        document.getElementById(this.divId).style.display = properties.visible ? "block" : "none";\n      }\n    }\n\n    const that = this; // observes the event associated to the dataSourceId\n\n    let observer = new MutationObserver(mutations => {\n      mutations.forEach(function (mutation) {\n        // Was it the style attribute that changed? (Maybe a classname or other attribute change could do this too?\n        // You might want to remove the attribute condition) Is display set to \'none\'?\n        if (mutation.attributeName === \'style\') {\n          that.onResize();\n        }\n      });\n    }); // Attach the mutation observer to blocker, and only when attribute values change\n\n    observer.observe(this.elementDiv, {\n      attributes: true\n    });\n    const rootObserver = new MutationObserver(function (mutations) {\n      // try to get the div element by the id to check if it is still owned by the document object\n      if (!Object(Utils["k" /* isDefined */])(document.getElementById(that.divId))) {\n        this.disconnect();\n        that.destroy();\n      }\n    });\n    rootObserver.observe(document.body, {\n      childList: true\n    });\n  }\n  /**\n   * Hide the view\n   */\n\n\n  hide() {\n    this.elementDiv.style.display = "none";\n  }\n  /**\n   * Callback called when the view is resized\n   * @event\n   */\n\n\n  onResize() {}\n  /**\n   * Attach the view to a specific div. If the view has already been attached to a div, it will be removed\n   * from its current parent and will be attached to new one.\n   * Note: the onResize() is called at the end of the process.\n   * @param {String} divId - The div element to attach to\n   */\n\n\n  attachTo(divId) {\n    if (Object(Utils["k" /* isDefined */])(this.elementDiv.parentNode)) {\n      // detach from its parent\n      this.elementDiv.parentNode.removeChild(this.elementDiv);\n    }\n\n    document.getElementById(divId).appendChild(this.elementDiv);\n\n    if (this.elementDiv.style.display === "none") {\n      this.elementDiv.style.display = "block";\n    }\n\n    this.onResize();\n  }\n  /**\n   * This method is called before attaching any view items passed as arguments in the constructor of the view.\n   * @event\n   * @param {Object} options - A generic object to use\n   */\n\n\n  beforeAddingItems(options) {}\n  /**\n   * Gets the inner id of the view object.\n   * @return {String} The id of the view\n   */\n\n\n  getId() {\n    return this.id;\n  }\n  /**\n   * Gets the div id of the DOM element.\n   * @return {String} The div id of the view\n   */\n\n\n  getDivId() {\n    return this.divId;\n  }\n  /**\n   * Set the data to the view. Each view has to handle the kind of the data separately.\n   * @param {String} dataSourceId - The dataSource id of the source providing the data\n   * @param {any[]} data - The data array to set\n   */\n\n\n  async setData(dataSourceId, data) {}\n  /**\n   * Show the view.\n   * @param  {Object} properties - A generic object\n   */\n\n\n  show(properties) {}\n\n  destroy() {\n    for (let bc of this.broadcastChannels) {\n      bc.close();\n    }\n\n    this.broadcastChannels = [];\n  }\n  /**\n   * Adds a layer to the view. A broadcastChannel is going to listen the new dataSources\n   * @param {Layer} layer - The layer object\n   */\n\n\n  addLayer(layer) {\n    Object(Utils["i" /* assertTrue */])(this.supportedLayers.includes(layer.type), \'this layer is not supported: \' + layer.type + \', should be \' + this.supportedLayers);\n    this.layers.push(layer);\n    let ds = layer.getDataSourcesIds();\n\n    for (let i = 0; i < ds.length; i++) {\n      const dataSourceId = ds[i]; // this.setData(dataSourceId, [layer.getProps()]);\n      // observes the data come in\n\n      let self = this;\n      const broadcastChannel = new BroadcastChannel(Constants["a" /* DATASOURCE_DATA_TOPIC */] + dataSourceId);\n\n      broadcastChannel.onmessage = async event => {\n        if (event.data.type === EventType.STATUS && event.data.status === Status.CLOSED_ERROR) {\n          self.reset();\n        } else if (event.data.type === EventType.DATA) {\n          const that = this; // transform the data\n\n          await layer.setData(dataSourceId, event.data.values); // set the transformed data to the view\n\n          await that.setData(dataSourceId, layer.getProps()); // store as last record\n\n          self.lastRec[dataSourceId] = event.data;\n        }\n      };\n\n      const timeBroadcastChannel = new BroadcastChannel(Constants["b" /* DATASOURCE_TIME_TOPIC */] + dataSourceId);\n\n      timeBroadcastChannel.onmessage = event => {\n        // skip data reset events for now\n        if (event.data.type === EventType.TIME_CHANGED) {\n          self.reset(); // on time changed\n        }\n      };\n\n      this.broadcastChannels.push(broadcastChannel);\n      this.broadcastChannels.push(timeBroadcastChannel);\n    }\n  }\n  /**\n   * Removes a Layer from the view.\n   * @param {Layer} layer - The layer object\n   */\n\n\n  removeAllFromLayer(layer) {\n    if (this.layers.includes(layer)) {\n      // 1) remove from STYLER fn\n      for (let ds in layer.dataSourcesToFn) {\n        delete this.lastRec[ds];\n      }\n\n      layer.reset();\n    }\n  }\n  /**\n   * Removes all view item from the view.\n   */\n\n\n  removeAllFromLayers() {\n    for (let layer of this.layers) {\n      this.removeAllFromLayer(layer);\n    }\n  }\n  /**\n   * Gets the list of the dataSource ids contained into the view.\n   * @return {String[]} The list of dataSource ids\n   */\n\n\n  getDataSourcesId() {\n    let res = []; // check for layers\n\n    for (let i = 0; i < this.layers.length; i++) {\n      let layer = this.layers[i];\n      res = res.concat(layer.getDataSourcesIds());\n    }\n\n    return res;\n  }\n  /**\n   * Calls for resetting the view.\n   */\n\n\n  reset() {\n    this.removeAllFromLayers();\n  }\n\n}\n\n/* harmony default export */ var view_View = __webpack_exports__["a"] = (View_View);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9jb25uZWN0b3IvU3RhdHVzLmpzP2E1ODciLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvZXZlbnQvRXZlbnRUeXBlLmpzPzllMzAiLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvdWkvdmlldy9WaWV3LmpzPzA0YzIiXSwibmFtZXMiOlsiU3RhdHVzIiwiQ09OTkVDVElORyIsIkNPTk5FQ1RFRCIsIkRJU0NPTk5FQ1RFRCIsIkZFVENIX1NUQVJURUQiLCJGRVRDSF9FTkRFRCIsIkNMT1NFRCIsIkNMT1NFRF9FUlJPUiIsIkV2ZW50VHlwZSIsIkRBVEEiLCJMQVNUX1RJTUUiLCJNQVNURVJfVElNRSIsIlNUQVRVUyIsIlRJTUVfQ0hBTkdFRCIsIlZpZXciLCJjb25zdHJ1Y3RvciIsInByb3BlcnRpZXMiLCJsYXllcnMiLCJsYXN0UmVjIiwiZGF0YVNvdXJjZXMiLCJicm9hZGNhc3RDaGFubmVscyIsImlkIiwicmFuZG9tVVVJRCIsImNzcyIsImlzRGVmaW5lZCIsImFzc2VydERlZmluZWQiLCJzdXBwb3J0ZWRMYXllcnMiLCJhc3NlcnRBcnJheSIsImFzc2VydFRydWUiLCJsZW5ndGgiLCJpbml0IiwiZWxlbWVudERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImRpdklkIiwicGFyZW50RGl2SWQiLCJjb250YWluZXIiLCJib2R5IiwiZGl2IiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImhpZGUiLCJiZWZvcmVBZGRpbmdJdGVtcyIsImkiLCJhZGRMYXllciIsInZpc2libGUiLCJzdHlsZSIsImRpc3BsYXkiLCJ0aGF0Iiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwiZm9yRWFjaCIsIm11dGF0aW9uIiwiYXR0cmlidXRlTmFtZSIsIm9uUmVzaXplIiwib2JzZXJ2ZSIsImF0dHJpYnV0ZXMiLCJyb290T2JzZXJ2ZXIiLCJkaXNjb25uZWN0IiwiZGVzdHJveSIsImNoaWxkTGlzdCIsImF0dGFjaFRvIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwib3B0aW9ucyIsImdldElkIiwiZ2V0RGl2SWQiLCJzZXREYXRhIiwiZGF0YVNvdXJjZUlkIiwiZGF0YSIsInNob3ciLCJiYyIsImNsb3NlIiwibGF5ZXIiLCJpbmNsdWRlcyIsInR5cGUiLCJwdXNoIiwiZHMiLCJnZXREYXRhU291cmNlc0lkcyIsInNlbGYiLCJicm9hZGNhc3RDaGFubmVsIiwiQnJvYWRjYXN0Q2hhbm5lbCIsIkRBVEFTT1VSQ0VfREFUQV9UT1BJQyIsIm9ubWVzc2FnZSIsImV2ZW50Iiwic3RhdHVzIiwicmVzZXQiLCJ2YWx1ZXMiLCJnZXRQcm9wcyIsInRpbWVCcm9hZGNhc3RDaGFubmVsIiwiREFUQVNPVVJDRV9USU1FX1RPUElDIiwicmVtb3ZlQWxsRnJvbUxheWVyIiwiZGF0YVNvdXJjZXNUb0ZuIiwicmVtb3ZlQWxsRnJvbUxheWVycyIsImdldERhdGFTb3VyY2VzSWQiLCJyZXMiLCJjb25jYXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLE1BQU1BLE1BQU0sR0FBRztFQUNsQkMsVUFBVSxFQUFFLFlBRE07RUFFbEJDLFNBQVMsRUFBRyxXQUZNO0VBR2xCQyxZQUFZLEVBQUUsY0FISTtFQUlsQkMsYUFBYSxFQUFFLGFBSkc7RUFLbEJDLFdBQVcsRUFBRSxXQUxLO0VBTWxCQyxNQUFNLEVBQUUsUUFOVTtFQU9sQkMsWUFBWSxFQUFFO0FBUEksQ0FBZixDOztBQ0xBLE1BQU1DLFNBQVMsR0FBRztFQUNyQkMsSUFBSSxFQUFFLE1BRGU7RUFFckJD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OztNQUNESixLQUFLLENBQUNhLEtBQU47SUFDSDtFQUNKO0VBRUQ7QUFDSjtBQUNBOzs7RUFDSU8sbUJBQW1CLEdBQUc7SUFDbEIsS0FBSSxJQUFJcEIsS0FBUixJQUFpQixLQUFLMUQsTUFBdEIsRUFBOEI7TUFDMUIsS0FBSzRFLGtCQUFMLENBQXdCbEIsS0FBeEI7SUFDSDtFQUNKO0VBRUQ7QUFDSjtBQUNBO0FBQ0E7OztFQUNJcUIsZ0JBQWdCLEdBQUc7SUFDZixJQUFJQyxHQUFHLEdBQUcsRUFBVixDQURlLENBR2Y7O0lBQ0EsS0FBSyxJQUFJckQsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLM0IsTUFBTCxDQUFZWSxNQUFoQyxFQUF3Q2UsQ0FBQyxFQUF6QyxFQUE2QztNQUN6QyxJQUFJK0IsS0FBSyxHQUFHLEtBQUsxRCxNQUFMLENBQVkyQixDQUFaLENBQVo7TUFDQXFELEdBQUcsR0FBR0EsR0FBRyxDQUFDQyxNQUFKLENBQVd2QixLQUFLLENBQUNLLGlCQUFOLEVBQVgsQ0FBTjtJQUNIOztJQUVELE9BQU9pQixHQUFQO0VBQ0g7RUFFRDtBQUNKO0FBQ0E7OztFQUNJVCxLQUFLLEdBQUc7SUFDSixLQUFLTyxtQkFBTDtFQUNIOztBQTdRTTs7QUFnUklqRixrRkFBZiIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW51bSBmb3IgY29ubmVjdGlvbiBzdGF0dXMuXG4gKiBAcmVhZG9ubHlcbiAqIEBlbnVtIHt7bmFtZTogc3RyaW5nfX1cbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXR1cyA9IHtcbiAgICBDT05ORUNUSU5HOiBcImNvbm5lY3RpbmdcIixcbiAgICBDT05ORUNURUQ6ICBcImNvbm5lY3RlZFwiLFxuICAgIERJU0NPTk5FQ1RFRDogXCJkaXNjb25uZWN0ZWRcIixcbiAgICBGRVRDSF9TVEFSVEVEOiAnZmV0Y2gtc3RhcnQnLFxuICAgIEZFVENIX0VOREVEOiAnZmV0Y2gtZW5kJyxcbiAgICBDTE9TRUQ6IFwiY2xvc2VkXCIsXG4gICAgQ0xPU0VEX0VSUk9SOiBcImNsb3NlZC1lcnJvclwiXG59O1xuIiwiZXhwb3J0IGNvbnN0IEV2ZW50VHlwZSA9IHtcbiAgICBEQVRBOiAnZGF0YScsXG4gICAgTEFTVF9USU1FOiAnbGFzdC10aW1lJyxcbiAgICBNQVNURVJfVElNRTogJ21hc3Rlci10aW1lJyxcbiAgICBTVEFUVVM6ICdzdGF0dXMnLFxuICAgIFRJTUVfQ0hBTkdFRDogJ3RpbWUtY2hhbmdlZCdcbn07XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIwIE1hdGhpZXUgRGhhaW5hdXQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogVGhlIGFic3RyYWN0IG9iamVjdCB0byByZXByZXNlbnQgYSB2aWV3LlxuICovXG5pbXBvcnQge1xuICAgIGFzc2VydEFycmF5LFxuICAgIGFzc2VydEJvb2xlYW4sXG4gICAgYXNzZXJ0RGVmaW5lZCxcbiAgICBhc3NlcnRTdHJpbmcsXG4gICAgYXNzZXJ0VHJ1ZSxcbiAgICBpc0RlZmluZWQsXG4gICAgcmFuZG9tVVVJRFxufSBmcm9tICcuLi8uLi91dGlscy9VdGlscy5qcyc7XG5pbXBvcnQgJy4uLy4uL3Jlc291cmNlcy9jc3Mvdmlldy5jc3MnO1xuaW1wb3J0IHtEQVRBU09VUkNFX0RBVEFfVE9QSUMsIERBVEFTT1VSQ0VfVElNRV9UT1BJQ30gZnJvbSBcIi4uLy4uL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHtTdGF0dXN9IGZyb20gXCIuLi8uLi9jb25uZWN0b3IvU3RhdHVzLmpzXCI7XG5pbXBvcnQge0V2ZW50VHlwZX0gZnJvbSBcIi4uLy4uL2V2ZW50L0V2ZW50VHlwZS5qc1wiO1xuXG5jbGFzcyBWaWV3IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBWaWV3LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gLSB0aGUgcHJvcGVydGllcyBvZiB0aGUgdmlld1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmNvbnRhaW5lciAtIFRoZSBkaXYgZWxlbWVudCB0byBhdHRhY2ggdG9cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydGllcy5jc3MgLSBUaGUgY3NzIGNsYXNzZXMgdG8gc2V0LCBjYW4gYmUgbXVsdGlwbGUgaWYgc2VwYXJhdGUgYnkgc3BhY2VzXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gcHJvcGVydGllcy5zdXBwb3J0ZWRMYXllcnMgLSBMaXN0IHRoZSBzdXBwb3J0ZWQgbGF5ZXJzIG9mIHRoaXMgVmlldy4gSXQgaXMgY29ycmVzcG9uZGluZyB0byB0aGUgdGhlICd0eXBlJyBMYXllciBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvcGVydGllcy52aXNpYmxlIC0gc2V0IHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSB2aWV3XG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gIFtwcm9wZXJ0aWVzLmxheWVycz1bXV0gLSBUaGUgaW5pdGlhbCBsYXllcnMgdG8gYWRkXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcGVydGllcykge1xuICAgICAgICAvLyBsaXN0IG9mIGxheWVyc1xuICAgICAgICB0aGlzLmxheWVycyA9IFtdO1xuICAgICAgICB0aGlzLmxhc3RSZWMgPSB7fTtcbiAgICAgICAgdGhpcy5kYXRhU291cmNlcyA9IFtdO1xuICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWxzID0gW107XG5cbiAgICAgICAgLy90aGlzLmRpdklkID0gZGl2SWQ7XG4gICAgICAgIHRoaXMuaWQgPSBcInZpZXctXCIgKyByYW5kb21VVUlEKCk7XG5cbiAgICAgICAgdGhpcy5jc3MgPSBcIlwiO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKHByb3BlcnRpZXMpICYmIGlzRGVmaW5lZChwcm9wZXJ0aWVzLmNzcykpIHtcbiAgICAgICAgICAgIHRoaXMuY3NzID0gcHJvcGVydGllcy5jc3M7XG4gICAgICAgIH1cblxuICAgICAgICBhc3NlcnREZWZpbmVkKHByb3BlcnRpZXMgJiYgcHJvcGVydGllcy5zdXBwb3J0ZWRMYXllcnMsICdzdXBwb3J0ZWRMYXllcnMnKTtcbiAgICAgICAgYXNzZXJ0QXJyYXkocHJvcGVydGllcy5zdXBwb3J0ZWRMYXllcnMsICdzdXBwb3J0ZWRMYXllcnMnKTtcbiAgICAgICAgYXNzZXJ0VHJ1ZShwcm9wZXJ0aWVzLnN1cHBvcnRlZExheWVycy5sZW5ndGggPiAwLCAnc3VwcG9ydGVkTGF5ZXJzLmxlbmd0aCA9PT0gMCcpO1xuXG4gICAgICAgIHRoaXMuc3VwcG9ydGVkTGF5ZXJzID0gcHJvcGVydGllcy5zdXBwb3J0ZWRMYXllcnM7XG5cbiAgICAgICAgLy8gaW5pdHMgdGhlIHZpZXcgYmVmb3JlIGFkZGluZyB0aGUgdmlld0l0ZW1cbiAgICAgICAgdGhpcy5pbml0KHByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRzIHRoZSB2aWV3IGNvbXBvbmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGluaXQocHJvcGVydGllcykge1xuXG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMuZWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudERpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCB0aGlzLmlkKTtcbiAgICAgICAgdGhpcy5lbGVtZW50RGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuY3NzK1wiIG9zaC12aWV3XCIpO1xuICAgICAgICB0aGlzLmRpdklkID0gdGhpcy5pZDtcblxuICAgICAgICBsZXQgcGFyZW50RGl2SWQgPSAoaXNEZWZpbmVkKHByb3BlcnRpZXMuY29udGFpbmVyKT8gcHJvcGVydGllcy5jb250YWluZXIgOiBkb2N1bWVudC5ib2R5KTtcblxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50RGl2SWQpO1xuXG4gICAgICAgIGlmICghaXNEZWZpbmVkKGRpdikgfHwgZGl2ID09PSBudWxsKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudERpdik7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnREaXYpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBkaXY7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJlZm9yZUFkZGluZ0l0ZW1zKHByb3BlcnRpZXMpO1xuXG4gICAgICAgIGlmKGlzRGVmaW5lZChwcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmxheWVycykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnRpZXMubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTGF5ZXIocHJvcGVydGllcy5sYXllcnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXZJZCkuc3R5bGUuZGlzcGxheSA9IChwcm9wZXJ0aWVzLnZpc2libGUpID8gXCJibG9ja1wiIDogXCJub25lXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICAgICAgLy8gb2JzZXJ2ZXMgdGhlIGV2ZW50IGFzc29jaWF0ZWQgdG8gdGhlIGRhdGFTb3VyY2VJZFxuXG4gICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIFdhcyBpdCB0aGUgc3R5bGUgYXR0cmlidXRlIHRoYXQgY2hhbmdlZD8gKE1heWJlIGEgY2xhc3NuYW1lIG9yIG90aGVyIGF0dHJpYnV0ZSBjaGFuZ2UgY291bGQgZG8gdGhpcyB0b28/XG4gICAgICAgICAgICAgICAgLy8gWW91IG1pZ2h0IHdhbnQgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgY29uZGl0aW9uKSBJcyBkaXNwbGF5IHNldCB0byAnbm9uZSc/XG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5vblJlc2l6ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQXR0YWNoIHRoZSBtdXRhdGlvbiBvYnNlcnZlciB0byBibG9ja2VyLCBhbmQgb25seSB3aGVuIGF0dHJpYnV0ZSB2YWx1ZXMgY2hhbmdlXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50RGl2LCB7YXR0cmlidXRlczogdHJ1ZX0pO1xuXG4gICAgICAgIGNvbnN0IHJvb3RPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucykge1xuICAgICAgICAgICAgLy8gdHJ5IHRvIGdldCB0aGUgZGl2IGVsZW1lbnQgYnkgdGhlIGlkIHRvIGNoZWNrIGlmIGl0IGlzIHN0aWxsIG93bmVkIGJ5IHRoZSBkb2N1bWVudCBvYmplY3RcbiAgICAgICAgICAgIGlmKCFpc0RlZmluZWQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhhdC5kaXZJZCkpKXtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB0aGF0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJvb3RPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGlkZSB0aGUgdmlld1xuICAgICAqL1xuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudERpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgY2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgcmVzaXplZFxuICAgICAqIEBldmVudFxuICAgICAqL1xuICAgIG9uUmVzaXplKCkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCB0aGUgdmlldyB0byBhIHNwZWNpZmljIGRpdi4gSWYgdGhlIHZpZXcgaGFzIGFscmVhZHkgYmVlbiBhdHRhY2hlZCB0byBhIGRpdiwgaXQgd2lsbCBiZSByZW1vdmVkXG4gICAgICogZnJvbSBpdHMgY3VycmVudCBwYXJlbnQgYW5kIHdpbGwgYmUgYXR0YWNoZWQgdG8gbmV3IG9uZS5cbiAgICAgKiBOb3RlOiB0aGUgb25SZXNpemUoKSBpcyBjYWxsZWQgYXQgdGhlIGVuZCBvZiB0aGUgcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGl2SWQgLSBUaGUgZGl2IGVsZW1lbnQgdG8gYXR0YWNoIHRvXG4gICAgICovXG4gICAgYXR0YWNoVG8oZGl2SWQpIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh0aGlzLmVsZW1lbnREaXYucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgIC8vIGRldGFjaCBmcm9tIGl0cyBwYXJlbnRcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudERpdik7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2SWQpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudERpdik7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnREaXYuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudERpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vblJlc2l6ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBiZWZvcmUgYXR0YWNoaW5nIGFueSB2aWV3IGl0ZW1zIHBhc3NlZCBhcyBhcmd1bWVudHMgaW4gdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSB2aWV3LlxuICAgICAqIEBldmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gQSBnZW5lcmljIG9iamVjdCB0byB1c2VcbiAgICAgKi9cbiAgICBiZWZvcmVBZGRpbmdJdGVtcyhvcHRpb25zKSB7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbm5lciBpZCBvZiB0aGUgdmlldyBvYmplY3QuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgaWQgb2YgdGhlIHZpZXdcbiAgICAgKi9cbiAgICBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGl2IGlkIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBkaXYgaWQgb2YgdGhlIHZpZXdcbiAgICAgKi9cbiAgICBnZXREaXZJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGl2SWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBkYXRhIHRvIHRoZSB2aWV3LiBFYWNoIHZpZXcgaGFzIHRvIGhhbmRsZSB0aGUga2luZCBvZiB0aGUgZGF0YSBzZXBhcmF0ZWx5LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhU291cmNlSWQgLSBUaGUgZGF0YVNvdXJjZSBpZCBvZiB0aGUgc291cmNlIHByb3ZpZGluZyB0aGUgZGF0YVxuICAgICAqIEBwYXJhbSB7YW55W119IGRhdGEgLSBUaGUgZGF0YSBhcnJheSB0byBzZXRcbiAgICAgKi9cbiAgICBhc3luYyBzZXREYXRhKGRhdGFTb3VyY2VJZCwgZGF0YSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gQSBnZW5lcmljIG9iamVjdFxuICAgICAqL1xuICAgIHNob3cocHJvcGVydGllcykge1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSAge1xuICAgICAgICBmb3IobGV0IGJjIG9mIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbHMpIHtcbiAgICAgICAgICAgIGJjLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVscyA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGF5ZXIgdG8gdGhlIHZpZXcuIEEgYnJvYWRjYXN0Q2hhbm5lbCBpcyBnb2luZyB0byBsaXN0ZW4gdGhlIG5ldyBkYXRhU291cmNlc1xuICAgICAqIEBwYXJhbSB7TGF5ZXJ9IGxheWVyIC0gVGhlIGxheWVyIG9iamVjdFxuICAgICAqL1xuICAgIGFkZExheWVyKGxheWVyKSB7XG4gICAgICAgIGFzc2VydFRydWUodGhpcy5zdXBwb3J0ZWRMYXllcnMuaW5jbHVkZXMobGF5ZXIudHlwZSksICd0aGlzIGxheWVyIGlzIG5vdCBzdXBwb3J0ZWQ6ICcrbGF5ZXIudHlwZSsnLCBzaG91bGQgYmUgJyt0aGlzLnN1cHBvcnRlZExheWVycyk7XG4gICAgICAgIHRoaXMubGF5ZXJzLnB1c2gobGF5ZXIpO1xuXG4gICAgICAgIGxldCBkcyA9IGxheWVyLmdldERhdGFTb3VyY2VzSWRzKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9IGRzW2ldO1xuICAgICAgICAgICAvLyB0aGlzLnNldERhdGEoZGF0YVNvdXJjZUlkLCBbbGF5ZXIuZ2V0UHJvcHMoKV0pO1xuICAgICAgICAgICAgLy8gb2JzZXJ2ZXMgdGhlIGRhdGEgY29tZSBpblxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKERBVEFTT1VSQ0VfREFUQV9UT1BJQytkYXRhU291cmNlSWQpO1xuICAgICAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlID09PSBFdmVudFR5cGUuU1RBVFVTICYmIGV2ZW50LmRhdGEuc3RhdHVzID09PSBTdGF0dXMuQ0xPU0VEX0VSUk9SKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEudHlwZSA9PT0gRXZlbnRUeXBlLkRBVEEpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gdGhlIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGF5ZXIuc2V0RGF0YShkYXRhU291cmNlSWQsIGV2ZW50LmRhdGEudmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgdHJhbnNmb3JtZWQgZGF0YSB0byB0aGUgdmlld1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGF0LnNldERhdGEoZGF0YVNvdXJjZUlkLCBsYXllci5nZXRQcm9wcygpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZSBhcyBsYXN0IHJlY29yZFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RSZWNbZGF0YVNvdXJjZUlkXSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgdGltZUJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChEQVRBU09VUkNFX1RJTUVfVE9QSUMrZGF0YVNvdXJjZUlkKTtcbiAgICAgICAgICAgIHRpbWVCcm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHNraXAgZGF0YSByZXNldCBldmVudHMgZm9yIG5vd1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUgPT09IEV2ZW50VHlwZS5USU1FX0NIQU5HRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXNldCgpOyAvLyBvbiB0aW1lIGNoYW5nZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWxzLnB1c2goYnJvYWRjYXN0Q2hhbm5lbCk7XG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWxzLnB1c2godGltZUJyb2FkY2FzdENoYW5uZWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIExheWVyIGZyb20gdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtMYXllcn0gbGF5ZXIgLSBUaGUgbGF5ZXIgb2JqZWN0XG4gICAgICovXG4gICAgcmVtb3ZlQWxsRnJvbUxheWVyKGxheWVyKSB7XG4gICAgICAgIGlmKHRoaXMubGF5ZXJzLmluY2x1ZGVzKGxheWVyKSkge1xuICAgICAgICAgICAgLy8gMSkgcmVtb3ZlIGZyb20gU1RZTEVSIGZuXG4gICAgICAgICAgICBmb3IobGV0IGRzIGluIGxheWVyLmRhdGFTb3VyY2VzVG9Gbikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RSZWNbZHNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGF5ZXIucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHZpZXcgaXRlbSBmcm9tIHRoZSB2aWV3LlxuICAgICAqL1xuICAgIHJlbW92ZUFsbEZyb21MYXllcnMoKSB7XG4gICAgICAgIGZvcihsZXQgbGF5ZXIgb2YgdGhpcy5sYXllcnMpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsRnJvbUxheWVyKGxheWVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxpc3Qgb2YgdGhlIGRhdGFTb3VyY2UgaWRzIGNvbnRhaW5lZCBpbnRvIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge1N0cmluZ1tdfSBUaGUgbGlzdCBvZiBkYXRhU291cmNlIGlkc1xuICAgICAqL1xuICAgIGdldERhdGFTb3VyY2VzSWQoKSB7XG4gICAgICAgIGxldCByZXMgPSBbXTtcblxuICAgICAgICAvLyBjaGVjayBmb3IgbGF5ZXJzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsYXllciA9IHRoaXMubGF5ZXJzW2ldO1xuICAgICAgICAgICAgcmVzID0gcmVzLmNvbmNhdChsYXllci5nZXREYXRhU291cmNlc0lkcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgZm9yIHJlc2V0dGluZyB0aGUgdmlldy5cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxGcm9tTGF5ZXJzKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBWaWV3O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n')},,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/Constants.js\nvar Constants = __webpack_require__(2);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/worker/DataSource.worker.js\nvar DataSource_worker = __webpack_require__(20);\nvar DataSource_worker_default = /*#__PURE__*/__webpack_require__.n(DataSource_worker);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/Mode.js\nvar Mode = __webpack_require__(3);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/DataSource.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n/**\n * The DataSource is the abstract class used to create different datasources.\n *\n */\n\nclass DataSource_datasource_DataSource {\n  constructor(name, properties) {\n    this.id = "DataSource-" + Object(Utils["m" /* randomUUID */])();\n    this.name = name;\n    this.properties = properties;\n    this.eventSubscriptionMap = {};\n    this.init = undefined;\n    this.messagesMap = {};\n    this.mode = Mode["a" /* Mode */].REAL_TIME;\n\n    if (Object(Utils["k" /* isDefined */])(properties.mode)) {\n      this.mode = properties.mode;\n    }\n  }\n  /**\n   * Gets the datasource id.\n   * @return {String} the datasource id\n   */\n\n\n  getId() {\n    return this.id;\n  }\n  /**\n   * Gets the datasource name.\n   * @return {String} the datasource name\n   */\n\n\n  getName() {\n    return this.name;\n  }\n\n  terminate() {\n    if (this.dataSourceWorker !== null) {\n      this.dataSourceWorker.terminate();\n    }\n  }\n\n  getTopicId() {\n    return Constants["a" /* DATASOURCE_DATA_TOPIC */] + this.id;\n  }\n\n  getVersion() {\n    return 0;\n  }\n\n  subscribe(fn, eventTypes) {\n    // associate function to eventType\n    for (let i = 0; i < eventTypes.length; i++) {\n      if (!(eventTypes[i] in this.eventSubscriptionMap)) {\n        this.eventSubscriptionMap[eventTypes[i]] = [];\n      }\n\n      this.eventSubscriptionMap[eventTypes[i]].push(fn);\n    }\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n\n  async createWorker(properties) {\n    return new DataSource_worker_default.a();\n  }\n  /**\n   * Update properties\n   * @param {String} name - the datasource name\n   * @param {Object} properties - the datasource properties\n   * @param {Number} properties.bufferingTime - defines the time during the data has to be buffered\n   * @param {Number} properties.timeOut - defines the limit time before data has to be skipped\n   * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}\n   * @param {String} properties.endpointUrl the endpoint url\n   * @param {String} properties.service the service\n   * @param {Number} properties.responseFormat the response format (e.g video/mp4)\n   * @param {Number} properties.reconnectTimeout - the timeout before reconnecting\n   */\n\n\n  async updateProperties(properties) {\n    this.properties = { ...this.properties,\n      ...properties\n    };\n    return new Promise(resolve => {\n      this.postMessage({\n        message: \'update-properties\',\n        data: properties\n      }, resolve);\n    });\n  }\n  /**\n   * Connect the dataSource then the protocol will be opened as well.\n   */\n\n\n  async connect() {\n    await this.checkInit();\n    await this.doConnect();\n  }\n\n  async initDataSource() {\n    return new Promise(async (resolve, reject) => {\n      this.dataSourceWorker = await this.createWorker(this.properties);\n      this.handleWorkerMessage();\n      this.postMessage({\n        message: \'init\',\n        id: this.id,\n        properties: this.properties,\n        topics: {\n          data: this.getTopicId()\n        }\n      }, async message => {\n        // listen for Events to callback to subscriptions\n        const datasourceBroadcastChannel = new BroadcastChannel(this.getTopicId());\n\n        datasourceBroadcastChannel.onmessage = async message => {\n          await this.handleMessage(message);\n        };\n\n        resolve(message);\n      });\n    });\n  }\n\n  async handleMessage(message) {\n    const type = message.data.type;\n\n    if (type in this.eventSubscriptionMap) {\n      for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n        this.eventSubscriptionMap[type][i](message.data);\n      }\n    }\n  }\n\n  async checkInit() {\n    return new Promise(async (resolve, reject) => {\n      if (!Object(Utils["k" /* isDefined */])(this.init)) {\n        this.init = this.initDataSource();\n      }\n\n      await this.init;\n      resolve();\n    });\n  }\n\n  async doConnect() {\n    return new Promise(async resolve => {\n      this.postMessage({\n        message: \'connect\'\n      }, resolve);\n    });\n  }\n\n  async isConnected() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      this.postMessage({\n        message: \'is-connected\'\n      }, resolve);\n    });\n  }\n  /**\n   * Disconnect the dataSource then the protocol will be closed as well.\n   */\n\n\n  async disconnect() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      this.postMessage({\n        message: \'disconnect\'\n      }, resolve);\n    });\n  }\n\n  postMessage(props, Fn) {\n    const messageId = Object(Utils["m" /* randomUUID */])();\n    this.dataSourceWorker.postMessage({ ...props,\n      messageId: messageId\n    });\n\n    if (Object(Utils["k" /* isDefined */])(Fn)) {\n      this.messagesMap[messageId] = Fn;\n    }\n  }\n\n  handleWorkerMessage() {\n    this.dataSourceWorker.onmessage = event => {\n      const id = event.data.messageId;\n\n      if (id in this.messagesMap) {\n        this.messagesMap[id](event.data.data);\n        delete this.messagesMap[id];\n      }\n    };\n  }\n\n  async onDisconnect() {}\n\n  reset() {}\n\n}\n\n/* harmony default export */ var DataSource_datasource = (DataSource_datasource_DataSource);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/TimeSeries.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n/**\n * The DataSource is the abstract class used to create different datasources.\n *\n */\n\nclass TimeSeries_datasource_TimeSeriesDatasource extends DataSource_datasource {\n  constructor(name, properties) {\n    super(name, properties);\n    Object(Utils["c" /* assertDefined */])(properties, \'Some properties must be defined\');\n    Object(Utils["c" /* assertDefined */])(properties.startTime, \'startTime must must be defined\');\n    Object(Utils["c" /* assertDefined */])(properties.endTime, \'startTime must must be defined\');\n    this.dataSynchronizer = undefined;\n  }\n\n  getTimeTopicId() {\n    return Constants["b" /* DATASOURCE_TIME_TOPIC */] + this.id;\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getStartTime() {\n    return this.properties.startTime;\n  }\n  /**\n   * Gets the mode\n   * @returns {Mode} - Datasource mode\n   */\n\n\n  getMode() {\n    return this.properties.mode;\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getEndTime() {\n    return this.properties.endTime;\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getMinTime() {\n    return this.properties.minTime;\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getMaxTime() {\n    return this.properties.maxTime;\n  }\n  /**\n   * Sets the min time\n   */\n\n\n  setMinTime(time) {\n    this.properties.minTime = time;\n  }\n  /**\n   * Sets the max time\n   */\n\n\n  setMaxTime(time) {\n    this.properties.maxTime = time;\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getReplaySpeed() {\n    return this.properties.replaySpeed;\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  setReplaySpeed(replaySpeed) {\n    this.properties.replaySpeed = replaySpeed;\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n\n  async setDataSynchronizer(dataSynchronizer) {\n    return new Promise(async (resolve, reject) => {\n      await this.checkInit();\n      const topic = Constants["c" /* DATA_SYNCHRONIZER_TOPIC */] + dataSynchronizer.id;\n      this.dataSynchronizer = dataSynchronizer;\n      this.postMessage({\n        message: \'topics\',\n        topics: {\n          data: topic,\n          time: this.getTimeTopicId(),\n          sync: dataSynchronizer.getTimeTopicId()\n        }\n      }, resolve);\n    });\n  }\n  /**\n   * Disconnect the dataSource then the protocol will be closed as well.\n   */\n\n\n  async disconnect() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      this.postMessage({\n        message: \'disconnect\'\n      }, resolve);\n    });\n  }\n\n  async doConnect() {\n    return new Promise(async resolve => {\n      let startTime = this.properties.startTime;\n\n      if (Object(Utils["k" /* isDefined */])(this.dataSynchronizer)) {\n        let st = (await this.dataSynchronizer.getCurrentTime()).data; // add 1 sec threshold\n\n        if (Object(Utils["k" /* isDefined */])(st)) {\n          startTime = new Date(st).toISOString();\n        }\n      }\n\n      this.postMessage({\n        message: \'connect\',\n        startTime: startTime\n      }, resolve);\n    });\n  }\n  /**\n   * Inits the datasource with the constructor properties.\n   * @protected\n   * @param properties\n   */\n\n\n  async initDataSource(properties) {\n    await super.initDataSource(properties);\n    return new Promise(async (resolve, reject) => {\n      this.postMessage({\n        message: \'topics\',\n        topics: {\n          data: this.getTopicId(),\n          time: this.getTimeTopicId()\n        }\n      }, async () => {\n        // listen for Events to callback to subscriptions\n        const datasourceBroadcastChannel = new BroadcastChannel(this.getTimeTopicId());\n\n        datasourceBroadcastChannel.onmessage = async message => {\n          await this.handleTimeMessage(message);\n        };\n\n        resolve();\n      });\n    });\n  }\n\n  async handleTimeMessage(message) {\n    const type = message.data.type;\n\n    if (type in this.eventSubscriptionMap) {\n      for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n        this.eventSubscriptionMap[type][i](message.data);\n      }\n    }\n  }\n  /**\n   * Sets the data source time range\n   * @param {String} startTime - the startTime (in date ISO)\n   * @param {String} endTime - the startTime (in date ISO)\n   * @param {Number} replaySpeed - the replay speed\n   * @param {boolean} reconnect - reconnect if was connected\n   * @param {Mode} mode - default dataSource mode\n   */\n\n\n  async setTimeRange(startTime = this.getStartTime(), endTime = this.getEndTime(), replaySpeed = this.getReplaySpeed(), reconnect = false, mode = this.getMode()) {\n    return this.updateProperties({\n      startTime: startTime,\n      endTime: endTime,\n      replaySpeed: replaySpeed,\n      reconnect: reconnect,\n      mode: mode\n    });\n  }\n\n}\n\n/* harmony default export */ var TimeSeries_datasource = (TimeSeries_datasource_TimeSeriesDatasource);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/sos/SosGetResult.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\nclass SosGetResult_datasource_SosGetResult extends TimeSeries_datasource {\n  /**\n   * @param {String} name - the datasource name\n   * @param {Object} properties - the datasource properties\n   * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}, \'http\', \'ws\', \'mqtt\', \'file\', \'topic\'\n   * @param {String} properties.endpointUrl the endpoint url, this property is ignored in case of using \'mqtt\' protocol, the properties.mqttOpts.endpointUrl will be used instead\n   * @param {String} properties.collection the collection, /procedures, /fois, /observations, /tasks, /datastreams/4778/obs\n   * @param {Boolean} properties.tls - defines if use secure TLS connection\n   * @param {Number} [properties.responseFormat=application/om+json] the response format (e.g application/om+json)\n   * @param {String[]} [properties.prefetchBatchSize=1000000] Number of elements to prefetch at a time\n   * @param {String[]} [properties.prefetchBatchDuration=10000] Duration before prefetching the next batch. N.b the next batch will be prefetched at 80% of this duration\n   */\n  constructor(name, properties) {\n    super(name, {\n      protocol: \'ws\',\n      // default for streaming\n      service: "SOS",\n      timeShift: 0,\n      reconnectTimeout: 1000 * 5,\n      // default if not defined into properties\n      reconnectRetry: 10,\n      tls: false,\n      type: \'SosGetResult\',\n      mode: Mode["a" /* Mode */].REAL_TIME,\n      prefetchBatchSize: 5000,\n      prefetchBatchDuration: 5000,\n      ...properties\n    });\n  }\n\n}\n\n/* harmony default export */ var SosGetResult_datasource = __webpack_exports__["a"] = (SosGetResult_datasource_SosGetResult);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9kYXRhc291cmNlL0RhdGFTb3VyY2UuZGF0YXNvdXJjZS5qcz80MjNkIiwid2VicGFjazovLy8vaG9tZS9uZXZyby9Qcm9ncy9wcm9ncy1sb2NhbC9naXQtcmVwby9PU0gvb3NoLWpzL3NvdXJjZS9jb3JlL2RhdGFzb3VyY2UvVGltZVNlcmllcy5kYXRhc291cmNlLmpzPzE4NDkiLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvZGF0YXNvdXJjZS9zb3MvU29zR2V0UmVzdWx0LmRhdGFzb3VyY2UuanM/MGJkYSJdLCJuYW1lcyI6WyJEYXRhU291cmNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwicHJvcGVydGllcyIsImlkIiwicmFuZG9tVVVJRCIsImV2ZW50U3Vic2NyaXB0aW9uTWFwIiwiaW5pdCIsInVuZGVmaW5lZCIsIm1lc3NhZ2VzTWFwIiwibW9kZSIsIk1vZGUiLCJSRUFMX1RJTUUiLCJpc0RlZmluZWQiLCJnZXRJZCIsImdldE5hbWUiLCJ0ZXJtaW5hdGUiLCJkYXRhU291cmNlV29ya2VyIiwiZ2V0VG9waWNJZCIsIkRBVEFTT1VSQ0VfREFUQV9UT1BJQyIsImdldFZlcnNpb24iLCJzdWJzY3JpYmUiLCJmbiIsImV2ZW50VHlwZXMiLCJpIiwibGVuZ3RoIiwicHVzaCIsImNyZWF0ZVdvcmtlciIsIkRhdGFTb3VyY2VXb3JrZXIiLCJ1cGRhdGVQcm9wZXJ0aWVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwb3N0TWVzc2FnZSIsIm1lc3NhZ2UiLCJkYXRhIiwiY29ubmVjdCIsImNoZWNrSW5pdCIsImRvQ29ubmVjdCIsImluaXREYXRhU291cmNlIiwicmVqZWN0IiwiaGFuZGxlV29ya2VyTWVzc2FnZSIsInRvcGljcyIsImRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsIiwiQnJvYWRjYXN0Q2hhbm5lbCIsIm9ubWVzc2FnZSIsImhhbmRsZU1lc3NhZ2UiLCJ0eXBlIiwiaXNDb25uZWN0ZWQiLCJkaXNjb25uZWN0IiwicHJvcHMiLCJGbiIsIm1lc3NhZ2VJZCIsImV2ZW50Iiwib25EaXNjb25uZWN0IiwicmVzZXQiLCJUaW1lU2VyaWVzRGF0YXNvdXJjZSIsImFzc2VydERlZmluZWQiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiZGF0YVN5bmNocm9uaXplciIsImdldFRpbWVUb3BpY0lkIiwiREFUQVNPVVJDRV9USU1FX1RPUElDIiwiZ2V0U3RhcnRUaW1lIiwiZ2V0TW9kZSIsImdldEVuZFRpbWUiLCJnZXRNaW5UaW1lIiwibWluVGltZSIsImdldE1heFRpbWUiLCJtYXhUaW1lIiwic2V0TWluVGltZSIsInRpbWUiLCJzZXRNYXhUaW1lIiwiZ2V0UmVwbGF5U3BlZWQiLCJyZXBsYXlTcGVlZCIsInNldFJlcGxheVNwZWVkIiwic2V0RGF0YVN5bmNocm9uaXplciIsInRvcGljIiwiREFUQV9TWU5DSFJPTklaRVJfVE9QSUMiLCJzeW5jIiwic3QiLCJnZXRDdXJyZW50VGltZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImhhbmRsZVRpbWVNZXNzYWdlIiwic2V0VGltZVJhbmdlIiwicmVjb25uZWN0IiwiU29zR2V0UmVzdWx0IiwicHJvdG9jb2wiLCJzZXJ2aWNlIiwidGltZVNoaWZ0IiwicmVjb25uZWN0VGltZW91dCIsInJlY29ubmVjdFJldHJ5IiwidGxzIiwicHJlZmV0Y2hCYXRjaFNpemUiLCJwcmVmZXRjaEJhdGNoRHVyYXRpb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsTUFBTUEsZ0NBQU4sQ0FBaUI7RUFD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QUwsQ0FBc0I7TUFDekI0QixTQUFTLEVBQUVBLFNBRGM7TUFFekJDLE9BQU8sRUFBRUEsT0FGZ0I7TUFHekJlLFdBQVcsRUFBRUEsV0FIWTtNQUl6QlksU0FBUyxFQUFHQSxTQUphO01BS3pCM0UsSUFBSSxFQUFFQTtJQUxtQixDQUF0QixDQUFQO0VBT0g7O0FBdEx5Qzs7QUF5TC9CNkMsb0dBQWYsRTs7QUNqTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7QUFFQSxNQUFNK0Isb0NBQU4sU0FBMkIvQixxQkFBM0IsQ0FBZ0Q7RUFDNUM7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJdEQsV0FBVyxDQUFDQyxJQUFELEVBQU9DLFVBQVAsRUFBbUI7SUFDMUIsTUFBTUQsSUFBTixFQUFZO01BQ1JxRixRQUFRLEVBQUUsSUFERjtNQUNRO01BQ2hCQyxPQUFPLEVBQUUsS0FGRDtNQUdSQyxTQUFTLEVBQUMsQ0FIRjtNQUlSQyxnQkFBZ0IsRUFBRSxPQUFPLENBSmpCO01BSW9CO01BQzVCQyxjQUFjLEVBQUUsRUFMUjtNQU1SQyxHQUFHLEVBQUUsS0FORztNQU9SOUMsSUFBSSxFQUFFLGNBUEU7TUFRUnBDLElBQUksRUFBRUMsb0JBQUksQ0FBQ0MsU0FSSDtNQVNSaUYsaUJBQWlCLEVBQUUsSUFUWDtNQVVSQyxxQkFBcUIsRUFBRSxJQVZmO01BV1IsR0FBRzNGO0lBWEssQ0FBWjtFQWFIOztBQTFCMkM7O0FBNkJqQ21GLDJIQUFmIiwiZmlsZSI6IjE2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMiBHZW9yb2JvdGl4IEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtpc0RlZmluZWQsIHJhbmRvbVVVSUR9IGZyb20gJy4uL3V0aWxzL1V0aWxzLmpzJztcbmltcG9ydCB7REFUQVNPVVJDRV9EQVRBX1RPUElDfSBmcm9tIFwiLi4vQ29uc3RhbnRzXCI7XG5pbXBvcnQgRGF0YVNvdXJjZVdvcmtlciBmcm9tICcuL3dvcmtlci9EYXRhU291cmNlLndvcmtlcic7XG5pbXBvcnQge01vZGV9IGZyb20gXCIuL01vZGVcIjtcblxuLyoqXG4gKiBUaGUgRGF0YVNvdXJjZSBpcyB0aGUgYWJzdHJhY3QgY2xhc3MgdXNlZCB0byBjcmVhdGUgZGlmZmVyZW50IGRhdGFzb3VyY2VzLlxuICpcbiAqL1xuY2xhc3MgRGF0YVNvdXJjZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgcHJvcGVydGllcykge1xuICAgICAgICB0aGlzLmlkID0gXCJEYXRhU291cmNlLVwiICsgcmFuZG9tVVVJRCgpO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwID0ge307XG4gICAgICAgIHRoaXMuaW5pdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5tZXNzYWdlc01hcCA9IHt9O1xuICAgICAgICB0aGlzLm1vZGUgPSBNb2RlLlJFQUxfVElNRTtcblxuICAgICAgICBpZihpc0RlZmluZWQocHJvcGVydGllcy5tb2RlKSkge1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gcHJvcGVydGllcy5tb2RlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGF0YXNvdXJjZSBpZC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBkYXRhc291cmNlIGlkXG4gICAgICovXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGRhdGFzb3VyY2UgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBkYXRhc291cmNlIG5hbWVcbiAgICAgKi9cbiAgICBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgaWYodGhpcy5kYXRhU291cmNlV29ya2VyICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2VXb3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gREFUQVNPVVJDRV9EQVRBX1RPUElDICsgdGhpcy5pZDtcbiAgICB9XG5cbiAgICBnZXRWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBzdWJzY3JpYmUoZm4sIGV2ZW50VHlwZXMpIHtcbiAgICAgICAgLy8gYXNzb2NpYXRlIGZ1bmN0aW9uIHRvIGV2ZW50VHlwZVxuICAgICAgICBmb3IobGV0IGk9MDtpIDwgZXZlbnRUeXBlcy5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICBpZiAoIShldmVudFR5cGVzW2ldIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFtldmVudFR5cGVzW2ldXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFtldmVudFR5cGVzW2ldXS5wdXNoKGZuKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLS0tLS0tLS0tLS0gQVNZTkNIUk9OT1VTIEZVTkNUSU9OUyAtLS0tLS0tLS0tLS0tLS0tLS8vXG4gICAgYXN5bmMgY3JlYXRlV29ya2VyKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhU291cmNlV29ya2VyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIHRoZSBkYXRhc291cmNlIG5hbWVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIHRoZSBkYXRhc291cmNlIHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy5idWZmZXJpbmdUaW1lIC0gZGVmaW5lcyB0aGUgdGltZSBkdXJpbmcgdGhlIGRhdGEgaGFzIHRvIGJlIGJ1ZmZlcmVkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb3BlcnRpZXMudGltZU91dCAtIGRlZmluZXMgdGhlIGxpbWl0IHRpbWUgYmVmb3JlIGRhdGEgaGFzIHRvIGJlIHNraXBwZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5wcm90b2NvbCAtIGRlZmluZXMgdGhlIHByb3RvY29sIG9mIHRoZSBkYXRhc291cmNlLiBAc2VlIHtAbGluayBEYXRhQ29ubmVjdG9yfVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLmVuZHBvaW50VXJsIHRoZSBlbmRwb2ludCB1cmxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5zZXJ2aWNlIHRoZSBzZXJ2aWNlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb3BlcnRpZXMucmVzcG9uc2VGb3JtYXQgdGhlIHJlc3BvbnNlIGZvcm1hdCAoZS5nIHZpZGVvL21wNClcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy5yZWNvbm5lY3RUaW1lb3V0IC0gdGhlIHRpbWVvdXQgYmVmb3JlIHJlY29ubmVjdGluZ1xuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAuLi5wcm9wZXJ0aWVzXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICd1cGRhdGUtcHJvcGVydGllcycsXG4gICAgICAgICAgICAgICAgZGF0YTogcHJvcGVydGllc1xuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdGhlIGRhdGFTb3VyY2UgdGhlbiB0aGUgcHJvdG9jb2wgd2lsbCBiZSBvcGVuZWQgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KCkge1xuICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmRvQ29ubmVjdCgpO1xuICAgIH1cblxuICAgICBhc3luYyBpbml0RGF0YVNvdXJjZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZVdvcmtlciA9IGF3YWl0IHRoaXMuY3JlYXRlV29ya2VyKHRoaXMucHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVdvcmtlck1lc3NhZ2UoKTtcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbml0JyxcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5pZCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB0aGlzLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgdG9waWNzOiAge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldFRvcGljSWQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGFzeW5jIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuIGZvciBFdmVudHMgdG8gY2FsbGJhY2sgdG8gc3Vic2NyaXB0aW9uc1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwodGhpcy5nZXRUb3BpY0lkKCkpO1xuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgaWYgKHR5cGUgaW4gdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwW3R5cGVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXVtpXShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgY2hlY2tJbml0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYoIWlzRGVmaW5lZCh0aGlzLmluaXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0ID0gdGhpcy5pbml0RGF0YVNvdXJjZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0O1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBkb0Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdjb25uZWN0J1xuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpcy1jb25uZWN0ZWQnXG4gICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCB0aGUgZGF0YVNvdXJjZSB0aGVuIHRoZSBwcm90b2NvbCB3aWxsIGJlIGNsb3NlZCBhcyB3ZWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZGlzY29ubmVjdCdcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwb3N0TWVzc2FnZShwcm9wcywgRm4pIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2VXb3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYoaXNEZWZpbmVkKEZuKSkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc01hcFttZXNzYWdlSWRdID0gRm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVXb3JrZXJNZXNzYWdlKCkge1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2VXb3JrZXIub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGV2ZW50LmRhdGEubWVzc2FnZUlkO1xuICAgICAgICAgICAgaWYoaWQgaW4gdGhpcy5tZXNzYWdlc01hcCl7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc01hcFtpZF0oZXZlbnQuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5tZXNzYWdlc01hcFtpZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgb25EaXNjb25uZWN0KCl7fVxuXG4gICAgcmVzZXQoKSB7fVxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhU291cmNlO1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMiBHZW9yb2JvdGl4IEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQywgREFUQVNPVVJDRV9USU1FX1RPUElDfSBmcm9tIFwiLi4vQ29uc3RhbnRzXCI7XG5pbXBvcnQge2Fzc2VydERlZmluZWQsIGlzRGVmaW5lZH0gZnJvbSBcIi4uL3V0aWxzL1V0aWxzXCI7XG5pbXBvcnQgRGF0YVNvdXJjZSBmcm9tIFwiLi9EYXRhU291cmNlLmRhdGFzb3VyY2VcIjtcblxuLyoqXG4gKiBUaGUgRGF0YVNvdXJjZSBpcyB0aGUgYWJzdHJhY3QgY2xhc3MgdXNlZCB0byBjcmVhdGUgZGlmZmVyZW50IGRhdGFzb3VyY2VzLlxuICpcbiAqL1xuY2xhc3MgVGltZVNlcmllc0RhdGFzb3VyY2UgZXh0ZW5kcyBEYXRhU291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyKG5hbWUsIHByb3BlcnRpZXMpO1xuXG4gICAgICAgIGFzc2VydERlZmluZWQocHJvcGVydGllcywnU29tZSBwcm9wZXJ0aWVzIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgICAgICBhc3NlcnREZWZpbmVkKHByb3BlcnRpZXMuc3RhcnRUaW1lLCdzdGFydFRpbWUgbXVzdCBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgYXNzZXJ0RGVmaW5lZChwcm9wZXJ0aWVzLmVuZFRpbWUsJ3N0YXJ0VGltZSBtdXN0IG11c3QgYmUgZGVmaW5lZCcpO1xuXG4gICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBnZXRUaW1lVG9waWNJZCgpIHtcbiAgICAgICAgcmV0dXJuIERBVEFTT1VSQ0VfVElNRV9UT1BJQyArIHRoaXMuaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhcnRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBzdGFydFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRTdGFydFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuc3RhcnRUaW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtb2RlXG4gICAgICogQHJldHVybnMge01vZGV9IC0gRGF0YXNvdXJjZSBtb2RlXG4gICAgICovXG4gICAgZ2V0TW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5tb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0RW5kVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5lbmRUaW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXJ0VGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gc3RhcnRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0TWluVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5taW5UaW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRNYXhUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLm1heFRpbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbWluIHRpbWVcbiAgICAgKi9cbiAgICBzZXRNaW5UaW1lKHRpbWUpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLm1pblRpbWUgPSB0aW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIG1heCB0aW1lXG4gICAgICovXG4gICAgc2V0TWF4VGltZSh0aW1lKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5tYXhUaW1lID0gdGltZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0UmVwbGF5U3BlZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMucmVwbGF5U3BlZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kVGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIHNldFJlcGxheVNwZWVkKHJlcGxheVNwZWVkKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5yZXBsYXlTcGVlZCA9IHJlcGxheVNwZWVkO1xuICAgIH1cbiAgICAvLy0tLS0tLS0tLS0tIEFTWU5DSFJPTk9VUyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0vL1xuXG4gICAgYXN5bmMgc2V0RGF0YVN5bmNocm9uaXplcihkYXRhU3luY2hyb25pemVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuICAgICAgICAgICAgY29uc3QgdG9waWMgPSBEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyArIGRhdGFTeW5jaHJvbml6ZXIuaWQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFTeW5jaHJvbml6ZXIgPSBkYXRhU3luY2hyb25pemVyO1xuICAgICAgICAgICAgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ3RvcGljcycsXG4gICAgICAgICAgICAgICAgdG9waWNzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvcGljLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdldFRpbWVUb3BpY0lkKCksXG4gICAgICAgICAgICAgICAgICAgIHN5bmM6IGRhdGFTeW5jaHJvbml6ZXIuZ2V0VGltZVRvcGljSWQoKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCB0aGUgZGF0YVNvdXJjZSB0aGVuIHRoZSBwcm90b2NvbCB3aWxsIGJlIGNsb3NlZCBhcyB3ZWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZGlzY29ubmVjdCdcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBkb0Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGxldCBzdGFydFRpbWUgPSB0aGlzLnByb3BlcnRpZXMuc3RhcnRUaW1lO1xuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKHRoaXMuZGF0YVN5bmNocm9uaXplcikpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3QgPSAoYXdhaXQgdGhpcy5kYXRhU3luY2hyb25pemVyLmdldEN1cnJlbnRUaW1lKCkpLmRhdGE7IC8vIGFkZCAxIHNlYyB0aHJlc2hvbGRcbiAgICAgICAgICAgICAgICBpZihpc0RlZmluZWQoc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IG5ldyBEYXRlKHN0KS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdjb25uZWN0JyxcbiAgICAgICAgICAgICAgICBzdGFydFRpbWU6IHN0YXJ0VGltZVxuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRzIHRoZSBkYXRhc291cmNlIHdpdGggdGhlIGNvbnN0cnVjdG9yIHByb3BlcnRpZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYXN5bmMgaW5pdERhdGFTb3VyY2UocHJvcGVydGllcykge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0RGF0YVNvdXJjZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICd0b3BpY3MnLFxuICAgICAgICAgICAgICAgIHRvcGljczogIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRUb3BpY0lkKCksXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2V0VGltZVRvcGljSWQoKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuIGZvciBFdmVudHMgdG8gY2FsbGJhY2sgdG8gc3Vic2NyaXB0aW9uc1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwodGhpcy5nZXRUaW1lVG9waWNJZCgpKTtcbiAgICAgICAgICAgICAgICBkYXRhc291cmNlQnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBhc3luYyAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVUaW1lTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVUaW1lTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgaWYgKHR5cGUgaW4gdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwW3R5cGVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXVtpXShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGF0YSBzb3VyY2UgdGltZSByYW5nZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydFRpbWUgLSB0aGUgc3RhcnRUaW1lIChpbiBkYXRlIElTTylcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5kVGltZSAtIHRoZSBzdGFydFRpbWUgKGluIGRhdGUgSVNPKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByZXBsYXlTcGVlZCAtIHRoZSByZXBsYXkgc3BlZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlY29ubmVjdCAtIHJlY29ubmVjdCBpZiB3YXMgY29ubmVjdGVkXG4gICAgICogQHBhcmFtIHtNb2RlfSBtb2RlIC0gZGVmYXVsdCBkYXRhU291cmNlIG1vZGVcbiAgICAgKi9cbiAgICBhc3luYyBzZXRUaW1lUmFuZ2Uoc3RhcnRUaW1lPSB0aGlzLmdldFN0YXJ0VGltZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lPSB0aGlzLmdldEVuZFRpbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3BlZWQ9IHRoaXMuZ2V0UmVwbGF5U3BlZWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVjb25uZWN0PSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgbW9kZT0gdGhpcy5nZXRNb2RlKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlUHJvcGVydGllcyh7XG4gICAgICAgICAgICBzdGFydFRpbWU6IHN0YXJ0VGltZSxcbiAgICAgICAgICAgIGVuZFRpbWU6IGVuZFRpbWUsXG4gICAgICAgICAgICByZXBsYXlTcGVlZDogcmVwbGF5U3BlZWQsXG4gICAgICAgICAgICByZWNvbm5lY3QgOiByZWNvbm5lY3QsXG4gICAgICAgICAgICBtb2RlOiBtb2RlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGltZVNlcmllc0RhdGFzb3VyY2U7XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIyIEdlb3JvYm90aXggSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cbmltcG9ydCBUaW1lU2VyaWVzRGF0YXNvdXJjZSBmcm9tIFwiLi4vVGltZVNlcmllcy5kYXRhc291cmNlXCI7XG5pbXBvcnQge01vZGV9IGZyb20gXCIuLi9Nb2RlXCI7XG5cbmNsYXNzIFNvc0dldFJlc3VsdCBleHRlbmRzIFRpbWVTZXJpZXNEYXRhc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIHRoZSBkYXRhc291cmNlIG5hbWVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIHRoZSBkYXRhc291cmNlIHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5wcm90b2NvbCAtIGRlZmluZXMgdGhlIHByb3RvY29sIG9mIHRoZSBkYXRhc291cmNlLiBAc2VlIHtAbGluayBEYXRhQ29ubmVjdG9yfSwgJ2h0dHAnLCAnd3MnLCAnbXF0dCcsICdmaWxlJywgJ3RvcGljJ1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLmVuZHBvaW50VXJsIHRoZSBlbmRwb2ludCB1cmwsIHRoaXMgcHJvcGVydHkgaXMgaWdub3JlZCBpbiBjYXNlIG9mIHVzaW5nICdtcXR0JyBwcm90b2NvbCwgdGhlIHByb3BlcnRpZXMubXF0dE9wdHMuZW5kcG9pbnRVcmwgd2lsbCBiZSB1c2VkIGluc3RlYWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5jb2xsZWN0aW9uIHRoZSBjb2xsZWN0aW9uLCAvcHJvY2VkdXJlcywgL2ZvaXMsIC9vYnNlcnZhdGlvbnMsIC90YXNrcywgL2RhdGFzdHJlYW1zLzQ3Nzgvb2JzXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBwcm9wZXJ0aWVzLnRscyAtIGRlZmluZXMgaWYgdXNlIHNlY3VyZSBUTFMgY29ubmVjdGlvblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy5yZXNwb25zZUZvcm1hdD1hcHBsaWNhdGlvbi9vbStqc29uXSB0aGUgcmVzcG9uc2UgZm9ybWF0IChlLmcgYXBwbGljYXRpb24vb20ranNvbilcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBbcHJvcGVydGllcy5wcmVmZXRjaEJhdGNoU2l6ZT0xMDAwMDAwXSBOdW1iZXIgb2YgZWxlbWVudHMgdG8gcHJlZmV0Y2ggYXQgYSB0aW1lXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXX0gW3Byb3BlcnRpZXMucHJlZmV0Y2hCYXRjaER1cmF0aW9uPTEwMDAwXSBEdXJhdGlvbiBiZWZvcmUgcHJlZmV0Y2hpbmcgdGhlIG5leHQgYmF0Y2guIE4uYiB0aGUgbmV4dCBiYXRjaCB3aWxsIGJlIHByZWZldGNoZWQgYXQgODAlIG9mIHRoaXMgZHVyYXRpb25cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyKG5hbWUsIHtcbiAgICAgICAgICAgIHByb3RvY29sOiAnd3MnLCAvLyBkZWZhdWx0IGZvciBzdHJlYW1pbmdcbiAgICAgICAgICAgIHNlcnZpY2U6IFwiU09TXCIsXG4gICAgICAgICAgICB0aW1lU2hpZnQ6MCxcbiAgICAgICAgICAgIHJlY29ubmVjdFRpbWVvdXQ6IDEwMDAgKiA1LCAvLyBkZWZhdWx0IGlmIG5vdCBkZWZpbmVkIGludG8gcHJvcGVydGllc1xuICAgICAgICAgICAgcmVjb25uZWN0UmV0cnk6IDEwLFxuICAgICAgICAgICAgdGxzOiBmYWxzZSxcbiAgICAgICAgICAgIHR5cGU6ICdTb3NHZXRSZXN1bHQnLFxuICAgICAgICAgICAgbW9kZTogTW9kZS5SRUFMX1RJTUUsXG4gICAgICAgICAgICBwcmVmZXRjaEJhdGNoU2l6ZTogNTAwMCxcbiAgICAgICAgICAgIHByZWZldGNoQmF0Y2hEdXJhdGlvbjogNTAwMCxcbiAgICAgICAgICAgIC4uLnByb3BlcnRpZXNcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTb3NHZXRSZXN1bHQ7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _Layer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12);\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2017 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends Layer\n * @example\n *\n * import PointMarkerLayer from \'core/ui/layer/PointMarkerLayer.js\';\n *\n * let pointMarkerLayer = new PointMarkerLayer({\n        location : {\n            x : 1.42376557,\n            y : 43.61758626,\n            z : 100\n        },\n        getLocation : {\n            dataSourceIds : [androidPhoneGpsDataSource.getId()],\n            handler : function(rec) {\n                return {\n                    x : rec.lon,\n                    y : rec.lat,\n                    z : rec.alt\n                };\n            }\n        },\n        getOrientation : {\n            dataSourceIds : [androidPhoneOrientationDataSource.getId()],\n            handler : function(rec) {\n                return {\n                    heading : rec.heading\n                };\n            }\n        },\n        icon : \'images/cameralook.png\',\n        getIcon : {\n            dataSourceIds: [androidPhoneGpsDataSource.getId()],\n            handler : function(rec,timeStamp,options) {\n                if(options.selected) {\n                    return \'images/cameralook-selected.png\'\n                } else {\n                    return \'images/cameralook.png\';\n                };\n            }\n        }\n    });\n */\n\nclass PointMarkerLayer extends _Layer_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"] {\n  /**\n   * Create the PointMarker\n   * @param {Object} properties\n   * @param {Number[]} properties.location - [x,y,z]\n   * @param {Number} [properties.orientation=0] -\n   * @param {String} properties.icon -\n   * @param {String} [properties.iconScale=1] - the icon scale size\n   * @param {String} [properties.iconColor="#000000"] - the icon color\n   * @param {Number[]} [properties.iconAnchor=[16,16]] -\n   * @param {Number[]} [properties.iconSize=[16,16]] -\n   * @param {Number} [properties.iconOpacity=0.75] - icon opacity\n   * @param {String} [properties.label=""] - the label to display\n   * @param {String} [properties.labelColor="#000000"] - color\n   * @param {String} [properties.labelOutlineColor=undefined] - color\n   * @param {String} [properties.labelBackgroundColor=undefined] -  color\n   * @param {Number} [properties.labelSize=16] -\n   * @param {Number} [properties.labelScale=1.0] - label scale\n   * @param {Number[]} [properties.labelOffset=[0,0]] -\n   * @param {Number} [properties.zIndex=0] - z-ordering of markers\n   * @param {Number} [properties.allowBillboardRotation=true] - allow billboard rotation\n   * @param {Function} [properties.getLocation] -\n   * @param {Function} [properties.getDescription] -\n   * @param {Function} [properties.getOrientation] -\n   * @param {Function} [properties.getIcon] -\n   * @param {Function} [properties.getIconColor] -\n   * @param {Function} [properties.getIconScale] -\n   * @param {Function} [properties.getLabel] -\n   * @param {Function} [properties.getLabelColor] -\n   * @param {Function} [properties.getLabelSize] -\n   * @param {Function} [properties.getZindex] - z-ordering of markers\n   * @param {Function} [properties.onLeftClick] - trigger onLeftClick marker event\n   * @param {Function} [properties.onRightClick] - trigger onRightClick marker event\n   * @param {Function} [properties.onHover] - trigger onHover marker event\n   * @param {Function} [properties.getMarkerId] - map an id to a unique marker\n   * @param {Number} [properties.zoomLevel=15] - Set the default zoom level\n   * @param {Boolean} [properties.defaultToTerrainElevation=false] - Set the default to terrain elevation\n   *\n   */\n  constructor(properties) {\n    super(properties);\n    this.type = \'marker\';\n    this.props.location = null;\n    this.props.orientation = {\n      heading: 0\n    };\n    this.props.icon = null;\n    this.props.iconAnchor = [16, 16];\n    this.props.iconSize = [16, 16];\n    this.props.iconScale = 1.0;\n    this.props.iconColor = undefined;\n    this.props.iconOpacity = 0.75;\n    this.props.label = null;\n    this.props.labelColor = undefined;\n    this.props.labelOutlineColor = undefined;\n    this.props.labelBackgroundColor = undefined;\n    this.props.labelSize = 16;\n    this.props.labelScale = 1.0;\n    this.props.labelOffset = [0, 0];\n    this.props.zoomLevel = 15;\n    this.props.color = \'#000000\';\n    this.props.defaultToTerrainElevation = false;\n    this.props.zIndex = 0;\n    this.props.allowBillboardRotation = true;\n    this.props.options = {};\n    this.props.markerId = \'marker\';\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.defaultToTerrainElevation)) {\n      this.props.defaultToTerrainElevation = properties.defaultToTerrainElevation;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.location)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertObject */ "f"])(properties.location, "location");\n      this.props.location = properties.location;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.orientation)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertObject */ "f"])(properties.orientation, "orientation");\n      this.props.orientation = properties.orientation;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.icon)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.icon, "icon");\n      this.props.icon = properties.icon;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.iconAnchor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(properties.iconAnchor, "iconAnchor");\n      this.props.iconAnchor = properties.iconAnchor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.iconSize)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(properties.iconSize, "iconSize");\n      this.props.iconSize = properties.iconSize;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.iconScale)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.iconScale, "iconScale");\n      this.props.iconScale = properties.iconScale;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.iconColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.iconColor, "iconColor");\n      this.props.iconColor = properties.iconColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.iconOpacity)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.iconOpacity, "iconOpacity");\n      this.props.iconOpacity = properties.iconOpacity;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.label)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.label, "label");\n      this.props.label = properties.label;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.labelColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.labelColor, "labelColor");\n      this.props.labelColor = properties.labelColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.labelOutlineColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.labelOutlineColor, "labelOutlineColor");\n      this.props.labelOutlineColor = properties.labelOutlineColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.labelBackgroundColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.labelBackgroundColor, "labelBackgroundColor");\n      this.props.labelBackgroundColor = properties.labelBackgroundColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.labelSize)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.labelSize, "labelSize");\n      this.props.labelSize = properties.labelSize;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.labelScale)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.labelScale, "labelScale");\n      this.props.labelScale = properties.labelScale;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.labelOffset)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(properties.labelOffset, "labelOffset");\n      this.props.labelOffset = properties.labelOffset;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.zoomLevel)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.zoomLevel, "zoomLevel");\n      this.props.zoomLevel = properties.zoomLevel;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.zIndex)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertNumber */ "e"])(properties.zIndex, "zIndex");\n      this.props.zIndex = properties.zIndex;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.allowBillboardRotation)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertBoolean */ "b"])(properties.allowBillboardRotation, "allowBillboardRotation");\n      this.props.allowBillboardRotation = properties.allowBillboardRotation;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "j"])(properties.color)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.color, "color");\n      this.props.color = properties.color;\n    }\n\n    const that = this; // must be first to assign correctly the first location to the right id if it is defined\n\n    if (this.checkFn("getMarkerId")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.markerId = await that.getFunc(\'getMarkerId\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getMarkerId\'), fn);\n    }\n\n    if (this.checkFn("getLocation")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.location = await that.getFunc(\'getLocation\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getLocation\'), fn);\n    }\n\n    if (this.checkFn("getOrientation")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.orientation = await that.getFunc(\'getOrientation\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getOrientation\'), fn);\n    }\n\n    if (this.checkFn("getDescription")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.description = await that.getFunc(\'getDescription\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getDescription\'), fn);\n    }\n\n    if (this.checkFn("getIcon")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.icon = await that.getFunc(\'getIcon\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getIcon\'), fn);\n    }\n\n    if (this.checkFn("getIconColor")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.iconColor = await that.getFunc(\'getIconColor\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getIconColor\'), fn);\n    }\n\n    if (this.checkFn("getIconScale")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.iconScale = await that.getFunc(\'getIconScale\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getIconScale\'), fn);\n    }\n\n    if (this.checkFn("getLabel")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.label = await that.getFunc(\'getLabel\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getLabel\'), fn);\n    }\n\n    if (this.checkFn("getLabelColor")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.labelColor = await that.getFunc(\'getLabelColor\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getLabelColor\'), fn);\n    }\n\n    if (this.checkFn("getLabelSize")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.labelSize = await that.getFunc(\'getLabelSize\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getLabelSize\'), fn);\n    }\n\n    if (this.checkFn("getZindex")) {\n      let fn = async (rec, timestamp, options) => {\n        that.props.zIndex = await that.getFunc(\'getZindex\')(rec, timestamp, options);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getZindex\'), fn);\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.onLeftClick) && Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(properties.onLeftClick)) {\n      this.props.onLeftClick = properties.onLeftClick;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.onRightClick) && Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(properties.onRightClick)) {\n      this.props.onRightClick = properties.onRightClick;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(properties.onHover) && Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(properties.onHover)) {\n      this.props.onHover = properties.onHover;\n    }\n\n    this.saveState();\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (PointMarkerLayer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9Qb2ludE1hcmtlckxheWVyLmpzPzhiMDUiXSwibmFtZXMiOlsiUG9pbnRNYXJrZXJMYXllciIsIkxheWVyIiwiY29uc3RydWN0b3IiLCJwcm9wZXJ0aWVzIiwidHlwZSIsInByb3BzIiwibG9jYXRpb24iLCJvcmllbnRhdGlvbiIsImhlYWRpbmciLCJpY29uIiwiaWNvbkFuY2hvciIsImljb25TaXplIiwiaWNvblNjYWxlIiwiaWNvbkNvbG9yIiwidW5kZWZpbmVkIiwiaWNvbk9wYWNpdHkiLCJsYWJlbCIsImxhYmVsQ29sb3IiLCJsYWJlbE91dGxpbmVDb2xvciIsImxhYmVsQmFja2dyb3VuZENvbG9yIiwibGFiZWxTaXplIiwibGFiZWxTY2FsZSIsImxhYmVsT2Zmc2V0Iiwiem9vbUxldmVsIiwiY29sb3IiLCJkZWZhdWx0VG9UZXJyYWluRWxldmF0aW9uIiwiekluZGV4IiwiYWxsb3dCaWxsYm9hcmRSb3RhdGlvbiIsIm9wdGlvbnMiLCJtYXJrZXJJZCIsImlzRGVmaW5lZCIsImhhc1ZhbHVlIiwiYXNzZXJ0T2JqZWN0IiwiYXNzZXJ0U3RyaW5nIiwiYXNzZXJ0QXJyYXkiLCJhc3NlcnRQb3NpdGl2ZSIsImFzc2VydE51bWJlciIsImFzc2VydEJvb2xlYW4iLCJ0aGF0IiwiY2hlY2tGbiIsImZuIiwicmVjIiwidGltZXN0YW1wIiwiZ2V0RnVuYyIsImFkZEZuIiwiZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5IiwiZGVzY3JpcHRpb24iLCJvbkxlZnRDbGljayIsImFzc2VydEZ1bmN0aW9uIiwib25SaWdodENsaWNrIiwib25Ib3ZlciIsInNhdmVTdGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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RixHQUExQixFQUErQkMsU0FBL0IsRUFBMENkLE9BQTFDLENBQTFCO01BQ0gsQ0FGRDs7TUFHQSxLQUFLZ0IsS0FBTCxDQUFXTixJQUFJLENBQUNPLDJCQUFMLENBQWlDLFdBQWpDLENBQVgsRUFBMERMLEVBQTFEO0lBQ0g7O0lBRUQsSUFBSVYseUVBQVMsQ0FBQzNCLFVBQVUsQ0FBQzRDLFdBQVosQ0FBVCxJQUFxQ0MsOEVBQWMsQ0FBQzdDLFVBQVUsQ0FBQzRDLFdBQVosQ0FBdkQsRUFBaUY7TUFDN0UsS0FBSzFDLEtBQUwsQ0FBVzBDLFdBQVgsR0FBeUI1QyxVQUFVLENBQUM0QyxXQUFwQztJQUNIOztJQUVELElBQUlqQix5RUFBUyxDQUFDM0IsVUFBVSxDQUFDOEMsWUFBWixDQUFULElBQXNDRCw4RUFBYyxDQUFDN0MsVUFBVSxDQUFDOEMsWUFBWixDQUF4RCxFQUFtRjtNQUMvRSxLQUFLNUMsS0FBTCxDQUFXNEMsWUFBWCxHQUEwQjlDLFVBQVUsQ0FBQzhDLFlBQXJDO0lBQ0g7O0lBRUQsSUFBSW5CLHlFQUFTLENBQUMzQixVQUFVLENBQUMrQyxPQUFaLENBQVQsSUFBaUNGLDhFQUFjLENBQUM3QyxVQUFVLENBQUMrQyxPQUFaLENBQW5ELEVBQXlFO01BQ3JFLEtBQUs3QyxLQUFMLENBQVc2QyxPQUFYLEdBQXFCL0MsVUFBVSxDQUFDK0MsT0FBaEM7SUFDSDs7SUFFRCxLQUFLQyxTQUFMO0VBQ0g7O0FBblFnQzs7QUFzUXRCbkQseUVBQWYiLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDE3IE1hdGhpZXUgRGhhaW5hdXQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmltcG9ydCB7XG4gICAgYXNzZXJ0QXJyYXksXG4gICAgYXNzZXJ0RnVuY3Rpb24sIGFzc2VydE51bWJlcixcbiAgICBhc3NlcnRPYmplY3QsXG4gICAgYXNzZXJ0UG9zaXRpdmUsXG4gICAgYXNzZXJ0U3RyaW5nLFxuICAgIGFzc2VydEJvb2xlYW4sXG4gICAgaGFzVmFsdWUsXG4gICAgaXNEZWZpbmVkXG59IGZyb20gXCIuLi8uLi91dGlscy9VdGlscy5qc1wiO1xuaW1wb3J0IExheWVyIGZyb20gXCIuL0xheWVyLmpzXCI7XG5cbi8qKlxuICogQGV4dGVuZHMgTGF5ZXJcbiAqIEBleGFtcGxlXG4gKlxuICogaW1wb3J0IFBvaW50TWFya2VyTGF5ZXIgZnJvbSAnY29yZS91aS9sYXllci9Qb2ludE1hcmtlckxheWVyLmpzJztcbiAqXG4gKiBsZXQgcG9pbnRNYXJrZXJMYXllciA9IG5ldyBQb2ludE1hcmtlckxheWVyKHtcbiAgICAgICAgbG9jYXRpb24gOiB7XG4gICAgICAgICAgICB4IDogMS40MjM3NjU1NyxcbiAgICAgICAgICAgIHkgOiA0My42MTc1ODYyNixcbiAgICAgICAgICAgIHogOiAxMDBcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0TG9jYXRpb24gOiB7XG4gICAgICAgICAgICBkYXRhU291cmNlSWRzIDogW2FuZHJvaWRQaG9uZUdwc0RhdGFTb3VyY2UuZ2V0SWQoKV0sXG4gICAgICAgICAgICBoYW5kbGVyIDogZnVuY3Rpb24ocmVjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgeCA6IHJlYy5sb24sXG4gICAgICAgICAgICAgICAgICAgIHkgOiByZWMubGF0LFxuICAgICAgICAgICAgICAgICAgICB6IDogcmVjLmFsdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldE9yaWVudGF0aW9uIDoge1xuICAgICAgICAgICAgZGF0YVNvdXJjZUlkcyA6IFthbmRyb2lkUGhvbmVPcmllbnRhdGlvbkRhdGFTb3VyY2UuZ2V0SWQoKV0sXG4gICAgICAgICAgICBoYW5kbGVyIDogZnVuY3Rpb24ocmVjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGluZyA6IHJlYy5oZWFkaW5nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaWNvbiA6ICdpbWFnZXMvY2FtZXJhbG9vay5wbmcnLFxuICAgICAgICBnZXRJY29uIDoge1xuICAgICAgICAgICAgZGF0YVNvdXJjZUlkczogW2FuZHJvaWRQaG9uZUdwc0RhdGFTb3VyY2UuZ2V0SWQoKV0sXG4gICAgICAgICAgICBoYW5kbGVyIDogZnVuY3Rpb24ocmVjLHRpbWVTdGFtcCxvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYob3B0aW9ucy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2ltYWdlcy9jYW1lcmFsb29rLXNlbGVjdGVkLnBuZydcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2ltYWdlcy9jYW1lcmFsb29rLnBuZyc7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICovXG5jbGFzcyBQb2ludE1hcmtlckxheWVyIGV4dGVuZHMgTGF5ZXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgUG9pbnRNYXJrZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyW119IHByb3BlcnRpZXMubG9jYXRpb24gLSBbeCx5LHpdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLm9yaWVudGF0aW9uPTBdIC1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5pY29uIC1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3Byb3BlcnRpZXMuaWNvblNjYWxlPTFdIC0gdGhlIGljb24gc2NhbGUgc2l6ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcHJvcGVydGllcy5pY29uQ29sb3I9XCIjMDAwMDAwXCJdIC0gdGhlIGljb24gY29sb3JcbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSBbcHJvcGVydGllcy5pY29uQW5jaG9yPVsxNiwxNl1dIC1cbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSBbcHJvcGVydGllcy5pY29uU2l6ZT1bMTYsMTZdXSAtXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLmljb25PcGFjaXR5PTAuNzVdIC0gaWNvbiBvcGFjaXR5XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtwcm9wZXJ0aWVzLmxhYmVsPVwiXCJdIC0gdGhlIGxhYmVsIHRvIGRpc3BsYXlcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3Byb3BlcnRpZXMubGFiZWxDb2xvcj1cIiMwMDAwMDBcIl0gLSBjb2xvclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcHJvcGVydGllcy5sYWJlbE91dGxpbmVDb2xvcj11bmRlZmluZWRdIC0gY29sb3JcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3Byb3BlcnRpZXMubGFiZWxCYWNrZ3JvdW5kQ29sb3I9dW5kZWZpbmVkXSAtICBjb2xvclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy5sYWJlbFNpemU9MTZdIC1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMubGFiZWxTY2FsZT0xLjBdIC0gbGFiZWwgc2NhbGVcbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSBbcHJvcGVydGllcy5sYWJlbE9mZnNldD1bMCwwXV0gLVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy56SW5kZXg9MF0gLSB6LW9yZGVyaW5nIG9mIG1hcmtlcnNcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMuYWxsb3dCaWxsYm9hcmRSb3RhdGlvbj10cnVlXSAtIGFsbG93IGJpbGxib2FyZCByb3RhdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wZXJ0aWVzLmdldExvY2F0aW9uXSAtXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0RGVzY3JpcHRpb25dIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRPcmllbnRhdGlvbl0gLVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wZXJ0aWVzLmdldEljb25dIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRJY29uQ29sb3JdIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRJY29uU2NhbGVdIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRMYWJlbF0gLVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wZXJ0aWVzLmdldExhYmVsQ29sb3JdIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRMYWJlbFNpemVdIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRaaW5kZXhdIC0gei1vcmRlcmluZyBvZiBtYXJrZXJzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMub25MZWZ0Q2xpY2tdIC0gdHJpZ2dlciBvbkxlZnRDbGljayBtYXJrZXIgZXZlbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5vblJpZ2h0Q2xpY2tdIC0gdHJpZ2dlciBvblJpZ2h0Q2xpY2sgbWFya2VyIGV2ZW50XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMub25Ib3Zlcl0gLSB0cmlnZ2VyIG9uSG92ZXIgbWFya2VyIGV2ZW50XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0TWFya2VySWRdIC0gbWFwIGFuIGlkIHRvIGEgdW5pcXVlIG1hcmtlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy56b29tTGV2ZWw9MTVdIC0gU2V0IHRoZSBkZWZhdWx0IHpvb20gbGV2ZWxcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtwcm9wZXJ0aWVzLmRlZmF1bHRUb1RlcnJhaW5FbGV2YXRpb249ZmFsc2VdIC0gU2V0IHRoZSBkZWZhdWx0IHRvIHRlcnJhaW4gZWxldmF0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyKHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWFya2VyJztcblxuICAgICAgICB0aGlzLnByb3BzLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9wcy5vcmllbnRhdGlvbiA9IHtoZWFkaW5nOiAwfTtcbiAgICAgICAgdGhpcy5wcm9wcy5pY29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9wcy5pY29uQW5jaG9yID0gWzE2LCAxNl07XG4gICAgICAgIHRoaXMucHJvcHMuaWNvblNpemUgPSBbMTYsIDE2XTtcbiAgICAgICAgdGhpcy5wcm9wcy5pY29uU2NhbGUgPSAxLjA7XG4gICAgICAgIHRoaXMucHJvcHMuaWNvbkNvbG9yID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb3BzLmljb25PcGFjaXR5ID0gMC43NTtcbiAgICAgICAgdGhpcy5wcm9wcy5sYWJlbCA9IG51bGw7XG4gICAgICAgIHRoaXMucHJvcHMubGFiZWxDb2xvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcm9wcy5sYWJlbE91dGxpbmVDb2xvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcm9wcy5sYWJlbEJhY2tncm91bmRDb2xvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcm9wcy5sYWJlbFNpemUgPSAxNjtcbiAgICAgICAgdGhpcy5wcm9wcy5sYWJlbFNjYWxlID0gMS4wO1xuICAgICAgICB0aGlzLnByb3BzLmxhYmVsT2Zmc2V0ID0gWzAsIDBdO1xuICAgICAgICB0aGlzLnByb3BzLnpvb21MZXZlbCA9IDE1O1xuICAgICAgICB0aGlzLnByb3BzLmNvbG9yID0gJyMwMDAwMDAnO1xuICAgICAgICB0aGlzLnByb3BzLmRlZmF1bHRUb1RlcnJhaW5FbGV2YXRpb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9wcy56SW5kZXggPSAwO1xuICAgICAgICB0aGlzLnByb3BzLmFsbG93QmlsbGJvYXJkUm90YXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLnByb3BzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5wcm9wcy5tYXJrZXJJZCA9ICdtYXJrZXInO1xuXG4gICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy5kZWZhdWx0VG9UZXJyYWluRWxldmF0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5kZWZhdWx0VG9UZXJyYWluRWxldmF0aW9uID0gcHJvcGVydGllcy5kZWZhdWx0VG9UZXJyYWluRWxldmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMubG9jYXRpb24pKSB7XG4gICAgICAgICAgICBhc3NlcnRPYmplY3QocHJvcGVydGllcy5sb2NhdGlvbiwgXCJsb2NhdGlvblwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubG9jYXRpb24gPSBwcm9wZXJ0aWVzLmxvY2F0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMub3JpZW50YXRpb24pKSB7XG4gICAgICAgICAgICBhc3NlcnRPYmplY3QocHJvcGVydGllcy5vcmllbnRhdGlvbiwgXCJvcmllbnRhdGlvblwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub3JpZW50YXRpb24gPSBwcm9wZXJ0aWVzLm9yaWVudGF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMuaWNvbikpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmljb24sIFwiaWNvblwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaWNvbiA9IHByb3BlcnRpZXMuaWNvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmljb25BbmNob3IpKSB7XG4gICAgICAgICAgICBhc3NlcnRBcnJheShwcm9wZXJ0aWVzLmljb25BbmNob3IsIFwiaWNvbkFuY2hvclwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaWNvbkFuY2hvciA9IHByb3BlcnRpZXMuaWNvbkFuY2hvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmljb25TaXplKSkge1xuICAgICAgICAgICAgYXNzZXJ0QXJyYXkocHJvcGVydGllcy5pY29uU2l6ZSwgXCJpY29uU2l6ZVwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaWNvblNpemUgPSBwcm9wZXJ0aWVzLmljb25TaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMuaWNvblNjYWxlKSkge1xuICAgICAgICAgICAgYXNzZXJ0UG9zaXRpdmUocHJvcGVydGllcy5pY29uU2NhbGUsIFwiaWNvblNjYWxlXCIpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5pY29uU2NhbGUgPSBwcm9wZXJ0aWVzLmljb25TY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmljb25Db2xvcikpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmljb25Db2xvciwgXCJpY29uQ29sb3JcIik7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmljb25Db2xvciA9IHByb3BlcnRpZXMuaWNvbkNvbG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMuaWNvbk9wYWNpdHkpKSB7XG4gICAgICAgICAgICBhc3NlcnRTdHJpbmcocHJvcGVydGllcy5pY29uT3BhY2l0eSwgXCJpY29uT3BhY2l0eVwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaWNvbk9wYWNpdHkgPSBwcm9wZXJ0aWVzLmljb25PcGFjaXR5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMubGFiZWwpKSB7XG4gICAgICAgICAgICBhc3NlcnRTdHJpbmcocHJvcGVydGllcy5sYWJlbCwgXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubGFiZWwgPSBwcm9wZXJ0aWVzLmxhYmVsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMubGFiZWxDb2xvcikpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmxhYmVsQ29sb3IsIFwibGFiZWxDb2xvclwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubGFiZWxDb2xvciA9IHByb3BlcnRpZXMubGFiZWxDb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmxhYmVsT3V0bGluZUNvbG9yKSkge1xuICAgICAgICAgICAgYXNzZXJ0U3RyaW5nKHByb3BlcnRpZXMubGFiZWxPdXRsaW5lQ29sb3IsIFwibGFiZWxPdXRsaW5lQ29sb3JcIik7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmxhYmVsT3V0bGluZUNvbG9yID0gcHJvcGVydGllcy5sYWJlbE91dGxpbmVDb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmxhYmVsQmFja2dyb3VuZENvbG9yKSkge1xuICAgICAgICAgICAgYXNzZXJ0U3RyaW5nKHByb3BlcnRpZXMubGFiZWxCYWNrZ3JvdW5kQ29sb3IsIFwibGFiZWxCYWNrZ3JvdW5kQ29sb3JcIik7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmxhYmVsQmFja2dyb3VuZENvbG9yID0gcHJvcGVydGllcy5sYWJlbEJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmxhYmVsU2l6ZSkpIHtcbiAgICAgICAgICAgIGFzc2VydFBvc2l0aXZlKHByb3BlcnRpZXMubGFiZWxTaXplLCBcImxhYmVsU2l6ZVwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubGFiZWxTaXplID0gcHJvcGVydGllcy5sYWJlbFNpemU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5sYWJlbFNjYWxlKSkge1xuICAgICAgICAgICAgYXNzZXJ0UG9zaXRpdmUocHJvcGVydGllcy5sYWJlbFNjYWxlLCBcImxhYmVsU2NhbGVcIik7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmxhYmVsU2NhbGUgPSBwcm9wZXJ0aWVzLmxhYmVsU2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5sYWJlbE9mZnNldCkpIHtcbiAgICAgICAgICAgIGFzc2VydEFycmF5KHByb3BlcnRpZXMubGFiZWxPZmZzZXQsIFwibGFiZWxPZmZzZXRcIik7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmxhYmVsT2Zmc2V0ID0gcHJvcGVydGllcy5sYWJlbE9mZnNldDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMuem9vbUxldmVsKSkge1xuICAgICAgICAgICAgYXNzZXJ0UG9zaXRpdmUocHJvcGVydGllcy56b29tTGV2ZWwsIFwiem9vbUxldmVsXCIpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy56b29tTGV2ZWwgPSBwcm9wZXJ0aWVzLnpvb21MZXZlbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLnpJbmRleCkpIHtcbiAgICAgICAgICAgIGFzc2VydE51bWJlcihwcm9wZXJ0aWVzLnpJbmRleCwgXCJ6SW5kZXhcIik7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnpJbmRleCA9IHByb3BlcnRpZXMuekluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMuYWxsb3dCaWxsYm9hcmRSb3RhdGlvbikpIHtcbiAgICAgICAgICAgIGFzc2VydEJvb2xlYW4ocHJvcGVydGllcy5hbGxvd0JpbGxib2FyZFJvdGF0aW9uLCBcImFsbG93QmlsbGJvYXJkUm90YXRpb25cIik7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmFsbG93QmlsbGJvYXJkUm90YXRpb24gPSBwcm9wZXJ0aWVzLmFsbG93QmlsbGJvYXJkUm90YXRpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5jb2xvcikpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmNvbG9yLCBcImNvbG9yXCIpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xvciA9IHByb3BlcnRpZXMuY29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcblxuICAgICAgICAvLyBtdXN0IGJlIGZpcnN0IHRvIGFzc2lnbiBjb3JyZWN0bHkgdGhlIGZpcnN0IGxvY2F0aW9uIHRvIHRoZSByaWdodCBpZCBpZiBpdCBpcyBkZWZpbmVkXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRNYXJrZXJJZFwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhhdC5wcm9wcy5tYXJrZXJJZCA9IGF3YWl0IHRoYXQuZ2V0RnVuYygnZ2V0TWFya2VySWQnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0TWFya2VySWQnKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldExvY2F0aW9uXCIpKSB7XG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGF0LnByb3BzLmxvY2F0aW9uID0gYXdhaXQgdGhhdC5nZXRGdW5jKCdnZXRMb2NhdGlvbicpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFkZEZuKHRoYXQuZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5KCdnZXRMb2NhdGlvbicpLCBmbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jaGVja0ZuKFwiZ2V0T3JpZW50YXRpb25cIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMub3JpZW50YXRpb24gPSBhd2FpdCB0aGF0LmdldEZ1bmMoJ2dldE9yaWVudGF0aW9uJykocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhhdC5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldE9yaWVudGF0aW9uJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXREZXNjcmlwdGlvblwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhhdC5wcm9wcy5kZXNjcmlwdGlvbiA9IGF3YWl0IHRoYXQuZ2V0RnVuYygnZ2V0RGVzY3JpcHRpb24nKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0RGVzY3JpcHRpb24nKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldEljb25cIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMuaWNvbiA9IGF3YWl0IHRoYXQuZ2V0RnVuYygnZ2V0SWNvbicpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFkZEZuKHRoYXQuZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5KCdnZXRJY29uJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRJY29uQ29sb3JcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMuaWNvbkNvbG9yID0gYXdhaXQgdGhhdC5nZXRGdW5jKCdnZXRJY29uQ29sb3InKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0SWNvbkNvbG9yJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRJY29uU2NhbGVcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMuaWNvblNjYWxlID0gYXdhaXQgdGhhdC5nZXRGdW5jKCdnZXRJY29uU2NhbGUnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0SWNvblNjYWxlJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRMYWJlbFwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhhdC5wcm9wcy5sYWJlbCA9IGF3YWl0IHRoYXQuZ2V0RnVuYygnZ2V0TGFiZWwnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0TGFiZWwnKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldExhYmVsQ29sb3JcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMubGFiZWxDb2xvciA9IGF3YWl0IHRoYXQuZ2V0RnVuYygnZ2V0TGFiZWxDb2xvcicpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFkZEZuKHRoYXQuZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5KCdnZXRMYWJlbENvbG9yJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRMYWJlbFNpemVcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMubGFiZWxTaXplID0gYXdhaXQgdGhhdC5nZXRGdW5jKCdnZXRMYWJlbFNpemUnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0TGFiZWxTaXplJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRaaW5kZXhcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMuekluZGV4ID0gYXdhaXQgdGhhdC5nZXRGdW5jKCdnZXRaaW5kZXgnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGF0LmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0WmluZGV4JyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy5vbkxlZnRDbGljaykgJiYgYXNzZXJ0RnVuY3Rpb24ocHJvcGVydGllcy5vbkxlZnRDbGljaykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25MZWZ0Q2xpY2sgPSBwcm9wZXJ0aWVzLm9uTGVmdENsaWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLm9uUmlnaHRDbGljaykgJiYgYXNzZXJ0RnVuY3Rpb24ocHJvcGVydGllcy5vblJpZ2h0Q2xpY2spKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUmlnaHRDbGljayA9IHByb3BlcnRpZXMub25SaWdodENsaWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLm9uSG92ZXIpICYmIGFzc2VydEZ1bmN0aW9uKHByb3BlcnRpZXMub25Ib3ZlcikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Ib3ZlciA9IHByb3BlcnRpZXMub25Ib3ZlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb2ludE1hcmtlckxheWVyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n')},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _View_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(13);\n/* harmony import */ var _utils_Utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends View\n * @example\n *\n import MjpegView from \'core/ui/view/video/MjpegView.js\';\n\n let videoView = new MjpegView({\n  container: \'container\',\n  css: \'video-h264\',\n  name: \'UAV Video\',\n  showTime: true,\n  showStats: true,\n  layers: [\n      new DataLayer({\n        dataSourceId: videoDataSource.id,\n         getFrameData: (rec) => rec.videoFrame,\n         getTimestamp: (rec) => rec.timestamp\n      })\n  ]\n});\n */\n\nclass MjpegView extends _View_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"] {\n  /**\n   * Create a View.\n   * @param {Object} [properties={}] - the properties of the view\n   * @param {string} properties.container - The div element to attach to\n   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces\n   * @param {String} properties.showTime - Display or not the time onto the view\n   * @param {String} properties.rotation - Allow to define a rotation in degree\n   *\n   */\n  constructor(properties) {\n    super({\n      supportedLayers: [\'videoData\'],\n      ...properties\n    }); // create timestamp slot\n\n    this.timestamp = null;\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_1__[/* isDefined */ "k"])(properties.showTime) && properties.showTime) {\n      this.timestamp = document.createElement("div");\n      this.timestamp.setAttribute("class", "video-time");\n      document.getElementById(this.divId).appendChild(this.timestamp);\n    } // creates video tag element\n\n\n    this.imgTag = document.createElement("img");\n    this.imgTag.setAttribute("class", "video-mjpeg"); // rotation option\n\n    this.rotation = 0;\n\n    if (typeof properties != "undefined" && typeof properties.rotation != "undefined") {\n      this.rotation = properties.rotation * Math.PI / 180;\n      this.canvas = document.createElement(\'canvas\');\n      this.canvas.width = 640;\n      this.canvas.height = 480;\n      var ctx = this.canvas.getContext(\'2d\');\n      ctx.translate(0, 480);\n      ctx.rotate(this.rotation);\n      document.getElementById(this.divId).appendChild(this.canvas);\n    } else {\n      // appends <img> tag to <div>\n      document.getElementById(this.divId).appendChild(this.imgTag);\n    }\n  }\n\n  async setData(dataSourceId, data) {\n    if (data.type === \'videoData\') {\n      const values = data.values;\n\n      for (let i = 0; i < values.length; i++) {\n        this.updateVideo(values[i]);\n      }\n    }\n  }\n\n  updateVideo(props) {\n    let imgBlob = new Blob([props.frameData.data]);\n    let url = window.URL.createObjectURL(imgBlob);\n    let oldBlobURL = this.imgTag.src;\n    this.imgTag.src = url;\n\n    if (this.timestamp !== null) {\n      this.timestamp.innerHTML = new Date(props.timestamp).toISOString();\n    }\n\n    window.URL.revokeObjectURL(oldBlobURL);\n  }\n\n  selectDataView(dataSourceIds, entityId) {\n    if (dataSourceIds.indexOf(this.dataSourceId) > -1 || Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_1__[/* isDefined */ "k"])(this.entity) && this.entity.getId() === entityId) {\n      document.getElementById(this.divId).setAttribute("class", this.css + " " + this.cssSelected);\n    } else {\n      document.getElementById(this.divId).setAttribute("class", this.css);\n    }\n  }\n\n  reset() {\n    this.imgTag.src = "";\n  }\n\n  async getCanvas() {\n    return this.canvas;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (MjpegView);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS92aWV3L3ZpZGVvL01qcGVnVmlldy5qcz9kNmZhIl0sIm5hbWVzIjpbIk1qcGVnVmlldyIsIlZpZXciLCJjb25zdHJ1Y3RvciIsInByb3BlcnRpZXMiLCJzdXBwb3J0ZWRMYXllcnMiLCJ0aW1lc3RhbXAiLCJpc0RlZmluZWQiLCJzaG93VGltZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRCeUlkIiwiZGl2SWQiLCJhcHBlbmRDaGlsZCIsImltZ1RhZyIsInJvdGF0aW9uIiwiTWF0aCIsIlBJIiwiY2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwidHJhbnNsYXRlIiwicm90YXRlIiwic2V0RGF0YSIsImRhdGFTb3VyY2VJZCIsImRhdGEiLCJ0eXBlIiwidmFsdWVzIiwiaSIsImxlbmd0aCIsInVwZGF0ZVZpZGVvIiwicHJvcHMiLCJpbWdCbG9iIiwiQmxvYiIsImZyYW1lRGF0YSIsInVybCIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm9sZEJsb2JVUkwiLCJzcmMiLCJpbm5lckhUTUwiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZXZva2VPYmplY3RVUkwiLCJzZWxlY3REYXRhVmlldyIsImRhdGFTb3VyY2VJZHMiLCJlbnRpdHlJZCIsImluZGV4T2YiLCJlbnRpdHkiLCJnZXRJZCIsImNzcyIsImNzc1NlbGVjdGVkIiwicmVzZXQiLCJnZXRDYW52YXMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QVk0QixHQUE3QjtJQUNBLEtBQUs1QixNQUFMLENBQVk0QixHQUFaLEdBQWtCTCxHQUFsQjs7SUFDQSxJQUFJLEtBQUtoQyxTQUFMLEtBQW1CLElBQXZCLEVBQTZCO01BQ3pCLEtBQUtBLFNBQUwsQ0FBZXNDLFNBQWYsR0FBMkIsSUFBSUMsSUFBSixDQUFTWCxLQUFLLENBQUM1QixTQUFmLEVBQTBCd0MsV0FBMUIsRUFBM0I7SUFDSDs7SUFDRFAsTUFBTSxDQUFDQyxHQUFQLENBQVdPLGVBQVgsQ0FBMkJMLFVBQTNCO0VBQ0g7O0VBRURNLGNBQWMsQ0FBQ0MsYUFBRCxFQUFnQkMsUUFBaEIsRUFBMEI7SUFDcEMsSUFBSUQsYUFBYSxDQUFDRSxPQUFkLENBQXNCLEtBQUt4QixZQUEzQixJQUEyQyxDQUFDLENBQTVDLElBQWtEcEIseUVBQVMsQ0FBQyxLQUFLNkMsTUFBTixDQUFWLElBQTRCLEtBQUtBLE1BQUwsQ0FBWUMsS0FBWixPQUF3QkgsUUFBekcsRUFBbUg7TUFDL0d6QyxRQUFRLENBQUNHLGNBQVQsQ0FBd0IsS0FBS0MsS0FBN0IsRUFBb0NGLFlBQXBDLENBQWlELE9BQWpELEVBQTBELEtBQUsyQyxHQUFMLEdBQVcsR0FBWCxHQUFpQixLQUFLQyxXQUFoRjtJQUNILENBRkQsTUFFTztNQUNIOUMsUUFBUSxDQUFDRyxjQUFULENBQXdCLEtBQUtDLEtBQTdCLEVBQW9DRixZQUFwQyxDQUFpRCxPQUFqRCxFQUEwRCxLQUFLMkMsR0FBL0Q7SUFDSDtFQUNKOztFQUVERSxLQUFLLEdBQUc7SUFDSixLQUFLekMsTUFBTCxDQUFZNEIsR0FBWixHQUFrQixFQUFsQjtFQUNIOztFQUVjLE1BQVRjLFNBQVMsR0FBRztJQUNkLE9BQU8sS0FBS3RDLE1BQVo7RUFDSDs7QUFoRndCOztBQW1GZGxCLGtFQUFmIiwiZmlsZSI6IjE5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgVmlldyBmcm9tIFwiLi4vVmlldy5qc1wiO1xuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gXCIuLi8uLi8uLi91dGlscy9VdGlscy5qc1wiO1xuXG4vKipcbiAqIEBleHRlbmRzIFZpZXdcbiAqIEBleGFtcGxlXG4gKlxuIGltcG9ydCBNanBlZ1ZpZXcgZnJvbSAnY29yZS91aS92aWV3L3ZpZGVvL01qcGVnVmlldy5qcyc7XG5cbiBsZXQgdmlkZW9WaWV3ID0gbmV3IE1qcGVnVmlldyh7XG4gIGNvbnRhaW5lcjogJ2NvbnRhaW5lcicsXG4gIGNzczogJ3ZpZGVvLWgyNjQnLFxuICBuYW1lOiAnVUFWIFZpZGVvJyxcbiAgc2hvd1RpbWU6IHRydWUsXG4gIHNob3dTdGF0czogdHJ1ZSxcbiAgbGF5ZXJzOiBbXG4gICAgICBuZXcgRGF0YUxheWVyKHtcbiAgICAgICAgZGF0YVNvdXJjZUlkOiB2aWRlb0RhdGFTb3VyY2UuaWQsXG4gICAgICAgICBnZXRGcmFtZURhdGE6IChyZWMpID0+IHJlYy52aWRlb0ZyYW1lLFxuICAgICAgICAgZ2V0VGltZXN0YW1wOiAocmVjKSA9PiByZWMudGltZXN0YW1wXG4gICAgICB9KVxuICBdXG59KTtcbiAqL1xuXG5jbGFzcyBNanBlZ1ZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBWaWV3LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gLSB0aGUgcHJvcGVydGllcyBvZiB0aGUgdmlld1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmNvbnRhaW5lciAtIFRoZSBkaXYgZWxlbWVudCB0byBhdHRhY2ggdG9cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydGllcy5jc3MgLSBUaGUgY3NzIGNsYXNzZXMgdG8gc2V0LCBjYW4gYmUgbXVsdGlwbGUgaWYgc2VwYXJhdGUgYnkgc3BhY2VzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuc2hvd1RpbWUgLSBEaXNwbGF5IG9yIG5vdCB0aGUgdGltZSBvbnRvIHRoZSB2aWV3XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMucm90YXRpb24gLSBBbGxvdyB0byBkZWZpbmUgYSByb3RhdGlvbiBpbiBkZWdyZWVcbiAgICAgKlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgc3VwcG9ydGVkTGF5ZXJzOiBbJ3ZpZGVvRGF0YSddLFxuICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjcmVhdGUgdGltZXN0YW1wIHNsb3RcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBudWxsO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKHByb3BlcnRpZXMuc2hvd1RpbWUpICYmIHByb3BlcnRpZXMuc2hvd1RpbWUpIHtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidmlkZW8tdGltZVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2SWQpLmFwcGVuZENoaWxkKHRoaXMudGltZXN0YW1wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNyZWF0ZXMgdmlkZW8gdGFnIGVsZW1lbnRcbiAgICAgICAgdGhpcy5pbWdUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICB0aGlzLmltZ1RhZy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInZpZGVvLW1qcGVnXCIpO1xuXG4gICAgICAgIC8vIHJvdGF0aW9uIG9wdGlvblxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiAocHJvcGVydGllcykgIT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKHByb3BlcnRpZXMucm90YXRpb24pICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBwcm9wZXJ0aWVzLnJvdGF0aW9uICogTWF0aC5QSSAvIDE4MDtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IDY0MDtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDQ4MDtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgwLCA0ODApO1xuICAgICAgICAgICAgY3R4LnJvdGF0ZSh0aGlzLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2SWQpLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFwcGVuZHMgPGltZz4gdGFnIHRvIDxkaXY+XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRpdklkKS5hcHBlbmRDaGlsZCh0aGlzLmltZ1RhZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzZXREYXRhKGRhdGFTb3VyY2VJZCwgZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS50eXBlID09PSAndmlkZW9EYXRhJykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gZGF0YS52YWx1ZXM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlkZW8odmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVZpZGVvKHByb3BzKSB7XG4gICAgICAgIGxldCBpbWdCbG9iID0gbmV3IEJsb2IoW3Byb3BzLmZyYW1lRGF0YS5kYXRhXSk7XG4gICAgICAgIGxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChpbWdCbG9iKTtcblxuICAgICAgICBsZXQgb2xkQmxvYlVSTCA9IHRoaXMuaW1nVGFnLnNyYztcbiAgICAgICAgdGhpcy5pbWdUYWcuc3JjID0gdXJsO1xuICAgICAgICBpZiAodGhpcy50aW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wLmlubmVySFRNTCA9IG5ldyBEYXRlKHByb3BzLnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChvbGRCbG9iVVJMKTtcbiAgICB9XG5cbiAgICBzZWxlY3REYXRhVmlldyhkYXRhU291cmNlSWRzLCBlbnRpdHlJZCkge1xuICAgICAgICBpZiAoZGF0YVNvdXJjZUlkcy5pbmRleE9mKHRoaXMuZGF0YVNvdXJjZUlkKSA+IC0xIHx8IChpc0RlZmluZWQodGhpcy5lbnRpdHkpKSAmJiB0aGlzLmVudGl0eS5nZXRJZCgpID09PSBlbnRpdHlJZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXZJZCkuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5jc3MgKyBcIiBcIiArIHRoaXMuY3NzU2VsZWN0ZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXZJZCkuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5jc3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuaW1nVGFnLnNyYyA9IFwiXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Q2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXM7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNanBlZ1ZpZXc7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///19\n')},function(module,exports,__webpack_require__){eval('module.exports = function () {\n  return new Worker(__webpack_require__.p + "87a8d7e7405eee9c7cba.worker.js");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9kYXRhc291cmNlL3dvcmtlci9EYXRhU291cmNlLndvcmtlci5qcz8zYTVjIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJXb3JrZXIiLCJfX3dlYnBhY2tfcHVibGljX3BhdGhfXyJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixZQUFXO0VBQzFCLE9BQU8sSUFBSUMsTUFBSixDQUFXQyxxQkFBdUIsR0FBRyxnQ0FBckMsQ0FBUDtBQUNELENBRkQiLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiODdhOGQ3ZTc0MDVlZWU5YzdjYmEud29ya2VyLmpzXCIpO1xufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _DataSynchronizer_worker_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22);\n/* harmony import */ var _DataSynchronizer_worker_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_DataSynchronizer_worker_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2);\n/* harmony import */ var _datasource_Mode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n\nclass DataSynchronizer {\n  /**\n   * Creates The dataSynchronizer.\n   * @param {Object} properties - the property of the object\n   * @param {Number} [properties.replaySpeed=1] - replaySpeed value\n   * @param {Number} [properties.timerResolution=5] - interval in which data is played (in milliseconds)\n   * @param {Number} [properties.masterTimeRefreshRate=250] - interval in which time value is send through broadcast channel (in milliseconds)\n   * @param {Number} [properties.mode=Mode.REPLAY] - mode of the data synchronizer\n   * @param {String} properties.startTime - start time of the temporal run\n   * @param {String} properties.endTime - end time of the temporal run\n   * @param {Datasource[]} properties.dataSources - the dataSource array\n   */\n  constructor(properties) {\n    Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertDefined */ "c"])(properties.startTime, \'startTime\');\n    Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertDefined */ "c"])(properties.startTime, \'endTime\');\n    this.bufferingTime = 1000; // default\n\n    this.currentTime = Date.now();\n    this.id = Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* randomUUID */ "m"])();\n    this.dataSources = properties.dataSources || [];\n    this.replaySpeed = properties.replaySpeed || 1;\n    this.timerResolution = properties.timerResolution || 5;\n    this.masterTimeRefreshRate = properties.masterTimeRefreshRate || 250, this.mode = properties.mode || _datasource_Mode__WEBPACK_IMPORTED_MODULE_3__[/* Mode */ "a"].REPLAY;\n    this.initialized = false;\n    this.properties = {};\n    this.properties.replaySpeed = this.replaySpeed;\n    this.properties.startTime = properties.startTime;\n    this.properties.endTime = properties.endTime;\n    this.eventSubscriptionMap = {};\n    this.messagesMap = {};\n  }\n\n  getTopicId() {\n    return _Constants_js__WEBPACK_IMPORTED_MODULE_2__[/* DATA_SYNCHRONIZER_TOPIC */ "c"] + this.id;\n  }\n\n  getTimeTopicId() {\n    return _Constants_js__WEBPACK_IMPORTED_MODULE_2__[/* TIME_SYNCHRONIZER_TOPIC */ "d"] + this.id;\n  }\n  /**\n   * @private\n   */\n\n\n  initEventSubscription() {\n    // listen for Events to callback to subscriptions\n    new BroadcastChannel(this.getTopicId()).onmessage = message => {\n      const type = message.data.type;\n\n      if (type in this.eventSubscriptionMap) {\n        for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n          this.eventSubscriptionMap[type][i](message.data);\n        }\n      }\n    };\n\n    new BroadcastChannel(this.getTimeTopicId()).onmessage = message => {\n      const type = message.data.type;\n\n      if (type in this.eventSubscriptionMap) {\n        for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n          this.eventSubscriptionMap[type][i](message.data);\n        }\n      }\n    };\n  }\n  /**\n   * Gets the startTime of the first DataSource objet\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getStartTime() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return this.dataSources[0].properties.startTime;\n  }\n  /**\n   * Gets the endTime of the first DataSource objet\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getEndTime() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return this.dataSources[0].properties.endTime;\n  }\n  /**\n   * Gets the minTime of the first DataSource objet\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getMinTime() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(this.dataSources[0].properties.minTime) ? this.dataSources[0].properties.minTime : this.dataSources[0].properties.startTime;\n  }\n  /**\n   * Gets the maxTime of the first DataSource objet\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getMaxTime() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(this.dataSources[0].properties.maxTime) ? this.dataSources[0].properties.maxTime : this.dataSources[0].properties.endTime;\n  }\n\n  setMinTime(time) {\n    for (let ds of this.dataSources) {\n      ds.setMinTime(time);\n    }\n  }\n\n  setMaxTime(time) {\n    for (let ds of this.dataSources) {\n      ds.setMaxTime(time);\n    }\n  }\n  /**\n   * Gets the replaySpeed\n   * @returns {Number} - the replay speed\n   */\n\n\n  getReplaySpeed() {\n    return this.replaySpeed;\n  }\n  /**\n   * Terminate the corresponding running WebWorker by calling terminate() on it.\n   */\n\n\n  terminate() {\n    if (this.synchronizerWorker !== null) {\n      this.synchronizerWorker.terminate();\n      this.synchronizerWorker = null;\n    }\n\n    for (let dataSource of this.dataSources) {\n      dataSource.terminate();\n    }\n  }\n\n  subscribe(fn, eventTypes) {\n    // associate function to eventType\n    for (let i = 0; i < eventTypes.length; i++) {\n      if (!(eventTypes[i] in this.eventSubscriptionMap)) {\n        this.eventSubscriptionMap[eventTypes[i]] = [];\n      }\n\n      this.eventSubscriptionMap[eventTypes[i]].push(fn);\n    }\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n\n  async initDataSources() {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const dataSourcesForWorker = [];\n        let mode;\n\n        for (let dataSource of this.dataSources) {\n          const dataSourceForWorker = await this.createDataSourceForWorker(dataSource);\n          dataSourcesForWorker.push(dataSourceForWorker);\n          mode = dataSource.mode;\n        }\n\n        this.synchronizerWorker = new _DataSynchronizer_worker_js__WEBPACK_IMPORTED_MODULE_1___default.a();\n        this.handleWorkerMessage();\n        await this.postMessage({\n          message: \'init\',\n          dataSources: dataSourcesForWorker,\n          replaySpeed: this.replaySpeed,\n          timerResolution: this.timerResolution,\n          masterTimeRefreshRate: this.masterTimeRefreshRate,\n          startTime: this.properties.startTime,\n          endTime: this.properties.endTime,\n          mode: mode,\n          topics: {\n            data: this.getTopicId(),\n            time: this.getTimeTopicId()\n          }\n        }, function () {\n          this.initEventSubscription();\n          this.initialized = true;\n          resolve();\n        }.bind(this), false);\n      } catch (error) {\n        console.log(error);\n        reject(error);\n      }\n    });\n  }\n  /**\n   * @private\n   * @param dataSource\n   */\n\n\n  async createDataSourceForWorker(dataSource) {\n    const obj = {\n      bufferingTime: dataSource.properties.bufferingTime || 0,\n      timeOut: dataSource.properties.timeOut || 0,\n      id: dataSource.id,\n      name: dataSource.name\n    }; // bind dataSource data onto dataSynchronizer data\n\n    try {\n      await dataSource.setDataSynchronizer(this);\n      dataSource.properties.replaySpeed = this.replaySpeed;\n    } catch (ex) {\n      console.error("Cannot set the synchronizer to this DataSource", ex);\n      throw ex;\n    }\n\n    return obj;\n  }\n  /**\n   * Adds a new DataSource object to the list of datasources to synchronize.\n   * note: don\'t forget to call reset() to be sure to re-init the synchronizer internal properties.\n   * @param {Datasource} dataSource - the new datasource to add\n   * @param [lazy=false] lazy - add to current running synchronizer\n   */\n\n\n  async addDataSource(dataSource, lazy = false) {\n    if (lazy) {\n      return new Promise(async resolve => {\n        const dataSourceForWorker = await this.createDataSourceForWorker(dataSource);\n        this.dataSources.push(dataSource);\n        await this.postMessage({\n          message: \'add\',\n          dataSources: [dataSourceForWorker]\n        }, resolve);\n      });\n    } else {\n      this.dataSources.push(dataSource);\n    }\n  }\n  /**\n   * @param {String} dataSourceId - the dataSource id\n   * @param {Object} data - the data to push into the data synchronizer\n   */\n\n\n  async push(dataSourceId, data) {\n    return new Promise(async (resolve, reject) => {\n      if (this.synchronizerWorker !== null) {\n        await this.postMessage({\n          type: \'data\',\n          dataSourceId: dataSourceId,\n          data: data\n        }, resolve);\n      }\n    });\n  }\n  /**\n   * Connects all dataSources\n   */\n\n\n  async connect() {\n    await this.checkInit();\n    await this.doConnect();\n  }\n\n  async checkInit() {\n    const that = this;\n    return new Promise(async (resolve, reject) => {\n      if (!Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(that.init)) {\n        that.init = that.initDataSources();\n      }\n\n      await that.init;\n      resolve();\n    });\n  }\n\n  async doConnect() {\n    for (let dataSource of this.dataSources) {\n      await dataSource.connect();\n    }\n  }\n  /**\n   * Disconnects all dataSources\n   */\n\n\n  async disconnect() {\n    await this.reset();\n\n    for (let dataSource of this.dataSources) {\n      await dataSource.disconnect();\n    }\n  }\n  /**\n   * Sets the replaySpeed\n   */\n\n\n  async setReplaySpeed(replaySpeed) {\n    return new Promise(async resolve => {\n      this.replaySpeed = replaySpeed;\n      this.properties.replaySpeed = replaySpeed;\n      await this.postMessage({\n        message: \'replay-speed\',\n        replaySpeed: replaySpeed\n      }, resolve);\n    });\n  }\n  /**\n   * Sets the data source time range\n   * @param {String} startTime - the startTime (in date ISO)\n   * @param {String} endTime - the startTime (in date ISO)\n   * @param {Number} replaySpeed - the replay speed\n   * @param {boolean} reconnect - reconnect if was connected\n   * @param {Mode} mode - default dataSource mode\n   */\n\n\n  async setTimeRange(startTime = this.getStartTime(), endTime = this.getEndTime(), replaySpeed = this.getReplaySpeed(), reconnect = false, mode = this.mode) {\n    return new Promise(async resolve => {\n      this.properties.startTime = startTime;\n      this.properties.endTime = endTime;\n      await this.postMessage({\n        message: \'update-properties\',\n        mode: mode,\n        replaySpeed: replaySpeed,\n        startTime: startTime,\n        endTime: endTime\n      }, () => {\n        for (let ds of this.dataSources) {\n          ds.setTimeRange(startTime, endTime, replaySpeed, reconnect, mode);\n        }\n\n        this.mode = mode;\n        resolve();\n      });\n    });\n  }\n\n  async updateProperties(properties) {\n    for (let ds of this.dataSources) {\n      ds.updateProperties(properties);\n    }\n  }\n  /**\n   * Resets reference time\n   */\n\n\n  async reset() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      await this.postMessage({\n        message: \'reset\'\n      }, resolve);\n    });\n  }\n\n  async getCurrentTime() {\n    return new Promise(async resolve => {\n      await this.postMessage({\n        message: \'current-time\'\n      }, resolve);\n    });\n  }\n  /**\n   * Connect the dataSource then the protocol will be opened as well.\n   */\n\n\n  async isConnected() {\n    for (let ds of this.dataSources) {\n      if (!(await ds.isConnected())) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  async postMessage(props, Fn, checkInit = true) {\n    if (checkInit) {\n      await this.checkInit();\n    }\n\n    const messageId = Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* randomUUID */ "m"])();\n    this.synchronizerWorker.postMessage({ ...props,\n      messageId: messageId\n    });\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "k"])(Fn)) {\n      this.messagesMap[messageId] = Fn;\n    }\n  }\n\n  handleWorkerMessage() {\n    this.synchronizerWorker.onmessage = event => {\n      const id = event.data.messageId;\n\n      if (id in this.messagesMap) {\n        this.messagesMap[id](event.data.data);\n        delete this.messagesMap[id];\n      }\n    };\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (DataSynchronizer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS90aW1lc3luYy9EYXRhU3luY2hyb25pemVyLmpzPzYxNGQiXSwibmFtZXMiOlsiRGF0YVN5bmNocm9uaXplciIsImNvbnN0cnVjdG9yIiwicHJvcGVydGllcyIsImFzc2VydERlZmluZWQiLCJzdGFydFRpbWUiLCJidWZmZXJpbmdUaW1lIiwiY3VycmVudFRpbWUiLCJEYXRlIiwibm93IiwiaWQiLCJyYW5kb21VVUlEIiwiZGF0YVNvdXJjZXMiLCJyZXBsYXlTcGVlZCIsInRpbWVyUmVzb2x1dGlvbiIsIm1hc3RlclRpbWVSZWZyZXNoUmF0ZSIsIm1vZGUiLCJNb2RlIiwiUkVQTEFZIiwiaW5pdGlhbGl6ZWQiLCJlbmRUaW1lIiwiZXZlbnRTdWJzY3JpcHRpb25NYXAiLCJtZXNzYWdlc01hcCIsImdldFRvcGljSWQiLCJEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyIsImdldFRpbWVUb3BpY0lkIiwiVElNRV9TWU5DSFJPTklaRVJfVE9QSUMiLCJpbml0RXZlbnRTdWJzY3JpcHRpb24iLCJCcm9hZGNhc3RDaGFubmVsIiwib25tZXNzYWdlIiwibWVzc2FnZSIsInR5cGUiLCJkYXRhIiwiaSIsImxlbmd0aCIsImdldFN0YXJ0VGltZSIsImdldEVuZFRpbWUiLCJnZXRNaW5UaW1lIiwiaXNEZWZpbmVkIiwibWluVGltZSIsImdldE1heFRpbWUiLCJtYXhUaW1lIiwic2V0TWluVGltZSIsInRpbWUiLCJkcyIsInNldE1heFRpbWUiLCJnZXRSZXBsYXlTcGVlZCIsInRlcm1pbmF0ZSIsInN5bmNocm9uaXplcldvcmtlciIsImRhdGFTb3VyY2UiLCJzdWJzY3JpYmUiLCJmbiIsImV2ZW50VHlwZXMiLCJwdXNoIiwiaW5pdERhdGFTb3VyY2VzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJkYXRhU291cmNlc0ZvcldvcmtlciIsImRhdGFTb3VyY2VGb3JXb3JrZXIiLCJjcmVhdGVEYXRhU291cmNlRm9yV29ya2VyIiwiRGF0YVN5bmNocm9uaXplcldvcmtlciIsImhhbmRsZVdvcmtlck1lc3NhZ2UiLCJwb3N0TWVzc2FnZSIsInRvcGljcyIsImJpbmQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJvYmoiLCJ0aW1lT3V0IiwibmFtZSIsInNldERhdGFTeW5jaHJvbml6ZXIiLCJleCIsImFkZERhdGFTb3VyY2UiLCJsYXp5IiwiZGF0YVNvdXJjZUlkIiwiY29ubmVjdCIsImNoZWNrSW5pdCIsImRvQ29ubmVjdCIsInRoYXQiLCJpbml0IiwiZGlzY29ubmVjdCIsInJlc2V0Iiwic2V0UmVwbGF5U3BlZWQiLCJzZXRUaW1lUmFuZ2UiLCJyZWNvbm5lY3QiLCJ1cGRhdGVQcm9wZXJ0aWVzIiwiZ2V0Q3VycmVudFRpbWUiLCJpc0Nvbm5lY3RlZCIsInByb3BzIiwiRm4iLCJtZXNzYWdlSWQiLCJldmVudCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLGdCQUFOLENBQXVCO0VBQ25CO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDSUMsV0FBVyxDQUFDQyxVQUFELEVBQWE7SUFDcEJDLDZFQUFhLENBQUNELFVBQVUsQ0FBQ0UsU0FBWixFQUF1QixXQUF2QixDQUFiO0lBQ0FELDZFQUFhLENBQUNELFVBQVUsQ0FBQ0UsU0FBWixFQUF1QixTQUF2QixDQUFiO0lBQ0EsS0FBS0MsYUFBTCxHQUFxQixJQUFyQixDQUhvQixDQUdPOztJQUMzQixLQUFLQyxXQUFMLEdBQW1CQyxJQUFJLENBQUNDLEdBQUwsRUFBbkI7SUFDQSxLQUFLQyxFQUFMLEdBQVVDLDBFQUFVLEVBQXBCO0lB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RiwwRUFBVSxFQUE1QjtJQUNBLEtBQUtxQyxrQkFBTCxDQUF3QmUsV0FBeEIsQ0FBb0MsRUFDaEMsR0FBRzJCLEtBRDZCO01BRWhDRSxTQUFTLEVBQUVBO0lBRnFCLENBQXBDOztJQUlBLElBQUd0RCx5RUFBUyxDQUFDcUQsRUFBRCxDQUFaLEVBQWtCO01BQ2QsS0FBS3JFLFdBQUwsQ0FBaUJzRSxTQUFqQixJQUE4QkQsRUFBOUI7SUFDSDtFQUNKOztFQUVEN0IsbUJBQW1CLEdBQUc7SUFDbEIsS0FBS2Qsa0JBQUwsQ0FBd0JuQixTQUF4QixHQUFxQ2dFLEtBQUQsSUFBVztNQUMzQyxNQUFNbkYsRUFBRSxHQUFHbUYsS0FBSyxDQUFDN0QsSUFBTixDQUFXNEQsU0FBdEI7O01BQ0EsSUFBR2xGLEVBQUUsSUFBSSxLQUFLWSxXQUFkLEVBQTBCO1FBQ3RCLEtBQUtBLFdBQUwsQ0FBaUJaLEVBQWpCLEVBQXFCbUYsS0FBSyxDQUFDN0QsSUFBTixDQUFXQSxJQUFoQztRQUNBLE9BQU8sS0FBS1YsV0FBTCxDQUFpQlosRUFBakIsQ0FBUDtNQUNIO0lBQ0osQ0FORDtFQU9IOztBQXhZa0I7O0FBMFlQVCx5RUFBaEIiLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIwIE1hdGhpZXUgRGhhaW5hdXQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmltcG9ydCB7YXNzZXJ0RGVmaW5lZCwgaXNEZWZpbmVkLCByYW5kb21VVUlEfSBmcm9tIFwiLi4vdXRpbHMvVXRpbHMuanNcIjtcbmltcG9ydCBEYXRhU3luY2hyb25pemVyV29ya2VyIGZyb20gJy4vRGF0YVN5bmNocm9uaXplci53b3JrZXIuanMnO1xuaW1wb3J0IHtEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQywgVElNRV9TWU5DSFJPTklaRVJfVE9QSUN9IGZyb20gXCIuLi9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7TW9kZX0gZnJvbSBcIi4uL2RhdGFzb3VyY2UvTW9kZVwiO1xuXG5jbGFzcyBEYXRhU3luY2hyb25pemVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIFRoZSBkYXRhU3luY2hyb25pemVyLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIHByb3BlcnR5IG9mIHRoZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMucmVwbGF5U3BlZWQ9MV0gLSByZXBsYXlTcGVlZCB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy50aW1lclJlc29sdXRpb249NV0gLSBpbnRlcnZhbCBpbiB3aGljaCBkYXRhIGlzIHBsYXllZCAoaW4gbWlsbGlzZWNvbmRzKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy5tYXN0ZXJUaW1lUmVmcmVzaFJhdGU9MjUwXSAtIGludGVydmFsIGluIHdoaWNoIHRpbWUgdmFsdWUgaXMgc2VuZCB0aHJvdWdoIGJyb2FkY2FzdCBjaGFubmVsIChpbiBtaWxsaXNlY29uZHMpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLm1vZGU9TW9kZS5SRVBMQVldIC0gbW9kZSBvZiB0aGUgZGF0YSBzeW5jaHJvbml6ZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5zdGFydFRpbWUgLSBzdGFydCB0aW1lIG9mIHRoZSB0ZW1wb3JhbCBydW5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5lbmRUaW1lIC0gZW5kIHRpbWUgb2YgdGhlIHRlbXBvcmFsIHJ1blxuICAgICAqIEBwYXJhbSB7RGF0YXNvdXJjZVtdfSBwcm9wZXJ0aWVzLmRhdGFTb3VyY2VzIC0gdGhlIGRhdGFTb3VyY2UgYXJyYXlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGFzc2VydERlZmluZWQocHJvcGVydGllcy5zdGFydFRpbWUsICdzdGFydFRpbWUnKTtcbiAgICAgICAgYXNzZXJ0RGVmaW5lZChwcm9wZXJ0aWVzLnN0YXJ0VGltZSwgJ2VuZFRpbWUnKTtcbiAgICAgICAgdGhpcy5idWZmZXJpbmdUaW1lID0gMTAwMDsgLy8gZGVmYXVsdFxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5pZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgICAgdGhpcy5kYXRhU291cmNlcyA9IHByb3BlcnRpZXMuZGF0YVNvdXJjZXMgfHwgW107XG4gICAgICAgIHRoaXMucmVwbGF5U3BlZWQgPSBwcm9wZXJ0aWVzLnJlcGxheVNwZWVkIHx8IDE7XG4gICAgICAgIHRoaXMudGltZXJSZXNvbHV0aW9uID0gcHJvcGVydGllcy50aW1lclJlc29sdXRpb24gfHwgNTtcbiAgICAgICAgdGhpcy5tYXN0ZXJUaW1lUmVmcmVzaFJhdGUgPSBwcm9wZXJ0aWVzLm1hc3RlclRpbWVSZWZyZXNoUmF0ZSB8fCAyNTAsXG4gICAgICAgIHRoaXMubW9kZSA9IHByb3BlcnRpZXMubW9kZSB8fCBNb2RlLlJFUExBWTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnJlcGxheVNwZWVkID0gdGhpcy5yZXBsYXlTcGVlZDtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnN0YXJ0VGltZSA9IHByb3BlcnRpZXMuc3RhcnRUaW1lO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuZW5kVGltZSA9IHByb3BlcnRpZXMuZW5kVGltZTtcblxuICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwID0ge307XG4gICAgICAgIHRoaXMubWVzc2FnZXNNYXAgPSB7fTtcblxuICAgIH1cblxuICAgIGdldFRvcGljSWQoKSB7XG4gICAgICAgIHJldHVybiBEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyt0aGlzLmlkO1xuICAgIH1cblxuICAgIGdldFRpbWVUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gVElNRV9TWU5DSFJPTklaRVJfVE9QSUMrdGhpcy5pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGluaXRFdmVudFN1YnNjcmlwdGlvbigpIHtcbiAgICAgICAgLy8gbGlzdGVuIGZvciBFdmVudHMgdG8gY2FsbGJhY2sgdG8gc3Vic2NyaXB0aW9uc1xuICAgICAgICBuZXcgQnJvYWRjYXN0Q2hhbm5lbCh0aGlzLmdldFRvcGljSWQoKSkub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgICAgIGlmKHR5cGUgaW4gdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCl7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aSA8IHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbdHlwZV0ubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwW3R5cGVdW2ldKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ldyBCcm9hZGNhc3RDaGFubmVsKHRoaXMuZ2V0VGltZVRvcGljSWQoKSkub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgICAgIGlmKHR5cGUgaW4gdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCl7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aSA8IHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbdHlwZV0ubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwW3R5cGVdW2ldKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXJ0VGltZSBvZiB0aGUgZmlyc3QgRGF0YVNvdXJjZSBvYmpldFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gc3RhcnRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0U3RhcnRUaW1lKCkge1xuICAgICAgICBpZih0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTb3VyY2VzWzBdLnByb3BlcnRpZXMuc3RhcnRUaW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZFRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRFbmRUaW1lKCkge1xuICAgICAgICBpZih0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTb3VyY2VzWzBdLnByb3BlcnRpZXMuZW5kVGltZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtaW5UaW1lIG9mIHRoZSBmaXJzdCBEYXRhU291cmNlIG9iamV0XG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBzdGFydFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRNaW5UaW1lKCkge1xuICAgICAgICBpZih0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0RlZmluZWQodGhpcy5kYXRhU291cmNlc1swXS5wcm9wZXJ0aWVzLm1pblRpbWUpID8gdGhpcy5kYXRhU291cmNlc1swXS5wcm9wZXJ0aWVzLm1pblRpbWUgOiB0aGlzLmRhdGFTb3VyY2VzWzBdLnByb3BlcnRpZXMuc3RhcnRUaW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1heFRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRNYXhUaW1lKCkge1xuICAgICAgICBpZih0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0RlZmluZWQodGhpcy5kYXRhU291cmNlc1swXS5wcm9wZXJ0aWVzLm1heFRpbWUpID8gdGhpcy5kYXRhU291cmNlc1swXS5wcm9wZXJ0aWVzLm1heFRpbWUgOiB0aGlzLmRhdGFTb3VyY2VzWzBdLnByb3BlcnRpZXMuZW5kVGltZTtcbiAgICB9XG5cbiAgICBzZXRNaW5UaW1lKHRpbWUpIHtcbiAgICAgICAgZm9yKGxldCBkcyBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBkcy5zZXRNaW5UaW1lKHRpbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0TWF4VGltZSh0aW1lKSB7XG4gICAgICAgIGZvcihsZXQgZHMgb2YgdGhpcy5kYXRhU291cmNlcykge1xuICAgICAgICAgICAgZHMuc2V0TWF4VGltZSh0aW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlcGxheVNwZWVkXG4gICAgICogQHJldHVybnMge051bWJlcn0gLSB0aGUgcmVwbGF5IHNwZWVkXG4gICAgICovXG4gICAgZ2V0UmVwbGF5U3BlZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxheVNwZWVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZSB0aGUgY29ycmVzcG9uZGluZyBydW5uaW5nIFdlYldvcmtlciBieSBjYWxsaW5nIHRlcm1pbmF0ZSgpIG9uIGl0LlxuICAgICAqL1xuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgaWYodGhpcy5zeW5jaHJvbml6ZXJXb3JrZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc3luY2hyb25pemVyV29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZXJXb3JrZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBkYXRhU291cmNlLnRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGZuLCBldmVudFR5cGVzKSB7XG4gICAgICAgIC8vIGFzc29jaWF0ZSBmdW5jdGlvbiB0byBldmVudFR5cGVcbiAgICAgICAgZm9yKGxldCBpPTA7aSA8IGV2ZW50VHlwZXMubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgaWYgKCEoZXZlbnRUeXBlc1tpXSBpbiB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbZXZlbnRUeXBlc1tpXV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbZXZlbnRUeXBlc1tpXV0ucHVzaChmbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLy0tLS0tLS0tLS0tIEFTWU5DSFJPTk9VUyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0vL1xuXG4gICAgYXN5bmMgaW5pdERhdGFTb3VyY2VzKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhU291cmNlc0ZvcldvcmtlciA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCBtb2RlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGRhdGFTb3VyY2Ugb2YgdGhpcy5kYXRhU291cmNlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhU291cmNlRm9yV29ya2VyID0gYXdhaXQgdGhpcy5jcmVhdGVEYXRhU291cmNlRm9yV29ya2VyKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlc0Zvcldvcmtlci5wdXNoKGRhdGFTb3VyY2VGb3JXb3JrZXIpO1xuICAgICAgICAgICAgICAgICAgICBtb2RlID0gZGF0YVNvdXJjZS5tb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlciA9IG5ldyBEYXRhU3luY2hyb25pemVyV29ya2VyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVXb3JrZXJNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbml0JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZXM6IGRhdGFTb3VyY2VzRm9yV29ya2VyLFxuICAgICAgICAgICAgICAgICAgICByZXBsYXlTcGVlZDogdGhpcy5yZXBsYXlTcGVlZCxcbiAgICAgICAgICAgICAgICAgICAgdGltZXJSZXNvbHV0aW9uOiB0aGlzLnRpbWVyUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgbWFzdGVyVGltZVJlZnJlc2hSYXRlOiB0aGlzLm1hc3RlclRpbWVSZWZyZXNoUmF0ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lOiB0aGlzLnByb3BlcnRpZXMuc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICBlbmRUaW1lOiB0aGlzLnByb3BlcnRpZXMuZW5kVGltZSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgICAgICAgICAgICAgICAgdG9waWNzOiAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRUb3BpY0lkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdldFRpbWVUb3BpY0lkKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRFdmVudFN1YnNjcmlwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSBkYXRhU291cmNlXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlRGF0YVNvdXJjZUZvcldvcmtlcihkYXRhU291cmNlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgICAgICAgIGJ1ZmZlcmluZ1RpbWU6IGRhdGFTb3VyY2UucHJvcGVydGllcy5idWZmZXJpbmdUaW1lIHx8IDAsXG4gICAgICAgICAgICB0aW1lT3V0OiBkYXRhU291cmNlLnByb3BlcnRpZXMudGltZU91dCB8fCAwLFxuICAgICAgICAgICAgaWQ6IGRhdGFTb3VyY2UuaWQsXG4gICAgICAgICAgICBuYW1lOiBkYXRhU291cmNlLm5hbWVcbiAgICAgICAgfTtcbiAgICAgICAgLy8gYmluZCBkYXRhU291cmNlIGRhdGEgb250byBkYXRhU3luY2hyb25pemVyIGRhdGFcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGRhdGFTb3VyY2Uuc2V0RGF0YVN5bmNocm9uaXplcih0aGlzKTtcbiAgICAgICAgICAgIGRhdGFTb3VyY2UucHJvcGVydGllcy5yZXBsYXlTcGVlZCA9IHRoaXMucmVwbGF5U3BlZWQ7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHNldCB0aGUgc3luY2hyb25pemVyIHRvIHRoaXMgRGF0YVNvdXJjZVwiLCBleCk7XG4gICAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgICAvKipcbiAgICAgICogQWRkcyBhIG5ldyBEYXRhU291cmNlIG9iamVjdCB0byB0aGUgbGlzdCBvZiBkYXRhc291cmNlcyB0byBzeW5jaHJvbml6ZS5cbiAgICAgICogbm90ZTogZG9uJ3QgZm9yZ2V0IHRvIGNhbGwgcmVzZXQoKSB0byBiZSBzdXJlIHRvIHJlLWluaXQgdGhlIHN5bmNocm9uaXplciBpbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgKiBAcGFyYW0ge0RhdGFzb3VyY2V9IGRhdGFTb3VyY2UgLSB0aGUgbmV3IGRhdGFzb3VyY2UgdG8gYWRkXG4gICAgICAqIEBwYXJhbSBbbGF6eT1mYWxzZV0gbGF6eSAtIGFkZCB0byBjdXJyZW50IHJ1bm5pbmcgc3luY2hyb25pemVyXG4gICAgICAqL1xuICAgIGFzeW5jIGFkZERhdGFTb3VyY2UoZGF0YVNvdXJjZSwgbGF6eSA9IGZhbHNlKSB7XG4gICAgICAgIGlmKGxhenkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhU291cmNlRm9yV29ya2VyID0gYXdhaXQgdGhpcy5jcmVhdGVEYXRhU291cmNlRm9yV29ya2VyKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZXMucHVzaChkYXRhU291cmNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2FkZCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VzOiBbZGF0YVNvdXJjZUZvcldvcmtlcl1cbiAgICAgICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlcy5wdXNoKGRhdGFTb3VyY2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGFTb3VyY2VJZCAtIHRoZSBkYXRhU291cmNlIGlkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSB0aGUgZGF0YSB0byBwdXNoIGludG8gdGhlIGRhdGEgc3luY2hyb25pemVyXG4gICAgICovXG4gICAgYXN5bmMgcHVzaChkYXRhU291cmNlSWQsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN5bmNocm9uaXplcldvcmtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGF0YScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJZDogZGF0YVNvdXJjZUlkLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbm5lY3RzIGFsbCBkYXRhU291cmNlc1xuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3QoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgIGF3YWl0IHRoaXMuZG9Db25uZWN0KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgY2hlY2tJbml0KCkge1xuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmKCFpc0RlZmluZWQodGhhdC5pbml0KSkge1xuICAgICAgICAgICAgICAgIHRoYXQuaW5pdCA9IHRoYXQuaW5pdERhdGFTb3VyY2VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGF0LmluaXQ7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGRvQ29ubmVjdCgpIHtcbiAgICAgICAgZm9yIChsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLmNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIGFsbCBkYXRhU291cmNlc1xuICAgICAqL1xuICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVzZXQoKTtcbiAgICAgICAgZm9yIChsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHJlcGxheVNwZWVkXG4gICAgICovXG4gICAgYXN5bmMgc2V0UmVwbGF5U3BlZWQocmVwbGF5U3BlZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXBsYXlTcGVlZCA9IHJlcGxheVNwZWVkO1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnJlcGxheVNwZWVkID0gcmVwbGF5U3BlZWQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAncmVwbGF5LXNwZWVkJyxcbiAgICAgICAgICAgICAgICByZXBsYXlTcGVlZDogcmVwbGF5U3BlZWQsXG4gICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGF0YSBzb3VyY2UgdGltZSByYW5nZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydFRpbWUgLSB0aGUgc3RhcnRUaW1lIChpbiBkYXRlIElTTylcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5kVGltZSAtIHRoZSBzdGFydFRpbWUgKGluIGRhdGUgSVNPKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByZXBsYXlTcGVlZCAtIHRoZSByZXBsYXkgc3BlZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlY29ubmVjdCAtIHJlY29ubmVjdCBpZiB3YXMgY29ubmVjdGVkXG4gICAgICogQHBhcmFtIHtNb2RlfSBtb2RlIC0gZGVmYXVsdCBkYXRhU291cmNlIG1vZGVcbiAgICAgKi9cbiAgICBhc3luYyBzZXRUaW1lUmFuZ2Uoc3RhcnRUaW1lPSB0aGlzLmdldFN0YXJ0VGltZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lPSB0aGlzLmdldEVuZFRpbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3BlZWQ9IHRoaXMuZ2V0UmVwbGF5U3BlZWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVjb25uZWN0PSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgbW9kZT0gdGhpcy5tb2RlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5zdGFydFRpbWUgPSBzdGFydFRpbWU7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMuZW5kVGltZSA9IGVuZFRpbWU7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICd1cGRhdGUtcHJvcGVydGllcycsXG4gICAgICAgICAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgICAgICAgICAgICByZXBsYXlTcGVlZDogcmVwbGF5U3BlZWQsXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lOiBzdGFydFRpbWUsXG4gICAgICAgICAgICAgICAgZW5kVGltZTogZW5kVGltZVxuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGRzIG9mIHRoaXMuZGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZHMuc2V0VGltZVJhbmdlKHN0YXJ0VGltZSwgZW5kVGltZSwgcmVwbGF5U3BlZWQsIHJlY29ubmVjdCwgbW9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgICAgICBmb3IgKGxldCBkcyBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBkcy51cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyByZWZlcmVuY2UgdGltZVxuICAgICAqL1xuICAgIGFzeW5jIHJlc2V0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ3Jlc2V0J1xuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEN1cnJlbnRUaW1lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnY3VycmVudC10aW1lJ1xuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdGhlIGRhdGFTb3VyY2UgdGhlbiB0aGUgcHJvdG9jb2wgd2lsbCBiZSBvcGVuZWQgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBhc3luYyBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgZm9yIChsZXQgZHMgb2YgdGhpcy5kYXRhU291cmNlcykge1xuICAgICAgICAgICAgaWYgKCEoYXdhaXQgZHMuaXNDb25uZWN0ZWQoKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgYXN5bmMgcG9zdE1lc3NhZ2UocHJvcHMsIEZuLCBjaGVja0luaXQgPSB0cnVlKSB7XG4gICAgICAgIGlmKGNoZWNrSW5pdCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVyV29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlSWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKGlzRGVmaW5lZChGbikpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNNYXBbbWVzc2FnZUlkXSA9IEZuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlV29ya2VyTWVzc2FnZSgpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZXJXb3JrZXIub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGV2ZW50LmRhdGEubWVzc2FnZUlkO1xuICAgICAgICAgICAgaWYoaWQgaW4gdGhpcy5tZXNzYWdlc01hcCl7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc01hcFtpZF0oZXZlbnQuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5tZXNzYWdlc01hcFtpZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCAgRGF0YVN5bmNocm9uaXplcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///21\n')},function(module,exports,__webpack_require__){eval('module.exports = function () {\n  return new Worker(__webpack_require__.p + "7b567816bb9061e6d28e.worker.js");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS90aW1lc3luYy9EYXRhU3luY2hyb25pemVyLndvcmtlci5qcz81ZjMwIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJXb3JrZXIiLCJfX3dlYnBhY2tfcHVibGljX3BhdGhfXyJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixZQUFXO0VBQzFCLE9BQU8sSUFBSUMsTUFBSixDQUFXQyxxQkFBdUIsR0FBRyxnQ0FBckMsQ0FBUDtBQUNELENBRkQiLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiN2I1Njc4MTZiYjkwNjFlNmQyOGUud29ya2VyLmpzXCIpO1xufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///22\n')},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/leaflet/dist/leaflet-src.js\nvar leaflet_src = __webpack_require__(1);\nvar leaflet_src_default = /*#__PURE__*/__webpack_require__.n(leaflet_src);\n\n// EXTERNAL MODULE: ./node_modules/leaflet/dist/leaflet.css\nvar leaflet = __webpack_require__(26);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/View.js + 2 modules\nvar View = __webpack_require__(13);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/map/MapView.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * This class is an abstract class in charge of handling common Map operations.\n * @extends View\n */\n\nclass MapView_MapView extends View["a" /* default */] {\n  constructor(properties) {\n    super(properties); // map Layer id to array of corresponding markers\n\n    this.layerIdToMarkers = {}; // map Layer id to array of corresponding polylines\n\n    this.layerIdToPolylines = {}; // map Layer id to array of corresponding polylines\n\n    this.layerIdToEllipsoids = {}; // map Layer id to array of corresponding polygons\n\n    this.layerIdToPolygon = {}; // map Layer id to array of corresponding frustums\n\n    this.layerIdToFrustum = {}; // map Layer id to array of corresponding draping\n\n    this.layerIdToDrapedImage = {};\n  }\n\n  async setData(dataSourceId, data) {\n    const values = data.values;\n\n    for (let i = 0; i < values.length; i++) {\n      const d = values[i];\n\n      if (data.type === \'marker\') {\n        this.updateMarker(d);\n      } else if (data.type === \'polyline\') {\n        this.updatePolyline(d);\n      } else if (data.type === \'drapedImage\') {\n        this.updateDrapedImage(d);\n      } else if (data.type === \'ellipse\') {\n        this.updateEllipse(d);\n      } else if (data.type === \'polygon\') {\n        this.updatePolygon(d);\n      } else if (data.type === \'coplanarPolygon\') {\n        this.updateCoPlanarPolygon(d);\n      } else if (data.type === \'frustum\') {\n        this.updateFrustum(d);\n      }\n    }\n  }\n\n  async addPolygonToLayer(props, polygon) {\n    const currentLayer = this.getLayer(props); // associate the list of markers owning by a specific marker\n\n    if (!(props.id in this.layerIdToPolygon)) {\n      this.layerIdToPolygon[props.id] = {};\n    }\n\n    this.layerIdToPolygon[props.id][props.polygonId] = polygon;\n  }\n  /**\n   * Associate a markerId to a Layer for a fast lookup\n   * @protected\n   * @param {PointMarkerLayer.props} layer - the Layer object\n   * @param {Object} markerObject - the Map marker object\n   */\n\n\n  async addMarkerToLayer(props, markerObject) {\n    const currentLayer = this.getLayer(props); // associate the list of markers owning by a specific marker\n\n    if (!(props.id in this.layerIdToMarkers)) {\n      this.layerIdToMarkers[props.id] = {};\n    }\n\n    this.layerIdToMarkers[props.id][props.markerId] = markerObject;\n  }\n  /**\n   * Associate a polylineId to a Layer for a fast lookup\n   * @protected\n   * @param {Polyline.props} layer - the Layer object\n   * @param {Object} polylineObject - the Map polyline object\n   */\n\n\n  async addPolylineToLayer(props, polylineObject) {\n    // associate the list of markers owning by a specific marker\n    if (!(props.id in this.layerIdToPolylines)) {\n      this.layerIdToPolylines[props.id] = {};\n    }\n\n    this.layerIdToPolylines[props.id][props.polylineId] = polylineObject;\n  }\n  /**\n   * Associate a ellipseId to a Layer for a fast lookup\n   * @protected\n   * @param {Ellipse.props} layer - the Layer object\n   * @param {Object} ellipseObject - the Map ellipse object\n   */\n\n\n  async addEllipseToLayer(props, ellipseObject) {\n    // associate the list of markers owning by a specific marker\n    if (!(props.id in this.layerIdToEllipsoids)) {\n      this.layerIdToEllipsoids[props.id] = {};\n    }\n\n    this.layerIdToEllipsoids[props.id][props.ellipseId] = ellipseObject;\n  }\n  /**\n   * Associate a drapedImageId to a Layer for a fast lookup\n   * @protected\n   * @param {ImageDraping.props} layer - the Layer object\n   * @param {Object} drapedImageObject - the Map drapedImage object\n   */\n\n\n  async addDrapedImageToLayer(props, drapedImageObject) {\n    // associate the list of markers owning by a specific marker\n    if (!(props.id in this.layerIdToDrapedImage)) {\n      this.layerIdToDrapedImage[props.id] = {};\n    }\n\n    this.layerIdToDrapedImage[props.id][props.drapedImageId] = drapedImageObject;\n  }\n\n  async addFrustumToLayer(props, frustum) {\n    const currentLayer = this.getLayer(props); // associate the list of markers owning by a specific marker\n\n    if (!(props.id in this.layerIdToFrustum)) {\n      this.layerIdToFrustum[props.id] = {};\n    }\n\n    this.layerIdToFrustum[props.id][props.frustumId] = frustum;\n  }\n\n  getPolygons() {\n    const array = [];\n\n    for (let id in this.layerIdToPolygon) {\n      for (let polygonId in this.layerIdToPolygon[id]) {\n        array.push(this.layerIdToPolygon[id][polygonId]);\n      }\n    }\n\n    return array;\n  }\n\n  getPolygon(props) {\n    if (!(props.id in this.layerIdToPolygon)) {\n      return null;\n    }\n\n    return this.layerIdToPolygon[props.id][props.polygonId];\n  }\n  /**\n   * Get the markerId associate to the Layer\n   * @protected\n   * @param {PointMarkerLayer.props} props - the Layer Object\n   */\n\n\n  getMarker(props) {\n    if (!(props.id in this.layerIdToMarkers)) {\n      return null;\n    }\n\n    return this.layerIdToMarkers[props.id][props.markerId];\n  }\n  /**\n   * Get all markers contained in this view\n   * @protected\n   */\n\n\n  getMarkers() {\n    const array = [];\n\n    for (let id in this.layerIdToMarkers) {\n      for (let markerId in this.layerIdToMarkers[id]) {\n        array.push(this.layerIdToMarkers[id][markerId]);\n      }\n    }\n\n    return array;\n  }\n  /**\n   * Get all polylines contained in this view\n   * @protected\n   */\n\n\n  getPolylines() {\n    const array = [];\n\n    for (let id in this.layerIdToPolylines) {\n      for (let polylineId in this.layerIdToPolylines[id]) {\n        array.push(this.layerIdToPolylines[id][polylineId]);\n      }\n    }\n\n    return array;\n  }\n  /**\n   * Get all ellpsoids contained in this view\n   * @protected\n   */\n\n\n  getEllipsoids() {\n    const array = [];\n\n    for (let id in this.layerIdToEllipsoids) {\n      for (let ellipseId in this.layerIdToEllipsoids[id]) {\n        array.push(this.layerIdToEllipsoids[id][ellipseId]);\n      }\n    }\n\n    return array;\n  }\n  /**\n   * Get the ellipse associate to the Layer\n   * @protected\n   * @param {Ellipse.props} layer - the Layer Object\n   */\n\n\n  getPolyline(props) {\n    if (!(props.id in this.layerIdToEllipsoids)) {\n      return null;\n    }\n\n    return this.layerIdToEllipsoids[props.id][props.ellipseId];\n  }\n  /**\n   * Get the ellipse associate to the Layer\n   * @protected\n   * @param {Ellipse.props} layer - the Layer Object\n   */\n\n\n  getEllipse(props) {\n    if (!(props.id in this.layerIdToEllipsoids)) {\n      return null;\n    }\n\n    return this.layerIdToEllipsoids[props.id][props.ellipseId];\n  }\n  /**\n   * Get the polyline associate to the Layer\n   * @protected\n   * @param {Polyline.props} layer - the Layer Object\n   */\n\n\n  getPolyline(props) {\n    if (!(props.id in this.layerIdToPolylines)) {\n      return null;\n    }\n\n    return this.layerIdToPolylines[props.id][props.polylineId];\n  }\n  /**\n   * Get the draped image associate to the Layer\n   * @protected\n   * @param {ImageDrapingLayer.props} layer - the Layer Object\n   */\n\n\n  getDrapedImage(props) {\n    if (!(props.id in this.layerIdToDrapedImage)) {\n      return null;\n    }\n\n    return this.layerIdToDrapedImage[props.id][props.drapedImageId];\n  }\n\n  getFrustums() {\n    const array = [];\n\n    for (let id in this.layerIdToFrustum) {\n      for (let frustumId in this.layerIdToFrustum[id]) {\n        array.push(this.layerIdToFrustum[id][frustumId]);\n      }\n    }\n\n    return array;\n  }\n\n  getFrustum(props) {\n    if (!(props.id in this.layerIdToFrustum)) {\n      return null;\n    }\n\n    return this.layerIdToFrustum[props.id][props.frustumId];\n  }\n  /**\n   * Get the Layer associated to its id\n   * @param {String} layerId - the id of the Layer\n   * @return {Layer} - the corresponding layer, null otherwise\n   */\n\n\n  getLayer(layerId) {\n    // find corresponding layer\n    for (let currentLayer of this.layers) {\n      if (currentLayer.props.id === layerId) {\n        return currentLayer;\n      }\n    }\n\n    return null;\n  }\n  /**\n   * Remove Corresponding Layer\n   * @param {Layer} layer - The layer object\n   */\n\n\n  removeAllFromLayer(layer) {\n    super.removeAllFromLayer(layer); // check for marker\n\n    this.removeMarkers(layer); // check for polylines\n\n    this.removePolylines(layer);\n    this.removeEllipsoids(layer);\n    this.removePolygons(layer);\n    this.removeFrustums(layer);\n  }\n\n  removePolygons(layer) {\n    if (Object(Utils["k" /* isDefined */])(layer.props.polygonId)) {\n      const polygonMap = this.layerIdToPolygon[layer.props.id];\n\n      if (Object(Utils["k" /* isDefined */])(polygonMap)) {\n        for (let polygonId in polygonMap) {\n          const polygon = polygonMap[polygonId];\n          this.removePolygonFromLayer(polygon);\n        }\n      } // remove markers ids from Layer map\n\n\n      delete this.layerIdToPolygon[layer.props.id];\n    }\n  }\n  /**\n   * Remove the markers corresponding to a PointMarker Layer\n   * @param {PointMarkerLayer} layer - the layer to remove the markers from\n   */\n\n\n  removeMarkers(layer) {\n    if (Object(Utils["k" /* isDefined */])(layer.props.markerId)) {\n      const markersMap = this.layerIdToMarkers[layer.props.id];\n\n      if (Object(Utils["k" /* isDefined */])(markersMap)) {\n        for (let markerId in markersMap) {\n          const marker = markersMap[markerId];\n          this.removeMarkerFromLayer(marker);\n        }\n      } // remove markers ids from Layer map\n\n\n      delete this.layerIdToMarkers[layer.props.id];\n    }\n  }\n  /**\n   * Remove the ellipsoids corresponding to a EllipseLayer Layer\n   * @param {Ellipse} ellipse - the layer to remove the ellipsoids from\n   */\n\n\n  removeEllipsoids(ellipse) {\n    if (Object(Utils["k" /* isDefined */])(ellipse.props.ellipseId)) {\n      const ellipseMap = this.layerIdToEllipsoids[ellipse.props.id];\n\n      if (Object(Utils["k" /* isDefined */])(ellipseMap)) {\n        for (let ellipseId in ellipseMap) {\n          const ellipse = ellipseMap[ellipseId];\n          this.removeEllipseFromLayer(ellipse);\n        }\n      } // remove polylines ids from Layer map\n\n\n      delete this.layerIdToEllipsoids[ellipse.props.id];\n    }\n  }\n  /**\n   * Remove the polylines corresponding to a PolylineLayer Layer\n   * @param {Polyline} polyline - the layer to remove the polylines from\n   */\n\n\n  removePolylines(polyline) {\n    if (Object(Utils["k" /* isDefined */])(polyline.props.polylineId)) {\n      const polylinesMap = this.layerIdToPolylines[polyline.props.id];\n\n      if (Object(Utils["k" /* isDefined */])(polylinesMap)) {\n        for (let polylineId in polylinesMap) {\n          const polyline = polylinesMap[polylineId];\n          this.removePolylineFromLayer(polyline);\n        }\n      } // remove polylines ids from Layer map\n\n\n      delete this.layerIdToPolylines[polyline.props.id];\n    }\n  }\n  /**\n   * Remove the drapedImage corresponding to a ImageDraping Layer\n   * @param {ImageDraping} imageDraping - the layer to remove the drapedImage from\n   */\n\n\n  removeDrapedImages(drapedImage) {\n    if (Object(Utils["k" /* isDefined */])(drapedImage.props.drapedImageId)) {\n      const drapedImageMap = this.layerIdToDrapedImage[drapedImage.props.id];\n\n      if (Object(Utils["k" /* isDefined */])(drapedImageMap)) {\n        for (let drapedImageId in drapedImageMap) {\n          const drapedImage = drapedImageMap[drapedImageId];\n          this.removeDrapedImageFromLayer(drapedImage);\n        }\n      } // remove drapedImage ids from Layer map\n\n\n      delete this.layerIdToDrapedImage[drapedImage.props.id];\n    }\n  }\n  /**\n   * Remove the frustums corresponding to a Frustum Layer\n   * @param {FrustumLayer} polyline - the layer to remove the Frustum from\n   */\n\n\n  removeFrustums(layer) {\n    if (Object(Utils["k" /* isDefined */])(layer.props.frustumId)) {\n      const frustumMap = this.layerIdToFrustum[layer.props.id];\n\n      if (Object(Utils["k" /* isDefined */])(frustumMap)) {\n        for (let frustumId in frustumMap) {\n          const frustum = frustumMap[frustumId];\n          this.removeFrustumFromLayer(frustum);\n        }\n      } // remove markers ids from Layer map\n\n\n      delete this.layerIdToFrustum[layer.props.id];\n    }\n  }\n  /**\n   * Abstract method to remove a marker from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} marker - The Map marker object\n   */\n\n\n  removeMarkerFromLayer(marker) {}\n  /**\n   * Abstract method to remove a polyline from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} polyline - The Map polyline object\n   */\n\n\n  removePolylineFromLayer(polyline) {}\n  /**\n   * Abstract method to remove a draped image from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} drapedImage - The Map drapedImage object\n   */\n\n\n  removeDrapedImageFromLayer(drapedImage) {}\n  /**\n   * Abstract method to remove a polygon from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} polygon - The Map polygon object\n   */\n\n\n  removePolygonFromLayer(marker) {}\n  /**\n   * Method to call onLeftClick Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerLeftClick(markerId, markerObject, layer, event) {\n    if (Object(Utils["k" /* isDefined */])(layer.onLeftClick)) {\n      layer.onLeftClick.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Method to call onRightClick Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerRightClick(markerId, markerObject, layer, event) {\n    if (Object(Utils["k" /* isDefined */])(layer.onRightClick)) {\n      layer.onRightClick.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Method to call onMove Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerMove(markerId, markerObject, layer, event) {\n    if (Object(Utils["k" /* isDefined */])(layer.onMove)) {\n      layer.onMove.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Method to call onHover Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerHover(markerId, markerObject, layer, event) {\n    if (Object(Utils["k" /* isDefined */])(layer.onHover)) {\n      layer.onHover.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Gets the the Layer id from  a concatenated id\n   * @param {String} id - the concatenated such as layerId$markerId\n   * @return {null|String} the Layer id\n   */\n\n\n  getLayerId(id) {\n    const split = id.split(\'$\');\n\n    if (Object(Utils["k" /* isDefined */])(split) && split.length === 2) {\n      return split[0];\n    }\n\n    return null;\n  }\n  /**\n   * Gets the the Marker id from  a concatenated id\n   * @param {String} id - the concatenated such as layerId$markerId\n   * @return {null|String} the marker id\n   */\n\n\n  getMarkerId(id) {\n    if (!Object(Utils["k" /* isDefined */])(id)) {\n      return null;\n    }\n\n    const split = id.split(\'$\');\n\n    if (Object(Utils["k" /* isDefined */])(split) && split.length === 2) {\n      return split[1];\n    }\n\n    return null;\n  }\n\n  async updateMarker() {}\n\n  async updatePolyline() {}\n\n  async updatePolygon() {}\n\n  async updateEllipse() {}\n\n  async updateCoPlanarPolygon() {}\n\n  async updateDrapedImage() {}\n\n}\n\n/* harmony default export */ var map_MapView = (MapView_MapView);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/map/LeafletView.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n/**\n * This class is in charge of displaying GPS/orientation data by adding a marker to the Leaflet Map object.\n * @extends MapView\n * @example\n\n import LeafletView from \'core/ui/view/map/LeafletView.js\';\n\n let leafletMapView = new LeafletView({\n\tcontainer: \'leafletMap\',\n\tlayers: [\n\t  new PointMarkerLayer({\n      dataSourceId: gpsDataSource.id,\n      getLocation: (rec) => ({\n        x: rec.location.lon,\n        y: rec.location.lat,\n        z: rec.location.alt\n      }),\n      icon: \'./images/car-location.png\',\n      iconSize: [32, 64],\n      iconAnchor: [16, 65],\n      name: \'Car\',\n      description: \'GPS car Toulouse\'\n    })\n  ],\n\tautoZoomOnFirstMarker: true\n});\n */\n\nclass LeafletView_LeafletView extends map_MapView {\n  /**\n   * Create a View.\n   * @param {Object} [properties={}] - the properties of the view\n   * @param {String} properties.container - The div element to attach to\n   * @param {Object[]}  [properties.layers=[]] - The initial layers to add\n   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker\n   * @param {Boolean} [properties.follow=false] - follow the marker\n   * @param {Object} [properties.initialView] - Sets the view of the map (geographical center and zoom) with the given animation options. [See details]{@link https://leafletjs.com/reference-1.7.1.html#map-setview}\n   * @param {Object[]} [properties.overlayLayers] - [L.tileLayer]{@link https://leafletjs.com/reference-1.7.1.html#tilelayer-l-tilelayer} objects to use as overlay layer\n   * @param {Object[]} [properties.baseLayers] - [L.tileLayer]{@link https://leafletjs.com/reference-1.7.1.html#tilelayer-l-tilelayer} objects to use as base layer\n   *\n   */\n  constructor(properties) {\n    super({\n      supportedLayers: [\'marker\', \'draping\', \'polyline\', \'polygon\'],\n      ...properties\n    });\n    let cssClass = document.getElementById(this.divId).className;\n    document.getElementById(this.divId).setAttribute("class", cssClass + " " + this.css);\n  }\n\n  beforeAddingItems(options) {\n    // inits the map\n    this.initMap(options);\n  } //---------- MAP SETUP --------------//\n\n  /**\n   *\n   * @private\n   */\n\n\n  initMap(options) {\n    // #region snippet_leafletview_initial_view\n    let initialView = {\n      location: new leaflet_src_default.a.LatLng(0, 0),\n      zoom: 3\n    }; // #endregion snippet_leafletview_initial_view\n\n    this.first = true;\n    this.follow = false;\n    this.autoZoomOnFirstMarker = false;\n    let defaultLayers = this.getDefaultLayers();\n    let defaultLayer = defaultLayers[0].layer;\n    let baseLayers = {};\n    let overlays = {};\n    baseLayers[defaultLayers[0].name] = defaultLayers[0].layer;\n    overlays[defaultLayers[1].name] = defaultLayers[1].layer;\n\n    if (Object(Utils["k" /* isDefined */])(options)) {\n      if (Object(Utils["k" /* isDefined */])(options.initialView)) {\n        initialView = {\n          location: new leaflet_src_default.a.LatLng(options.initialView.lat, options.initialView.lon),\n          zoom: options.initialView.zoom\n        };\n      } // checks autoZoom\n\n\n      if (Object(Utils["k" /* isDefined */])(options.autoZoomOnFirstMarker)) {\n        this.autoZoomOnFirstMarker = options.autoZoomOnFirstMarker;\n      } // checks overlayers\n\n\n      if (Object(Utils["k" /* isDefined */])(options.overlayLayers)) {\n        overlays = options.overlayLayers;\n      } // checks baseLayer\n\n\n      if (Object(Utils["k" /* isDefined */])(options.baseLayers)) {\n        baseLayers = options.baseLayers;\n      }\n\n      if (Object(Utils["k" /* isDefined */])(options.follow)) {\n        this.follow = options.follow;\n      } // checks defaultLayer\n\n\n      if (Object(Utils["k" /* isDefined */])(options.defaultLayer)) {\n        defaultLayer = options.defaultLayer;\n      }\n    } // sets layers to map\n\n\n    this.map = new leaflet_src_default.a.Map(this.divId, {\n      fullscreenControl: true,\n      layers: defaultLayer\n    });\n    leaflet_src_default.a.control.layers(baseLayers, overlays).addTo(this.map);\n    this.map.setView(initialView.location, initialView.zoom); //this.initLayers();\n  }\n  /**\n   * Gets the list of default layers.\n   * @return {Array}\n   */\n\n\n  getDefaultLayers(options) {\n    let maxZoom = 22;\n\n    if (Object(Utils["k" /* isDefined */])(options) && options.maxZoom) {\n      maxZoom = options.maxZoom;\n    } // copyrights\n\n\n    let mbAttr = \'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors\',\n        mbUrl = \'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\';\n    let esriLink = \'<a href="http://www.esri.com/">Esri</a>\';\n    let esriWholink = \'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\'; // leaflet layers\n\n    let esriLayer = leaflet_src_default.a.tileLayer(\'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\', {\n      attribution: \'&copy; \' + esriLink + \', \' + esriWholink,\n      maxZoom: maxZoom,\n      maxNativeZoom: 19\n    });\n    let streets = leaflet_src_default.a.tileLayer(mbUrl, {\n      id: \'mapbox.streets\',\n      attribution: mbAttr,\n      maxZoom: maxZoom\n    });\n    return [{\n      name: "OSM Streets",\n      layer: streets\n    }, {\n      name: "Esri Satellite",\n      layer: esriLayer\n    }];\n  }\n  /**\n   * @private\n   */\n\n\n  initLayers() {\n    // create the tile layer with correct attribution\n    let osmUrl = \'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\';\n    let osmAttrib = \'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors\';\n    let osm = new leaflet_src_default.a.tileLayer(osmUrl, {\n      minZoom: 1,\n      maxZoom: 22,\n      attribution: osmAttrib\n    });\n    this.map.addLayer(osm);\n  }\n  /**\n   * Add a marker to the map.\n   * @param {PointMarkerLayer.properties} properties - the layer properties\n   * @return {Object} the the new created marker\n   */\n\n\n  addMarker(properties) {\n    Object(Utils["c" /* assertDefined */])(properties.location, \'location\'); //create marker\n\n    let marker = null;\n\n    if (properties.icon !== null) {\n      let markerIcon = leaflet_src_default.a.icon({\n        iconAnchor: properties.iconAnchor,\n        iconUrl: properties.icon,\n        iconSize: properties.iconSize\n      });\n      marker = leaflet_src_default.a.marker([properties.location.y, properties.location.x], {\n        icon: markerIcon\n      });\n    } else {\n      marker = leaflet_src_default.a.marker([properties.location.y, properties.location.x]);\n    }\n\n    if (properties.label !== null) {\n      marker.bindTooltip(properties.label, {\n        permanent: false,\n        direction: \'center\',\n        offset: leaflet_src_default.a.point(properties.labelOffset[0], properties.labelOffset[1])\n      });\n    }\n\n    let name = properties.hasOwnProperty("name") && properties.label != null ? properties.label : "";\n    let desc = properties.hasOwnProperty("description") && properties.description != null ? properties.description : "";\n\n    if (!Object(Utils["k" /* isDefined */])(properties.onLeftClick) && (name.length > 0 || desc.length > 0)) {\n      marker.bindPopup(name + \'<div>\' + desc + \'</div>\', {\n        offset: leaflet_src_default.a.point(properties.labelOffset[0], properties.labelOffset[1])\n      });\n    }\n\n    marker.setZIndexOffset(properties.zIndex);\n    marker.id = properties.id + "$" + properties.markerId;\n    marker.addTo(this.map);\n\n    if (properties.hasOwnProperty(properties.orientation)) {\n      marker.setRotationAngle(properties.orientation.heading);\n    }\n\n    return marker;\n  }\n  /**\n   * Add a polyline to the map.\n   * @param {Object} properties\n   */\n\n\n  addPolyline(properties) {\n    const locations = properties.locations[properties.polylineId];\n    let polylinePoints = [];\n\n    if (Object(Utils["k" /* isDefined */])(locations) && locations.length > 0) {\n      for (let i = 0; i < locations.length; i++) {\n        polylinePoints.push(new leaflet_src_default.a.LatLng(locations[i].y, locations[i].x));\n      }\n    } //create path\n\n\n    let polyline = new leaflet_src_default.a.Polyline(polylinePoints, {\n      color: properties.color,\n      weight: properties.weight,\n      opacity: properties.opacity,\n      smoothFactor: properties.smoothFactor\n    }).addTo(this.map);\n    return polyline;\n  }\n  /**\n   * Updates the marker associated to the layer.\n   * @param {PointMarkerLayer.props} props - The layer properties allowing the update of the marker\n   */\n\n\n  async updateMarker(props) {\n    let marker = this.getMarker(props);\n\n    if (!Object(Utils["k" /* isDefined */])(marker)) {\n      // adds a new marker to the leaflet renderer\n      marker = this.addMarker(props);\n      this.addMarkerToLayer(props, marker);\n      const mId = props.markerId; //need to freeze\n\n      marker.on(\'click\', event => this.onMarkerLeftClick(mId, marker, props, event));\n      marker.on(\'contextmenu\', event => this.onMarkerRightClick(mId, marker, props, event));\n      marker.on(\'mouseover\', event => this.onMarkerHover(mId, marker, props, event));\n    } // get the current marker corresponding to the current markerId value of the PointMarker\n    // updates position\n\n\n    let lon = props.location.x;\n    let lat = props.location.y;\n\n    if (!isNaN(lon) && !isNaN(lat)) {\n      let newLatLng = new leaflet_src_default.a.LatLng(lat, lon);\n      marker.setLatLng(newLatLng);\n\n      if (this.first && this.autoZoomOnFirstMarker || this.follow) {\n        const markerBounds = leaflet_src_default.a.latLngBounds([newLatLng]);\n        this.map.fitBounds(markerBounds, {\n          maxZoom: props.zoomLevel\n        });\n\n        if (this.first) {\n          this.first = false;\n        }\n      }\n    } // updates orientation\n\n\n    if (Object(Utils["k" /* isDefined */])(props.orientation)) {\n      marker.setRotationAngle(props.orientation.heading);\n    }\n\n    if (props.icon !== null && marker._icon.iconUrl !== props.icon) {\n      // updates icon\n      let markerIcon = leaflet_src_default.a.icon({\n        iconAnchor: props.iconAnchor,\n        iconUrl: props.icon\n      });\n      marker.setIcon(markerIcon);\n    }\n\n    marker.setZIndexOffset(props.zIndex);\n  }\n  /**\n   * Abstract method to remove a marker from its corresponding layer.\n   * This is library dependant.\n   * @param {Object} marker - The Map marker object\n   */\n\n\n  removeMarkerFromLayer(marker) {\n    this.map.removeLayer(marker);\n  }\n  /**\n   * Abstract method to remove a polyline from its corresponding layer.\n   * This is library dependant.\n   * @param {Object} polyline - The Map polyline object\n   */\n\n\n  removePolylineFromLayer(polyline) {\n    this.map.removeLayer(polyline);\n  }\n  /**\n   * Updates the polyline associated to the layer.\n   * @param {PolylineLayer.props} props - The layer properties allowing the update of the polyline\n   */\n\n\n  async updatePolyline(props) {\n    let polyline = this.getPolyline(props);\n\n    if (!Object(Utils["k" /* isDefined */])(polyline)) {\n      // adds a new polygon to the leaflet renderer\n      const polylineObj = this.addPolyline(props);\n      this.addPolylineToLayer(props, polylineObj);\n    } else {\n      let polylinePoints = [];\n      const locations = props.locations[props.polylineId];\n\n      if (Object(Utils["k" /* isDefined */])(locations) && locations.length > 0) {\n        for (let i = 0; i < locations.length; i++) {\n          polylinePoints.push(new leaflet_src_default.a.LatLng(locations[i].y, locations[i].x));\n        }\n      }\n\n      polyline.setLatLngs(polylinePoints); // update style\n\n      polyline.setStyle({\n        color: props.color,\n        weight: props.weight,\n        opacity: props.opacity\n      });\n    }\n  }\n  /**\n   * Updates the polygon associated to the layer.\n   * @param {Polygon.props} props - The layer properties allowing the update of the polygon\n   */\n\n\n  async updatePolygon(props) {\n    let polygon = this.getPolygon(props);\n\n    if (!Object(Utils["k" /* isDefined */])(polygon)) {\n      // adds a new polygon to the leaflet renderer\n      const polygonObj = this.addPolygon(props);\n      this.addPolygonToLayer(props, polygonObj);\n    } else {\n      // update location\n      const vertices = props.vertices[props.polygonId];\n      let polygonPoints = [];\n\n      if (Object(Utils["k" /* isDefined */])(vertices) && vertices.length > 0) {\n        for (let i = 0; i < vertices.length - 1; i = i + 2) {\n          let latLon = new leaflet_src_default.a.LatLng(vertices[i + 1], vertices[i]);\n          polygonPoints.push([latLon.lat, latLon.lng]);\n        }\n      }\n\n      polygon.setLatLngs(polygonPoints); // update style\n\n      polygon.setStyle({\n        color: props.outlineColor,\n        weight: props.outlineWidth,\n        fillColor: props.color,\n        fill: true,\n        fillOpacity: props.opacity\n      });\n    }\n  }\n  /**\n   * Abstract method to remove a polygon from its corresponding layer.\n   * This is library dependant.\n   * @param {Object} polygon - The Map polygon object\n   */\n\n\n  removePolygonFromLayer(polygon) {\n    this.map.removeLayer(polygon);\n  }\n  /**\n   * Add a polygon to the map.\n   * @param {Object} properties\n   */\n\n\n  addPolygon(properties) {\n    const vertices = properties.vertices[properties.polygonId];\n    let polygonPoints = [];\n\n    if (Object(Utils["k" /* isDefined */])(vertices) && vertices.length > 0) {\n      for (let i = 0; i < vertices.length - 1; i = i + 2) {\n        let latLon = new leaflet_src_default.a.LatLng(vertices[i + 1], vertices[i]);\n        polygonPoints.push([latLon.lat, latLon.lng]);\n      }\n    } //create polygon\n\n\n    let polygon = new leaflet_src_default.a.polygon(polygonPoints, {\n      color: properties.outlineColor,\n      weight: properties.outlineWidth,\n      fillColor: properties.color,\n      fill: true,\n      fillOpacity: properties.opacity\n    }).addTo(this.map);\n    return polygon;\n  }\n\n  attachTo(parentElement) {\n    super.attachTo(parentElement); // Fix leaflet bug when resizing the div parent container\n\n    this.map.invalidateSize();\n  }\n\n  onResize() {\n    super.onResize();\n    let that = this;\n    setTimeout(function () {\n      that.map.invalidateSize();\n    }, 100);\n  }\n\n  onChange(data) {}\n\n}\n/***  little hack starts here ***/\n\n\nleaflet_src_default.a.Map = leaflet_src_default.a.Map.extend({\n  openPopup: function (popup) {\n    this._popup = popup;\n    return this.addLayer(popup).fire(\'popupopen\', {\n      popup: this._popup\n    });\n  }\n}); // Defines rotated marker\n\n(function () {\n  // save these original methods before they are overwritten\n  let proto_initIcon = leaflet_src_default.a.Marker.prototype._initIcon;\n  let proto_setPos = leaflet_src_default.a.Marker.prototype._setPos;\n  let oldIE = leaflet_src_default.a.DomUtil.TRANSFORM === \'msTransform\';\n  leaflet_src_default.a.Marker.addInitHook(function () {\n    let iconAnchor = this.options.icon.options.iconAnchor;\n\n    if (iconAnchor) {\n      iconAnchor = iconAnchor[0] + \'px \' + iconAnchor[1] + \'px\';\n    }\n\n    this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || \'center bottom\';\n    this.options.rotationAngle = this.options.rotationAngle || 0;\n  });\n  leaflet_src_default.a.Marker.include({\n    _initIcon: function () {\n      proto_initIcon.call(this);\n    },\n    _setPos: function (pos) {\n      proto_setPos.call(this, pos);\n\n      if (this.options.rotationAngle) {\n        this._icon.style[leaflet_src_default.a.DomUtil.TRANSFORM + \'Origin\'] = this.options.rotationOrigin;\n\n        if (oldIE) {\n          // for IE 9, use the 2D rotation\n          this._icon.style[leaflet_src_default.a.DomUtil.TRANSFORM] = \' rotate(\' + this.options.rotationAngle + \'deg)\';\n        } else {\n          // for modern browsers, prefer the 3D accelerated version\n          this._icon.style[leaflet_src_default.a.DomUtil.TRANSFORM] += \' rotateZ(\' + this.options.rotationAngle + \'deg)\';\n        }\n      }\n    },\n    setRotationAngle: function (angle) {\n      this.options.rotationAngle = angle;\n      this.update();\n      return this;\n    },\n    setRotationOrigin: function (origin) {\n      this.options.rotationOrigin = origin;\n      this.update();\n      return this;\n    }\n  });\n})();\n/***  end of hack ***/\n\n\n/* harmony default export */ var map_LeafletView = __webpack_exports__["a"] = (LeafletView_LeafletView);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS92aWV3L21hcC9NYXBWaWV3LmpzPzA1ZDciLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvdWkvdmlldy9tYXAvTGVhZmxldFZpZXcuanM/NWMzMCJdLCJuYW1lcyI6WyJNYXBWaWV3IiwiVmlldyIsImNvbnN0cnVjdG9yIiwicHJvcGVydGllcyIsImxheWVySWRUb01hcmtlcnMiLCJsYXllcklkVG9Qb2x5bGluZXMiLCJsYXllcklkVG9FbGxpcHNvaWRzIiwibGF5ZXJJZFRvUG9seWdvbiIsImxheWVySWRUb0ZydXN0dW0iLCJsYXllcklkVG9EcmFwZWRJbWFnZSIsInNldERhdGEiLCJkYXRhU291cmNlSWQiLCJkYXRhIiwidmFsdWVzIiwiaSIsImxlbmd0aCIsImQiLCJ0eXBlIiwidXBkYXRlTWFya2VyIiwidXBkYXRlUG9seWxpbmUiLCJ1cGRhdGVEcmFwZWRJbWFnZSIsInVwZGF0ZUVsbGlwc2UiLCJ1cGRhdGVQb2x5Z29uIiwidXBkYXRlQ29QbGFuYXJQb2x5Z29uIiwidXBkYXRlRnJ1c3R1bSIsImFkZFBvbHlnb25Ub0xheWVyIiwicHJvcHMiLCJwb2x5Z29uIiwiY3VycmVudExheWVyIiwiZ2V0TGF5ZXIiLCJpZCIsInBvbHlnb25JZCIsImFkZE1hcmtlclRvTGF5ZXIiLCJtYXJrZXJPYmplY3QiLCJtYXJrZXJJZCIsImFkZFBvbHlsaW5lVG9MYXllciIsInBvbHlsaW5lT2JqZWN0IiwicG9seWxpbmVJZCIsImFkZEVsbGlwc2VUb0xheWVyIiwiZWxsaXBzZU9iamVjdCIsImVsbGlwc2VJZCIsImFkZERyYXBlZEltYWdlVG9MYXllciIsImRyYXBlZEltYWdlT2JqZWN0IiwiZHJhcGVkSW1hZ2VJZCIsImFkZEZydXN0dW1Ub0xheWVyIiwiZnJ1c3R1bSIsImZydXN0dW1JZCIsImdldFBvbHlnb25zIiwiYXJyYXkiLCJwdXNoIiwiZ2V0UG9seWdvbiIsImdldE1hcmtlciIsImdldE1hcmtlcnMiLCJnZXRQb2x5bGluZXMiLCJnZXRFbGxpcHNvaWRzIiwiZ2V0UG9seWxpbmUiLCJnZXRFbGxpcHNlIiwiZ2V0RHJhcGVkSW1hZ2UiLCJnZXRGcnVzdHVtcyIsImdldEZydXN0dW0iLCJsYXllcklkIiwibGF5ZXJzIiwicmVtb3ZlQWxsRnJvbUxheWVyIiwibGF5ZXIiLCJyZW1vdmVNYXJrZXJzIiwicmVtb3ZlUG9seWxpbmVzIiwicmVtb3ZlRWxsaXBzb2lkcyIsInJlbW92ZVBvbHlnb25zIiwicmVtb3ZlRnJ1c3R1bXMiLCJpc0RlZmluZWQiLCJwb2x5Z29uTWFwIiwicmVtb3ZlUG9seWdvbkZyb21MYXllciIsIm1hcmtlcnNNYXAiLCJtYXJrZXIiLCJyZW1vdmVNYXJrZXJGcm9tTGF5ZXIiLCJlbGxpcHNlIiwiZWxsaXBzZU1hcCIsInJlbW92ZUVsbGlwc2VGcm9tTGF5ZXIiLCJwb2x5bGluZSIsInBvbHlsaW5lc01hcCIsInJlbW92ZVBvbHlsaW5lRnJvbUxheWVyIiwicmVtb3ZlRHJhcGVkSW1hZ2VzIiwiZHJhcGVkSW1hZ2UiLCJkcmFwZWRJbWFnZU1hcCIsInJlbW92ZURyYXBlZEltYWdlRnJvbUxheWVyIiwiZnJ1c3R1bU1hcCIsInJlbW92ZUZydXN0dW1Gcm9tTGF5ZXIiLCJvbk1hcmtlckxlZnRDbGljayIsImV2ZW50Iiwib25MZWZ0Q2xpY2siLCJjYWxsIiwib25NYXJrZXJSaWdodENsaWNrIiwib25SaWdodENsaWNrIiwib25NYXJrZXJNb3ZlIiwib25Nb3ZlIiwib25NYXJrZXJIb3ZlciIsIm9uSG92ZXIiLCJnZXRMYXllcklkIiwic3BsaXQiLCJnZXRNYXJrZXJJZCIsIkxlYWZsZXRWaWV3Iiwic3VwcG9ydGVkTGF5ZXJzIiwiY3NzQ2xhc3MiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZGl2SWQiLCJjbGFzc05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjc3MiLCJiZWZvcmVBZGRpbmdJdGVtcyIsIm9wdGlvbnMiLCJpbml0TWFwIiwiaW5pdGlhbFZpZXciLCJsb2NhdGlvbiIsIkwiLCJMYXRMbmciLCJ6b29tIiwiZmlyc3QiLCJmb2xsb3ciLCJhdXRvWm9vbU9uRmlyc3RNYXJrZXIiLCJkZWZhdWx0TGF5ZXJzIiwiZ2V0RGVmYXVsdExheWVycyIsImRlZmF1bHRMYXllciIsImJhc2VMYXllcnMiLCJvdmVybGF5cyIsIm5hbWUiLCJsYXQiLCJsb24iLCJvdmVybGF5TGF5ZXJzIiwibWFwIiwiTWFwIiwiZnVsbHNjcmVlbkNvbnRyb2wiLCJjb250cm9sIiwiYWRkVG8iLCJzZXRWaWV3IiwibWF4Wm9vbSIsIm1iQXR0ciIsIm1iVXJsIiwiZXNyaUxpbmsiLCJlc3JpV2hvbGluayIsImVzcmlMYXllciIsInRpbGVMYXllciIsImF0dHJpYnV0aW9uIiwibWF4TmF0aXZlWm9vbSIsInN0cmVldHMiLCJpbml0TGF5ZXJzIiwib3NtVXJsIiwib3NtQXR0cmliIiwib3NtIiwibWluWm9vbSIsImFkZExheWVyIiwiYWRkTWFya2VyIiwiYXNzZXJ0RGVmaW5lZCIsImljb24iLCJtYXJrZXJJY29uIiwiaWNvbkFuY2hvciIsImljb25VcmwiLCJpY29uU2l6ZSIsInkiLCJ4IiwibGFiZWwiLCJiaW5kVG9vbHRpcCIsInBlcm1hbmVudCIsImRpcmVjdGlvbiIsIm9mZnNldCIsInBvaW50IiwibGFiZWxPZmZzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImRlc2MiLCJkZXNjcmlwdGlvbiIsImJpbmRQb3B1cCIsInNldFpJbmRleE9mZnNldCIsInpJbmRleCIsIm9yaWVudGF0aW9uIiwic2V0Um90YXRpb25BbmdsZSIsImhlYWRpbmciLCJhZGRQb2x5bGluZSIsImxvY2F0aW9ucyIsInBvbHlsaW5lUG9pbnRzIiwiUG9seWxpbmUiLCJjb2xvciIsIndlaWdodCIsIm9wYWNpdHkiLCJzbW9vdGhGYWN0b3IiLCJtSWQiLCJvbiIsImlzTmFOIiwibmV3TGF0TG5nIiwic2V0TGF0TG5nIiwibWFya2VyQm91bmRzIiwibGF0TG5nQm91bmRzIiwiZml0Qm91bmRzIiwiem9vbUxldmVsIiwiX2ljb24iLCJzZXRJY29uIiwicmVtb3ZlTGF5ZXIiLCJwb2x5bGluZU9iaiIsInNldExhdExuZ3MiLCJzZXRTdHlsZSIsInBvbHlnb25PYmoiLCJhZGRQb2x5Z29uIiwidmVydGljZXMiLCJwb2x5Z29uUG9pbnRzIiwibGF0TG9uIiwibG5nIiwib3V0bGluZUNvbG9yIiwib3V0bGluZVdpZHRoIiwiZmlsbENvbG9yIiwiZmlsbCIsImZpbGxPcGFjaXR5IiwiYXR0YWNoVG8iLCJwYXJlbnRFbGVtZW50IiwiaW52YWxpZGF0ZVNpemUiLCJvblJlc2l6ZSIsInRoYXQiLCJzZXRUaW1lb3V0Iiwib25DaGFuZ2UiLCJleHRlbmQiLCJvcGVuUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsImZpcmUiLCJwcm90b19pbml0SWNvbiIsIk1hcmtlciIsInByb3RvdHlwZSIsIl9pbml0SWNvbiIsInByb3RvX3NldFBvcyIsIl9zZXRQb3MiLCJvbGRJRSIsIkRvbVV0aWwiLCJUUkFOU0ZPUk0iLCJhZGRJbml0SG9vayIsInJvdGF0aW9uT3JpZ2luIiwicm90YXRpb25BbmdsZSIsImluY2x1ZGUiLCJwb3MiLCJzdHlsZSIsImFuZ2xlIiwidXBkYXRlIiwic2V0Um90YXRpb25PcmlnaW4iLCJvcmlnaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQSxNQUFNQSxlQUFOLFNBQXNCQyx1QkFBdEIsQ0FBMkI7RUFDdkJDLFdBQVcsQ0FBQ0MsVUFBRCxFQUFhO0lBQ3BCLE1BQU1BLFVBQU4sRUFEb0IsQ0FHcEI7O0lBQ0EsS0FBS0MsZ0JBQUwsR0FBd0IsRUFBeEIsQ0FKb0IsQ0FN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QWhCIiwiZmlsZSI6IjI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgVmlldyBmcm9tIFwiLi4vVmlld1wiO1xuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gXCIuLi8uLi8uLi91dGlscy9VdGlsc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYW4gYWJzdHJhY3QgY2xhc3MgaW4gY2hhcmdlIG9mIGhhbmRsaW5nIGNvbW1vbiBNYXAgb3BlcmF0aW9ucy5cbiAqIEBleHRlbmRzIFZpZXdcbiAqL1xuY2xhc3MgTWFwVmlldyBleHRlbmRzIFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocHJvcGVydGllcyk7XG5cbiAgICAgICAgLy8gbWFwIExheWVyIGlkIHRvIGFycmF5IG9mIGNvcnJlc3BvbmRpbmcgbWFya2Vyc1xuICAgICAgICB0aGlzLmxheWVySWRUb01hcmtlcnMgPSB7fTtcblxuICAgICAgICAvLyBtYXAgTGF5ZXIgaWQgdG8gYXJyYXkgb2YgY29ycmVzcG9uZGluZyBwb2x5bGluZXNcbiAgICAgICAgdGhpcy5sYXllcklkVG9Qb2x5bGluZXM9IHt9O1xuXG4gICAgICAgIC8vIG1hcCBMYXllciBpZCB0byBhcnJheSBvZiBjb3JyZXNwb25kaW5nIHBvbHlsaW5lc1xuICAgICAgICB0aGlzLmxheWVySWRUb0VsbGlwc29pZHM9IHt9O1xuXG4gICAgICAgIC8vIG1hcCBMYXllciBpZCB0byBhcnJheSBvZiBjb3JyZXNwb25kaW5nIHBvbHlnb25zXG4gICAgICAgIHRoaXMubGF5ZXJJZFRvUG9seWdvbj0ge307XG5cbiAgICAgICAgLy8gbWFwIExheWVyIGlkIHRvIGFycmF5IG9mIGNvcnJlc3BvbmRpbmcgZnJ1c3R1bXNcbiAgICAgICAgdGhpcy5sYXllcklkVG9GcnVzdHVtPSB7fTtcblxuICAgICAgICAvLyBtYXAgTGF5ZXIgaWQgdG8gYXJyYXkgb2YgY29ycmVzcG9uZGluZyBkcmFwaW5nXG4gICAgICAgIHRoaXMubGF5ZXJJZFRvRHJhcGVkSW1hZ2U9IHt9O1xuICAgIH1cblxuICAgIGFzeW5jIHNldERhdGEoZGF0YVNvdXJjZUlkLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGRhdGEudmFsdWVzO1xuICAgICAgICBmb3IobGV0IGk9MDtpIDwgdmFsdWVzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSB2YWx1ZXNbaV07XG4gICAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdtYXJrZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXJrZXIoZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYoZGF0YS50eXBlID09PSAncG9seWxpbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb2x5bGluZShkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihkYXRhLnR5cGUgPT09ICdkcmFwZWRJbWFnZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURyYXBlZEltYWdlKGQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGRhdGEudHlwZSA9PT0gJ2VsbGlwc2UnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFbGxpcHNlKGQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdwb2x5Z29uJykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUG9seWdvbihkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY29wbGFuYXJQb2x5Z29uJykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29QbGFuYXJQb2x5Z29uKGQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGRhdGEudHlwZSA9PT0gJ2ZydXN0dW0nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGcnVzdHVtKGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkUG9seWdvblRvTGF5ZXIocHJvcHMsIHBvbHlnb24pIHtcbiAgICAgICAgY29uc3QgY3VycmVudExheWVyID0gdGhpcy5nZXRMYXllcihwcm9wcyk7XG4gICAgICAgIC8vIGFzc29jaWF0ZSB0aGUgbGlzdCBvZiBtYXJrZXJzIG93bmluZyBieSBhIHNwZWNpZmljIG1hcmtlclxuICAgICAgICBpZighKHByb3BzLmlkIGluIHRoaXMubGF5ZXJJZFRvUG9seWdvbikpIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJJZFRvUG9seWdvbltwcm9wcy5pZF0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxheWVySWRUb1BvbHlnb25bcHJvcHMuaWRdW3Byb3BzLnBvbHlnb25JZF0gPSBwb2x5Z29uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc29jaWF0ZSBhIG1hcmtlcklkIHRvIGEgTGF5ZXIgZm9yIGEgZmFzdCBsb29rdXBcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQb2ludE1hcmtlckxheWVyLnByb3BzfSBsYXllciAtIHRoZSBMYXllciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFya2VyT2JqZWN0IC0gdGhlIE1hcCBtYXJrZXIgb2JqZWN0XG4gICAgICovXG4gICAgYXN5bmMgYWRkTWFya2VyVG9MYXllcihwcm9wcywgbWFya2VyT2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMYXllciA9IHRoaXMuZ2V0TGF5ZXIocHJvcHMpO1xuICAgICAgICAvLyBhc3NvY2lhdGUgdGhlIGxpc3Qgb2YgbWFya2VycyBvd25pbmcgYnkgYSBzcGVjaWZpYyBtYXJrZXJcbiAgICAgICAgaWYoIShwcm9wcy5pZCBpbiB0aGlzLmxheWVySWRUb01hcmtlcnMpKSB7XG4gICAgICAgICAgICB0aGlzLmxheWVySWRUb01hcmtlcnNbcHJvcHMuaWRdID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXllcklkVG9NYXJrZXJzW3Byb3BzLmlkXVtwcm9wcy5tYXJrZXJJZF0gPSBtYXJrZXJPYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzb2NpYXRlIGEgcG9seWxpbmVJZCB0byBhIExheWVyIGZvciBhIGZhc3QgbG9va3VwXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UG9seWxpbmUucHJvcHN9IGxheWVyIC0gdGhlIExheWVyIG9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwb2x5bGluZU9iamVjdCAtIHRoZSBNYXAgcG9seWxpbmUgb2JqZWN0XG4gICAgICovXG4gICAgYXN5bmMgYWRkUG9seWxpbmVUb0xheWVyKHByb3BzLCBwb2x5bGluZU9iamVjdCkge1xuICAgICAgICAvLyBhc3NvY2lhdGUgdGhlIGxpc3Qgb2YgbWFya2VycyBvd25pbmcgYnkgYSBzcGVjaWZpYyBtYXJrZXJcbiAgICAgICAgaWYoIShwcm9wcy5pZCBpbiB0aGlzLmxheWVySWRUb1BvbHlsaW5lcykpIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzW3Byb3BzLmlkXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzW3Byb3BzLmlkXVtwcm9wcy5wb2x5bGluZUlkXSA9IHBvbHlsaW5lT2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc29jaWF0ZSBhIGVsbGlwc2VJZCB0byBhIExheWVyIGZvciBhIGZhc3QgbG9va3VwXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7RWxsaXBzZS5wcm9wc30gbGF5ZXIgLSB0aGUgTGF5ZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGVsbGlwc2VPYmplY3QgLSB0aGUgTWFwIGVsbGlwc2Ugb2JqZWN0XG4gICAgICovXG4gICAgYXN5bmMgYWRkRWxsaXBzZVRvTGF5ZXIocHJvcHMsIGVsbGlwc2VPYmplY3QpIHtcbiAgICAgICAgLy8gYXNzb2NpYXRlIHRoZSBsaXN0IG9mIG1hcmtlcnMgb3duaW5nIGJ5IGEgc3BlY2lmaWMgbWFya2VyXG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzKSkge1xuICAgICAgICAgICAgdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzW3Byb3BzLmlkXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5ZXJJZFRvRWxsaXBzb2lkc1twcm9wcy5pZF1bcHJvcHMuZWxsaXBzZUlkXSA9IGVsbGlwc2VPYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzb2NpYXRlIGEgZHJhcGVkSW1hZ2VJZCB0byBhIExheWVyIGZvciBhIGZhc3QgbG9va3VwXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7SW1hZ2VEcmFwaW5nLnByb3BzfSBsYXllciAtIHRoZSBMYXllciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZHJhcGVkSW1hZ2VPYmplY3QgLSB0aGUgTWFwIGRyYXBlZEltYWdlIG9iamVjdFxuICAgICAqL1xuICAgIGFzeW5jIGFkZERyYXBlZEltYWdlVG9MYXllcihwcm9wcywgZHJhcGVkSW1hZ2VPYmplY3QpIHtcbiAgICAgICAgLy8gYXNzb2NpYXRlIHRoZSBsaXN0IG9mIG1hcmtlcnMgb3duaW5nIGJ5IGEgc3BlY2lmaWMgbWFya2VyXG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gdGhpcy5sYXllcklkVG9EcmFwZWRJbWFnZSkpIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJJZFRvRHJhcGVkSW1hZ2VbcHJvcHMuaWRdID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXllcklkVG9EcmFwZWRJbWFnZVtwcm9wcy5pZF1bcHJvcHMuZHJhcGVkSW1hZ2VJZF0gPSBkcmFwZWRJbWFnZU9iamVjdDtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRGcnVzdHVtVG9MYXllcihwcm9wcywgZnJ1c3R1bSkge1xuICAgICAgICBjb25zdCBjdXJyZW50TGF5ZXIgPSB0aGlzLmdldExheWVyKHByb3BzKTtcbiAgICAgICAgLy8gYXNzb2NpYXRlIHRoZSBsaXN0IG9mIG1hcmtlcnMgb3duaW5nIGJ5IGEgc3BlY2lmaWMgbWFya2VyXG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gdGhpcy5sYXllcklkVG9GcnVzdHVtKSkge1xuICAgICAgICAgICAgdGhpcy5sYXllcklkVG9GcnVzdHVtW3Byb3BzLmlkXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5ZXJJZFRvRnJ1c3R1bVtwcm9wcy5pZF1bcHJvcHMuZnJ1c3R1bUlkXSA9IGZydXN0dW07XG4gICAgfVxuXG4gICAgZ2V0UG9seWdvbnMoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy5sYXllcklkVG9Qb2x5Z29uKSB7XG4gICAgICAgICAgICBmb3IobGV0IHBvbHlnb25JZCBpbiB0aGlzLmxheWVySWRUb1BvbHlnb25baWRdKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaCh0aGlzLmxheWVySWRUb1BvbHlnb25baWRdW3BvbHlnb25JZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICBnZXRQb2x5Z29uKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gIHRoaXMubGF5ZXJJZFRvUG9seWdvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVySWRUb1BvbHlnb25bcHJvcHMuaWRdW3Byb3BzLnBvbHlnb25JZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXJrZXJJZCBhc3NvY2lhdGUgdG8gdGhlIExheWVyXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UG9pbnRNYXJrZXJMYXllci5wcm9wc30gcHJvcHMgLSB0aGUgTGF5ZXIgT2JqZWN0XG4gICAgICovXG4gICAgZ2V0TWFya2VyKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gIHRoaXMubGF5ZXJJZFRvTWFya2VycykpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVySWRUb01hcmtlcnNbcHJvcHMuaWRdW3Byb3BzLm1hcmtlcklkXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIG1hcmtlcnMgY29udGFpbmVkIGluIHRoaXMgdmlld1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBnZXRNYXJrZXJzKCkge1xuICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgICBmb3IobGV0IGlkIGluIHRoaXMubGF5ZXJJZFRvTWFya2Vycykge1xuICAgICAgICAgICAgZm9yKGxldCBtYXJrZXJJZCBpbiB0aGlzLmxheWVySWRUb01hcmtlcnNbaWRdKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaCh0aGlzLmxheWVySWRUb01hcmtlcnNbaWRdW21hcmtlcklkXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgcG9seWxpbmVzIGNvbnRhaW5lZCBpbiB0aGlzIHZpZXdcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgZ2V0UG9seWxpbmVzKCkge1xuICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgICBmb3IobGV0IGlkIGluIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzKSB7XG4gICAgICAgICAgICBmb3IobGV0IHBvbHlsaW5lSWQgaW4gdGhpcy5sYXllcklkVG9Qb2x5bGluZXNbaWRdKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaCh0aGlzLmxheWVySWRUb1BvbHlsaW5lc1tpZF1bcG9seWxpbmVJZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGVsbHBzb2lkcyBjb250YWluZWQgaW4gdGhpcyB2aWV3XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGdldEVsbGlwc29pZHMoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzKSB7XG4gICAgICAgICAgICBmb3IobGV0IGVsbGlwc2VJZCBpbiB0aGlzLmxheWVySWRUb0VsbGlwc29pZHNbaWRdKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaCh0aGlzLmxheWVySWRUb0VsbGlwc29pZHNbaWRdW2VsbGlwc2VJZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsbGlwc2UgYXNzb2NpYXRlIHRvIHRoZSBMYXllclxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge0VsbGlwc2UucHJvcHN9IGxheWVyIC0gdGhlIExheWVyIE9iamVjdFxuICAgICAqL1xuICAgIGdldFBvbHlsaW5lKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gIHRoaXMubGF5ZXJJZFRvRWxsaXBzb2lkcykpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVySWRUb0VsbGlwc29pZHNbcHJvcHMuaWRdW3Byb3BzLmVsbGlwc2VJZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGxpcHNlIGFzc29jaWF0ZSB0byB0aGUgTGF5ZXJcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtFbGxpcHNlLnByb3BzfSBsYXllciAtIHRoZSBMYXllciBPYmplY3RcbiAgICAgKi9cbiAgICBnZXRFbGxpcHNlKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gIHRoaXMubGF5ZXJJZFRvRWxsaXBzb2lkcykpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVySWRUb0VsbGlwc29pZHNbcHJvcHMuaWRdW3Byb3BzLmVsbGlwc2VJZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwb2x5bGluZSBhc3NvY2lhdGUgdG8gdGhlIExheWVyXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UG9seWxpbmUucHJvcHN9IGxheWVyIC0gdGhlIExheWVyIE9iamVjdFxuICAgICAqL1xuICAgIGdldFBvbHlsaW5lKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzW3Byb3BzLmlkXVtwcm9wcy5wb2x5bGluZUlkXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRyYXBlZCBpbWFnZSBhc3NvY2lhdGUgdG8gdGhlIExheWVyXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7SW1hZ2VEcmFwaW5nTGF5ZXIucHJvcHN9IGxheWVyIC0gdGhlIExheWVyIE9iamVjdFxuICAgICAqL1xuICAgIGdldERyYXBlZEltYWdlKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gIHRoaXMubGF5ZXJJZFRvRHJhcGVkSW1hZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXllcklkVG9EcmFwZWRJbWFnZVtwcm9wcy5pZF1bcHJvcHMuZHJhcGVkSW1hZ2VJZF07XG4gICAgfVxuXG4gICAgZ2V0RnJ1c3R1bXMoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy5sYXllcklkVG9GcnVzdHVtKSB7XG4gICAgICAgICAgICBmb3IobGV0IGZydXN0dW1JZCBpbiB0aGlzLmxheWVySWRUb0ZydXN0dW1baWRdKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaCh0aGlzLmxheWVySWRUb0ZydXN0dW1baWRdW2ZydXN0dW1JZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICBnZXRGcnVzdHVtKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuaWQgaW4gIHRoaXMubGF5ZXJJZFRvRnJ1c3R1bSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVySWRUb0ZydXN0dW1bcHJvcHMuaWRdW3Byb3BzLmZydXN0dW1JZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBMYXllciBhc3NvY2lhdGVkIHRvIGl0cyBpZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYXllcklkIC0gdGhlIGlkIG9mIHRoZSBMYXllclxuICAgICAqIEByZXR1cm4ge0xheWVyfSAtIHRoZSBjb3JyZXNwb25kaW5nIGxheWVyLCBudWxsIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGdldExheWVyKGxheWVySWQpIHtcbiAgICAgICAgLy8gZmluZCBjb3JyZXNwb25kaW5nIGxheWVyXG4gICAgICAgIGZvciAobGV0IGN1cnJlbnRMYXllciBvZiB0aGlzLmxheWVycykge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXllci5wcm9wcy5pZCA9PT0gbGF5ZXJJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50TGF5ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIENvcnJlc3BvbmRpbmcgTGF5ZXJcbiAgICAgKiBAcGFyYW0ge0xheWVyfSBsYXllciAtIFRoZSBsYXllciBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVBbGxGcm9tTGF5ZXIobGF5ZXIpIHtcbiAgICAgICAgc3VwZXIucmVtb3ZlQWxsRnJvbUxheWVyKGxheWVyKTtcbiAgICAgICAgLy8gY2hlY2sgZm9yIG1hcmtlclxuICAgICAgICB0aGlzLnJlbW92ZU1hcmtlcnMobGF5ZXIpO1xuXG4gICAgICAgIC8vIGNoZWNrIGZvciBwb2x5bGluZXNcbiAgICAgICAgdGhpcy5yZW1vdmVQb2x5bGluZXMobGF5ZXIpO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlRWxsaXBzb2lkcyhsYXllcik7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVQb2x5Z29ucyhsYXllcik7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVGcnVzdHVtcyhsYXllcik7XG4gICAgfVxuXG4gICAgcmVtb3ZlUG9seWdvbnMobGF5ZXIpIHtcbiAgICAgICAgaWYoaXNEZWZpbmVkKGxheWVyLnByb3BzLnBvbHlnb25JZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvbHlnb25NYXAgPSB0aGlzLmxheWVySWRUb1BvbHlnb25bbGF5ZXIucHJvcHMuaWRdO1xuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKHBvbHlnb25NYXApKSB7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBwb2x5Z29uSWQgaW4gcG9seWdvbk1hcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2x5Z29uID0gcG9seWdvbk1hcFtwb2x5Z29uSWRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvbHlnb25Gcm9tTGF5ZXIocG9seWdvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZW1vdmUgbWFya2VycyBpZHMgZnJvbSBMYXllciBtYXBcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxheWVySWRUb1BvbHlnb25bbGF5ZXIucHJvcHMuaWRdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBtYXJrZXJzIGNvcnJlc3BvbmRpbmcgdG8gYSBQb2ludE1hcmtlciBMYXllclxuICAgICAqIEBwYXJhbSB7UG9pbnRNYXJrZXJMYXllcn0gbGF5ZXIgLSB0aGUgbGF5ZXIgdG8gcmVtb3ZlIHRoZSBtYXJrZXJzIGZyb21cbiAgICAgKi9cbiAgICByZW1vdmVNYXJrZXJzKGxheWVyKSB7XG4gICAgICAgIGlmKGlzRGVmaW5lZChsYXllci5wcm9wcy5tYXJrZXJJZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtlcnNNYXAgPSB0aGlzLmxheWVySWRUb01hcmtlcnNbbGF5ZXIucHJvcHMuaWRdO1xuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKG1hcmtlcnNNYXApKSB7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBtYXJrZXJJZCBpbiBtYXJrZXJzTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IG1hcmtlcnNNYXBbbWFya2VySWRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU1hcmtlckZyb21MYXllcihtYXJrZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVtb3ZlIG1hcmtlcnMgaWRzIGZyb20gTGF5ZXIgbWFwXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sYXllcklkVG9NYXJrZXJzW2xheWVyLnByb3BzLmlkXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZWxsaXBzb2lkcyBjb3JyZXNwb25kaW5nIHRvIGEgRWxsaXBzZUxheWVyIExheWVyXG4gICAgICogQHBhcmFtIHtFbGxpcHNlfSBlbGxpcHNlIC0gdGhlIGxheWVyIHRvIHJlbW92ZSB0aGUgZWxsaXBzb2lkcyBmcm9tXG4gICAgICovXG4gICAgcmVtb3ZlRWxsaXBzb2lkcyhlbGxpcHNlKSB7XG4gICAgICAgIGlmKGlzRGVmaW5lZChlbGxpcHNlLnByb3BzLmVsbGlwc2VJZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsbGlwc2VNYXAgPSB0aGlzLmxheWVySWRUb0VsbGlwc29pZHNbZWxsaXBzZS5wcm9wcy5pZF07XG4gICAgICAgICAgICBpZihpc0RlZmluZWQoZWxsaXBzZU1hcCkpIHtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGVsbGlwc2VJZCBpbiBlbGxpcHNlTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsbGlwc2UgPSBlbGxpcHNlTWFwW2VsbGlwc2VJZF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRWxsaXBzZUZyb21MYXllcihlbGxpcHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBwb2x5bGluZXMgaWRzIGZyb20gTGF5ZXIgbWFwXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzW2VsbGlwc2UucHJvcHMuaWRdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBwb2x5bGluZXMgY29ycmVzcG9uZGluZyB0byBhIFBvbHlsaW5lTGF5ZXIgTGF5ZXJcbiAgICAgKiBAcGFyYW0ge1BvbHlsaW5lfSBwb2x5bGluZSAtIHRoZSBsYXllciB0byByZW1vdmUgdGhlIHBvbHlsaW5lcyBmcm9tXG4gICAgICovXG4gICAgcmVtb3ZlUG9seWxpbmVzKHBvbHlsaW5lKSB7XG4gICAgICAgIGlmKGlzRGVmaW5lZChwb2x5bGluZS5wcm9wcy5wb2x5bGluZUlkKSkge1xuICAgICAgICAgICAgY29uc3QgcG9seWxpbmVzTWFwID0gdGhpcy5sYXllcklkVG9Qb2x5bGluZXNbcG9seWxpbmUucHJvcHMuaWRdO1xuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKHBvbHlsaW5lc01hcCkpIHtcbiAgICAgICAgICAgICAgICBmb3IobGV0IHBvbHlsaW5lSWQgaW4gcG9seWxpbmVzTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbHlsaW5lID0gcG9seWxpbmVzTWFwW3BvbHlsaW5lSWRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvbHlsaW5lRnJvbUxheWVyKHBvbHlsaW5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBwb2x5bGluZXMgaWRzIGZyb20gTGF5ZXIgbWFwXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sYXllcklkVG9Qb2x5bGluZXNbcG9seWxpbmUucHJvcHMuaWRdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBkcmFwZWRJbWFnZSBjb3JyZXNwb25kaW5nIHRvIGEgSW1hZ2VEcmFwaW5nIExheWVyXG4gICAgICogQHBhcmFtIHtJbWFnZURyYXBpbmd9IGltYWdlRHJhcGluZyAtIHRoZSBsYXllciB0byByZW1vdmUgdGhlIGRyYXBlZEltYWdlIGZyb21cbiAgICAgKi9cbiAgICByZW1vdmVEcmFwZWRJbWFnZXMoZHJhcGVkSW1hZ2UpIHtcbiAgICAgICAgaWYoaXNEZWZpbmVkKGRyYXBlZEltYWdlLnByb3BzLmRyYXBlZEltYWdlSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBkcmFwZWRJbWFnZU1hcCA9IHRoaXMubGF5ZXJJZFRvRHJhcGVkSW1hZ2VbZHJhcGVkSW1hZ2UucHJvcHMuaWRdO1xuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKGRyYXBlZEltYWdlTWFwKSkge1xuICAgICAgICAgICAgICAgIGZvcihsZXQgZHJhcGVkSW1hZ2VJZCBpbiBkcmFwZWRJbWFnZU1hcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmFwZWRJbWFnZSA9IGRyYXBlZEltYWdlTWFwW2RyYXBlZEltYWdlSWRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZURyYXBlZEltYWdlRnJvbUxheWVyKGRyYXBlZEltYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBkcmFwZWRJbWFnZSBpZHMgZnJvbSBMYXllciBtYXBcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxheWVySWRUb0RyYXBlZEltYWdlW2RyYXBlZEltYWdlLnByb3BzLmlkXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZnJ1c3R1bXMgY29ycmVzcG9uZGluZyB0byBhIEZydXN0dW0gTGF5ZXJcbiAgICAgKiBAcGFyYW0ge0ZydXN0dW1MYXllcn0gcG9seWxpbmUgLSB0aGUgbGF5ZXIgdG8gcmVtb3ZlIHRoZSBGcnVzdHVtIGZyb21cbiAgICAgKi9cbiAgICByZW1vdmVGcnVzdHVtcyhsYXllcikge1xuICAgICAgICBpZihpc0RlZmluZWQobGF5ZXIucHJvcHMuZnJ1c3R1bUlkKSkge1xuICAgICAgICAgICAgY29uc3QgZnJ1c3R1bU1hcCA9IHRoaXMubGF5ZXJJZFRvRnJ1c3R1bVtsYXllci5wcm9wcy5pZF07XG4gICAgICAgICAgICBpZihpc0RlZmluZWQoZnJ1c3R1bU1hcCkpIHtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGZydXN0dW1JZCBpbiBmcnVzdHVtTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZydXN0dW0gPSBmcnVzdHVtTWFwW2ZydXN0dW1JZF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJ1c3R1bUZyb21MYXllcihmcnVzdHVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBtYXJrZXJzIGlkcyBmcm9tIExheWVyIG1hcFxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubGF5ZXJJZFRvRnJ1c3R1bVtsYXllci5wcm9wcy5pZF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWJzdHJhY3QgbWV0aG9kIHRvIHJlbW92ZSBhIG1hcmtlciBmcm9tIGl0cyBjb3JyZXNwb25kaW5nIGxheWVyLlxuICAgICAqIFRoaXMgaXMgbGlicmFyeSBkZXBlbmRhbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXJrZXIgLSBUaGUgTWFwIG1hcmtlciBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVNYXJrZXJGcm9tTGF5ZXIobWFya2VyKSB7fVxuXG4gICAgLyoqXG4gICAgICogQWJzdHJhY3QgbWV0aG9kIHRvIHJlbW92ZSBhIHBvbHlsaW5lIGZyb20gaXRzIGNvcnJlc3BvbmRpbmcgbGF5ZXIuXG4gICAgICogVGhpcyBpcyBsaWJyYXJ5IGRlcGVuZGFudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBvbHlsaW5lIC0gVGhlIE1hcCBwb2x5bGluZSBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVQb2x5bGluZUZyb21MYXllcihwb2x5bGluZSkge31cblxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCB0byByZW1vdmUgYSBkcmFwZWQgaW1hZ2UgZnJvbSBpdHMgY29ycmVzcG9uZGluZyBsYXllci5cbiAgICAgKiBUaGlzIGlzIGxpYnJhcnkgZGVwZW5kYW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZHJhcGVkSW1hZ2UgLSBUaGUgTWFwIGRyYXBlZEltYWdlIG9iamVjdFxuICAgICAqL1xuICAgIHJlbW92ZURyYXBlZEltYWdlRnJvbUxheWVyKGRyYXBlZEltYWdlKSB7fVxuXG4gICAgLyoqXG4gICAgICogQWJzdHJhY3QgbWV0aG9kIHRvIHJlbW92ZSBhIHBvbHlnb24gZnJvbSBpdHMgY29ycmVzcG9uZGluZyBsYXllci5cbiAgICAgKiBUaGlzIGlzIGxpYnJhcnkgZGVwZW5kYW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcG9seWdvbiAtIFRoZSBNYXAgcG9seWdvbiBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVQb2x5Z29uRnJvbUxheWVyKG1hcmtlcikge31cblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBjYWxsIG9uTGVmdENsaWNrIExheWVyIG1ldGhvZCBpZiBleGlzdHNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFya2VySWQgLSB0aGUgTGF5ZXIgbWFya2VySWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFya2VyT2JqZWN0IC0gdGhlIFZpZXcgbWFya2VyIG9iamVjdFxuICAgICAqIEBwYXJhbSB7UG9pbnRNYXJrZXJMYXllcn0gbGF5ZXIgLSB0aGUgTGF5ZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IC0gdGhlIG9yaWdpbmFsIE1hcCBWaWV3IGV2ZW50XG4gICAgICovXG4gICAgb25NYXJrZXJMZWZ0Q2xpY2sobWFya2VySWQsIG1hcmtlck9iamVjdCwgbGF5ZXIsIGV2ZW50KSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQobGF5ZXIub25MZWZ0Q2xpY2spKSB7XG4gICAgICAgICAgICBsYXllci5vbkxlZnRDbGljay5jYWxsKGxheWVyLG1hcmtlcklkLCBtYXJrZXJPYmplY3QsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBjYWxsIG9uUmlnaHRDbGljayBMYXllciBtZXRob2QgaWYgZXhpc3RzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcmtlcklkIC0gdGhlIExheWVyIG1hcmtlcklkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcmtlck9iamVjdCAtIHRoZSBWaWV3IG1hcmtlciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge1BvaW50TWFya2VyTGF5ZXJ9IGxheWVyIC0gdGhlIExheWVyIG9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAtIHRoZSBvcmlnaW5hbCBNYXAgVmlldyBldmVudFxuICAgICAqL1xuICAgIG9uTWFya2VyUmlnaHRDbGljayhtYXJrZXJJZCwgbWFya2VyT2JqZWN0LCBsYXllciwgZXZlbnQpIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChsYXllci5vblJpZ2h0Q2xpY2spKSB7XG4gICAgICAgICAgICBsYXllci5vblJpZ2h0Q2xpY2suY2FsbChsYXllcixtYXJrZXJJZCwgbWFya2VyT2JqZWN0LCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gY2FsbCBvbk1vdmUgTGF5ZXIgbWV0aG9kIGlmIGV4aXN0c1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYXJrZXJJZCAtIHRoZSBMYXllciBtYXJrZXJJZFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXJrZXJPYmplY3QgLSB0aGUgVmlldyBtYXJrZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtQb2ludE1hcmtlckxheWVyfSBsYXllciAtIHRoZSBMYXllciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgLSB0aGUgb3JpZ2luYWwgTWFwIFZpZXcgZXZlbnRcbiAgICAgKi9cbiAgICBvbk1hcmtlck1vdmUobWFya2VySWQsIG1hcmtlck9iamVjdCwgbGF5ZXIsIGV2ZW50KSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQobGF5ZXIub25Nb3ZlKSkge1xuICAgICAgICAgICAgbGF5ZXIub25Nb3ZlLmNhbGwobGF5ZXIsbWFya2VySWQsIG1hcmtlck9iamVjdCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGNhbGwgb25Ib3ZlciBMYXllciBtZXRob2QgaWYgZXhpc3RzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcmtlcklkIC0gdGhlIExheWVyIG1hcmtlcklkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcmtlck9iamVjdCAtIHRoZSBWaWV3IG1hcmtlciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge1BvaW50TWFya2VyTGF5ZXJ9IGxheWVyIC0gdGhlIExheWVyIG9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAtIHRoZSBvcmlnaW5hbCBNYXAgVmlldyBldmVudFxuICAgICAqL1xuICAgIG9uTWFya2VySG92ZXIobWFya2VySWQsIG1hcmtlck9iamVjdCwgbGF5ZXIsIGV2ZW50KSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQobGF5ZXIub25Ib3ZlcikpIHtcbiAgICAgICAgICAgIGxheWVyLm9uSG92ZXIuY2FsbChsYXllcixtYXJrZXJJZCwgbWFya2VyT2JqZWN0LCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB0aGUgTGF5ZXIgaWQgZnJvbSAgYSBjb25jYXRlbmF0ZWQgaWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSB0aGUgY29uY2F0ZW5hdGVkIHN1Y2ggYXMgbGF5ZXJJZCRtYXJrZXJJZFxuICAgICAqIEByZXR1cm4ge251bGx8U3RyaW5nfSB0aGUgTGF5ZXIgaWRcbiAgICAgKi9cbiAgICBnZXRMYXllcklkKGlkKSB7XG4gICAgICAgIGNvbnN0IHNwbGl0ID0gaWQuc3BsaXQoJyQnKTtcblxuICAgICAgICBpZihpc0RlZmluZWQoc3BsaXQpICYmIHNwbGl0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICByZXR1cm4gIHNwbGl0WzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHRoZSBNYXJrZXIgaWQgZnJvbSAgYSBjb25jYXRlbmF0ZWQgaWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSB0aGUgY29uY2F0ZW5hdGVkIHN1Y2ggYXMgbGF5ZXJJZCRtYXJrZXJJZFxuICAgICAqIEByZXR1cm4ge251bGx8U3RyaW5nfSB0aGUgbWFya2VyIGlkXG4gICAgICovXG4gICAgZ2V0TWFya2VySWQoaWQpIHtcbiAgICAgICAgaWYoIWlzRGVmaW5lZChpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNwbGl0ID0gaWQuc3BsaXQoJyQnKTtcblxuICAgICAgICBpZihpc0RlZmluZWQoc3BsaXQpICYmIHNwbGl0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgcmV0dXJuICBzcGxpdFsxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVNYXJrZXIoKSB7fVxuICAgIGFzeW5jIHVwZGF0ZVBvbHlsaW5lKCkge31cbiAgICBhc3luYyB1cGRhdGVQb2x5Z29uKCkge31cbiAgICBhc3luYyB1cGRhdGVFbGxpcHNlKCkge31cbiAgICBhc3luYyB1cGRhdGVDb1BsYW5hclBvbHlnb24oKSB7fVxuICAgIGFzeW5jIHVwZGF0ZURyYXBlZEltYWdlKCkge31cblxufVxuXG5leHBvcnQgZGVmYXVsdCBNYXBWaWV3O1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQge2lzRGVmaW5lZCwgYXNzZXJ0LCBhc3NlcnREZWZpbmVkfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvVXRpbHMuanNcIjtcbmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnO1xuaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnO1xuaW1wb3J0IE1hcFZpZXcgZnJvbSBcIi4vTWFwVmlld1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgaW4gY2hhcmdlIG9mIGRpc3BsYXlpbmcgR1BTL29yaWVudGF0aW9uIGRhdGEgYnkgYWRkaW5nIGEgbWFya2VyIHRvIHRoZSBMZWFmbGV0IE1hcCBvYmplY3QuXG4gKiBAZXh0ZW5kcyBNYXBWaWV3XG4gKiBAZXhhbXBsZVxuXG4gaW1wb3J0IExlYWZsZXRWaWV3IGZyb20gJ2NvcmUvdWkvdmlldy9tYXAvTGVhZmxldFZpZXcuanMnO1xuXG4gbGV0IGxlYWZsZXRNYXBWaWV3ID0gbmV3IExlYWZsZXRWaWV3KHtcblx0Y29udGFpbmVyOiAnbGVhZmxldE1hcCcsXG5cdGxheWVyczogW1xuXHQgIG5ldyBQb2ludE1hcmtlckxheWVyKHtcbiAgICAgIGRhdGFTb3VyY2VJZDogZ3BzRGF0YVNvdXJjZS5pZCxcbiAgICAgIGdldExvY2F0aW9uOiAocmVjKSA9PiAoe1xuICAgICAgICB4OiByZWMubG9jYXRpb24ubG9uLFxuICAgICAgICB5OiByZWMubG9jYXRpb24ubGF0LFxuICAgICAgICB6OiByZWMubG9jYXRpb24uYWx0XG4gICAgICB9KSxcbiAgICAgIGljb246ICcuL2ltYWdlcy9jYXItbG9jYXRpb24ucG5nJyxcbiAgICAgIGljb25TaXplOiBbMzIsIDY0XSxcbiAgICAgIGljb25BbmNob3I6IFsxNiwgNjVdLFxuICAgICAgbmFtZTogJ0NhcicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0dQUyBjYXIgVG91bG91c2UnXG4gICAgfSlcbiAgXSxcblx0YXV0b1pvb21PbkZpcnN0TWFya2VyOiB0cnVlXG59KTtcbiAqL1xuY2xhc3MgTGVhZmxldFZpZXcgZXh0ZW5kcyBNYXBWaWV3IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBWaWV3LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gLSB0aGUgcHJvcGVydGllcyBvZiB0aGUgdmlld1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLmNvbnRhaW5lciAtIFRoZSBkaXYgZWxlbWVudCB0byBhdHRhY2ggdG9cbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSAgW3Byb3BlcnRpZXMubGF5ZXJzPVtdXSAtIFRoZSBpbml0aWFsIGxheWVycyB0byBhZGRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtwcm9wZXJ0aWVzLmF1dG9ab29tT25GaXJzdE1hcmtlcj1mYWxzZV0gLSBhdXRvIHpvb20gb24gdGhlIGZpcnN0IGFkZGVkIG1hcmtlclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3Byb3BlcnRpZXMuZm9sbG93PWZhbHNlXSAtIGZvbGxvdyB0aGUgbWFya2VyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzLmluaXRpYWxWaWV3XSAtIFNldHMgdGhlIHZpZXcgb2YgdGhlIG1hcCAoZ2VvZ3JhcGhpY2FsIGNlbnRlciBhbmQgem9vbSkgd2l0aCB0aGUgZ2l2ZW4gYW5pbWF0aW9uIG9wdGlvbnMuIFtTZWUgZGV0YWlsc117QGxpbmsgaHR0cHM6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS0xLjcuMS5odG1sI21hcC1zZXR2aWV3fVxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IFtwcm9wZXJ0aWVzLm92ZXJsYXlMYXllcnNdIC0gW0wudGlsZUxheWVyXXtAbGluayBodHRwczovL2xlYWZsZXRqcy5jb20vcmVmZXJlbmNlLTEuNy4xLmh0bWwjdGlsZWxheWVyLWwtdGlsZWxheWVyfSBvYmplY3RzIHRvIHVzZSBhcyBvdmVybGF5IGxheWVyXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gW3Byb3BlcnRpZXMuYmFzZUxheWVyc10gLSBbTC50aWxlTGF5ZXJde0BsaW5rIGh0dHBzOi8vbGVhZmxldGpzLmNvbS9yZWZlcmVuY2UtMS43LjEuaHRtbCN0aWxlbGF5ZXItbC10aWxlbGF5ZXJ9IG9iamVjdHMgdG8gdXNlIGFzIGJhc2UgbGF5ZXJcbiAgICAgKlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgc3VwcG9ydGVkTGF5ZXJzOiBbJ21hcmtlcicsJ2RyYXBpbmcnLCAncG9seWxpbmUnLCAncG9seWdvbiddLFxuICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGNzc0NsYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXZJZCkuY2xhc3NOYW1lO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRpdklkKS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBjc3NDbGFzcytcIiBcIit0aGlzLmNzcyk7XG4gICAgfVxuXG4gICAgYmVmb3JlQWRkaW5nSXRlbXMob3B0aW9ucykge1xuICAgICAgICAvLyBpbml0cyB0aGUgbWFwXG4gICAgICAgIHRoaXMuaW5pdE1hcChvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLS0tLS0gTUFQIFNFVFVQIC0tLS0tLS0tLS0tLS0tLy9cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgaW5pdE1hcChvcHRpb25zKSB7XG4gICAgICAgIC8vICNyZWdpb24gc25pcHBldF9sZWFmbGV0dmlld19pbml0aWFsX3ZpZXdcbiAgICAgICAgbGV0IGluaXRpYWxWaWV3ID0ge1xuICAgICAgICAgICAgbG9jYXRpb246IG5ldyBMLkxhdExuZygwLCAwKSxcbiAgICAgICAgICAgIHpvb206IDNcbiAgICAgICAgfTtcbiAgICAgICAgLy8gI2VuZHJlZ2lvbiBzbmlwcGV0X2xlYWZsZXR2aWV3X2luaXRpYWxfdmlld1xuICAgICAgICB0aGlzLmZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5mb2xsb3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hdXRvWm9vbU9uRmlyc3RNYXJrZXIgPSBmYWxzZTtcbiAgICAgICAgbGV0IGRlZmF1bHRMYXllcnMgPSB0aGlzLmdldERlZmF1bHRMYXllcnMoKTtcblxuICAgICAgICBsZXQgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1swXS5sYXllcjtcblxuICAgICAgICBsZXQgYmFzZUxheWVycyA9IHt9O1xuICAgICAgICBsZXQgb3ZlcmxheXMgPSB7fTtcblxuICAgICAgICBiYXNlTGF5ZXJzW2RlZmF1bHRMYXllcnNbMF0ubmFtZV0gPSBkZWZhdWx0TGF5ZXJzWzBdLmxheWVyO1xuICAgICAgICBvdmVybGF5c1tkZWZhdWx0TGF5ZXJzWzFdLm5hbWVdID0gZGVmYXVsdExheWVyc1sxXS5sYXllcjtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb25zKSkge1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb25zLmluaXRpYWxWaWV3KSkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxWaWV3ID0ge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogbmV3IEwuTGF0TG5nKG9wdGlvbnMuaW5pdGlhbFZpZXcubGF0LCBvcHRpb25zLmluaXRpYWxWaWV3LmxvbiksXG4gICAgICAgICAgICAgICAgICAgIHpvb206IG9wdGlvbnMuaW5pdGlhbFZpZXcuem9vbVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVja3MgYXV0b1pvb21cbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucy5hdXRvWm9vbU9uRmlyc3RNYXJrZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvWm9vbU9uRmlyc3RNYXJrZXIgPSBvcHRpb25zLmF1dG9ab29tT25GaXJzdE1hcmtlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY2hlY2tzIG92ZXJsYXllcnNcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucy5vdmVybGF5TGF5ZXJzKSkge1xuICAgICAgICAgICAgICAgIG92ZXJsYXlzID0gb3B0aW9ucy5vdmVybGF5TGF5ZXJzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjaGVja3MgYmFzZUxheWVyXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbnMuYmFzZUxheWVycykpIHtcbiAgICAgICAgICAgICAgICBiYXNlTGF5ZXJzID0gb3B0aW9ucy5iYXNlTGF5ZXJzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbnMuZm9sbG93KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9sbG93ID0gb3B0aW9ucy5mb2xsb3c7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNoZWNrcyBkZWZhdWx0TGF5ZXJcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucy5kZWZhdWx0TGF5ZXIpKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdExheWVyID0gb3B0aW9ucy5kZWZhdWx0TGF5ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXRzIGxheWVycyB0byBtYXBcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgTC5NYXAodGhpcy5kaXZJZCwge1xuICAgICAgICAgICAgZnVsbHNjcmVlbkNvbnRyb2w6IHRydWUsXG4gICAgICAgICAgICBsYXllcnM6IGRlZmF1bHRMYXllclxuICAgICAgICB9KTtcblxuICAgICAgICBMLmNvbnRyb2wubGF5ZXJzKGJhc2VMYXllcnMsIG92ZXJsYXlzKS5hZGRUbyh0aGlzLm1hcCk7XG5cbiAgICAgICAgdGhpcy5tYXAuc2V0Vmlldyhpbml0aWFsVmlldy5sb2NhdGlvbiwgaW5pdGlhbFZpZXcuem9vbSk7XG5cbiAgICAgICAgLy90aGlzLmluaXRMYXllcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsaXN0IG9mIGRlZmF1bHQgbGF5ZXJzLlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqL1xuICAgIGdldERlZmF1bHRMYXllcnMob3B0aW9ucykge1xuICAgICAgICBsZXQgbWF4Wm9vbSA9IDIyO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbnMpICYmIG9wdGlvbnMubWF4Wm9vbSkge1xuICAgICAgICAgICAgbWF4Wm9vbSA9IG9wdGlvbnMubWF4Wm9vbTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb3B5cmlnaHRzXG4gICAgICAgIGxldCBtYkF0dHIgPSAnTWFwIGRhdGEgwqkgPGEgaHJlZj1cImh0dHA6Ly9vcGVuc3RyZWV0bWFwLm9yZ1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycycsXG4gICAgICAgICAgICBtYlVybCA9ICdodHRwOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJztcblxuICAgICAgICBsZXQgZXNyaUxpbmsgPSAnPGEgaHJlZj1cImh0dHA6Ly93d3cuZXNyaS5jb20vXCI+RXNyaTwvYT4nO1xuICAgICAgICBsZXQgZXNyaVdob2xpbmsgPSAnaS1jdWJlZCwgVVNEQSwgVVNHUywgQUVYLCBHZW9FeWUsIEdldG1hcHBpbmcsIEFlcm9ncmlkLCBJR04sIElHUCwgVVBSLUVHUCwgYW5kIHRoZSBHSVMgVXNlciBDb21tdW5pdHknO1xuXG4gICAgICAgIC8vIGxlYWZsZXQgbGF5ZXJzXG4gICAgICAgIGxldCBlc3JpTGF5ZXIgPSBMLnRpbGVMYXllcihcbiAgICAgICAgICAgICdodHRwOi8vc2VydmVyLmFyY2dpc29ubGluZS5jb20vQXJjR0lTL3Jlc3Qvc2VydmljZXMvV29ybGRfSW1hZ2VyeS9NYXBTZXJ2ZXIvdGlsZS97en0ve3l9L3t4fScsIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJyZjb3B5OyAnICsgZXNyaUxpbmsgKyAnLCAnICsgZXNyaVdob2xpbmssXG4gICAgICAgICAgICAgICAgbWF4Wm9vbTogbWF4Wm9vbSxcbiAgICAgICAgICAgICAgICBtYXhOYXRpdmVab29tOiAxOVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHN0cmVldHMgPSBMLnRpbGVMYXllcihtYlVybCwge2lkOiAnbWFwYm94LnN0cmVldHMnLCBhdHRyaWJ1dGlvbjogbWJBdHRyLCBtYXhab29tOiBtYXhab29tfSk7XG5cbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBuYW1lOiBcIk9TTSBTdHJlZXRzXCIsXG4gICAgICAgICAgICBsYXllcjogc3RyZWV0c1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiBcIkVzcmkgU2F0ZWxsaXRlXCIsXG4gICAgICAgICAgICBsYXllcjogZXNyaUxheWVyXG4gICAgICAgIH1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgaW5pdExheWVycygpIHtcbiAgICAgICAgLy8gY3JlYXRlIHRoZSB0aWxlIGxheWVyIHdpdGggY29ycmVjdCBhdHRyaWJ1dGlvblxuICAgICAgICBsZXQgb3NtVXJsID0gJ2h0dHA6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnO1xuICAgICAgICBsZXQgb3NtQXR0cmliID0gJ01hcCBkYXRhIMKpIDxhIGhyZWY9XCJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmdcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMnO1xuICAgICAgICBsZXQgb3NtID0gbmV3IEwudGlsZUxheWVyKG9zbVVybCwge1xuICAgICAgICAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICAgIG1heFpvb206IDIyLFxuICAgICAgICAgICAgYXR0cmlidXRpb246IG9zbUF0dHJpYlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIob3NtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBtYXJrZXIgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge1BvaW50TWFya2VyTGF5ZXIucHJvcGVydGllc30gcHJvcGVydGllcyAtIHRoZSBsYXllciBwcm9wZXJ0aWVzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB0aGUgdGhlIG5ldyBjcmVhdGVkIG1hcmtlclxuICAgICAqL1xuICAgIGFkZE1hcmtlcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGFzc2VydERlZmluZWQocHJvcGVydGllcy5sb2NhdGlvbiwnbG9jYXRpb24nKTtcbiAgICAgICAgLy9jcmVhdGUgbWFya2VyXG4gICAgICAgIGxldCBtYXJrZXIgPSBudWxsO1xuICAgICAgICBpZiAocHJvcGVydGllcy5pY29uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgbWFya2VySWNvbiA9IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogcHJvcGVydGllcy5pY29uQW5jaG9yLFxuICAgICAgICAgICAgICAgIGljb25Vcmw6IHByb3BlcnRpZXMuaWNvbixcbiAgICAgICAgICAgICAgICBpY29uU2l6ZTogcHJvcGVydGllcy5pY29uU2l6ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1hcmtlciA9IEwubWFya2VyKFtwcm9wZXJ0aWVzLmxvY2F0aW9uLnksIHByb3BlcnRpZXMubG9jYXRpb24ueF0sIHtcbiAgICAgICAgICAgICAgICBpY29uOiBtYXJrZXJJY29uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hcmtlciA9IEwubWFya2VyKFtwcm9wZXJ0aWVzLmxvY2F0aW9uLnksIHByb3BlcnRpZXMubG9jYXRpb24ueF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb3BlcnRpZXMubGFiZWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG1hcmtlci5iaW5kVG9vbHRpcChwcm9wZXJ0aWVzLmxhYmVsLCB7XG4gICAgICAgICAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgIG9mZnNldDogTC5wb2ludChwcm9wZXJ0aWVzLmxhYmVsT2Zmc2V0WzBdLCBwcm9wZXJ0aWVzLmxhYmVsT2Zmc2V0WzFdKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbmFtZSA9IHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpICYmIHByb3BlcnRpZXMubGFiZWwgIT0gbnVsbCA/IHByb3BlcnRpZXMubGFiZWwgOiBcIlwiO1xuICAgICAgICBsZXQgZGVzYyA9IHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoXCJkZXNjcmlwdGlvblwiKSAmJiBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uICE9IG51bGwgPyBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uIDogXCJcIjtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQocHJvcGVydGllcy5vbkxlZnRDbGljaykgJiYgKG5hbWUubGVuZ3RoID4gMCB8fCBkZXNjLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICBtYXJrZXIuYmluZFBvcHVwKG5hbWUgKyAnPGRpdj4nICsgZGVzYyArICc8L2Rpdj4nLHtcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IEwucG9pbnQocHJvcGVydGllcy5sYWJlbE9mZnNldFswXSwgcHJvcGVydGllcy5sYWJlbE9mZnNldFsxXSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFya2VyLnNldFpJbmRleE9mZnNldChwcm9wZXJ0aWVzLnpJbmRleCk7XG4gICAgICAgIG1hcmtlci5pZCA9IHByb3BlcnRpZXMuaWQrXCIkXCIrcHJvcGVydGllcy5tYXJrZXJJZDtcbiAgICAgICAgbWFya2VyLmFkZFRvKHRoaXMubWFwKTtcbiAgICAgICAgaWYocHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0aWVzLm9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgbWFya2VyLnNldFJvdGF0aW9uQW5nbGUocHJvcGVydGllcy5vcmllbnRhdGlvbi5oZWFkaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcG9seWxpbmUgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllc1xuICAgICAqL1xuICAgIGFkZFBvbHlsaW5lKHByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25zID0gcHJvcGVydGllcy5sb2NhdGlvbnNbcHJvcGVydGllcy5wb2x5bGluZUlkXTtcbiAgICAgICAgbGV0IHBvbHlsaW5lUG9pbnRzID0gW107XG5cbiAgICAgICAgaWYoaXNEZWZpbmVkKGxvY2F0aW9ucykgJiYgbG9jYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcG9seWxpbmVQb2ludHMucHVzaChuZXcgTC5MYXRMbmcoXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uc1tpXS55LFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnNbaV0ueClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9jcmVhdGUgcGF0aFxuICAgICAgICBsZXQgcG9seWxpbmUgPSBuZXcgTC5Qb2x5bGluZShwb2x5bGluZVBvaW50cywge1xuICAgICAgICAgICAgY29sb3I6IHByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICB3ZWlnaHQ6IHByb3BlcnRpZXMud2VpZ2h0LFxuICAgICAgICAgICAgb3BhY2l0eTogcHJvcGVydGllcy5vcGFjaXR5LFxuICAgICAgICAgICAgc21vb3RoRmFjdG9yOiBwcm9wZXJ0aWVzLnNtb290aEZhY3RvclxuICAgICAgICB9KS5hZGRUbyh0aGlzLm1hcCk7XG5cbiAgICAgICAgcmV0dXJuIHBvbHlsaW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIG1hcmtlciBhc3NvY2lhdGVkIHRvIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge1BvaW50TWFya2VyTGF5ZXIucHJvcHN9IHByb3BzIC0gVGhlIGxheWVyIHByb3BlcnRpZXMgYWxsb3dpbmcgdGhlIHVwZGF0ZSBvZiB0aGUgbWFya2VyXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlTWFya2VyKHByb3BzKSB7XG4gICAgICAgIGxldCBtYXJrZXIgPSB0aGlzLmdldE1hcmtlcihwcm9wcyk7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKG1hcmtlcikpIHtcbiAgICAgICAgICAgIC8vIGFkZHMgYSBuZXcgbWFya2VyIHRvIHRoZSBsZWFmbGV0IHJlbmRlcmVyXG4gICAgICAgICAgICBtYXJrZXIgPSB0aGlzLmFkZE1hcmtlcihwcm9wcyk7XG4gICAgICAgICAgICB0aGlzLmFkZE1hcmtlclRvTGF5ZXIocHJvcHMsIG1hcmtlcik7XG4gICAgICAgICAgICBjb25zdCBtSWQgPSBwcm9wcy5tYXJrZXJJZDsgLy9uZWVkIHRvIGZyZWV6ZVxuICAgICAgICAgICAgbWFya2VyLm9uKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5vbk1hcmtlckxlZnRDbGljayhtSWQsbWFya2VyLCBwcm9wcywgZXZlbnQpKTtcbiAgICAgICAgICAgIG1hcmtlci5vbignY29udGV4dG1lbnUnLCAoZXZlbnQpID0+IHRoaXMub25NYXJrZXJSaWdodENsaWNrKG1JZCxtYXJrZXIsIHByb3BzLCBldmVudCkpO1xuICAgICAgICAgICAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCAoZXZlbnQpID0+IHRoaXMub25NYXJrZXJIb3ZlcihtSWQsbWFya2VyLCBwcm9wcywgZXZlbnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdldCB0aGUgY3VycmVudCBtYXJrZXIgY29ycmVzcG9uZGluZyB0byB0aGUgY3VycmVudCBtYXJrZXJJZCB2YWx1ZSBvZiB0aGUgUG9pbnRNYXJrZXJcbiAgICAgICAgLy8gdXBkYXRlcyBwb3NpdGlvblxuICAgICAgICBsZXQgbG9uID0gcHJvcHMubG9jYXRpb24ueDtcbiAgICAgICAgbGV0IGxhdCA9IHByb3BzLmxvY2F0aW9uLnk7XG5cbiAgICAgICAgaWYgKCFpc05hTihsb24pICYmICFpc05hTihsYXQpKSB7XG4gICAgICAgICAgICBsZXQgbmV3TGF0TG5nID0gbmV3IEwuTGF0TG5nKGxhdCwgbG9uKTtcbiAgICAgICAgICAgIG1hcmtlci5zZXRMYXRMbmcobmV3TGF0TG5nKTtcbiAgICAgICAgICAgIGlmKCh0aGlzLmZpcnN0ICYmIHRoaXMuYXV0b1pvb21PbkZpcnN0TWFya2VyKSB8fCB0aGlzLmZvbGxvdykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlckJvdW5kcyA9IEwubGF0TG5nQm91bmRzKFtuZXdMYXRMbmcgXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKG1hcmtlckJvdW5kcywge1xuICAgICAgICAgICAgICAgICAgICBtYXhab29tOiBwcm9wcy56b29tTGV2ZWxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGVzIG9yaWVudGF0aW9uXG4gICAgICAgIGlmKGlzRGVmaW5lZChwcm9wcy5vcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgIG1hcmtlci5zZXRSb3RhdGlvbkFuZ2xlKHByb3BzLm9yaWVudGF0aW9uLmhlYWRpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb3BzLmljb24gIT09IG51bGwgJiYgbWFya2VyLl9pY29uLmljb25VcmwgIT09IHByb3BzLmljb24pIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZXMgaWNvblxuICAgICAgICAgICAgbGV0IG1hcmtlckljb24gPSBMLmljb24oe1xuICAgICAgICAgICAgICAgIGljb25BbmNob3I6IHByb3BzLmljb25BbmNob3IsXG4gICAgICAgICAgICAgICAgaWNvblVybDogcHJvcHMuaWNvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtYXJrZXIuc2V0SWNvbihtYXJrZXJJY29uKTtcbiAgICAgICAgfVxuICAgICAgICBtYXJrZXIuc2V0WkluZGV4T2Zmc2V0KHByb3BzLnpJbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWJzdHJhY3QgbWV0aG9kIHRvIHJlbW92ZSBhIG1hcmtlciBmcm9tIGl0cyBjb3JyZXNwb25kaW5nIGxheWVyLlxuICAgICAqIFRoaXMgaXMgbGlicmFyeSBkZXBlbmRhbnQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcmtlciAtIFRoZSBNYXAgbWFya2VyIG9iamVjdFxuICAgICAqL1xuICAgIHJlbW92ZU1hcmtlckZyb21MYXllcihtYXJrZXIpIHtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBYnN0cmFjdCBtZXRob2QgdG8gcmVtb3ZlIGEgcG9seWxpbmUgZnJvbSBpdHMgY29ycmVzcG9uZGluZyBsYXllci5cbiAgICAgKiBUaGlzIGlzIGxpYnJhcnkgZGVwZW5kYW50LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwb2x5bGluZSAtIFRoZSBNYXAgcG9seWxpbmUgb2JqZWN0XG4gICAgICovXG4gICAgcmVtb3ZlUG9seWxpbmVGcm9tTGF5ZXIocG9seWxpbmUpIHtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIocG9seWxpbmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHBvbHlsaW5lIGFzc29jaWF0ZWQgdG8gdGhlIGxheWVyLlxuICAgICAqIEBwYXJhbSB7UG9seWxpbmVMYXllci5wcm9wc30gcHJvcHMgLSBUaGUgbGF5ZXIgcHJvcGVydGllcyBhbGxvd2luZyB0aGUgdXBkYXRlIG9mIHRoZSBwb2x5bGluZVxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZVBvbHlsaW5lKHByb3BzKSB7XG4gICAgICAgIGxldCBwb2x5bGluZSA9IHRoaXMuZ2V0UG9seWxpbmUocHJvcHMpO1xuICAgICAgICBpZiAoIWlzRGVmaW5lZChwb2x5bGluZSkpIHtcbiAgICAgICAgICAgIC8vIGFkZHMgYSBuZXcgcG9seWdvbiB0byB0aGUgbGVhZmxldCByZW5kZXJlclxuICAgICAgICAgICAgY29uc3QgcG9seWxpbmVPYmogPSB0aGlzLmFkZFBvbHlsaW5lKHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuYWRkUG9seWxpbmVUb0xheWVyKHByb3BzLCBwb2x5bGluZU9iaik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgcG9seWxpbmVQb2ludHMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IHByb3BzLmxvY2F0aW9uc1twcm9wcy5wb2x5bGluZUlkXTtcblxuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKGxvY2F0aW9ucykgJiYgbG9jYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwb2x5bGluZVBvaW50cy5wdXNoKG5ldyBMLkxhdExuZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uc1tpXS55LFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zW2ldLngpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9seWxpbmUuc2V0TGF0TG5ncyhwb2x5bGluZVBvaW50cyk7XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzdHlsZVxuICAgICAgICAgICAgcG9seWxpbmUuc2V0U3R5bGUoe1xuICAgICAgICAgICAgICAgIGNvbG9yOiBwcm9wcy5jb2xvcixcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IHByb3BzLndlaWdodCxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiBwcm9wcy5vcGFjaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHBvbHlnb24gYXNzb2NpYXRlZCB0byB0aGUgbGF5ZXIuXG4gICAgICogQHBhcmFtIHtQb2x5Z29uLnByb3BzfSBwcm9wcyAtIFRoZSBsYXllciBwcm9wZXJ0aWVzIGFsbG93aW5nIHRoZSB1cGRhdGUgb2YgdGhlIHBvbHlnb25cbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVQb2x5Z29uKHByb3BzKSB7XG4gICAgICAgIGxldCBwb2x5Z29uID0gdGhpcy5nZXRQb2x5Z29uKHByb3BzKTtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQocG9seWdvbikpIHtcbiAgICAgICAgICAgIC8vIGFkZHMgYSBuZXcgcG9seWdvbiB0byB0aGUgbGVhZmxldCByZW5kZXJlclxuICAgICAgICAgICAgY29uc3QgcG9seWdvbk9iaiA9IHRoaXMuYWRkUG9seWdvbihwcm9wcyk7XG4gICAgICAgICAgICB0aGlzLmFkZFBvbHlnb25Ub0xheWVyKHByb3BzLCBwb2x5Z29uT2JqKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhdGlvblxuICAgICAgICAgICAgY29uc3QgdmVydGljZXMgPSBwcm9wcy52ZXJ0aWNlc1twcm9wcy5wb2x5Z29uSWRdO1xuXG4gICAgICAgICAgICBsZXQgcG9seWdvblBvaW50cyA9IFtdO1xuXG4gICAgICAgICAgICBpZihpc0RlZmluZWQodmVydGljZXMpICYmIHZlcnRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aCAtIDE7IGkgPSBpICsgMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGF0TG9uID0gbmV3IEwuTGF0TG5nKHZlcnRpY2VzW2kgKyAxIF0sIHZlcnRpY2VzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgcG9seWdvblBvaW50cy5wdXNoKFtsYXRMb24ubGF0LGxhdExvbi5sbmddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2x5Z29uLnNldExhdExuZ3MocG9seWdvblBvaW50cyk7XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzdHlsZVxuICAgICAgICAgICAgcG9seWdvbi5zZXRTdHlsZSh7XG4gICAgICAgICAgICAgICAgY29sb3I6IHByb3BzLm91dGxpbmVDb2xvcixcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IHByb3BzLm91dGxpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IHByb3BzLmNvbG9yLFxuICAgICAgICAgICAgICAgIGZpbGwgOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiBwcm9wcy5vcGFjaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCB0byByZW1vdmUgYSBwb2x5Z29uIGZyb20gaXRzIGNvcnJlc3BvbmRpbmcgbGF5ZXIuXG4gICAgICogVGhpcyBpcyBsaWJyYXJ5IGRlcGVuZGFudC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcG9seWdvbiAtIFRoZSBNYXAgcG9seWdvbiBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVQb2x5Z29uRnJvbUxheWVyKHBvbHlnb24pIHtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIocG9seWdvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcG9seWdvbiB0byB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWRkUG9seWdvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gcHJvcGVydGllcy52ZXJ0aWNlc1twcm9wZXJ0aWVzLnBvbHlnb25JZF07XG5cbiAgICAgICAgbGV0IHBvbHlnb25Qb2ludHMgPSBbXTtcblxuICAgICAgICBpZihpc0RlZmluZWQodmVydGljZXMpICYmIHZlcnRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoIC0gMTsgaSA9IGkgKyAyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxhdExvbiA9IG5ldyBMLkxhdExuZyh2ZXJ0aWNlc1tpICsgMSBdLCB2ZXJ0aWNlc1tpXSk7XG4gICAgICAgICAgICAgICAgcG9seWdvblBvaW50cy5wdXNoKFtsYXRMb24ubGF0LGxhdExvbi5sbmddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vY3JlYXRlIHBvbHlnb25cbiAgICAgICAgbGV0IHBvbHlnb24gPSBuZXcgTC5wb2x5Z29uKHBvbHlnb25Qb2ludHMsIHtcbiAgICAgICAgICAgIGNvbG9yOiBwcm9wZXJ0aWVzLm91dGxpbmVDb2xvcixcbiAgICAgICAgICAgIHdlaWdodDogcHJvcGVydGllcy5vdXRsaW5lV2lkdGgsXG4gICAgICAgICAgICBmaWxsQ29sb3I6IHByb3BlcnRpZXMuY29sb3IsXG4gICAgICAgICAgICBmaWxsIDogdHJ1ZSxcbiAgICAgICAgICAgIGZpbGxPcGFjaXR5OiBwcm9wZXJ0aWVzLm9wYWNpdHlcbiAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApO1xuICAgICAgICByZXR1cm4gcG9seWdvbjtcbiAgICB9XG5cbiAgICBhdHRhY2hUbyhwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmF0dGFjaFRvKHBhcmVudEVsZW1lbnQpO1xuICAgICAgICAvLyBGaXggbGVhZmxldCBidWcgd2hlbiByZXNpemluZyB0aGUgZGl2IHBhcmVudCBjb250YWluZXJcbiAgICAgICAgdGhpcy5tYXAuaW52YWxpZGF0ZVNpemUoKTtcbiAgICB9XG5cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgc3VwZXIub25SZXNpemUoKTtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IHRoYXQubWFwLmludmFsaWRhdGVTaXplKCl9LCAxMDApO1xuXG4gICAgfVxuXG4gICAgb25DaGFuZ2UoZGF0YSkge31cbn1cblxuLyoqKiAgbGl0dGxlIGhhY2sgc3RhcnRzIGhlcmUgKioqL1xuXG5MLk1hcCA9IEwuTWFwLmV4dGVuZCh7XG4gICAgb3BlblBvcHVwOiBmdW5jdGlvbiAocG9wdXApIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkTGF5ZXIocG9wdXApLmZpcmUoJ3BvcHVwb3BlbicsIHtcbiAgICAgICAgICAgIHBvcHVwOiB0aGlzLl9wb3B1cFxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLy8gRGVmaW5lcyByb3RhdGVkIG1hcmtlclxuKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBzYXZlIHRoZXNlIG9yaWdpbmFsIG1ldGhvZHMgYmVmb3JlIHRoZXkgYXJlIG92ZXJ3cml0dGVuXG4gICAgbGV0IHByb3RvX2luaXRJY29uID0gTC5NYXJrZXIucHJvdG90eXBlLl9pbml0SWNvbjtcbiAgICBsZXQgcHJvdG9fc2V0UG9zID0gTC5NYXJrZXIucHJvdG90eXBlLl9zZXRQb3M7XG5cbiAgICBsZXQgb2xkSUUgPSAoTC5Eb21VdGlsLlRSQU5TRk9STSA9PT0gJ21zVHJhbnNmb3JtJyk7XG5cbiAgICBMLk1hcmtlci5hZGRJbml0SG9vayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBpY29uQW5jaG9yID0gdGhpcy5vcHRpb25zLmljb24ub3B0aW9ucy5pY29uQW5jaG9yO1xuICAgICAgICBpZiAoaWNvbkFuY2hvcikge1xuICAgICAgICAgICAgaWNvbkFuY2hvciA9IChpY29uQW5jaG9yWzBdICsgJ3B4ICcgKyBpY29uQW5jaG9yWzFdICsgJ3B4Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zLnJvdGF0aW9uT3JpZ2luID0gdGhpcy5vcHRpb25zLnJvdGF0aW9uT3JpZ2luIHx8IGljb25BbmNob3IgfHwgJ2NlbnRlciBib3R0b20nO1xuICAgICAgICB0aGlzLm9wdGlvbnMucm90YXRpb25BbmdsZSA9IHRoaXMub3B0aW9ucy5yb3RhdGlvbkFuZ2xlIHx8IDA7XG4gICAgfSk7XG5cbiAgICBMLk1hcmtlci5pbmNsdWRlKHtcbiAgICAgICAgX2luaXRJY29uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwcm90b19pbml0SWNvbi5jYWxsKHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9zZXRQb3M6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgICAgICAgIHByb3RvX3NldFBvcy5jYWxsKHRoaXMsIHBvcyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucm90YXRpb25BbmdsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ljb24uc3R5bGVbTC5Eb21VdGlsLlRSQU5TRk9STSArICdPcmlnaW4nXSA9IHRoaXMub3B0aW9ucy5yb3RhdGlvbk9yaWdpbjtcblxuICAgICAgICAgICAgICAgIGlmIChvbGRJRSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgSUUgOSwgdXNlIHRoZSAyRCByb3RhdGlvblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pY29uLnN0eWxlW0wuRG9tVXRpbC5UUkFOU0ZPUk1dID0gJyByb3RhdGUoJyArIHRoaXMub3B0aW9ucy5yb3RhdGlvbkFuZ2xlICsgJ2RlZyknO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciBtb2Rlcm4gYnJvd3NlcnMsIHByZWZlciB0aGUgM0QgYWNjZWxlcmF0ZWQgdmVyc2lvblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pY29uLnN0eWxlW0wuRG9tVXRpbC5UUkFOU0ZPUk1dICs9ICcgcm90YXRlWignICsgdGhpcy5vcHRpb25zLnJvdGF0aW9uQW5nbGUgKyAnZGVnKSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldFJvdGF0aW9uQW5nbGU6IGZ1bmN0aW9uIChhbmdsZSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJvdGF0aW9uQW5nbGUgPSBhbmdsZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRSb3RhdGlvbk9yaWdpbjogZnVuY3Rpb24gKG9yaWdpbikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJvdGF0aW9uT3JpZ2luID0gb3JpZ2luO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG59KSgpO1xuXG5cbi8qKiogIGVuZCBvZiBoYWNrICoqKi9cblxuZXhwb3J0IGRlZmF1bHQgIExlYWZsZXRWaWV3O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///24\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/layer/Layer.js\nvar Layer = __webpack_require__(12);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/layer/BinaryDataLayer.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends Layer\n * @example\n *\n * import BinaryDataLayer from \'osh-js/core/ui/layer/BinaryDataLayer\';\n *\n */\n\nclass BinaryDataLayer_BinaryDataLayer extends Layer["a" /* default */] {\n  constructor(properties) {\n    super(properties);\n    this.type = \'binaryData\';\n    this.props.dataId = Object(Utils["m" /* randomUUID */])();\n    this.props.frameData = undefined;\n\n    if (Object(Utils["k" /* isDefined */])(properties.frameData)) {\n      this.props.frameData = properties.frameData;\n    }\n\n    let that = this;\n\n    if (Object(Utils["k" /* isDefined */])(properties.getFrameData)) {\n      let fn = async rec => {\n        that.props.frameData = await that.getFunc(\'getFrameData\')(rec);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getFrameData\'), fn);\n    }\n\n    this.saveState();\n  }\n\n}\n\n/* harmony default export */ var layer_BinaryDataLayer = (BinaryDataLayer_BinaryDataLayer);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/layer/VideoDataLayer.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends BinaryDataLayer\n * @example\n *\n * import VideoDataLayer from \'osh-js/core/ui/layer/VideoDataLayer\';\n *\n */\n\nclass VideoDataLayer_VideoDataLayer extends layer_BinaryDataLayer {\n  constructor(properties) {\n    super(properties);\n    this.type = \'videoData\';\n    this.props.roll = 0;\n\n    if (Object(Utils["k" /* isDefined */])(properties.roll)) {\n      this.props.roll = properties.roll;\n    }\n\n    let that = this;\n\n    if (Object(Utils["k" /* isDefined */])(properties.getRoll)) {\n      let fn = async rec => {\n        that.props.roll = await that.getFunc(\'getRoll\')(rec);\n      };\n\n      this.addFn(that.getDataSourcesIdsByProperty(\'getRoll\'), fn);\n    }\n\n    this.saveState();\n  }\n\n}\n\n/* harmony default export */ var layer_VideoDataLayer = __webpack_exports__["a"] = (VideoDataLayer_VideoDataLayer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9CaW5hcnlEYXRhTGF5ZXIuanM/MzMzYyIsIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9WaWRlb0RhdGFMYXllci5qcz9kZjZhIl0sIm5hbWVzIjpbIkJpbmFyeURhdGFMYXllciIsIkxheWVyIiwiY29uc3RydWN0b3IiLCJwcm9wZXJ0aWVzIiwidHlwZSIsInByb3BzIiwiZGF0YUlkIiwicmFuZG9tVVVJRCIsImZyYW1lRGF0YSIsInVuZGVmaW5lZCIsImlzRGVmaW5lZCIsInRoYXQiLCJnZXRGcmFtZURhdGEiLCJmbiIsInJlYyIsImdldEZ1bmMiLCJhZGRGbiIsImdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSIsInNhdmVTdGF0ZSIsIlZpZGVvRGF0YUxheWVyIiwicm9sbCIsImdldFJvbGwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBLE1BQU1BLCtCQUFOLFNBQThCQyx3QkFBOUIsQ0FBb0M7RUFFaENDLFdBQVcsQ0FBQ0MsVUFBRCxFQUFhO0lBQ3BCLE1BQU1BLFVBQU47SUFDQSxLQUFLQyxJQUFMLEdBQVksWUFBWjtJQUNBLEtBQUtDLEtBQUwsQ0FBV0MsTUFBWCxHQUFvQkMsbUNBQVUsRUFBOUI7SUFDQSxLQUFLRixLQUFMLENBQVdHLFNBQVgsR0FBdUJDLFNBQXZCOztJQUVBLElBQUlDLGtDQUFTLENBQUNQLFVBQVUsQ0FBQ0ssU0FBWixDQUFiLEVBQW9DO01BQ2hDLEtBQUtILEtBQUwsQ0FBV0csU0FBWCxHQUF1QkwsVUFBVSxDQUFDSyxTQUFsQztJQUNIOztJQUVELElBQUlHLElBQUksR0FBRyxJQUFYOztJQUVBLElBQUlELGtDQUFTLENBQUNQLFVBQVUsQ0FBQ1MsWUFBWixDQUFiLEVBQXVDO01BQ25DLElBQUlDLEVBQUUsR0FBRyxNQUFPQyxHQUFQLElBQWU7UUFDcEJILElBQUksQ0FBQ04sS0FBTCxDQUFXRyxTQUFYLEdBQXVCLE1BQU1HLElBQUksQ0FBQ0ksT0FBTCxDQUFhLGNBQWIsRUFBNkJELEdBQTdCLENBQTdCO01BQ0gsQ0FGRDs7TUFHQSxLQUFLRSxLQUFMLENBQVdMLElBQUksQ0FBQ00sMkJBQUwsQ0FBaUMsY0FBakMsQ0FBWCxFQUE2REosRUFBN0Q7SUFDSDs7SUFFRCxLQUFLSyxTQUFMO0VBQ0g7O0FBdEIrQjs7QUF3QnJCbEIseUZBQWYsRTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBLE1BQU1tQiw2QkFBTixTQUE2Qm5CLHFCQUE3QixDQUE2QztFQUV6Q0UsV0FBVyxDQUFDQyxVQUFELEVBQWE7SUFDcEIsTUFBTUEsVUFBTjtJQUNBLEtBQUtDLElBQUwsR0FBWSxXQUFaO0lBQ0EsS0FBS0MsS0FBTCxDQUFXZSxJQUFYLEdBQWtCLENBQWxCOztJQUVBLElBQUlWLGtDQUFTLENBQUNQLFVBQVUsQ0FBQ2lCLElBQVosQ0FBYixFQUErQjtNQUMzQixLQUFLZixLQUFMLENBQVdlLElBQVgsR0FBa0JqQixVQUFVLENBQUNpQixJQUE3QjtJQUNIOztJQUVELElBQUlULElBQUksR0FBRyxJQUFYOztJQUVBLElBQUlELGtDQUFTLENBQUNQLFVBQVUsQ0FBQ2tCLE9BQVosQ0FBYixFQUFrQztNQUM5QixJQUFJUixFQUFFLEdBQUcsTUFBT0MsR0FBUCxJQUFlO1FBQ3BCSCxJQUFJLENBQUNOLEtBQUwsQ0FBV2UsSUFBWCxHQUFrQixNQUFNVCxJQUFJLENBQUNJLE9BQUwsQ0FBYSxTQUFiLEVBQXdCRCxHQUF4QixDQUF4QjtNQUNILENBRkQ7O01BR0EsS0FBS0UsS0FBTCxDQUFXTCxJQUFJLENBQUNNLDJCQUFMLENBQWlDLFNBQWpDLENBQVgsRUFBd0RKLEVBQXhEO0lBQ0g7O0lBRUQsS0FBS0ssU0FBTDtFQUNIOztBQXJCd0M7O0FBdUI5QkMsaUhBQWYiLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIyIE1hdGhpZXUgRGhhaW5hdXQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmltcG9ydCBMYXllciBmcm9tIFwiLi9MYXllci5qc1wiO1xuaW1wb3J0IHtpc0RlZmluZWQsIHJhbmRvbVVVSUR9IGZyb20gXCIuLi8uLi91dGlscy9VdGlsc1wiO1xuXG4vKipcbiAqIEBleHRlbmRzIExheWVyXG4gKiBAZXhhbXBsZVxuICpcbiAqIGltcG9ydCBCaW5hcnlEYXRhTGF5ZXIgZnJvbSAnb3NoLWpzL2NvcmUvdWkvbGF5ZXIvQmluYXJ5RGF0YUxheWVyJztcbiAqXG4gKi9cbmNsYXNzIEJpbmFyeURhdGFMYXllciBleHRlbmRzIExheWVyIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocHJvcGVydGllcyk7XG4gICAgICAgIHRoaXMudHlwZSA9ICdiaW5hcnlEYXRhJztcbiAgICAgICAgdGhpcy5wcm9wcy5kYXRhSWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIHRoaXMucHJvcHMuZnJhbWVEYXRhID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy5mcmFtZURhdGEpKXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZnJhbWVEYXRhID0gcHJvcGVydGllcy5mcmFtZURhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmdldEZyYW1lRGF0YSkpe1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYykgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQucHJvcHMuZnJhbWVEYXRhID0gYXdhaXQgdGhhdC5nZXRGdW5jKCdnZXRGcmFtZURhdGEnKShyZWMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhhdC5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldEZyYW1lRGF0YScpLCBmbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNhdmVTdGF0ZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEJpbmFyeURhdGFMYXllcjtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjIgTWF0aGlldSBEaGFpbmF1dC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gXCIuLi8uLi91dGlscy9VdGlsc1wiO1xuaW1wb3J0IEJpbmFyeURhdGFMYXllciBmcm9tIFwiLi9CaW5hcnlEYXRhTGF5ZXJcIjtcblxuLyoqXG4gKiBAZXh0ZW5kcyBCaW5hcnlEYXRhTGF5ZXJcbiAqIEBleGFtcGxlXG4gKlxuICogaW1wb3J0IFZpZGVvRGF0YUxheWVyIGZyb20gJ29zaC1qcy9jb3JlL3VpL2xheWVyL1ZpZGVvRGF0YUxheWVyJztcbiAqXG4gKi9cbmNsYXNzIFZpZGVvRGF0YUxheWVyIGV4dGVuZHMgQmluYXJ5RGF0YUxheWVyIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocHJvcGVydGllcyk7XG4gICAgICAgIHRoaXMudHlwZSA9ICd2aWRlb0RhdGEnO1xuICAgICAgICB0aGlzLnByb3BzLnJvbGwgPSAwO1xuXG4gICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy5yb2xsKSl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnJvbGwgPSBwcm9wZXJ0aWVzLnJvbGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmdldFJvbGwpKXtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGF0LnByb3BzLnJvbGwgPSBhd2FpdCB0aGF0LmdldEZ1bmMoJ2dldFJvbGwnKShyZWMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhhdC5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldFJvbGwnKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zYXZlU3RhdGUoKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBWaWRlb0RhdGFMYXllcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///25\n')},,,,,,,function(module,exports,__webpack_require__){eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(33);\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = __webpack_require__(5).default\nvar update = add(\"759d7ef5\", content, false, {});\n// Hot Module Replacement\nif(false) {}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9yZXNvdXJjZXMvY3NzL3ZpZXcuY3NzPzM5ZjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQSxjQUFjLG1CQUFPLENBQUMsRUFBc0c7QUFDNUg7QUFDQSw0Q0FBNEMsUUFBUztBQUNyRDtBQUNBO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLENBQTJHO0FBQzdILCtDQUErQztBQUMvQztBQUNBLEdBQUcsS0FBVSxFQUFFIiwiZmlsZSI6IjMyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uL2RlbW9zL3ZpZGVvLWRpc3BsYXkvdmlkZW8tZGlzcGxheS12dWVqcy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3ZpZXcuY3NzXCIpO1xuaWYoY29udGVudC5fX2VzTW9kdWxlKSBjb250ZW50ID0gY29udGVudC5kZWZhdWx0O1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciBhZGQgPSByZXF1aXJlKFwiIS4uLy4uLy4uLy4uL2RlbW9zL3ZpZGVvLWRpc3BsYXkvdmlkZW8tZGlzcGxheS12dWVqcy9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCI3NTlkN2VmNVwiLCBjb250ZW50LCBmYWxzZSwge30pO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuIC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG4gaWYoIWNvbnRlbnQubG9jYWxzKSB7XG4gICBtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vLi4vZGVtb3MvdmlkZW8tZGlzcGxheS92aWRlby1kaXNwbGF5LXZ1ZWpzL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdmlldy5jc3NcIiwgZnVuY3Rpb24oKSB7XG4gICAgIHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vLi4vZGVtb3MvdmlkZW8tZGlzcGxheS92aWRlby1kaXNwbGF5LXZ1ZWpzL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdmlldy5jc3NcIik7XG4gICAgIGlmKG5ld0NvbnRlbnQuX19lc01vZHVsZSkgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQuZGVmYXVsdDtcbiAgICAgaWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG4gICAgIHVwZGF0ZShuZXdDb250ZW50KTtcbiAgIH0pO1xuIH1cbiAvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG4gbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///32\n")},function(module,exports,__webpack_require__){eval('// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(4);\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, ".osh-view {\\n    width:100%;\\n    height: 100%;\\n}\\n", ""]);\n// Exports\nmodule.exports = exports;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9yZXNvdXJjZXMvY3NzL3ZpZXcuY3NzPzE1ZGQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxrQ0FBa0MsbUJBQU8sQ0FBQyxDQUFpRztBQUMzSTtBQUNBO0FBQ0EsY0FBYyxRQUFTLGNBQWMsaUJBQWlCLG1CQUFtQixHQUFHO0FBQzVFO0FBQ0EiLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL2RlbW9zL3ZpZGVvLWRpc3BsYXkvdmlkZW8tZGlzcGxheS12dWVqcy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5vc2gtdmlldyB7XFxuICAgIHdpZHRoOjEwMCU7XFxuICAgIGhlaWdodDogMTAwJTtcXG59XFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///33\n')}]]);