(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* unused harmony export MAX_LONG */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return isDefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return hasValue; });\n/* unused harmony export hex2rgb */\n/* unused harmony export hasType */\n/* unused harmony export isObject */\n/* unused harmony export isArray */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return isFunction; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return assertDefined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return assertTrue; });\n/* unused harmony export assertType */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return assertBoolean; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return assertString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return assertNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return assertPositive; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return assertObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return assertArray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return assertFunction; });\n/* unused harmony export assertHasValue */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return randomUUID; });\n/* unused harmony export stampUUID */\n/* unused harmony export ParseBytes */\n/* unused harmony export ReadData */\n/* unused harmony export GetResultObject */\n/* unused harmony export isOpera */\n/* unused harmony export isFirefox */\n/* unused harmony export isSafari */\n/* unused harmony export isChrome */\n/* unused harmony export isBlink */\n/* unused harmony export isArrayIntersect */\n/* unused harmony export isElement */\n/* unused harmony export isWebWorker */\n/* unused harmony export takeScreenShot */\n/* unused harmony export removeCss */\n/* unused harmony export addCss */\n/* unused harmony export removeLastCharIfExist */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return capitalizeFirstLetter; });\n/* unused harmony export roundHalf */\n/* unused harmony export debounce */\n/* unused harmony export throttle */\n/* unused harmony export merge */\n/* unused harmony export rgbaToArray */\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/** * @module Utils */\n\n/** Maximum value of a long */\nconst MAX_LONG = Math.pow(2, 53) + 1;\n/**\n * Global helper method to test if a letiable or object attribute is defined\n */\n\nfunction isDefined(v) {\n  return typeof v !== \'undefined\' && v !== null;\n}\n/**\n Global helper method to test if a letiable or object attribute has a value,\n that is it is defined and non null\n */\n\nfunction hasValue(v) {\n  return isDefined(v) && v !== null;\n}\n/**\n Global helper method to transform hex color into RGBA\n */\n\nfunction hex2rgb(hex) {\n  const [r, g, b] = hex.match(/\\w\\w/g).map(x => parseInt(x, 16));\n  return [r, g, b];\n}\n/**\n Global helper method to test if a letiable or object attribute is of a particular type\n */\n\nfunction hasType(v, expectedType) {\n  let hasVal = hasValue(v);\n  return hasVal && typeof v === expectedType;\n}\n/**\n Global helper method to test if a letiable or object attribute is an object\n */\n\nfunction isObject(v, letName) {\n  return hasType(v, \'object\', letName);\n}\n/**\n Global helper method to test if a letiable or object attribute is an array\n */\n\nfunction isArray(v) {\n  return isDefined(v) && Array.isArray(v);\n}\n/**\n Global helper method to test if a letiable or object attribute is a function\n */\n\nfunction isFunction(v, letName) {\n  return hasType(v, \'function\', letName);\n}\n/**\n Assert that a letiable or object attribute is defined\n **/\n\nfunction assertDefined(v, letName = \'letiable\') {\n  if (!isDefined(v)) {\n    throw letName + " must be defined";\n  }\n\n  return v;\n}\nfunction assertTrue(v, letName = \'letiable\') {\n  if (!isDefined(v) || !v) {\n    throw letName;\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\n\nfunction assertType(v, expectedType, letName = \'letiable\') {\n  assertDefined(v, letName);\n\n  if (typeof v !== expectedType) {\n    throw letName + " must be of type " + expectedType;\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is a string\n **/\n\nfunction assertBoolean(v, letName) {\n  return assertType(v, \'boolean\', letName);\n}\n/**\n Assert that a letiable or object attribute is a string\n **/\n\nfunction assertString(v, letName) {\n  return assertType(v, \'string\', letName);\n}\n/**\n Assert that a letiable or object attribute is a number\n **/\n\nfunction assertNumber(v, letName) {\n  return assertType(v, \'number\', letName);\n}\n/**\n Assert that a letiable or object attribute is a number\n **/\n\nfunction assertPositive(v, letName) {\n  assertNumber(v, letName);\n\n  if (v <= 0) {\n    throw letName + " must be a positive number";\n  }\n}\n/**\n Assert that a letiable or object attribute is an object\n **/\n\nfunction assertObject(v, letName) {\n  return assertType(v, \'object\', letName);\n}\n/**\n Assert that a letiable or object attribute is an object\n **/\n\nfunction assertArray(v, letName = \'letiable\') {\n  assertDefined(v, letName);\n\n  if (!Array.isArray(v)) {\n    throw letName + " must be an array";\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is a function\n **/\n\nfunction assertFunction(v, letName) {\n  return assertType(v, \'function\', letName);\n}\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\n\nfunction assertHasValue(v, letName = \'letiable\') {\n  assertDefined(v, letName);\n\n  if (!hasValue(v)) {\n    throw letName + " must not be null";\n  }\n\n  return v;\n}\n/**\n *\n * @return {String}\n */\n\nfunction randomUUID() {\n  return \'xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx\'.replace(/[xy]/g, function (c) {\n    let r = Math.random() * 16 | 0,\n        v = c === \'x\' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n/**\n * This function stamps/embeds a UUID into an object and returns the UUID generated for it\n * @return {String}\n */\n\nfunction stampUUID(obj) {\n  obj._osh_id = obj._osh_id || randomUUID();\n  return obj._osh_id;\n} //buffer is an ArrayBuffer object, the offset if specified in bytes, and the type is a string\n//corresponding to an OGC data type.\n//See http://def.seegrid.csiro.au/sissvoc/ogc-def/resource?uri=http://www.opengis.net/def/dataType/OGC/0/\n\n/**\n *\n * @param buffer\n * @param offset\n * @param type\n * @return {*}\n */\n\nfunction ParseBytes(buffer, offset, type) {\n  let view = new DataView(buffer); //Note: There exist types not listed in the map below that have OGC definitions, but no appropriate\n  //methods or corresponding types available for parsing in javascript. They are float128, float16, signedLong,\n  //and unsignedLong\n\n  let typeMap = {\n    double: function (offset) {\n      return {\n        val: view.getFloat64(offset),\n        bytes: 8\n      };\n    },\n    float64: function (offset) {\n      return {\n        val: view.getFloat64(offset),\n        bytes: 8\n      };\n    },\n    float32: function (offset) {\n      return {\n        val: view.getFloat32(offset),\n        bytes: 4\n      };\n    },\n    signedByte: function (offset) {\n      return {\n        val: view.getInt8(offset),\n        bytes: 1\n      };\n    },\n    signedInt: function (offset) {\n      return {\n        val: view.getInt32(offset),\n        bytes: 4\n      };\n    },\n    signedShort: function (offset) {\n      return {\n        val: view.getInt16(offset),\n        bytes: 2\n      };\n    },\n    unsignedByte: function (offset) {\n      return {\n        val: view.getUint8(offset),\n        bytes: 1\n      };\n    },\n    unsignedInt: function (offset) {\n      return {\n        val: view.getUint32(offset),\n        bytes: 4\n      };\n    },\n    unsignedShort: function (offset) {\n      return {\n        val: view.getUint16(offset),\n        bytes: 2\n      };\n    } //TODO: string-utf-8:\n\n  };\n  return typeMap[type](offset);\n} //This function recursivley iterates over the resultStructure to fill in\n//values read from data which should be an ArrayBuffer containing the payload from a websocket\n\n/**\n *\n * @param struct\n * @param data\n * @param offsetBytes\n * @return {*}\n */\n\nfunction ReadData(struct, data, offsetBytes) {\n  let offset = offsetBytes;\n\n  for (let i = 0; i < struct.fields.length; i++) {\n    let currFieldStruct = struct.fields[i];\n\n    if (isDefined(currFieldStruct.type) && currFieldStruct.type !== null) {\n      let ret = ParseBytes(data, offset, currFieldStruct.type);\n      currFieldStruct.val = ret.val;\n      offset += ret.bytes;\n    } else if (isDefined(currFieldStruct.count) && currFieldStruct.count !== null) {\n      //check if count is a reference to another letiable\n      if (isNaN(currFieldStruct.count)) {\n        let id = currFieldStruct.count;\n        let fieldName = struct.id2FieldMap[id];\n        currFieldStruct.count = struct.findFieldByName(fieldName).val;\n      }\n\n      for (let c = 0; c < currFieldStruct.count; c++) {\n        for (let j = 0; j < currFieldStruct.fields.length; j++) {\n          let field = JSON.parse(JSON.stringify(currFieldStruct.fields[j]));\n          offset = ReadData(field, data, offset);\n          currFieldStruct.val.push(field);\n        }\n      }\n    }\n  }\n\n  return offset;\n}\n/**\n *\n * @param resultStructure\n * @return {{}}\n */\n\nfunction GetResultObject(resultStructure) {\n  //TODO: handle cases for nested arrays / matrix data types\n  let result = {};\n\n  for (let i = 0; i < resultStructure.fields.length; i++) {\n    if (isDefined(resultStructure.fields[i].count)) {\n      result[resultStructure.fields[i].name] = [];\n\n      for (let c = 0; c < resultStructure.fields[i].count; c++) {\n        let item = {};\n\n        for (let k = 0; k < resultStructure.fields[i].val[c].fields.length; k++) {\n          item[resultStructure.fields[i].val[c].fields[k].name] = resultStructure.fields[i].val[c].fields[k].val;\n        }\n\n        result[resultStructure.fields[i].name].push(item);\n      }\n    } else {\n      result[resultStructure.fields[i].name] = resultStructure.fields[i].val;\n    }\n  }\n\n  return result;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isOpera() {\n  return !!window.opr && !!opr.addons || !!window.opera || navigator.userAgent.indexOf(\' OPR/\') >= 0;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isFirefox() {\n  return typeof InstallTrigger !== \'undefined\';\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isSafari() {\n  return Object.prototype.toString.call(window.HTMLElement).indexOf(\'Constructor\') > 0;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isChrome() {\n  return !!window.chrome && !!window.chrome.webstore;\n}\n/**\n *\n * @return {*|boolean}\n */\n\nfunction isBlink() {\n  return (isChrome || isOpera) && !!window.CSS;\n}\n/**\n *\n * @param a\n * @param b\n * @return {boolean}\n */\n\nfunction isArrayIntersect(a, b) {\n  return a.filter(function (element) {\n    return b.indexOf(element) > -1;\n  }).length > 0;\n}\n/**\n *\n * @param o\n * @return {boolean}\n */\n\nfunction isElement(o) {\n  return typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2\n  o && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName === "string";\n}\n/**\n *\n * @return {*}\n */\n\nfunction isWebWorker() {\n  return isDefined(Worker);\n}\n/**\n *\n * @param div\n */\n\nfunction takeScreenShot(div) {}\n/**\n * Remove a css class from a the div given as argument.\n * @param div the div to remove the class from\n * @param css the css class to remove\n */\n\nfunction removeCss(div, css) {\n  let divCss = div.className;\n  css = divCss.replace(css, "");\n  div.className = css;\n}\n/**\n * Add a css class to a the div given as argument.\n * @param div the div to add the class to\n * @param css the css class to add\n */\n\nfunction addCss(div, css) {\n  div.setAttribute("class", div.className + " " + css);\n}\n/**\n * Removes the last character of a {string} object.\n * @param {string} value - The input {string}\n * @return {string} The value without the last character\n */\n\nfunction removeLastCharIfExist(value) {\n  if (!isDefined(undefined) || value === null || value.length === 0 || !value.endsWith("/")) {\n    return value;\n  }\n\n  return value.substring(0, value.length - 1);\n}\n/**\n * Capitalize the first letter of a given string\n * @param {String} str - the input string\n * @returns {String} the result\n */\n\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n/**\n * Round off number to nearest 0.5\n * @param {Number} num - The number to round off\n * @return {number} The rounded number\n */\n\nfunction roundHalf(num) {\n  return Math.round(num * 2) / 2;\n}\n/**\n * Returns a function that, as long as it continues to be invoked,\n * will not be executed. The function will only be executed when\n * it will stop being called for more than N milliseconds.\n * If the `immediate` parameter is true, then the function\n * will be executed at the first call instead of the last.\n * Parameters :\n * - func: the function to `debouncer`.\n * - wait: the number of milliseconds (N) to wait before\n * call func()\n * - immediate (optional): Call func() at the first invocation\n * instead of the last one (Default false)\n * - context (optional): the context in which to call func()\n * (this by default)\n */\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\nfunction debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n\n  var later = function () {\n    var now = new Date().getTime(),\n        last = now - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function () {\n    context = this;\n    args = arguments;\n    timestamp = new Date().getTime();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n}\n;\nfunction throttle(func, wait, leading, trailing, context) {\n  var ctx, args, result;\n  var timeout = null;\n  var previous = 0;\n\n  var later = function () {\n    previous = new Date();\n    timeout = null;\n    result = func.apply(ctx, args);\n  };\n\n  return function () {\n    var now = new Date();\n    if (!previous && !leading) previous = now;\n    var remaining = wait - (now - previous);\n    ctx = context || this;\n    args = arguments;\n\n    if (remaining <= 0) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(ctx, args);\n    } else if (!timeout && trailing) {\n      timeout = setTimeout(later, remaining);\n    }\n\n    return result;\n  };\n}\n;\nfunction merge(target, source) {\n  // Iterate through `source` properties and if an `Object` set property to merge of `target` and `source` properties\n  for (const key of Object.keys(source)) {\n    if (source[key] instanceof Object && key in target) Object.assign(source[key], merge(target[key], source[key]));\n  } // Join `target` and modified `source`\n\n\n  Object.assign(target || {}, source);\n  return target;\n}\n;\nfunction rgbaToArray(str) {\n  let startIdxValue = str.indexOf(\'(\') + 1;\n  let endIdxValue = str.indexOf(\')\');\n  let values = str.substr(startIdxValue, endIdxValue - startIdxValue);\n  return values.split(\',\').map(Number);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91dGlscy9VdGlscy5qcz9mODdlIl0sIm5hbWVzIjpbIk1BWF9MT05HIiwiTWF0aCIsInBvdyIsImlzRGVmaW5lZCIsInYiLCJoYXNWYWx1ZSIsImhleDJyZ2IiLCJoZXgiLCJyIiwiZyIsImIiLCJtYXRjaCIsIm1hcCIsIngiLCJwYXJzZUludCIsImhhc1R5cGUiLCJleHBlY3RlZFR5cGUiLCJoYXNWYWwiLCJpc09iamVjdCIsImxldE5hbWUiLCJpc0FycmF5IiwiQXJyYXkiLCJpc0Z1bmN0aW9uIiwiYXNzZXJ0RGVmaW5lZCIsImFzc2VydFRydWUiLCJhc3NlcnRUeXBlIiwiYXNzZXJ0Qm9vbGVhbiIsImFzc2VydFN0cmluZyIsImFzc2VydE51bWJlciIsImFzc2VydFBvc2l0aXZlIiwiYXNzZXJ0T2JqZWN0IiwiYXNzZXJ0QXJyYXkiLCJhc3NlcnRGdW5jdGlvbiIsImFzc2VydEhhc1ZhbHVlIiwicmFuZG9tVVVJRCIsInJlcGxhY2UiLCJjIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdGFtcFVVSUQiLCJvYmoiLCJfb3NoX2lkIiwiUGFyc2VCeXRlcyIsImJ1ZmZlciIsIm9mZnNldCIsInR5cGUiLCJ2aWV3IiwiRGF0YVZpZXciLCJ0eXBlTWFwIiwiZG91YmxlIiwidmFsIiwiZ2V0RmxvYXQ2NCIsImJ5dGVzIiwiZmxvYXQ2NCIsImZsb2F0MzIiLCJnZXRGbG9hdDMyIiwic2lnbmVkQnl0ZSIsImdldEludDgiLCJzaWduZWRJbnQiLCJnZXRJbnQzMiIsInNpZ25lZFNob3J0IiwiZ2V0SW50MTYiLCJ1bnNpZ25lZEJ5dGUiLCJnZXRVaW50OCIsInVuc2lnbmVkSW50IiwiZ2V0VWludDMyIiwidW5zaWduZWRTaG9ydCIsImdldFVpbnQxNiIsIlJlYWREYXRhIiwic3RydWN0IiwiZGF0YSIsIm9mZnNldEJ5dGVzIiwiaSIsImZpZWxkcyIsImxlbmd0aCIsImN1cnJGaWVsZFN0cnVjdCIsInJldCIsImNvdW50IiwiaXNOYU4iLCJpZCIsImZpZWxkTmFtZSIsImlkMkZpZWxkTWFwIiwiZmluZEZpZWxkQnlOYW1lIiwiaiIsImZpZWxkIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwicHVzaCIsIkdldFJlc3VsdE9iamVjdCIsInJlc3VsdFN0cnVjdHVyZSIsInJlc3VsdCIsIm5hbWUiLCJpdGVtIiwiayIsImlzT3BlcmEiLCJ3aW5kb3ciLCJvcHIiLCJhZGRvbnMiLCJvcGVyYSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJpc0ZpcmVmb3giLCJJbnN0YWxsVHJpZ2dlciIsImlzU2FmYXJpIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiY2FsbCIsIkhUTUxFbGVtZW50IiwiaXNDaHJvbWUiLCJjaHJvbWUiLCJ3ZWJzdG9yZSIsImlzQmxpbmsiLCJDU1MiLCJpc0FycmF5SW50ZXJzZWN0IiwiYSIsImZpbHRlciIsImVsZW1lbnQiLCJpc0VsZW1lbnQiLCJvIiwibm9kZVR5cGUiLCJub2RlTmFtZSIsImlzV2ViV29ya2VyIiwiV29ya2VyIiwidGFrZVNjcmVlblNob3QiLCJkaXYiLCJyZW1vdmVDc3MiLCJjc3MiLCJkaXZDc3MiLCJjbGFzc05hbWUiLCJhZGRDc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVMYXN0Q2hhcklmRXhpc3QiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImVuZHNXaXRoIiwic3Vic3RyaW5nIiwiY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIiwic3RyIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsInJvdW5kSGFsZiIsIm51bSIsInJvdW5kIiwiZGVib3VuY2UiLCJmdW5jIiwid2FpdCIsImltbWVkaWF0ZSIsInRpbWVvdXQiLCJhcmdzIiwiY29udGV4dCIsInRpbWVzdGFtcCIsImxhdGVyIiwibm93IiwiRGF0ZSIsImdldFRpbWUiLCJsYXN0Iiwic2V0VGltZW91dCIsImFwcGx5IiwiYXJndW1lbnRzIiwiY2FsbE5vdyIsInRocm90dGxlIiwibGVhZGluZyIsInRyYWlsaW5nIiwiY3R4IiwicHJldmlvdXMiLCJyZW1haW5pbmciLCJjbGVhclRpbWVvdXQiLCJtZXJnZSIsInRhcmdldCIsInNvdXJjZSIsImtleSIsImtleXMiLCJhc3NpZ24iLCJyZ2JhVG9BcnJheSIsInN0YXJ0SWR4VmFsdWUiLCJlbmRJZHhWYWx1ZSIsInZhbHVlcyIsInN1YnN0ciIsInNwbGl0IiwiTnVtYmVyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDTyxNQUFNQSxRQUFRLEdBQUdDLElBQUksQ0FBQ0MsR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFaLElBQWtCLENBQW5DO0FBRVA7QUFDQTtBQUNBOztBQUNPLFNBQVNDLFNBQVQsQ0FBbUJDLENBQW5CLEVBQXNCO0VBQ3pCLE9BQU8sT0FBUUEsQ0FBUixLQUFlLFdBQWYsSUFBOEJBLENBQUMsS0FBSyxJQUEzQztBQUNIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sU0FBU0MsUUFBVCxDQUFrQkQsQ0FBbEIsRUFBcUI7RUFDeEIsT0FBT0QsU0FBUyxDQUFDQyxDQUFELENBQVQsSUFBZ0JBLENBQUMsS0FBSyxJQUE3QjtBQUNIO0FBRUQ7QUFDQTtBQUNBOztBQUNPLFNBQVNFLE9BQVQsQ0FBaUJDLEdBQWpCLEVBQXFCO0VBQ3hCLE1BQU0sQ0FBQ0MsQ0FB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QUNIO0FBQUE7QUFFTSxTQUFTSyxXQUFULENBQXFCckMsR0FBckIsRUFBMEI7RUFDN0IsSUFBSXNDLGFBQWEsR0FBR3RDLEdBQUcsQ0FBQ3JDLE9BQUosQ0FBWSxHQUFaLElBQW1CLENBQXZDO0VBQ0EsSUFBSTRFLFdBQVcsR0FBR3ZDLEdBQUcsQ0FBQ3JDLE9BQUosQ0FBWSxHQUFaLENBQWxCO0VBQ0EsSUFBSTZFLE1BQU0sR0FBR3hDLEdBQUcsQ0FBQ3lDLE1BQUosQ0FBV0gsYUFBWCxFQUEwQkMsV0FBVyxHQUFDRCxhQUF0QyxDQUFiO0VBQ0EsT0FBT0UsTUFBTSxDQUFDRSxLQUFQLENBQWEsR0FBYixFQUFrQnpLLEdBQWxCLENBQXNCMEssTUFBdEIsQ0FBUDtBQUNIIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIwIE1hdGhpZXUgRGhhaW5hdXQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKiAqIEBtb2R1bGUgVXRpbHMgKi9cblxuLyoqIE1heGltdW0gdmFsdWUgb2YgYSBsb25nICovXG5leHBvcnQgY29uc3QgTUFYX0xPTkcgPSBNYXRoLnBvdygyLCA1MykgKyAxO1xuXG4vKipcbiAqIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRlc3QgaWYgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGRlZmluZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5lZCh2KSB7XG4gICAgcmV0dXJuIHR5cGVvZiAodikgIT09ICd1bmRlZmluZWQnICYmIHYgIT09IG51bGw7XG59XG5cbi8qKlxuIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRlc3QgaWYgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGhhcyBhIHZhbHVlLFxuIHRoYXQgaXMgaXQgaXMgZGVmaW5lZCBhbmQgbm9uIG51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1ZhbHVlKHYpIHtcbiAgICByZXR1cm4gaXNEZWZpbmVkKHYpICYmIHYgIT09IG51bGw7XG59XG5cbi8qKlxuIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRyYW5zZm9ybSBoZXggY29sb3IgaW50byBSR0JBXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoZXgycmdiKGhleCl7XG4gICAgY29uc3QgW3IsIGcsIGJdID0gaGV4Lm1hdGNoKC9cXHdcXHcvZykubWFwKHggPT4gcGFyc2VJbnQoeCwgMTYpKTtcbiAgICByZXR1cm4gW3IsIGcsIGJdO1xufVxuLyoqXG4gR2xvYmFsIGhlbHBlciBtZXRob2QgdG8gdGVzdCBpZiBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgb2YgYSBwYXJ0aWN1bGFyIHR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1R5cGUodiwgZXhwZWN0ZWRUeXBlKSB7XG4gICAgbGV0IGhhc1ZhbCA9IGhhc1ZhbHVlKHYpO1xuICAgIHJldHVybiBoYXNWYWwgJiYgdHlwZW9mICh2KSA9PT0gZXhwZWN0ZWRUeXBlO1xufVxuXG4vKipcbiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhbiBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gaGFzVHlwZSh2LCAnb2JqZWN0JywgbGV0TmFtZSk7XG59XG5cbi8qKlxuIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRlc3QgaWYgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGFuIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5KHYpIHtcbiAgICByZXR1cm4gaXNEZWZpbmVkKHYpICYmIEFycmF5LmlzQXJyYXkodik7XG59XG5cbi8qKlxuIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRlc3QgaWYgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGEgZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odiwgbGV0TmFtZSkge1xuICAgIHJldHVybiBoYXNUeXBlKHYsICdmdW5jdGlvbicsIGxldE5hbWUpO1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgZGVmaW5lZFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydERlZmluZWQodiwgbGV0TmFtZSA9ICdsZXRpYWJsZScpIHtcbiAgICBpZiAoIWlzRGVmaW5lZCh2KSkge1xuICAgICAgICB0aHJvdyBsZXROYW1lICsgXCIgbXVzdCBiZSBkZWZpbmVkXCI7XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHJ1ZSh2LCBsZXROYW1lID0gJ2xldGlhYmxlJykge1xuICAgIGlmICghaXNEZWZpbmVkKHYpIHx8ICF2KSB7XG4gICAgICAgIHRocm93IGxldE5hbWU7XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGRlZmluZWQgYW5kIG5vbi1udWxsXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHlwZSh2LCBleHBlY3RlZFR5cGUsIGxldE5hbWUgPSAnbGV0aWFibGUnKSB7XG4gICAgYXNzZXJ0RGVmaW5lZCh2LCBsZXROYW1lKTtcbiAgICBpZiAodHlwZW9mICh2KSAhPT0gZXhwZWN0ZWRUeXBlKSB7XG4gICAgICAgIHRocm93IGxldE5hbWUgKyBcIiBtdXN0IGJlIG9mIHR5cGUgXCIgKyBleHBlY3RlZFR5cGU7XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYSBzdHJpbmdcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRCb29sZWFuKHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gYXNzZXJ0VHlwZSh2LCAnYm9vbGVhbicsIGxldE5hbWUpO1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYSBzdHJpbmdcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRTdHJpbmcodiwgbGV0TmFtZSkge1xuICAgIHJldHVybiBhc3NlcnRUeXBlKHYsICdzdHJpbmcnLCBsZXROYW1lKTtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGEgbnVtYmVyXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TnVtYmVyKHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gYXNzZXJ0VHlwZSh2LCAnbnVtYmVyJywgbGV0TmFtZSk7XG59XG5cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhIG51bWJlclxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFBvc2l0aXZlKHYsIGxldE5hbWUpIHtcbiAgICBhc3NlcnROdW1iZXIodiwgbGV0TmFtZSk7XG4gICAgaWYgKHYgPD0gMCkge1xuICAgICAgICB0aHJvdyBsZXROYW1lICsgXCIgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiO1xuICAgIH1cbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGFuIG9iamVjdFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE9iamVjdCh2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGFzc2VydFR5cGUodiwgJ29iamVjdCcsIGxldE5hbWUpO1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYW4gb2JqZWN0XG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0QXJyYXkodiwgbGV0TmFtZSA9ICdsZXRpYWJsZScpIHtcbiAgICBhc3NlcnREZWZpbmVkKHYsIGxldE5hbWUpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICB0aHJvdyBsZXROYW1lICsgXCIgbXVzdCBiZSBhbiBhcnJheVwiO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGEgZnVuY3Rpb25cbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRGdW5jdGlvbih2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGFzc2VydFR5cGUodiwgJ2Z1bmN0aW9uJywgbGV0TmFtZSk7XG59XG5cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBkZWZpbmVkIGFuZCBub24tbnVsbFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEhhc1ZhbHVlKHYsIGxldE5hbWUgPSAnbGV0aWFibGUnKSB7XG4gICAgYXNzZXJ0RGVmaW5lZCh2LCBsZXROYW1lKTtcbiAgICBpZiAoIWhhc1ZhbHVlKHYpKSB7XG4gICAgICAgIHRocm93IGxldE5hbWUgKyBcIiBtdXN0IG5vdCBiZSBudWxsXCI7XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuXG4vKipcbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21VVUlEKCkge1xuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC14eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIGxldCByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHN0YW1wcy9lbWJlZHMgYSBVVUlEIGludG8gYW4gb2JqZWN0IGFuZCByZXR1cm5zIHRoZSBVVUlEIGdlbmVyYXRlZCBmb3IgaXRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YW1wVVVJRChvYmopIHtcbiAgICBvYmouX29zaF9pZCA9IG9iai5fb3NoX2lkIHx8IHJhbmRvbVVVSUQoKTtcbiAgICByZXR1cm4gb2JqLl9vc2hfaWQ7XG59XG5cbi8vYnVmZmVyIGlzIGFuIEFycmF5QnVmZmVyIG9iamVjdCwgdGhlIG9mZnNldCBpZiBzcGVjaWZpZWQgaW4gYnl0ZXMsIGFuZCB0aGUgdHlwZSBpcyBhIHN0cmluZ1xuLy9jb3JyZXNwb25kaW5nIHRvIGFuIE9HQyBkYXRhIHR5cGUuXG4vL1NlZSBodHRwOi8vZGVmLnNlZWdyaWQuY3Npcm8uYXUvc2lzc3ZvYy9vZ2MtZGVmL3Jlc291cmNlP3VyaT1odHRwOi8vd3d3Lm9wZW5naXMubmV0L2RlZi9kYXRhVHlwZS9PR0MvMC9cbi8qKlxuICpcbiAqIEBwYXJhbSBidWZmZXJcbiAqIEBwYXJhbSBvZmZzZXRcbiAqIEBwYXJhbSB0eXBlXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gUGFyc2VCeXRlcyhidWZmZXIsIG9mZnNldCwgdHlwZSkge1xuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG5cbiAgICAvL05vdGU6IFRoZXJlIGV4aXN0IHR5cGVzIG5vdCBsaXN0ZWQgaW4gdGhlIG1hcCBiZWxvdyB0aGF0IGhhdmUgT0dDIGRlZmluaXRpb25zLCBidXQgbm8gYXBwcm9wcmlhdGVcbiAgICAvL21ldGhvZHMgb3IgY29ycmVzcG9uZGluZyB0eXBlcyBhdmFpbGFibGUgZm9yIHBhcnNpbmcgaW4gamF2YXNjcmlwdC4gVGhleSBhcmUgZmxvYXQxMjgsIGZsb2F0MTYsIHNpZ25lZExvbmcsXG4gICAgLy9hbmQgdW5zaWduZWRMb25nXG4gICAgbGV0IHR5cGVNYXAgPSB7XG4gICAgICAgIGRvdWJsZTogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0RmxvYXQ2NChvZmZzZXQpLCBieXRlczogOH07XG4gICAgICAgIH0sXG4gICAgICAgIGZsb2F0NjQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldEZsb2F0NjQob2Zmc2V0KSwgYnl0ZXM6IDh9O1xuICAgICAgICB9LFxuICAgICAgICBmbG9hdDMyOiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbDogdmlldy5nZXRGbG9hdDMyKG9mZnNldCksIGJ5dGVzOiA0fTtcbiAgICAgICAgfSxcbiAgICAgICAgc2lnbmVkQnl0ZTogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0SW50OChvZmZzZXQpLCBieXRlczogMX07XG4gICAgICAgIH0sXG4gICAgICAgIHNpZ25lZEludDogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0SW50MzIob2Zmc2V0KSwgYnl0ZXM6IDR9O1xuICAgICAgICB9LFxuICAgICAgICBzaWduZWRTaG9ydDogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0SW50MTYob2Zmc2V0KSwgYnl0ZXM6IDJ9O1xuICAgICAgICB9LFxuICAgICAgICB1bnNpZ25lZEJ5dGU6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldFVpbnQ4KG9mZnNldCksIGJ5dGVzOiAxfTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5zaWduZWRJbnQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldFVpbnQzMihvZmZzZXQpLCBieXRlczogNH07XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2lnbmVkU2hvcnQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldFVpbnQxNihvZmZzZXQpLCBieXRlczogMn07XG4gICAgICAgIH0sXG4gICAgICAgIC8vVE9ETzogc3RyaW5nLXV0Zi04OlxuICAgIH07XG4gICAgcmV0dXJuIHR5cGVNYXBbdHlwZV0ob2Zmc2V0KTtcbn1cblxuLy9UaGlzIGZ1bmN0aW9uIHJlY3Vyc2l2bGV5IGl0ZXJhdGVzIG92ZXIgdGhlIHJlc3VsdFN0cnVjdHVyZSB0byBmaWxsIGluXG4vL3ZhbHVlcyByZWFkIGZyb20gZGF0YSB3aGljaCBzaG91bGQgYmUgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgcGF5bG9hZCBmcm9tIGEgd2Vic29ja2V0XG4vKipcbiAqXG4gKiBAcGFyYW0gc3RydWN0XG4gKiBAcGFyYW0gZGF0YVxuICogQHBhcmFtIG9mZnNldEJ5dGVzXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gUmVhZERhdGEoc3RydWN0LCBkYXRhLCBvZmZzZXRCeXRlcykge1xuICAgIGxldCBvZmZzZXQgPSBvZmZzZXRCeXRlcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cnVjdC5maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGN1cnJGaWVsZFN0cnVjdCA9IHN0cnVjdC5maWVsZHNbaV07XG4gICAgICAgIGlmIChpc0RlZmluZWQoY3VyckZpZWxkU3RydWN0LnR5cGUpICYmIGN1cnJGaWVsZFN0cnVjdC50eXBlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgcmV0ID0gUGFyc2VCeXRlcyhkYXRhLCBvZmZzZXQsIGN1cnJGaWVsZFN0cnVjdC50eXBlKTtcbiAgICAgICAgICAgIGN1cnJGaWVsZFN0cnVjdC52YWwgPSByZXQudmFsO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHJldC5ieXRlcztcbiAgICAgICAgfSBlbHNlIGlmIChpc0RlZmluZWQoY3VyckZpZWxkU3RydWN0LmNvdW50KSAmJiBjdXJyRmllbGRTdHJ1Y3QuY291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vY2hlY2sgaWYgY291bnQgaXMgYSByZWZlcmVuY2UgdG8gYW5vdGhlciBsZXRpYWJsZVxuICAgICAgICAgICAgaWYgKGlzTmFOKGN1cnJGaWVsZFN0cnVjdC5jb3VudCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSBjdXJyRmllbGRTdHJ1Y3QuY291bnQ7XG4gICAgICAgICAgICAgICAgbGV0IGZpZWxkTmFtZSA9IHN0cnVjdC5pZDJGaWVsZE1hcFtpZF07XG4gICAgICAgICAgICAgICAgY3VyckZpZWxkU3RydWN0LmNvdW50ID0gc3RydWN0LmZpbmRGaWVsZEJ5TmFtZShmaWVsZE5hbWUpLnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY3VyckZpZWxkU3RydWN0LmNvdW50OyBjKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGN1cnJGaWVsZFN0cnVjdC5maWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjdXJyRmllbGRTdHJ1Y3QuZmllbGRzW2pdKSk7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IFJlYWREYXRhKGZpZWxkLCBkYXRhLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyRmllbGRTdHJ1Y3QudmFsLnB1c2goZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcmVzdWx0U3RydWN0dXJlXG4gKiBAcmV0dXJuIHt7fX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEdldFJlc3VsdE9iamVjdChyZXN1bHRTdHJ1Y3R1cmUpIHtcbiAgICAvL1RPRE86IGhhbmRsZSBjYXNlcyBmb3IgbmVzdGVkIGFycmF5cyAvIG1hdHJpeCBkYXRhIHR5cGVzXG4gICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0U3RydWN0dXJlLmZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNEZWZpbmVkKHJlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0uY291bnQpKSB7XG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS5uYW1lXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCByZXN1bHRTdHJ1Y3R1cmUuZmllbGRzW2ldLmNvdW50OyBjKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWxbY10uZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWxbY10uZmllbGRzW2tdLm5hbWVdID0gcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWxbY10uZmllbGRzW2tdLnZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0ubmFtZV0ucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRTdHJ1Y3R1cmUuZmllbGRzW2ldLm5hbWVdID0gcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT3BlcmEoKSB7XG4gICAgcmV0dXJuICghIXdpbmRvdy5vcHIgJiYgISFvcHIuYWRkb25zKSB8fCAhIXdpbmRvdy5vcGVyYSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJyBPUFIvJykgPj0gMDtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRmlyZWZveCgpIHtcbiAgICByZXR1cm4gdHlwZW9mIEluc3RhbGxUcmlnZ2VyICE9PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2FmYXJpKCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93LkhUTUxFbGVtZW50KS5pbmRleE9mKCdDb25zdHJ1Y3RvcicpID4gMDtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hyb21lKCkge1xuICAgIHJldHVybiAhIXdpbmRvdy5jaHJvbWUgJiYgISF3aW5kb3cuY2hyb21lLndlYnN0b3JlO1xufVxuXG4vKipcbiAqXG4gKiBAcmV0dXJuIHsqfGJvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0JsaW5rKCkge1xuICAgIHJldHVybiAoaXNDaHJvbWUgfHwgaXNPcGVyYSkgJiYgISF3aW5kb3cuQ1NTO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gYVxuICogQHBhcmFtIGJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5SW50ZXJzZWN0KGEsIGIpIHtcbiAgICByZXR1cm4gYS5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGIuaW5kZXhPZihlbGVtZW50KSA+IC0xO1xuICAgIH0pLmxlbmd0aCA+IDA7XG59XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIG9cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VsZW1lbnQobykge1xuICAgIHJldHVybiAoXG4gICAgICB0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwib2JqZWN0XCIgPyBvIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgOiAvL0RPTTJcbiAgICAgICAgbyAmJiB0eXBlb2YgbyA9PT0gXCJvYmplY3RcIiAmJiBvICE9PSBudWxsICYmIG8ubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIG8ubm9kZU5hbWUgPT09IFwic3RyaW5nXCJcbiAgICApO1xufVxuXG4vKipcbiAqXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNXZWJXb3JrZXIoKSB7XG4gICAgcmV0dXJuIGlzRGVmaW5lZChXb3JrZXIpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gZGl2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWtlU2NyZWVuU2hvdChkaXYpIHtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYSBjc3MgY2xhc3MgZnJvbSBhIHRoZSBkaXYgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0gZGl2IHRoZSBkaXYgdG8gcmVtb3ZlIHRoZSBjbGFzcyBmcm9tXG4gKiBAcGFyYW0gY3NzIHRoZSBjc3MgY2xhc3MgdG8gcmVtb3ZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDc3MoZGl2LCBjc3MpIHtcbiAgICBsZXQgZGl2Q3NzID0gZGl2LmNsYXNzTmFtZTtcbiAgICBjc3MgPSBkaXZDc3MucmVwbGFjZShjc3MsIFwiXCIpO1xuICAgIGRpdi5jbGFzc05hbWUgPSBjc3M7XG59XG5cblxuLyoqXG4gKiBBZGQgYSBjc3MgY2xhc3MgdG8gYSB0aGUgZGl2IGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIGRpdiB0aGUgZGl2IHRvIGFkZCB0aGUgY2xhc3MgdG9cbiAqIEBwYXJhbSBjc3MgdGhlIGNzcyBjbGFzcyB0byBhZGRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENzcyhkaXYsIGNzcykge1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBkaXYuY2xhc3NOYW1lICsgXCIgXCIgKyBjc3MpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxhc3QgY2hhcmFjdGVyIG9mIGEge3N0cmluZ30gb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGlucHV0IHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB2YWx1ZSB3aXRob3V0IHRoZSBsYXN0IGNoYXJhY3RlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTGFzdENoYXJJZkV4aXN0KHZhbHVlKSB7XG4gICAgaWYgKCFpc0RlZmluZWQodW5kZWZpbmVkKSB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZS5sZW5ndGggPT09IDAgfHwgIXZhbHVlLmVuZHNXaXRoKFwiL1wiKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5sZW5ndGggLSAxKTtcbn1cblxuLyoqXG4gKiBDYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBnaXZlbiBzdHJpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgLSB0aGUgaW5wdXQgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgcmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiAgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKHN0cikge1xuICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSlcbn1cblxuLyoqXG4gKiBSb3VuZCBvZmYgbnVtYmVyIHRvIG5lYXJlc3QgMC41XG4gKiBAcGFyYW0ge051bWJlcn0gbnVtIC0gVGhlIG51bWJlciB0byByb3VuZCBvZmZcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdW5kZWQgbnVtYmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3VuZEhhbGYobnVtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtKjIpLzI7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsXG4gKiB3aWxsIG5vdCBiZSBleGVjdXRlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgb25seSBiZSBleGVjdXRlZCB3aGVuXG4gKiBpdCB3aWxsIHN0b3AgYmVpbmcgY2FsbGVkIGZvciBtb3JlIHRoYW4gTiBtaWxsaXNlY29uZHMuXG4gKiBJZiB0aGUgYGltbWVkaWF0ZWAgcGFyYW1ldGVyIGlzIHRydWUsIHRoZW4gdGhlIGZ1bmN0aW9uXG4gKiB3aWxsIGJlIGV4ZWN1dGVkIGF0IHRoZSBmaXJzdCBjYWxsIGluc3RlYWQgb2YgdGhlIGxhc3QuXG4gKiBQYXJhbWV0ZXJzIDpcbiAqIC0gZnVuYzogdGhlIGZ1bmN0aW9uIHRvIGBkZWJvdW5jZXJgLlxuICogLSB3YWl0OiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyAoTikgdG8gd2FpdCBiZWZvcmVcbiAqIGNhbGwgZnVuYygpXG4gKiAtIGltbWVkaWF0ZSAob3B0aW9uYWwpOiBDYWxsIGZ1bmMoKSBhdCB0aGUgZmlyc3QgaW52b2NhdGlvblxuICogaW5zdGVhZCBvZiB0aGUgbGFzdCBvbmUgKERlZmF1bHQgZmFsc2UpXG4gKiAtIGNvbnRleHQgKG9wdGlvbmFsKTogdGhlIGNvbnRleHQgaW4gd2hpY2ggdG8gY2FsbCBmdW5jKClcbiAqICh0aGlzIGJ5IGRlZmF1bHQpXG4gKi9cblxuLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4vLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblxuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICAgICAgICBsYXN0ID0gbm93IC0gdGltZXN0YW1wO1xuXG4gICAgICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICAgIGlmICghdGltZW91dCkgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICBpZiAoY2FsbE5vdykge1xuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBsZWFkaW5nLCB0cmFpbGluZywgY29udGV4dCkge1xuICAgIHZhciBjdHgsIGFyZ3MsIHJlc3VsdDtcbiAgICB2YXIgdGltZW91dCA9IG51bGw7XG4gICAgdmFyIHByZXZpb3VzID0gMDtcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcHJldmlvdXMgPSBuZXcgRGF0ZTtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY3R4LCBhcmdzKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlO1xuICAgICAgICBpZiAoIXByZXZpb3VzICYmICFsZWFkaW5nKSBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgICBjdHggPSBjb250ZXh0IHx8IHRoaXM7XG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY3R4LCBhcmdzKTtcbiAgICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiB0cmFpbGluZykge1xuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlICh0YXJnZXQsIHNvdXJjZSkge1xuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBgc291cmNlYCBwcm9wZXJ0aWVzIGFuZCBpZiBhbiBgT2JqZWN0YCBzZXQgcHJvcGVydHkgdG8gbWVyZ2Ugb2YgYHRhcmdldGAgYW5kIGBzb3VyY2VgIHByb3BlcnRpZXNcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhzb3VyY2UpKSB7XG4gICAgICAgIGlmIChzb3VyY2Vba2V5XSBpbnN0YW5jZW9mIE9iamVjdCAmJiBrZXkgaW4gdGFyZ2V0KSBPYmplY3QuYXNzaWduKHNvdXJjZVtrZXldLCBtZXJnZSh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pKVxuICAgIH1cblxuICAgIC8vIEpvaW4gYHRhcmdldGAgYW5kIG1vZGlmaWVkIGBzb3VyY2VgXG4gICAgT2JqZWN0LmFzc2lnbih0YXJnZXQgfHwge30sIHNvdXJjZSlcbiAgICByZXR1cm4gdGFyZ2V0XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmdiYVRvQXJyYXkoc3RyKSB7XG4gICAgbGV0IHN0YXJ0SWR4VmFsdWUgPSBzdHIuaW5kZXhPZignKCcpICsgMTtcbiAgICBsZXQgZW5kSWR4VmFsdWUgPSBzdHIuaW5kZXhPZignKScpO1xuICAgIGxldCB2YWx1ZXMgPSBzdHIuc3Vic3RyKHN0YXJ0SWR4VmFsdWUsIGVuZElkeFZhbHVlLXN0YXJ0SWR4VmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZXMuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Mode; });\n/**\n * Enum for datasource mode.\n * @readonly\n * @enum {{name: string}}\n */\nconst Mode = {\n  REPLAY: "replay",\n  BATCH: "batch",\n  REAL_TIME: "realTime"\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9kYXRhc291cmNlL01vZGUuanM/NGUyNSJdLCJuYW1lcyI6WyJNb2RlIiwiUkVQTEFZIiwiQkFUQ0giLCJSRUFMX1RJTUUiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLE1BQU1BLElBQUksR0FBRztFQUNoQkMsTUFBTSxFQUFFLFFBRFE7RUFFaEJDLEtBQUssRUFBRyxPQUZRO0VBR2hCQyxTQUFTLEVBQUU7QUFISyxDQUFiIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVudW0gZm9yIGRhdGFzb3VyY2UgbW9kZS5cbiAqIEByZWFkb25seVxuICogQGVudW0ge3tuYW1lOiBzdHJpbmd9fVxuICovXG5leHBvcnQgY29uc3QgTW9kZSA9IHtcbiAgICBSRVBMQVk6IFwicmVwbGF5XCIsXG4gICAgQkFUQ0g6ICBcImJhdGNoXCIsXG4gICAgUkVBTF9USU1FOiBcInJlYWxUaW1lXCJcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return DATA_SYNCHRONIZER_TOPIC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return TIME_SYNCHRONIZER_TOPIC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DATASOURCE_DATA_TOPIC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DATASOURCE_TIME_TOPIC; });\n/* unused harmony export FFMPEG_VIEW_DECODE_TOPIC */\n/* unused harmony export MAGIC_END_PACKET */\nconst DATA_SYNCHRONIZER_TOPIC = 'data-synchronizer-';\nconst TIME_SYNCHRONIZER_TOPIC = 'data-synchronizer-time-';\nconst DATASOURCE_DATA_TOPIC = 'datasource-data-';\nconst DATASOURCE_TIME_TOPIC = 'datasource-time-';\nconst FFMPEG_VIEW_DECODE_TOPIC = 'ffmpeg-decode-';\nconst MAGIC_END_PACKET = 'magic-packet';//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9Db25zdGFudHMuanM/YjliMSJdLCJuYW1lcyI6WyJEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyIsIlRJTUVfU1lOQ0hST05JWkVSX1RPUElDIiwiREFUQVNPVVJDRV9EQVRBX1RPUElDIiwiREFUQVNPVVJDRV9USU1FX1RPUElDIiwiRkZNUEVHX1ZJRVdfREVDT0RFX1RPUElDIiwiTUFHSUNfRU5EX1BBQ0tFVCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQU8sTUFBTUEsdUJBQXVCLEdBQUcsb0JBQWhDO0FBQ0EsTUFBTUMsdUJBQXVCLEdBQUcseUJBQWhDO0FBRUEsTUFBTUMscUJBQXFCLEdBQUcsa0JBQTlCO0FBQ0EsTUFBTUMscUJBQXFCLEdBQUcsa0JBQTlCO0FBRUEsTUFBTUMsd0JBQXdCLEdBQUcsZ0JBQWpDO0FBRUEsTUFBTUMsZ0JBQWdCLEdBQUcsY0FBekIiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyA9ICdkYXRhLXN5bmNocm9uaXplci0nO1xuZXhwb3J0IGNvbnN0IFRJTUVfU1lOQ0hST05JWkVSX1RPUElDID0gJ2RhdGEtc3luY2hyb25pemVyLXRpbWUtJztcblxuZXhwb3J0IGNvbnN0IERBVEFTT1VSQ0VfREFUQV9UT1BJQyA9ICdkYXRhc291cmNlLWRhdGEtJztcbmV4cG9ydCBjb25zdCBEQVRBU09VUkNFX1RJTUVfVE9QSUMgPSAnZGF0YXNvdXJjZS10aW1lLSc7XG5cbmV4cG9ydCBjb25zdCBGRk1QRUdfVklFV19ERUNPREVfVE9QSUMgPSAnZmZtcGVnLWRlY29kZS0nO1xuXG5leHBvcnQgY29uc3QgTUFHSUNfRU5EX1BBQ0tFVCA9ICdtYWdpYy1wYWNrZXQnO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n")},,,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EventType; });\nconst EventType = {\n  DATA: 'data',\n  LAST_TIME: 'last-time',\n  MASTER_TIME: 'master-time',\n  STATUS: 'status',\n  TIME_CHANGED: 'time-changed',\n  CLOSED: 'closed'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9ldmVudC9FdmVudFR5cGUuanM/OWUzMCJdLCJuYW1lcyI6WyJFdmVudFR5cGUiLCJEQVRBIiwiTEFTVF9USU1FIiwiTUFTVEVSX1RJTUUiLCJTVEFUVVMiLCJUSU1FX0NIQU5HRUQiLCJDTE9TRUQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQU8sTUFBTUEsU0FBUyxHQUFHO0VBQ3JCQyxJQUFJLEVBQUUsTUFEZTtFQUVyQkMsU0FBUyxFQUFFLFdBRlU7RUFHckJDLFdBQVcsRUFBRSxhQUhRO0VBSXJCQyxNQUFNLEVBQUUsUUFKYTtFQUtyQkMsWUFBWSxFQUFFLGNBTE87RUFNckJDLE1BQU0sRUFBRTtBQU5hLENBQWxCIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgRXZlbnRUeXBlID0ge1xuICAgIERBVEE6ICdkYXRhJyxcbiAgICBMQVNUX1RJTUU6ICdsYXN0LXRpbWUnLFxuICAgIE1BU1RFUl9USU1FOiAnbWFzdGVyLXRpbWUnLFxuICAgIFNUQVRVUzogJ3N0YXR1cycsXG4gICAgVElNRV9DSEFOR0VEOiAndGltZS1jaGFuZ2VkJyxcbiAgICBDTE9TRUQ6ICdjbG9zZWQnXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n")},,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/**\n * This class is in charge of defining a Layer object.\n */\n\nclass Layer {\n  /**\n   *\n   * @param {Object} properties - contains a list of properties\n   * @param {string} properties.name - default name\n   * @param {string} properties.description - default description\n   * @param {string} properties.dataSourceId - default dataSourceId\n   * @param {boolean} properties.visible - defines if the layer is visible\n   * @param {Number} properties.timestamp - defines the timestamp of the data\n   * @param {Function} properties.getTimestamp - function which defines the timestamp of the data\n   * @param {Function} properties.onLeftClick - trigger onLeftClick marker event\n   * @param {Function} properties.onRightClick - trigger onRightClick marker event\n   * @param {Function} properties.onHover - trigger onHover marker event\n   */\n  constructor(properties) {\n    this.properties = properties;\n    this.init(properties);\n  }\n  /**\n   * Inits the layer.\n   */\n\n\n  init(properties = this.properties) {\n    this.data = [];\n    this.propsById = {};\n    this.dataSourcesToFn = undefined;\n    this.props = {\n      id: "layer-" + Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* randomUUID */ "n"])(),\n      filter: true,\n      name: \'\',\n      description: \'\',\n      visible: true,\n      timestamp: true\n    };\n    this.dataSourceIds = undefined;\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.name)) {\n      this.props.name = properties.name;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.description)) {\n      this.props.description = properties.description;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.dataSourceId)) {\n      this.dataSourceIds = [properties.dataSourceId];\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.dataSourceIds)) {\n      this.dataSourceIds = properties.dataSourceIds;\n    }\n\n    if (!this.dataSourceIds) {\n      this.dataSourceIds = [];\n    } // assertDefined(this.dataSourceIds, \'[Layer] dataSourceIds[] or dataSourceId\');\n\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.visible)) {\n      this.props.visible = properties.visible;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.timestamp)) {\n      this.props.timestamp = properties.timestamp;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.onLeftClick) && Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(properties.onLeftClick)) {\n      this.props.onLeftClick = properties.onLeftClick;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.onRightClick) && Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(properties.onRightClick)) {\n      this.props.onRightClick = properties.onRightClick;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.onHover) && Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(properties.onHover)) {\n      this.props.onHover = properties.onHover;\n    }\n\n    this.initEvents();\n\n    if (this.checkFn("filter")) {\n      let fn = (rec, timestamp, options) => {\n        this.props.filter = this.getFunc(\'filter\')(rec, timestamp, options);\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'filter\'), fn);\n    } else {\n      this.properties.filter = function (rec, timestamp, options) {\n        return true;\n      };\n\n      let fn = async (rec, timestamp, options) => {\n        this.props.filter = await this.getFunc(\'filter\')(rec, timestamp, options);\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'filter\'), fn);\n    }\n\n    if (this.checkFn("getVisible")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'visible\', await this.getFunc(\'getVisible\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getVisible\'), fn);\n    }\n\n    if (this.checkFn("getTimestamp")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'timestamp\', await this.getFunc(\'getTimestamp\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getTimestamp\'), fn);\n    }\n\n    if (this.checkFn("getName")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'name\', await this.getFunc(\'getName\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getName\'), fn);\n    }\n\n    if (this.checkFn("getDescription")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'description\', await this.getFunc(\'getDescription\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getDescription\'), fn);\n    }\n  }\n\n  getFunc(funcName) {\n    return this.properties[funcName].handler || this.properties[funcName];\n  }\n  /**\n   * @private\n   * @param funcName\n   * @return {*}\n   */\n\n\n  checkFn(funcName) {\n    let func = this.properties[funcName];\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isFunction */ "m"])(func)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertDefined */ "c"])(this.dataSourceIds, \'dataSourceIds\');\n      return true;\n    } else {\n      let isSet = Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(func);\n\n      if (isSet) {\n        Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(func.dataSourceIds, funcName + ".dataSourceIds");\n        Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertFunction */ "d"])(func.handler, funcName + ".handler");\n      }\n\n      return isSet;\n    }\n  }\n  /**\n   * @private\n   */\n\n\n  initEvents() {}\n  /**\n   * Clear the layer.\n   */\n\n\n  clear() {}\n  /**\n   * Gets the layer id.\n   * @return {String} the layer id\n   */\n\n\n  getId() {\n    return this.props.id;\n  }\n  /**\n   * Selects the datasource contained into the list\n   * @param {Array} dataSourceIds the list of datasources\n   */\n\n\n  select(dataSourceIds) {}\n  /**\n   * Adds a function associated to a list of dataSource ids\n   * @param {String[]} dataSourceIds - the list of datasources\n   * @param {Function} fn - the function to add\n   * @param {Boolean} [first=false] - set at the first position\n   */\n\n\n  addFn(dataSourceIds, fn, first = false) {\n    if (!Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(this.dataSourcesToFn)) {\n      this.dataSourcesToFn = {};\n    }\n\n    for (let i = 0; i < dataSourceIds.length; i++) {\n      let dataSourceId = dataSourceIds[i];\n\n      if (!Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(this.dataSourcesToFn[dataSourceId])) {\n        this.dataSourcesToFn[dataSourceId] = [];\n      }\n\n      if (first) {\n        this.dataSourcesToFn[dataSourceId].unshift(fn);\n      } else {\n        this.dataSourcesToFn[dataSourceId].push(fn);\n      }\n    }\n  }\n  /**\n   *\n   * @param dataSourceId\n   * @param {Object[]} records\n   * @param options\n   */\n\n\n  async setData(dataSourceId, records, options = {}) {\n    // store data into data props\n    this.data = [];\n    options.dataSourceId = dataSourceId;\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(this.dataSourcesToFn)) {\n      if (dataSourceId in this.dataSourcesToFn) {\n        let fnArr = this.dataSourcesToFn[dataSourceId];\n        this.props.filter = true;\n\n        for (let j = 0; j < records.length; j++) {\n          for (let i = 0; i < fnArr.length; i++) {\n            await fnArr[i](records[j].data, records[j].data.timestamp, options);\n\n            if (!this.props.filter) {\n              break;\n            }\n          }\n\n          if (this.props.filter) {\n            this.data.push({ ...this.props,\n              ...this.propsById[this.getId()]\n            });\n          }\n        }\n      }\n    }\n  }\n  /**\n   *\n   * @return {String[]} The list of dataSource ids\n   */\n\n\n  getDataSourcesIds() {\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(this.dataSourcesToFn)) {\n      let res = [];\n\n      for (let i in this.dataSourcesToFn) {\n        res.push(i);\n      }\n\n      return res;\n    } else {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertDefined */ "c"])(this.dataSourceIds, \'dataSourceId must be defined\');\n      return this.dataSourceIds;\n    }\n  }\n\n  getDataSourcesIdsByProperty(name) {\n    return this.properties[name].dataSourceIds || this.dataSourceIds;\n  }\n  /**\n   * Clone current layer properties\n   * @return {Object} a shallow copy of current properties\n   */\n\n\n  getProps() {\n    return {\n      type: this.type,\n      values: this.data\n    };\n  }\n  /**\n   * Reset to default Layer values\n   */\n\n\n  reset() {\n    this.init(this.properties);\n  }\n\n  updateProperty(propertyName, value) {\n    this.propsById[this.getId()][propertyName] = value;\n  }\n\n  checkExistingProps(id) {\n    return id in this.propsById;\n  }\n\n  setProps(id, props) {\n    this.propsById[id] = props;\n  }\n\n  setId(id, defaultProps) {\n    this.props.id = id;\n\n    if (!this.checkExistingProps(id)) {\n      this.setProps(id, defaultProps());\n    }\n  }\n\n  definedId(idName, props) {\n    if (this.checkFn(`get${Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* capitalizeFirstLetter */ "j"])(idName)}`)) {\n      let fn = async (rec, timestamp, options) => {\n        const id = await this.getFunc(`get${Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* capitalizeFirstLetter */ "j"])(idName)}`)(rec, timestamp, options);\n        this.setId(id, () => ({ ...props,\n          [idName]: id\n        }));\n      }; // must be first to assign correctly the first location to the right id if it is defined\n\n\n      this.addFn(this.getDataSourcesIdsByProperty(`get${Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* capitalizeFirstLetter */ "j"])(idName)}`), fn, true);\n    } else {\n      this.setId(this.getId(), () => ({ ...props,\n        [idName]: this.getId()\n      }));\n    }\n  }\n\n  getCurrentProps() {\n    return this.propsById[this.getId()];\n  }\n\n  getIds() {\n    return Object.keys(this.propsById);\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (Layer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9MYXllci5qcz8yZDFkIl0sIm5hbWVzIjpbIkxheWVyIiwiY29uc3RydWN0b3IiLCJwcm9wZXJ0aWVzIiwiaW5pdCIsImRhdGEiLCJwcm9wc0J5SWQiLCJkYXRhU291cmNlc1RvRm4iLCJ1bmRlZmluZWQiLCJwcm9wcyIsImlkIiwicmFuZG9tVVVJRCIsImZpbHRlciIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInZpc2libGUiLCJ0aW1lc3RhbXAiLCJkYXRhU291cmNlSWRzIiwiaXNEZWZpbmVkIiwiZGF0YVNvdXJjZUlkIiwib25MZWZ0Q2xpY2siLCJhc3NlcnRGdW5jdGlvbiIsIm9uUmlnaHRDbGljayIsIm9uSG92ZXIiLCJpbml0RXZlbnRzIiwiY2hlY2tGbiIsImZuIiwicmVjIiwib3B0aW9ucyIsImdldEZ1bmMiLCJhZGRGbiIsImdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSIsInVwZGF0ZVByb3BlcnR5IiwiZnVuY05hbWUiLCJoYW5kbGVyIiwiZnVuYyIsImlzRnVuY3Rpb24iLCJhc3NlcnREZWZpbmVkIiwiaXNTZXQiLCJoYXNWYWx1ZSIsImFzc2VydEFycmF5IiwiY2xlYXIiLCJnZXRJZCIsInNlbGVjdCIsImZpcnN0IiwiaSIsImxlbmd0aCIsInVuc2hpZnQiLCJwdXNoIiwic2V0RGF0YSIsInJlY29yZHMiLCJmbkFyciIsImoiLCJnZXREYXRhU291cmNlc0lkcyIsInJlcyIsImdldFByb3BzIiwidHlwZSIsInZhbHVlcyIsInJlc2V0IiwicHJvcGVydHlOYW1lIiwidmFsdWUiLCJjaGVja0V4aXN0aW5nUHJvcHMiLCJzZXRQcm9wcyIsInNldElkIiwiZGVmYXVsdFByb3BzIiwiZGVmaW5lZElkIiwiaWROYW1lIiwiY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIiwiZ2V0Q3VycmVudFByb3BzIiwiZ2V0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QUF1QlksT0FBdkIsS0FBbUM7UUFDeEMsTUFBTWxCLEVBQUUsR0FBRyxNQUFNLEtBQUttQixPQUFMLENBQWMsTUFBS3NDLHFGQUFxQixDQUFDRCxNQUFELENBQVMsRUFBakQsRUFBb0R2QyxHQUFwRCxFQUF5RFgsU0FBekQsRUFBb0VZLE9BQXBFLENBQWpCO1FBQ0EsS0FBS21DLEtBQUwsQ0FBV3JELEVBQVgsRUFBZSxPQUFPLEVBQUMsR0FBR0QsS0FBSjtVQUFXLENBQUN5RCxNQUFELEdBQVV4RDtRQUFyQixDQUFQLENBQWY7TUFDSCxDQUhELENBRHFELENBS3JEOzs7TUFDQSxLQUFLb0IsS0FBTCxDQUFXLEtBQUtDLDJCQUFMLENBQWtDLE1BQUtvQyxxRkFBcUIsQ0FBQ0QsTUFBRCxDQUFTLEVBQXJFLENBQVgsRUFBb0Z4QyxFQUFwRixFQUF3RixJQUF4RjtJQUNILENBUEQsTUFPTztNQUNILEtBQUtxQyxLQUFMLENBQVcsS0FBS3JCLEtBQUwsRUFBWCxFQUF5QixPQUFPLEVBQUMsR0FBR2pDLEtBQUo7UUFBVyxDQUFDeUQsTUFBRCxHQUFVLEtBQUt4QixLQUFMO01BQXJCLENBQVAsQ0FBekI7SUFDSDtFQUNKOztFQUVEMEIsZUFBZSxHQUFHO0lBQ2QsT0FBUSxLQUFLOUQsU0FBTCxDQUFlLEtBQUtvQyxLQUFMLEVBQWYsQ0FBUjtFQUNIOztFQUVEMkIsTUFBTSxHQUFHO0lBQ0wsT0FBT0MsTUFBTSxDQUFDQyxJQUFQLENBQVksS0FBS2pFLFNBQWpCLENBQVA7RUFDSDs7QUFuVE87O0FBc1RHTCw4REFBZiIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjAgTWF0aGlldSBEaGFpbmF1dC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtcbiAgICBhc3NlcnRBcnJheSxcbiAgICBhc3NlcnREZWZpbmVkLFxuICAgIGFzc2VydEZ1bmN0aW9uLFxuICAgIGhhc1ZhbHVlLFxuICAgIGlzRGVmaW5lZCxcbiAgICBpc0Z1bmN0aW9uLFxuICAgIHJhbmRvbVVVSUQsXG4gICAgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyXG59IGZyb20gXCIuLi8uLi91dGlscy9VdGlscy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgaW4gY2hhcmdlIG9mIGRlZmluaW5nIGEgTGF5ZXIgb2JqZWN0LlxuICovXG5jbGFzcyBMYXllciB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIGNvbnRhaW5zIGEgbGlzdCBvZiBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnRpZXMubmFtZSAtIGRlZmF1bHQgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uIC0gZGVmYXVsdCBkZXNjcmlwdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZCAtIGRlZmF1bHQgZGF0YVNvdXJjZUlkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBwcm9wZXJ0aWVzLnZpc2libGUgLSBkZWZpbmVzIGlmIHRoZSBsYXllciBpcyB2aXNpYmxlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb3BlcnRpZXMudGltZXN0YW1wIC0gZGVmaW5lcyB0aGUgdGltZXN0YW1wIG9mIHRoZSBkYXRhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcGVydGllcy5nZXRUaW1lc3RhbXAgLSBmdW5jdGlvbiB3aGljaCBkZWZpbmVzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIGRhdGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wZXJ0aWVzLm9uTGVmdENsaWNrIC0gdHJpZ2dlciBvbkxlZnRDbGljayBtYXJrZXIgZXZlbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9wZXJ0aWVzLm9uUmlnaHRDbGljayAtIHRyaWdnZXIgb25SaWdodENsaWNrIG1hcmtlciBldmVudFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3BlcnRpZXMub25Ib3ZlciAtIHRyaWdnZXIgb25Ib3ZlciBtYXJrZXIgZXZlbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMuaW5pdChwcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0cyB0aGUgbGF5ZXIuXG4gICAgICovXG4gICAgaW5pdChwcm9wZXJ0aWVzPXRoaXMucHJvcGVydGllcykge1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5wcm9wc0J5SWQgPSB7fTtcbiAgICAgICAgdGhpcy5kYXRhU291cmNlc1RvRm4gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5wcm9wcyA9IHtcbiAgICAgICAgICAgIGlkOiBcImxheWVyLVwiICsgcmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgZmlsdGVyOiB0cnVlLFxuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYXRhU291cmNlSWRzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmKGlzRGVmaW5lZChwcm9wZXJ0aWVzLm5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm5hbWUgPSBwcm9wZXJ0aWVzLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXNEZWZpbmVkKHByb3BlcnRpZXMuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLmRlc2NyaXB0aW9uID0gcHJvcGVydGllcy5kZXNjcmlwdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZUlkcyA9IFtwcm9wZXJ0aWVzLmRhdGFTb3VyY2VJZF07XG4gICAgICAgIH1cblxuICAgICAgICBpZihpc0RlZmluZWQocHJvcGVydGllcy5kYXRhU291cmNlSWRzKSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlSWRzID0gcHJvcGVydGllcy5kYXRhU291cmNlSWRzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXRoaXMuZGF0YVNvdXJjZUlkcykge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlSWRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXNzZXJ0RGVmaW5lZCh0aGlzLmRhdGFTb3VyY2VJZHMsICdbTGF5ZXJdIGRhdGFTb3VyY2VJZHNbXSBvciBkYXRhU291cmNlSWQnKTtcblxuICAgICAgICBpZihpc0RlZmluZWQocHJvcGVydGllcy52aXNpYmxlKSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy52aXNpYmxlID0gcHJvcGVydGllcy52aXNpYmxlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLnRpbWVzdGFtcCkpe1xuICAgICAgICAgICAgdGhpcy5wcm9wcy50aW1lc3RhbXAgPSBwcm9wZXJ0aWVzLnRpbWVzdGFtcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy5vbkxlZnRDbGljaykgJiYgYXNzZXJ0RnVuY3Rpb24ocHJvcGVydGllcy5vbkxlZnRDbGljaykpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25MZWZ0Q2xpY2sgPSBwcm9wZXJ0aWVzLm9uTGVmdENsaWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLm9uUmlnaHRDbGljaykgJiYgYXNzZXJ0RnVuY3Rpb24ocHJvcGVydGllcy5vblJpZ2h0Q2xpY2spKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUmlnaHRDbGljayA9IHByb3BlcnRpZXMub25SaWdodENsaWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLm9uSG92ZXIpICYmIGFzc2VydEZ1bmN0aW9uKHByb3BlcnRpZXMub25Ib3ZlcikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Ib3ZlciA9IHByb3BlcnRpZXMub25Ib3ZlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5pdEV2ZW50cygpO1xuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJmaWx0ZXJcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IChyZWMsdGltZXN0YW1wLG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmZpbHRlciA9IHRoaXMuZ2V0RnVuYygnZmlsdGVyJykocmVjLHRpbWVzdGFtcCxvcHRpb25zKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFkZEZuKHRoaXMuZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5KCdmaWx0ZXInKSxmbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMuZmlsdGVyID0gZnVuY3Rpb24ocmVjLHRpbWVzdGFtcCxvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmZpbHRlciA9IGF3YWl0IHRoaXMuZ2V0RnVuYygnZmlsdGVyJykocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZmlsdGVyJyksZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldFZpc2libGVcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoJ3Zpc2libGUnLGF3YWl0IHRoaXMuZ2V0RnVuYygnZ2V0VmlzaWJsZScpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0VmlzaWJsZScpLGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRUaW1lc3RhbXBcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoJ3RpbWVzdGFtcCcsYXdhaXQgdGhpcy5nZXRGdW5jKCdnZXRUaW1lc3RhbXAnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhpcy5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldFRpbWVzdGFtcCcpLCBmbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jaGVja0ZuKFwiZ2V0TmFtZVwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYyx0aW1lc3RhbXAsb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoJ25hbWUnLGF3YWl0IHRoaXMuZ2V0RnVuYygnZ2V0TmFtZScpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0TmFtZScpLGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXREZXNjcmlwdGlvblwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0eSgnZGVzY3JpcHRpb24nLGF3YWl0IHRoaXMuZ2V0RnVuYygnZ2V0RGVzY3JpcHRpb24nKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhpcy5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldERlc2NyaXB0aW9uJyksIGZuKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEZ1bmMoZnVuY05hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1tmdW5jTmFtZV0uaGFuZGxlciB8fCB0aGlzLnByb3BlcnRpZXNbZnVuY05hbWVdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIGZ1bmNOYW1lXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cbiAgICBjaGVja0ZuKGZ1bmNOYW1lKSB7XG4gICAgICAgIGxldCBmdW5jID0gdGhpcy5wcm9wZXJ0aWVzW2Z1bmNOYW1lXTtcbiAgICAgICAgaWYoaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICAgICAgYXNzZXJ0RGVmaW5lZCh0aGlzLmRhdGFTb3VyY2VJZHMsICdkYXRhU291cmNlSWRzJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBpc1NldCA9IGhhc1ZhbHVlKGZ1bmMpO1xuICAgICAgICAgICAgaWYgKGlzU2V0KSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0QXJyYXkoZnVuYy5kYXRhU291cmNlSWRzLCBmdW5jTmFtZSArIFwiLmRhdGFTb3VyY2VJZHNcIik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0RnVuY3Rpb24oZnVuYy5oYW5kbGVyLCBmdW5jTmFtZSArIFwiLmhhbmRsZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXNTZXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGluaXRFdmVudHMoKSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGxheWVyLlxuICAgICAqL1xuICAgIGNsZWFyKCkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxheWVyIGlkLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGxheWVyIGlkXG4gICAgICovXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgdGhlIGRhdGFzb3VyY2UgY29udGFpbmVkIGludG8gdGhlIGxpc3RcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhU291cmNlSWRzIHRoZSBsaXN0IG9mIGRhdGFzb3VyY2VzXG4gICAgICovXG4gICAgc2VsZWN0KGRhdGFTb3VyY2VJZHMpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgZnVuY3Rpb24gYXNzb2NpYXRlZCB0byBhIGxpc3Qgb2YgZGF0YVNvdXJjZSBpZHNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBkYXRhU291cmNlSWRzIC0gdGhlIGxpc3Qgb2YgZGF0YXNvdXJjZXNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBhZGRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmaXJzdD1mYWxzZV0gLSBzZXQgYXQgdGhlIGZpcnN0IHBvc2l0aW9uXG4gICAgICovXG4gICAgYWRkRm4oZGF0YVNvdXJjZUlkcywgZm4sIGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQodGhpcy5kYXRhU291cmNlc1RvRm4pKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2VzVG9GbiA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVNvdXJjZUlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGRhdGFTb3VyY2VJZCA9IGRhdGFTb3VyY2VJZHNbaV07XG4gICAgICAgICAgICBpZiAoIWlzRGVmaW5lZCh0aGlzLmRhdGFTb3VyY2VzVG9GbltkYXRhU291cmNlSWRdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZXNUb0ZuW2RhdGFTb3VyY2VJZF0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGZpcnN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlc1RvRm5bZGF0YVNvdXJjZUlkXS51bnNoaWZ0KGZuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlc1RvRm5bZGF0YVNvdXJjZUlkXS5wdXNoKGZuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFTb3VyY2VJZFxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IHJlY29yZHNcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jIHNldERhdGEoZGF0YVNvdXJjZUlkLCByZWNvcmRzLCBvcHRpb25zPXt9KSB7XG4gICAgICAgIC8vIHN0b3JlIGRhdGEgaW50byBkYXRhIHByb3BzXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgICBvcHRpb25zLmRhdGFTb3VyY2VJZCA9IGRhdGFTb3VyY2VJZDtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh0aGlzLmRhdGFTb3VyY2VzVG9GbikpIHtcbiAgICAgICAgICAgIGlmIChkYXRhU291cmNlSWQgaW4gdGhpcy5kYXRhU291cmNlc1RvRm4pIHtcbiAgICAgICAgICAgICAgICBsZXQgZm5BcnIgPSB0aGlzLmRhdGFTb3VyY2VzVG9GbltkYXRhU291cmNlSWRdO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZmlsdGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlY29yZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbkFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZm5BcnJbaV0ocmVjb3Jkc1tqXS5kYXRhLCByZWNvcmRzW2pdLmRhdGEudGltZXN0YW1wLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5maWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnByb3BzLmZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wc0J5SWRbdGhpcy5nZXRJZCgpXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1N0cmluZ1tdfSBUaGUgbGlzdCBvZiBkYXRhU291cmNlIGlkc1xuICAgICAqL1xuICAgIGdldERhdGFTb3VyY2VzSWRzKCkge1xuICAgICAgICBpZihpc0RlZmluZWQodGhpcy5kYXRhU291cmNlc1RvRm4pKSB7XG4gICAgICAgICAgICBsZXQgcmVzID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuZGF0YVNvdXJjZXNUb0ZuKSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0RGVmaW5lZCh0aGlzLmRhdGFTb3VyY2VJZHMsICdkYXRhU291cmNlSWQgbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhU291cmNlSWRzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1tuYW1lXS5kYXRhU291cmNlSWRzIHx8IHRoaXMuZGF0YVNvdXJjZUlkcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBjdXJyZW50IGxheWVyIHByb3BlcnRpZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGEgc2hhbGxvdyBjb3B5IG9mIGN1cnJlbnQgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGdldFByb3BzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgdmFsdWVzOiB0aGlzLmRhdGFcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0byBkZWZhdWx0IExheWVyIHZhbHVlc1xuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmluaXQodGhpcy5wcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICB1cGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJvcHNCeUlkW3RoaXMuZ2V0SWQoKV1bcHJvcGVydHlOYW1lXSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGNoZWNrRXhpc3RpbmdQcm9wcyhpZCkge1xuICAgICAgICByZXR1cm4gKGlkIGluIHRoaXMucHJvcHNCeUlkKTtcbiAgICB9XG4gICAgc2V0UHJvcHMoaWQsIHByb3BzKSB7XG4gICAgICAgIHRoaXMucHJvcHNCeUlkW2lkXSA9IHByb3BzO1xuICAgIH1cblxuICAgIHNldElkKGlkLCBkZWZhdWx0UHJvcHMpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5pZCA9IGlkO1xuICAgICAgICBpZighdGhpcy5jaGVja0V4aXN0aW5nUHJvcHMoaWQpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BzKGlkLCBkZWZhdWx0UHJvcHMoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWZpbmVkSWQoaWROYW1lLCBwcm9wcykge1xuICAgICAgICBpZiAodGhpcy5jaGVja0ZuKGBnZXQke2NhcGl0YWxpemVGaXJzdExldHRlcihpZE5hbWUpfWApKSB7XG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGF3YWl0IHRoaXMuZ2V0RnVuYyhgZ2V0JHtjYXBpdGFsaXplRmlyc3RMZXR0ZXIoaWROYW1lKX1gKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJZChpZCwgKCkgPT4gKHsuLi5wcm9wcywgW2lkTmFtZV06IGlkfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIG11c3QgYmUgZmlyc3QgdG8gYXNzaWduIGNvcnJlY3RseSB0aGUgZmlyc3QgbG9jYXRpb24gdG8gdGhlIHJpZ2h0IGlkIGlmIGl0IGlzIGRlZmluZWRcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhpcy5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoYGdldCR7Y2FwaXRhbGl6ZUZpcnN0TGV0dGVyKGlkTmFtZSl9YCksIGZuLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SWQodGhpcy5nZXRJZCgpLCAoKSA9PiAoey4uLnByb3BzLCBbaWROYW1lXTogdGhpcy5nZXRJZCgpfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudFByb3BzKCkge1xuICAgICAgICByZXR1cm4gIHRoaXMucHJvcHNCeUlkW3RoaXMuZ2V0SWQoKV07XG4gICAgfVxuXG4gICAgZ2V0SWRzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5wcm9wc0J5SWQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGF5ZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///13\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/resources/css/view.css\nvar view = __webpack_require__(34);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/Constants.js\nvar Constants = __webpack_require__(3);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/connector/Status.js\n/**\n * Enum for connection status.\n * @readonly\n * @enum {{name: string}}\n */\nconst Status = {\n  CONNECTING: "connecting",\n  CONNECTED: "connected",\n  DISCONNECTED: "disconnected",\n  FETCH_STARTED: \'fetch-start\',\n  FETCH_ENDED: \'fetch-end\',\n  CLOSED: "closed",\n  CLOSED_ERROR: "closed-error"\n};\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/event/EventType.js\nvar EventType = __webpack_require__(7);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/View.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/**\n * The abstract object to represent a view.\n */\n\n\n\n\n\n\nclass View_View {\n  /**\n   * Create a View.\n   * @param {Object} [properties={}] - the properties of the view\n   * @param {string} properties.container - The div element to attach to\n   * @param {boolean} [properties.destroyAfterMutation=true]  - call view destroy() function after detecting div root Mutation\n   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces\n   * @param {string[]} properties.supportedLayers - List the supported layers of this View. It is corresponding to the the \'type\' Layer property\n   * @param {boolean} properties.visible - set the default behavior of the visibility of the view\n   * @param {Object[]}  [properties.layers=[]] - The initial layers to add\n   */\n  constructor(properties) {\n    // list of layers\n    this.layers = [];\n    this.lastRec = {};\n    this.dataSources = [];\n    this.broadcastChannels = []; //this.divId = divId;\n\n    this.id = "view-" + Object(Utils["n" /* randomUUID */])();\n    this.css = "";\n\n    if (Object(Utils["l" /* isDefined */])(properties) && Object(Utils["l" /* isDefined */])(properties.css)) {\n      this.css = properties.css;\n    }\n\n    Object(Utils["c" /* assertDefined */])(properties && properties.supportedLayers, \'supportedLayers\');\n    Object(Utils["a" /* assertArray */])(properties.supportedLayers, \'supportedLayers\');\n    Object(Utils["i" /* assertTrue */])(properties.supportedLayers.length > 0, \'supportedLayers.length === 0\');\n    this.supportedLayers = properties.supportedLayers; // inits the view before adding the viewItem\n\n    this.init(properties);\n  }\n  /**\n   * Inits the view component.\n   * @private\n   */\n\n\n  init(properties) {\n    this.properties = properties;\n    this.elementDiv = document.createElement("div");\n    this.elementDiv.setAttribute("id", this.id);\n    this.elementDiv.setAttribute("class", this.css + " osh-view");\n    this.divId = this.id;\n    let parentDivId = Object(Utils["l" /* isDefined */])(properties.container) ? properties.container : document.body;\n    let destroyAfterMutation = Object(Utils["l" /* isDefined */])(properties.destroyAfterMutation) ? properties.destroyAfterMutation : true;\n    let div = document.getElementById(parentDivId);\n\n    if (!Object(Utils["l" /* isDefined */])(div) || div === null) {\n      document.body.appendChild(this.elementDiv);\n      this.hide();\n      this.container = document.body;\n    } else {\n      div.appendChild(this.elementDiv);\n      this.container = div;\n    }\n\n    this.beforeAddingItems(properties);\n\n    if (Object(Utils["l" /* isDefined */])(properties)) {\n      if (Object(Utils["l" /* isDefined */])(properties.layers)) {\n        for (let i = 0; i < properties.layers.length; i++) {\n          this.addLayer(properties.layers[i]);\n        }\n      }\n\n      if (Object(Utils["l" /* isDefined */])(properties.visible)) {\n        document.getElementById(this.divId).style.display = properties.visible ? "block" : "none";\n      }\n    }\n\n    const that = this; // observes the event associated to the dataSourceId\n\n    let observer = new MutationObserver(mutations => {\n      mutations.forEach(function (mutation) {\n        // Was it the style attribute that changed? (Maybe a classname or other attribute change could do this too?\n        // You might want to remove the attribute condition) Is display set to \'none\'?\n        if (mutation.attributeName === \'style\') {\n          that.onResize();\n        }\n      });\n    }); // Attach the mutation observer to blocker, and only when attribute values change\n\n    observer.observe(this.elementDiv, {\n      attributes: true\n    });\n\n    if (destroyAfterMutation) {\n      const rootObserver = new MutationObserver(function (mutations) {\n        // try to get the div element by the id to check if it is still owned by the document object\n        if (!Object(Utils["l" /* isDefined */])(document.getElementById(that.divId))) {\n          this.disconnect();\n          that.destroy();\n        }\n      });\n      rootObserver.observe(document.body, {\n        childList: true\n      });\n    }\n  }\n  /**\n   * Hide the view\n   */\n\n\n  hide() {\n    this.elementDiv.style.display = "none";\n  }\n  /**\n   * Callback called when the view is resized\n   * @event\n   */\n\n\n  onResize() {}\n  /**\n   * Attach the view to a specific div. If the view has already been attached to a div, it will be removed\n   * from its current parent and will be attached to new one.\n   * Note: the onResize() is called at the end of the process.\n   * @param {String} divId - The div element to attach to\n   */\n\n\n  attachTo(divId) {\n    if (Object(Utils["l" /* isDefined */])(this.elementDiv.parentNode)) {\n      // detach from its parent\n      this.elementDiv.parentNode.removeChild(this.elementDiv);\n    }\n\n    document.getElementById(divId).appendChild(this.elementDiv);\n\n    if (this.elementDiv.style.display === "none") {\n      this.elementDiv.style.display = "block";\n    }\n\n    this.onResize();\n  }\n  /**\n   * This method is called before attaching any view items passed as arguments in the constructor of the view.\n   * @event\n   * @param {Object} options - A generic object to use\n   */\n\n\n  beforeAddingItems(options) {}\n  /**\n   * Gets the inner id of the view object.\n   * @return {String} The id of the view\n   */\n\n\n  getId() {\n    return this.id;\n  }\n  /**\n   * Gets the div id of the DOM element.\n   * @return {String} The div id of the view\n   */\n\n\n  getDivId() {\n    return this.divId;\n  }\n  /**\n   * Set the data to the view. Each view has to handle the kind of the data separately.\n   * @param {String} dataSourceId - The dataSource id of the source providing the data\n   * @param {any[]} data - The data array to set\n   */\n\n\n  async setData(dataSourceId, data) {}\n  /**\n   * Show the view.\n   * @param  {Object} properties - A generic object\n   */\n\n\n  show(properties) {}\n\n  destroy() {\n    this.removeAllFromLayers();\n\n    for (let bc of this.broadcastChannels) {\n      bc.close();\n      console.log(`closing BC..`);\n    }\n\n    this.broadcastChannels = []; // remove DOM element\n    // this.elementDiv?.remove(); // does not compile with older webpack version ..\n\n    if (Object(Utils["l" /* isDefined */])(this.elementDiv)) {\n      this.elementDiv.remove();\n    }\n  }\n  /**\n   * Adds a layer to the view. A broadcastChannel is going to listen the new dataSources\n   * @param {Layer} layer - The layer object\n   */\n\n\n  addLayer(layer) {\n    Object(Utils["i" /* assertTrue */])(this.supportedLayers.includes(layer.type), \'this layer is not supported: \' + layer.type + \', should be \' + this.supportedLayers);\n    this.layers.push(layer);\n    let ds = layer.getDataSourcesIds();\n\n    for (let i = 0; i < ds.length; i++) {\n      const dataSourceId = ds[i]; // this.setData(dataSourceId, [layer.getProps()]);\n      // observes the data come in\n\n      let self = this;\n      console.log(\'View Listen on \' + (Constants["a" /* DATASOURCE_DATA_TOPIC */] + dataSourceId));\n      const broadcastChannel = new BroadcastChannel(Constants["a" /* DATASOURCE_DATA_TOPIC */] + dataSourceId);\n\n      broadcastChannel.onmessage = async event => {\n        if (event.data.type === EventType["a" /* EventType */].STATUS && event.data.status === Status.CLOSED_ERROR) {\n          self.reset();\n        } else if (event.data.type === EventType["a" /* EventType */].DATA) {\n          const that = this; // transform the data\n\n          await layer.setData(dataSourceId, event.data.values); // set the transformed data to the view\n\n          await that.setData(dataSourceId, layer.getProps()); // store as last record\n\n          self.lastRec[dataSourceId] = event.data;\n        }\n      };\n\n      const timeBroadcastChannel = new BroadcastChannel(Constants["b" /* DATASOURCE_TIME_TOPIC */] + dataSourceId);\n\n      timeBroadcastChannel.onmessage = event => {\n        // skip data reset events for now\n        if (event.data.type === EventType["a" /* EventType */].TIME_CHANGED) {\n          self.reset(); // on time changed\n        }\n      };\n\n      this.broadcastChannels.push(broadcastChannel);\n      this.broadcastChannels.push(timeBroadcastChannel);\n    }\n  }\n  /**\n   * Removes a Layer from the view.\n   * @param {Layer} layer - The layer object\n   */\n\n\n  removeAllFromLayer(layer) {\n    if (this.layers.includes(layer)) {\n      // 1) remove from STYLER fn\n      for (let ds in layer.dataSourcesToFn) {\n        delete this.lastRec[ds];\n      }\n\n      layer.reset();\n    }\n  }\n  /**\n   * Removes all view item from the view.\n   */\n\n\n  removeAllFromLayers() {\n    for (let layer of this.layers) {\n      this.removeAllFromLayer(layer);\n    }\n  }\n  /**\n   * Gets the list of the dataSource ids contained into the view.\n   * @return {String[]} The list of dataSource ids\n   */\n\n\n  getDataSourcesId() {\n    let res = []; // check for layers\n\n    for (let i = 0; i < this.layers.length; i++) {\n      let layer = this.layers[i];\n      res = res.concat(layer.getDataSourcesIds());\n    }\n\n    return res;\n  }\n  /**\n   * Calls for resetting the view.\n   */\n\n\n  reset() {\n    this.removeAllFromLayers();\n  }\n\n}\n\n/* harmony default export */ var view_View = __webpack_exports__["a"] = (View_View);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9jb25uZWN0b3IvU3RhdHVzLmpzP2E1ODciLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvdWkvdmlldy9WaWV3LmpzPzA0YzIiXSwibmFtZXMiOlsiU3RhdHVzIiwiQ09OTkVDVElORyIsIkNPTk5FQ1RFRCIsIkRJU0NPTk5FQ1RFRCIsIkZFVENIX1NUQVJURUQiLCJGRVRDSF9FTkRFRCIsIkNMT1NFRCIsIkNMT1NFRF9FUlJPUiIsIlZpZXciLCJjb25zdHJ1Y3RvciIsInByb3BlcnRpZXMiLCJsYXllcnMiLCJsYXN0UmVjIiwiZGF0YVNvdXJjZXMiLCJicm9hZGNhc3RDaGFubmVscyIsImlkIiwicmFuZG9tVVVJRCIsImNzcyIsImlzRGVmaW5lZCIsImFzc2VydERlZmluZWQiLCJzdXBwb3J0ZWRMYXllcnMiLCJhc3NlcnRBcnJheSIsImFzc2VydFRydWUiLCJsZW5ndGgiLCJpbml0IiwiZWxlbWVudERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImRpdklkIiwicGFyZW50RGl2SWQiLCJjb250YWluZXIiLCJib2R5IiwiZGVzdHJveUFmdGVyTXV0YXRpb24iLCJkaXYiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaGlkZSIsImJlZm9yZUFkZGluZ0l0ZW1zIiwiaSIsImFkZExheWVyIiwidmlzaWJsZSIsInN0eWxlIiwiZGlzcGxheSIsInRoYXQiLCJvYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJtdXRhdGlvbnMiLCJmb3JFYWNoIiwibXV0YXRpb24iLCJhdHRyaWJ1dGVOYW1lIiwib25SZXNpemUiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsInJvb3RPYnNlcnZlciIsImRpc2Nvbm5lY3QiLCJkZXN0cm95IiwiY2hpbGRMaXN0IiwiYXR0YWNoVG8iLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJvcHRpb25zIiwiZ2V0SWQiLCJnZXREaXZJZCIsInNldERhdGEiLCJkYXRhU291cmNlSWQiLCJkYXRhIiwic2hvdyIsInJlbW92ZUFsbEZyb21MYXllcnMiLCJiYyIsImNsb3NlIiwiY29uc29sZSIsImxvZyIsInJlbW92ZSIsImxheWVyIiwiaW5jbHVkZXMiLCJ0eXBlIiwicHVzaCIsImRzIiwiZ2V0RGF0YVNvdXJjZXNJZHMiLCJzZWxmIiwiREFUQVNPVVJDRV9EQVRBX1RPUElDIiwiYnJvYWRjYXN0Q2hhbm5lbCIsIkJyb2FkY2FzdENoYW5uZWwiLCJvbm1lc3NhZ2UiLCJldmVudCIsIkV2ZW50VHlwZSIsIlNUQVRVUyIsInN0YXR1cyIsInJlc2V0IiwiREFUQSIsInZhbHVlcyIsImdldFByb3BzIiwidGltZUJyb2FkY2FzdENoYW5uZWwiLCJEQVRBU09VUkNFX1RJTUVfVE9QSUMiLCJUSU1FX0NIQU5HRUQiLCJyZW1vdmVBbGxGcm9tTGF5ZXIiLCJkYXRhU291cmNlc1RvRm4iLCJnZXREYXRhU291cmNlc0lkIiwicmVzIiwiY29uY2F0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxNQUFNQSxNQUFNLEdBQUc7RUFDbEJDLFVBQVUsRUFBRSxZQURNO0VBRWxCQyxTQUFTLEVBQUcsV0FGTTtFQUdsQkMsWUFBWSxFQUFFLGNBSEk7RUFJbEJDLGFBQWEsRUFBRSxhQUpHO0VBS2xCQyxXQUFXLEVBQUUsV0FMSztFQU1sQkMsTUFBTSxFQUFFLFFBTlU7RUFPbEJDLFlBQVksRUFBRTtBQVBJLENBQWYsQzs7Ozs7QUNMUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxN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TCxDQUFZZ0UsUUFBWixDQUFxQkQsS0FBckIsQ0FBSCxFQUFnQztNQUM1QjtNQUNBLEtBQUksSUFBSUksRUFBUixJQUFjSixLQUFLLENBQUN1QixlQUFwQixFQUFxQztRQUNqQyxPQUFPLEtBQUtyRixPQUFMLENBQWFrRSxFQUFiLENBQVA7TUFDSDs7TUFDREosS0FBSyxDQUFDZSxLQUFOO0lBQ0g7RUFDSjtFQUVEO0FBQ0o7QUFDQTs7O0VBQ0lyQixtQkFBbUIsR0FBRztJQUNsQixLQUFJLElBQUlNLEtBQVIsSUFBaUIsS0FBSy9ELE1BQXRCLEVBQThCO01BQzFCLEtBQUtxRixrQkFBTCxDQUF3QnRCLEtBQXhCO0lBQ0g7RUFDSjtFQUVEO0FBQ0o7QUFDQTtBQUNBOzs7RUFDSXdCLGdCQUFnQixHQUFHO0lBQ2YsSUFBSUMsR0FBRyxHQUFHLEVBQVYsQ0FEZSxDQUdmOztJQUNBLEtBQUssSUFBSTVELENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsS0FBSzVCLE1BQUwsQ0FBWVksTUFBaEMsRUFBd0NnQixDQUFDLEVBQXpDLEVBQTZDO01BQ3pDLElBQUltQyxLQUFLLEdBQUcsS0FBSy9ELE1BQUwsQ0FBWTRCLENBQVosQ0FBWjtNQUNBNEQsR0FBRyxHQUFHQSxHQUFHLENBQUNDLE1BQUosQ0FBVzFCLEtBQUssQ0FBQ0ssaUJBQU4sRUFBWCxDQUFOO0lBQ0g7O0lBRUQsT0FBT29CLEdBQVA7RUFDSDtFQUVEO0FBQ0o7QUFDQTs7O0VBQ0lWLEtBQUssR0FBRztJQUNKLEtBQUtyQixtQkFBTDtFQUNIOztBQTFSTTs7QUE2Ukk1RCxrRkFBZiIsImZpbGUiOiIxNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW51bSBmb3IgY29ubmVjdGlvbiBzdGF0dXMuXG4gKiBAcmVhZG9ubHlcbiAqIEBlbnVtIHt7bmFtZTogc3RyaW5nfX1cbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXR1cyA9IHtcbiAgICBDT05ORUNUSU5HOiBcImNvbm5lY3RpbmdcIixcbiAgICBDT05ORUNURUQ6ICBcImNvbm5lY3RlZFwiLFxuICAgIERJU0NPTk5FQ1RFRDogXCJkaXNjb25uZWN0ZWRcIixcbiAgICBGRVRDSF9TVEFSVEVEOiAnZmV0Y2gtc3RhcnQnLFxuICAgIEZFVENIX0VOREVEOiAnZmV0Y2gtZW5kJyxcbiAgICBDTE9TRUQ6IFwiY2xvc2VkXCIsXG4gICAgQ0xPU0VEX0VSUk9SOiBcImNsb3NlZC1lcnJvclwiXG59O1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIFRoZSBhYnN0cmFjdCBvYmplY3QgdG8gcmVwcmVzZW50IGEgdmlldy5cbiAqL1xuaW1wb3J0IHtcbiAgICBhc3NlcnRBcnJheSxcbiAgICBhc3NlcnRCb29sZWFuLFxuICAgIGFzc2VydERlZmluZWQsXG4gICAgYXNzZXJ0U3RyaW5nLFxuICAgIGFzc2VydFRydWUsXG4gICAgaXNEZWZpbmVkLFxuICAgIHJhbmRvbVVVSURcbn0gZnJvbSAnLi4vLi4vdXRpbHMvVXRpbHMuanMnO1xuaW1wb3J0ICcuLi8uLi9yZXNvdXJjZXMvY3NzL3ZpZXcuY3NzJztcbmltcG9ydCB7REFUQVNPVVJDRV9EQVRBX1RPUElDLCBEQVRBU09VUkNFX1RJTUVfVE9QSUN9IGZyb20gXCIuLi8uLi9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7U3RhdHVzfSBmcm9tIFwiLi4vLi4vY29ubmVjdG9yL1N0YXR1cy5qc1wiO1xuaW1wb3J0IHtFdmVudFR5cGV9IGZyb20gXCIuLi8uLi9ldmVudC9FdmVudFR5cGUuanNcIjtcblxuY2xhc3MgVmlldyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVmlldy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIC0gdGhlIHByb3BlcnRpZXMgb2YgdGhlIHZpZXdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydGllcy5jb250YWluZXIgLSBUaGUgZGl2IGVsZW1lbnQgdG8gYXR0YWNoIHRvXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvcGVydGllcy5kZXN0cm95QWZ0ZXJNdXRhdGlvbj10cnVlXSAgLSBjYWxsIHZpZXcgZGVzdHJveSgpIGZ1bmN0aW9uIGFmdGVyIGRldGVjdGluZyBkaXYgcm9vdCBNdXRhdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmNzcyAtIFRoZSBjc3MgY2xhc3NlcyB0byBzZXQsIGNhbiBiZSBtdWx0aXBsZSBpZiBzZXBhcmF0ZSBieSBzcGFjZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBwcm9wZXJ0aWVzLnN1cHBvcnRlZExheWVycyAtIExpc3QgdGhlIHN1cHBvcnRlZCBsYXllcnMgb2YgdGhpcyBWaWV3LiBJdCBpcyBjb3JyZXNwb25kaW5nIHRvIHRoZSB0aGUgJ3R5cGUnIExheWVyIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHtib29sZWFufSBwcm9wZXJ0aWVzLnZpc2libGUgLSBzZXQgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHZpZXdcbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSAgW3Byb3BlcnRpZXMubGF5ZXJzPVtdXSAtIFRoZSBpbml0aWFsIGxheWVycyB0byBhZGRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIGxpc3Qgb2YgbGF5ZXJzXG4gICAgICAgIHRoaXMubGF5ZXJzID0gW107XG4gICAgICAgIHRoaXMubGFzdFJlYyA9IHt9O1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2VzID0gW107XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbHMgPSBbXTtcblxuICAgICAgICAvL3RoaXMuZGl2SWQgPSBkaXZJZDtcbiAgICAgICAgdGhpcy5pZCA9IFwidmlldy1cIiArIHJhbmRvbVVVSUQoKTtcblxuICAgICAgICB0aGlzLmNzcyA9IFwiXCI7XG4gICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcykgJiYgaXNEZWZpbmVkKHByb3BlcnRpZXMuY3NzKSkge1xuICAgICAgICAgICAgdGhpcy5jc3MgPSBwcm9wZXJ0aWVzLmNzcztcbiAgICAgICAgfVxuXG4gICAgICAgIGFzc2VydERlZmluZWQocHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLnN1cHBvcnRlZExheWVycywgJ3N1cHBvcnRlZExheWVycycpO1xuICAgICAgICBhc3NlcnRBcnJheShwcm9wZXJ0aWVzLnN1cHBvcnRlZExheWVycywgJ3N1cHBvcnRlZExheWVycycpO1xuICAgICAgICBhc3NlcnRUcnVlKHByb3BlcnRpZXMuc3VwcG9ydGVkTGF5ZXJzLmxlbmd0aCA+IDAsICdzdXBwb3J0ZWRMYXllcnMubGVuZ3RoID09PSAwJyk7XG5cbiAgICAgICAgdGhpcy5zdXBwb3J0ZWRMYXllcnMgPSBwcm9wZXJ0aWVzLnN1cHBvcnRlZExheWVycztcblxuICAgICAgICAvLyBpbml0cyB0aGUgdmlldyBiZWZvcmUgYWRkaW5nIHRoZSB2aWV3SXRlbVxuICAgICAgICB0aGlzLmluaXQocHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdHMgdGhlIHZpZXcgY29tcG9uZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgaW5pdChwcm9wZXJ0aWVzKSB7XG5cbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICAgICAgdGhpcy5lbGVtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50RGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIHRoaXMuaWQpO1xuICAgICAgICB0aGlzLmVsZW1lbnREaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5jc3MrXCIgb3NoLXZpZXdcIik7XG4gICAgICAgIHRoaXMuZGl2SWQgPSB0aGlzLmlkO1xuXG4gICAgICAgIGxldCBwYXJlbnREaXZJZCA9IChpc0RlZmluZWQocHJvcGVydGllcy5jb250YWluZXIpPyBwcm9wZXJ0aWVzLmNvbnRhaW5lciA6IGRvY3VtZW50LmJvZHkpO1xuICAgICAgICBsZXQgZGVzdHJveUFmdGVyTXV0YXRpb24gPSAoaXNEZWZpbmVkKHByb3BlcnRpZXMuZGVzdHJveUFmdGVyTXV0YXRpb24pPyBwcm9wZXJ0aWVzLmRlc3Ryb3lBZnRlck11dGF0aW9uIDogdHJ1ZSk7XG5cbiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudERpdklkKTtcblxuICAgICAgICBpZiAoIWlzRGVmaW5lZChkaXYpIHx8IGRpdiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnREaXYpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50RGl2KTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gZGl2O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iZWZvcmVBZGRpbmdJdGVtcyhwcm9wZXJ0aWVzKTtcblxuICAgICAgICBpZihpc0RlZmluZWQocHJvcGVydGllcykpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy5sYXllcnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZExheWVyKHByb3BlcnRpZXMubGF5ZXJzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy52aXNpYmxlKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2SWQpLnN0eWxlLmRpc3BsYXkgPSAocHJvcGVydGllcy52aXNpYmxlKSA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgICAgIC8vIG9ic2VydmVzIHRoZSBldmVudCBhc3NvY2lhdGVkIHRvIHRoZSBkYXRhU291cmNlSWRcblxuICAgICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobXV0YXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBXYXMgaXQgdGhlIHN0eWxlIGF0dHJpYnV0ZSB0aGF0IGNoYW5nZWQ/IChNYXliZSBhIGNsYXNzbmFtZSBvciBvdGhlciBhdHRyaWJ1dGUgY2hhbmdlIGNvdWxkIGRvIHRoaXMgdG9vP1xuICAgICAgICAgICAgICAgIC8vIFlvdSBtaWdodCB3YW50IHRvIHJlbW92ZSB0aGUgYXR0cmlidXRlIGNvbmRpdGlvbikgSXMgZGlzcGxheSBzZXQgdG8gJ25vbmUnP1xuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQub25SZXNpemUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEF0dGFjaCB0aGUgbXV0YXRpb24gb2JzZXJ2ZXIgdG8gYmxvY2tlciwgYW5kIG9ubHkgd2hlbiBhdHRyaWJ1dGUgdmFsdWVzIGNoYW5nZVxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudERpdiwge2F0dHJpYnV0ZXM6IHRydWV9KTtcblxuICAgICAgICBpZihkZXN0cm95QWZ0ZXJNdXRhdGlvbikge1xuICAgICAgICAgICAgY29uc3Qgcm9vdE9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIC8vIHRyeSB0byBnZXQgdGhlIGRpdiBlbGVtZW50IGJ5IHRoZSBpZCB0byBjaGVjayBpZiBpdCBpcyBzdGlsbCBvd25lZCBieSB0aGUgZG9jdW1lbnQgb2JqZWN0XG4gICAgICAgICAgICAgICAgaWYgKCFpc0RlZmluZWQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhhdC5kaXZJZCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvb3RPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhpZGUgdGhlIHZpZXdcbiAgICAgKi9cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnREaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGNhbGxlZCB3aGVuIHRoZSB2aWV3IGlzIHJlc2l6ZWRcbiAgICAgKiBAZXZlbnRcbiAgICAgKi9cbiAgICBvblJlc2l6ZSgpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBdHRhY2ggdGhlIHZpZXcgdG8gYSBzcGVjaWZpYyBkaXYuIElmIHRoZSB2aWV3IGhhcyBhbHJlYWR5IGJlZW4gYXR0YWNoZWQgdG8gYSBkaXYsIGl0IHdpbGwgYmUgcmVtb3ZlZFxuICAgICAqIGZyb20gaXRzIGN1cnJlbnQgcGFyZW50IGFuZCB3aWxsIGJlIGF0dGFjaGVkIHRvIG5ldyBvbmUuXG4gICAgICogTm90ZTogdGhlIG9uUmVzaXplKCkgaXMgY2FsbGVkIGF0IHRoZSBlbmQgb2YgdGhlIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRpdklkIC0gVGhlIGRpdiBlbGVtZW50IHRvIGF0dGFjaCB0b1xuICAgICAqL1xuICAgIGF0dGFjaFRvKGRpdklkKSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQodGhpcy5lbGVtZW50RGl2LnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAvLyBkZXRhY2ggZnJvbSBpdHMgcGFyZW50XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnREaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnREaXYpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdklkKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnREaXYpO1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50RGl2LnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnREaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25SZXNpemUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYmVmb3JlIGF0dGFjaGluZyBhbnkgdmlldyBpdGVtcyBwYXNzZWQgYXMgYXJndW1lbnRzIGluIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgdmlldy5cbiAgICAgKiBAZXZlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEEgZ2VuZXJpYyBvYmplY3QgdG8gdXNlXG4gICAgICovXG4gICAgYmVmb3JlQWRkaW5nSXRlbXMob3B0aW9ucykge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5uZXIgaWQgb2YgdGhlIHZpZXcgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGlkIG9mIHRoZSB2aWV3XG4gICAgICovXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGRpdiBpZCBvZiB0aGUgRE9NIGVsZW1lbnQuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgZGl2IGlkIG9mIHRoZSB2aWV3XG4gICAgICovXG4gICAgZ2V0RGl2SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpdklkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZGF0YSB0byB0aGUgdmlldy4gRWFjaCB2aWV3IGhhcyB0byBoYW5kbGUgdGhlIGtpbmQgb2YgdGhlIGRhdGEgc2VwYXJhdGVseS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YVNvdXJjZUlkIC0gVGhlIGRhdGFTb3VyY2UgaWQgb2YgdGhlIHNvdXJjZSBwcm92aWRpbmcgdGhlIGRhdGFcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBkYXRhIC0gVGhlIGRhdGEgYXJyYXkgdG8gc2V0XG4gICAgICovXG4gICAgYXN5bmMgc2V0RGF0YShkYXRhU291cmNlSWQsIGRhdGEpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gcHJvcGVydGllcyAtIEEgZ2VuZXJpYyBvYmplY3RcbiAgICAgKi9cbiAgICBzaG93KHByb3BlcnRpZXMpIHtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkgIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxGcm9tTGF5ZXJzKCk7XG4gICAgICAgIGZvcihsZXQgYmMgb2YgdGhpcy5icm9hZGNhc3RDaGFubmVscykge1xuICAgICAgICAgICAgYmMuY2xvc2UoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBjbG9zaW5nIEJDLi5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWxzID0gW107XG4gICAgICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuICAgICAgICAvLyB0aGlzLmVsZW1lbnREaXY/LnJlbW92ZSgpOyAvLyBkb2VzIG5vdCBjb21waWxlIHdpdGggb2xkZXIgd2VicGFjayB2ZXJzaW9uIC4uXG4gICAgICAgIGlmKGlzRGVmaW5lZCh0aGlzLmVsZW1lbnREaXYpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnREaXYucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbGF5ZXIgdG8gdGhlIHZpZXcuIEEgYnJvYWRjYXN0Q2hhbm5lbCBpcyBnb2luZyB0byBsaXN0ZW4gdGhlIG5ldyBkYXRhU291cmNlc1xuICAgICAqIEBwYXJhbSB7TGF5ZXJ9IGxheWVyIC0gVGhlIGxheWVyIG9iamVjdFxuICAgICAqL1xuICAgIGFkZExheWVyKGxheWVyKSB7XG4gICAgICAgIGFzc2VydFRydWUodGhpcy5zdXBwb3J0ZWRMYXllcnMuaW5jbHVkZXMobGF5ZXIudHlwZSksICd0aGlzIGxheWVyIGlzIG5vdCBzdXBwb3J0ZWQ6ICcrbGF5ZXIudHlwZSsnLCBzaG91bGQgYmUgJyt0aGlzLnN1cHBvcnRlZExheWVycyk7XG4gICAgICAgIHRoaXMubGF5ZXJzLnB1c2gobGF5ZXIpO1xuXG4gICAgICAgIGxldCBkcyA9IGxheWVyLmdldERhdGFTb3VyY2VzSWRzKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9IGRzW2ldO1xuICAgICAgICAgICAvLyB0aGlzLnNldERhdGEoZGF0YVNvdXJjZUlkLCBbbGF5ZXIuZ2V0UHJvcHMoKV0pO1xuICAgICAgICAgICAgLy8gb2JzZXJ2ZXMgdGhlIGRhdGEgY29tZSBpblxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZpZXcgTGlzdGVuIG9uICcrKERBVEFTT1VSQ0VfREFUQV9UT1BJQytkYXRhU291cmNlSWQpKTtcbiAgICAgICAgICAgIGNvbnN0IGJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbChEQVRBU09VUkNFX0RBVEFfVE9QSUMrZGF0YVNvdXJjZUlkKTtcbiAgICAgICAgICAgIGJyb2FkY2FzdENoYW5uZWwub25tZXNzYWdlID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSA9PT0gRXZlbnRUeXBlLlNUQVRVUyAmJiBldmVudC5kYXRhLnN0YXR1cyA9PT0gU3RhdHVzLkNMT1NFRF9FUlJPUikge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5kYXRhLnR5cGUgPT09IEV2ZW50VHlwZS5EQVRBKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtIHRoZSBkYXRhXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxheWVyLnNldERhdGEoZGF0YVNvdXJjZUlkLCBldmVudC5kYXRhLnZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHRyYW5zZm9ybWVkIGRhdGEgdG8gdGhlIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhhdC5zZXREYXRhKGRhdGFTb3VyY2VJZCwgbGF5ZXIuZ2V0UHJvcHMoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmUgYXMgbGFzdCByZWNvcmRcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0UmVjW2RhdGFTb3VyY2VJZF0gPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHRpbWVCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoREFUQVNPVVJDRV9USU1FX1RPUElDK2RhdGFTb3VyY2VJZCk7XG4gICAgICAgICAgICB0aW1lQnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBza2lwIGRhdGEgcmVzZXQgZXZlbnRzIGZvciBub3dcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlID09PSBFdmVudFR5cGUuVElNRV9DSEFOR0VEKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVzZXQoKTsgLy8gb24gdGltZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVscy5wdXNoKGJyb2FkY2FzdENoYW5uZWwpO1xuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVscy5wdXNoKHRpbWVCcm9hZGNhc3RDaGFubmVsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBMYXllciBmcm9tIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7TGF5ZXJ9IGxheWVyIC0gVGhlIGxheWVyIG9iamVjdFxuICAgICAqL1xuICAgIHJlbW92ZUFsbEZyb21MYXllcihsYXllcikge1xuICAgICAgICBpZih0aGlzLmxheWVycy5pbmNsdWRlcyhsYXllcikpIHtcbiAgICAgICAgICAgIC8vIDEpIHJlbW92ZSBmcm9tIFNUWUxFUiBmblxuICAgICAgICAgICAgZm9yKGxldCBkcyBpbiBsYXllci5kYXRhU291cmNlc1RvRm4pIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5sYXN0UmVjW2RzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxheWVyLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCB2aWV3IGl0ZW0gZnJvbSB0aGUgdmlldy5cbiAgICAgKi9cbiAgICByZW1vdmVBbGxGcm9tTGF5ZXJzKCkge1xuICAgICAgICBmb3IobGV0IGxheWVyIG9mIHRoaXMubGF5ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFsbEZyb21MYXllcihsYXllcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsaXN0IG9mIHRoZSBkYXRhU291cmNlIGlkcyBjb250YWluZWQgaW50byB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmdbXX0gVGhlIGxpc3Qgb2YgZGF0YVNvdXJjZSBpZHNcbiAgICAgKi9cbiAgICBnZXREYXRhU291cmNlc0lkKCkge1xuICAgICAgICBsZXQgcmVzID0gW107XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIGxheWVyc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGF5ZXIgPSB0aGlzLmxheWVyc1tpXTtcbiAgICAgICAgICAgIHJlcyA9IHJlcy5jb25jYXQobGF5ZXIuZ2V0RGF0YVNvdXJjZXNJZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxzIGZvciByZXNldHRpbmcgdGhlIHZpZXcuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsRnJvbUxheWVycygpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVmlldztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n')},,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/Mode.js\nvar Mode = __webpack_require__(2);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/Constants.js\nvar Constants = __webpack_require__(3);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/worker/DataSource.worker.js\nvar DataSource_worker = __webpack_require__(21);\nvar DataSource_worker_default = /*#__PURE__*/__webpack_require__.n(DataSource_worker);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/DataSource.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n/**\n * The DataSource is the abstract class used to create different datasources.\n *\n */\n\nclass DataSource_datasource_DataSource {\n  constructor(name, properties) {\n    this.id = properties.id || \"DataSource-\" + Object(Utils[\"n\" /* randomUUID */])();\n    this.name = name;\n    this.properties = properties;\n    this.eventSubscriptionMap = {};\n    this.init = undefined;\n    this.messagesMap = {};\n    this.mode = Mode[\"a\" /* Mode */].REAL_TIME;\n\n    if (Object(Utils[\"l\" /* isDefined */])(properties.mode)) {\n      this.mode = properties.mode;\n    }\n  }\n  /**\n   * Gets the datasource id.\n   * @return {String} the datasource id\n   */\n\n\n  getId() {\n    return this.id;\n  }\n  /**\n   * Gets the datasource name.\n   * @return {String} the datasource name\n   */\n\n\n  getName() {\n    return this.name;\n  }\n\n  terminate() {\n    if (this.dataSourceWorker !== null) {\n      this.dataSourceWorker.terminate();\n    }\n  }\n\n  getTopicId() {\n    return Constants[\"a\" /* DATASOURCE_DATA_TOPIC */] + this.id;\n  }\n\n  subscribe(fn, eventTypes) {\n    // associate function to eventType\n    for (let i = 0; i < eventTypes.length; i++) {\n      if (!(eventTypes[i] in this.eventSubscriptionMap)) {\n        this.eventSubscriptionMap[eventTypes[i]] = [];\n      }\n\n      this.eventSubscriptionMap[eventTypes[i]].push(fn);\n    }\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n\n  async createWorker(properties) {\n    return new DataSource_worker_default.a();\n  }\n  /**\n   * Update properties\n   * @param {String} name - the datasource name\n   * @param {Object} properties - the datasource properties\n   * @param {Number} properties.bufferingTime - defines the time during the data has to be buffered\n   * @param {Number} properties.timeOut - defines the limit time before data has to be skipped\n   * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}\n   * @param {String} properties.endpointUrl the endpoint url\n   * @param {String} properties.service the service\n   * @param {Number} properties.responseFormat the response format (e.g video/mp4)\n   * @param {Number} properties.reconnectTimeout - the timeout before reconnecting\n   */\n\n\n  async updateProperties(properties) {\n    this.properties = { ...this.properties,\n      ...properties\n    };\n    return new Promise(resolve => {\n      this.postMessage({\n        message: 'update-properties',\n        data: properties\n      }, resolve);\n    });\n  }\n  /**\n   * Connect the dataSource then the protocol will be opened as well.\n   */\n\n\n  async connect() {\n    await this.checkInit();\n    await this.doConnect();\n  }\n\n  async initDataSource(properties = this.properties) {\n    return new Promise(async (resolve, reject) => {\n      this.dataSourceWorker = await this.createWorker(this.properties);\n      this.handleWorkerMessage();\n      this.postMessage({\n        message: 'init',\n        id: this.id,\n        properties: properties,\n        topics: {\n          data: this.getTopicId()\n        }\n      }, async message => {\n        // listen for Events to callback to subscriptions\n        const datasourceBroadcastChannel = new BroadcastChannel(this.getTopicId());\n\n        datasourceBroadcastChannel.onmessage = async message => {\n          await this.handleMessage(message);\n        };\n\n        resolve(message);\n      });\n    });\n  }\n\n  async handleMessage(message) {\n    const type = message.data.type;\n\n    if (type in this.eventSubscriptionMap) {\n      for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n        this.eventSubscriptionMap[type][i](message.data);\n      }\n    }\n  }\n\n  async checkInit() {\n    return new Promise(async (resolve, reject) => {\n      if (!Object(Utils[\"l\" /* isDefined */])(this.init)) {\n        this.init = this.initDataSource();\n      }\n\n      await this.init;\n      resolve();\n    });\n  }\n\n  async doConnect() {\n    return new Promise(async resolve => {\n      this.postMessage({\n        message: 'connect'\n      }, resolve);\n    });\n  }\n\n  async isConnected() {\n    return new Promise(async resolve => {\n      if (!this.init) {\n        resolve(false);\n      } else {\n        await this.checkInit();\n        this.postMessage({\n          message: 'is-connected'\n        }, resolve);\n      }\n    });\n  }\n  /**\n   * Disconnect the dataSource then the protocol will be closed as well.\n   */\n\n\n  async disconnect() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      this.postMessage({\n        message: 'disconnect'\n      }, resolve);\n    });\n  }\n\n  postMessage(props, Fn) {\n    const messageId = Object(Utils[\"n\" /* randomUUID */])();\n    this.dataSourceWorker.postMessage({ ...props,\n      messageId: messageId\n    });\n\n    if (Object(Utils[\"l\" /* isDefined */])(Fn)) {\n      this.messagesMap[messageId] = Fn;\n    }\n  }\n\n  handleWorkerMessage() {\n    this.dataSourceWorker.onmessage = event => {\n      const id = event.data.messageId;\n\n      if (id in this.messagesMap) {\n        this.messagesMap[id](event.data.data);\n        delete this.messagesMap[id];\n      }\n    };\n  }\n\n  async onDisconnect() {}\n\n  reset() {\n    this.init = undefined;\n  }\n\n  onRemovedDataSource(dataSourceId) {}\n\n  onAddedDataSource(dataSourceId) {}\n\n}\n\n/* harmony default export */ var DataSource_datasource = (DataSource_datasource_DataSource);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/TimeSeries.realtime.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n/**\n * The DataSource is the abstract class used to create different datasources.\n *\n */\n\nclass TimeSeries_realtime_datasource_TimeSeriesRealtimeDatasource extends DataSource_datasource {\n  constructor(name, properties) {\n    super(name, properties);\n    this.dataSynchronizer = undefined;\n    this.properties.version = 0;\n  }\n\n  getTimeTopicId() {\n    return Constants[\"b\" /* DATASOURCE_TIME_TOPIC */] + this.id;\n  }\n  /**\n   * Gets the mode\n   * @returns {Mode} - Datasource mode\n   */\n\n\n  getMode() {\n    return Mode[\"a\" /* Mode */].REAL_TIME;\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getStartTimeAsIsoDate() {\n    return 'now';\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getStartTimeAsTimestamp() {\n    return Date.now();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getEndTimeAsIsoDate() {\n    return this.getMaxTimeAsTimestamp();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getEndTimeAsTimestamp() {\n    return this.getMaxTimeAsTimestamp();\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getMinTimeAsIsoDate() {\n    return 'now';\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getMaxTimeAsIsoDate() {\n    return '2055-01-01Z';\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getMinTimeAsTimestamp() {\n    return Date.now(); // or should we use first timestamp of last data received???\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getMaxTimeAsTimestamp() {\n    return new Date('2055-01-01Z').toISOString();\n  }\n  /**\n   * Sets the min time\n   */\n\n\n  setMinTime(time) {}\n  /**\n   * Sets the max time\n   */\n\n\n  setMaxTime(time) {}\n  /**\n   * Sets the start time\n   */\n\n\n  setStartTimestamp(timestamp) {}\n  /**\n   * Sets the end time\n   */\n\n\n  setEndTimestamp(timestamp) {}\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getReplaySpeed() {\n    return 1.0;\n  }\n\n  setReplaySpeed(replaySpeed) {}\n\n  setVersion(version) {\n    this.properties.version = version;\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n  /**\n   * @param dataSynchronizer\n   * @returns {Promise}\n   */\n\n\n  async setDataSynchronizer(dataSynchronizer) {\n    return new Promise(async (resolve, reject) => {\n      console.log('set dataSynchronizer');\n      await this.checkInit();\n      const topic = Constants[\"c\" /* DATA_SYNCHRONIZER_TOPIC */] + dataSynchronizer.id;\n      this.dataSynchronizer = dataSynchronizer;\n      this.properties.version = this.dataSynchronizer.version();\n      this.postMessage({\n        message: 'topics',\n        topics: {\n          data: topic,\n          time: this.getTimeTopicId(),\n          sync: dataSynchronizer.getTimeTopicId()\n        }\n      }, () => resolve());\n    });\n  }\n\n  async removeDataSynchronizer() {\n    if (this.dataSourceWorker) {\n      this.dataSourceWorker.terminate();\n      this.dataSynchronizer = undefined;\n    } // this.init = undefined;\n\n\n    await this.checkInit();\n  }\n  /**\n   * Disconnect the dataSource then the protocol will be closed as well.\n   */\n\n\n  async disconnect() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      this.postMessage({\n        message: 'disconnect'\n      }, resolve);\n    });\n  }\n\n  async doConnect() {\n    console.log(this.dataSynchronizer);\n    return new Promise(async resolve => {\n      this.postMessage({\n        message: 'connect',\n        startTime: 'now',\n        version: this.version()\n      }, resolve);\n    });\n  }\n  /**\n   * Inits the datasource with the constructor properties.\n   * @protected\n   * @param properties\n   */\n\n\n  async initDataSource(properties) {\n    await super.initDataSource(properties);\n    return new Promise(async (resolve, reject) => {\n      const topics = {\n        data: this.getTopicId(),\n        time: this.getTimeTopicId()\n      };\n\n      if (this.dataSynchronizer) {\n        topics.sync = dataSynchronizer.getTimeTopicId();\n      }\n\n      this.postMessage({\n        message: 'topics',\n        topics: topics\n      }, async () => {\n        // listen for Events to callback to subscriptions\n        const datasourceBroadcastChannel = new BroadcastChannel(this.getTimeTopicId());\n\n        datasourceBroadcastChannel.onmessage = async message => {\n          await this.handleTimeMessage(message);\n        };\n\n        resolve();\n      });\n    });\n  }\n\n  async handleTimeMessage(message) {\n    const type = message.data.type;\n\n    if (type in this.eventSubscriptionMap) {\n      for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n        this.eventSubscriptionMap[type][i](message.data);\n      }\n    }\n  }\n\n  version() {\n    return this.properties.version;\n  }\n\n}\n\n/* harmony default export */ var TimeSeries_realtime_datasource = (TimeSeries_realtime_datasource_TimeSeriesRealtimeDatasource);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/TimeSeries.replay.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n/**\n * The DataSource is the abstract class used to create different datasources.\n *\n */\n\nclass TimeSeries_replay_datasource_TimeSeriesReplayDatasource extends DataSource_datasource {\n  constructor(name, properties) {\n    super(name, properties);\n\n    if (!('minTime' in properties)) {\n      this.setMinTime(properties.startTime);\n    } else {\n      this.properties.minTimestamp = new Date(properties.minTime).getTime();\n    }\n\n    if (!('maxTime' in properties)) {\n      this.setMaxTime(properties.endTime);\n    } else {\n      this.properties.maxTimestamp = new Date(properties.maxTime).getTime();\n    }\n\n    this.properties.startTimestamp = new Date(properties.startTime).getTime();\n    this.properties.endTimestamp = new Date(properties.endTime).getTime();\n    Object(Utils[\"c\" /* assertDefined */])(properties, 'Some properties must be defined');\n    this.dataSynchronizer = undefined;\n    this.properties.version = 0;\n  }\n\n  getTimeTopicId() {\n    return Constants[\"b\" /* DATASOURCE_TIME_TOPIC */] + this.id;\n  }\n  /**\n   * Gets the mode\n   * @returns {Mode} - Datasource mode\n   */\n\n\n  getMode() {\n    return this.properties.mode;\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getStartTimeAsIsoDate() {\n    return new Date(this.getStartTimeAsTimestamp()).toISOString();\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getStartTimeAsTimestamp() {\n    return this.properties.startTimestamp;\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getEndTimeAsIsoDate() {\n    return new Date(this.getEndTimeAsTimestamp()).toISOString();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getEndTimeAsTimestamp() {\n    return this.properties.endTimestamp;\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getMinTimeAsIsoDate() {\n    return new Date(this.getMinTimeAsTimestamp()).toISOString();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getMaxTimeAsIsoDate() {\n    return new Date(this.getMaxTimeAsTimestamp()).toISOString();\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getMinTimeAsTimestamp() {\n    return this.properties.minTimestamp;\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getMaxTimeAsTimestamp() {\n    return this.properties.maxTimestamp;\n  }\n  /**\n   * Sets the min time\n   */\n\n\n  setMinTime(time) {\n    this.properties.minTimestamp = new Date(time).getTime();\n  }\n  /**\n   * Sets the max time\n   */\n\n\n  setMaxTime(time) {\n    this.properties.maxTimestamp = new Date(time).getTime();\n  }\n  /**\n   * Sets the start time\n   */\n\n\n  setStartTimestamp(timestamp) {\n    this.properties.startTimestamp = timestamp;\n    this.computeMinMax();\n  }\n  /**\n   * Sets the end time\n   */\n\n\n  setEndTimestamp(timestamp) {\n    this.properties.endTimestamp = timestamp;\n    this.computeMinMax();\n  }\n  /**\n   * Sets the start time\n   */\n\n\n  setStartTime(time) {\n    this.setStartTimestamp(new Date(time).getTime());\n  }\n  /**\n   * Sets the end time\n   */\n\n\n  setEndTime(time) {\n    this.setEndTimestamp(new Date(time).getTime());\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getReplaySpeed() {\n    return this.properties.replaySpeed;\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  setReplaySpeed(replaySpeed) {\n    this.properties.replaySpeed = replaySpeed;\n  }\n\n  setVersion(version) {\n    this.properties.version = version;\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n  /**\n   * @param dataSynchronizer\n   * @returns {Promise}\n   */\n\n\n  async setDataSynchronizer(dataSynchronizer) {\n    return new Promise(async (resolve, reject) => {\n      await this.checkInit();\n      const topic = Constants[\"c\" /* DATA_SYNCHRONIZER_TOPIC */] + dataSynchronizer.getId();\n      this.dataSynchronizer = dataSynchronizer;\n      this.properties.version = this.dataSynchronizer.version();\n      this.postMessage({\n        message: 'topics',\n        topics: {\n          data: topic,\n          time: this.getTimeTopicId(),\n          sync: dataSynchronizer.getTimeTopicId()\n        }\n      }, () => resolve());\n    });\n  }\n\n  async removeDataSynchronizer() {\n    if (this.dataSourceWorker) {\n      this.dataSourceWorker.terminate();\n      this.dataSynchronizer = undefined;\n    } // this.init = undefined;\n\n\n    await this.checkInit();\n  }\n  /**\n   * Disconnect the dataSource then the protocol will be closed as well.\n   */\n\n\n  async disconnect() {\n    await this.checkInit();\n    return new Promise(async resolve => {\n      await this.checkInit();\n      this.postMessage({\n        message: 'disconnect'\n      }, resolve);\n    });\n  }\n\n  async doConnect() {\n    return new Promise(async resolve => {\n      let startTime;\n\n      if (Object(Utils[\"l\" /* isDefined */])(this.dataSynchronizer)) {\n        startTime = this.dataSynchronizer.getMode() === Mode[\"a\" /* Mode */].REAL_TIME ? 'now' : this.getStartTimeAsIsoDate();\n      }\n\n      this.postMessage({\n        message: 'connect',\n        startTime: startTime,\n        version: this.version()\n      }, resolve);\n    });\n  }\n  /**\n   * Inits the datasource with the constructor properties.\n   * @protected\n   * @param properties\n   */\n\n\n  async initDataSource(properties) {\n    await super.initDataSource(properties);\n    return new Promise(async (resolve, reject) => {\n      const topics = {\n        data: this.getTopicId(),\n        time: this.getTimeTopicId()\n      };\n\n      if (this.dataSynchronizer) {\n        topics.sync = dataSynchronizer.getTimeTopicId();\n      }\n\n      this.postMessage({\n        message: 'topics',\n        topics: topics\n      }, async () => {\n        // listen for Events to callback to subscriptions\n        const datasourceBroadcastChannel = new BroadcastChannel(this.getTimeTopicId());\n\n        datasourceBroadcastChannel.onmessage = async message => {\n          await this.handleTimeMessage(message);\n        }; // this.init = undefined;\n\n\n        resolve();\n      });\n    });\n  }\n\n  async handleTimeMessage(message) {\n    const type = message.data.type;\n\n    if (type in this.eventSubscriptionMap) {\n      for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n        this.eventSubscriptionMap[type][i](message.data);\n      }\n    }\n  }\n\n  version() {\n    return this.properties.version;\n  }\n\n  computeMinMax() {\n    // intersect end/start depending on the min/max\n    if (this.properties.startTimestamp < this.properties.minTimestamp) {\n      this.properties.startTimestamp = this.properties.minTimestamp;\n    }\n\n    if (this.properties.endTimestamp > this.properties.maxTimestamp) {\n      this.properties.endTimestamp = this.properties.maxTimestamp;\n    }\n  }\n  /**\n   * Sets the data source time range\n   * @param {String} startTime - the startTime (in date ISO)\n   * @param {String} endTime - the startTime (in date ISO)\n   * @param {Number} replaySpeed - the replay speed\n   * @param {boolean} reconnect - reconnect if was connected\n   * @param {Mode} mode - default dataSource mode\n   * @param {Number} version - version of data\n   */\n\n\n  async setTimeRange(startTime = this.getStartTimeAsIsoDate(), endTime = this.getEndTimeAsIsoDate(), replaySpeed = this.getReplaySpeed(), reconnect = false, mode = this.getMode(), version = this.version()) {\n    await this.checkInit();\n\n    if (version !== this.version()) {\n      // update version if come in from other input\n      this.properties.version = version;\n    } // compute intersection\n\n\n    this.properties.startTimestamp = new Date(startTime).getTime();\n    this.properties.endTimestamp = new Date(endTime).getTime();\n    this.computeMinMax();\n    return this.updateProperties({\n      startTime: this.getStartTimeAsIsoDate(),\n      endTime: this.getEndTimeAsIsoDate(),\n      replaySpeed: replaySpeed,\n      reconnect: reconnect,\n      mode: mode,\n      version: version\n    });\n  }\n\n}\n\n/* harmony default export */ var TimeSeries_replay_datasource = (TimeSeries_replay_datasource_TimeSeriesReplayDatasource);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/TimeSeries.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n/**\n * The DataSource is the abstract class used to create different datasources.\n *\n */\n\nclass TimeSeries_datasource_TimeSeriesDatasource {\n  constructor(name, properties) {\n    const id = Object(Utils[\"n\" /* randomUUID */])();\n    this.timeSeriesRealtimeDataSource = new TimeSeries_realtime_datasource(name, {\n      id: id,\n      ...properties\n    });\n    this.timeSeriesReplayDataSource = new TimeSeries_replay_datasource(name, {\n      id: id,\n      ...properties\n    });\n    this.setMode(properties.mode);\n  }\n\n  async setMode(mode) {\n    if (this.timeSeriesDataSource) {\n      await this.timeSeriesDataSource.disconnect();\n    }\n\n    if (!this.timeSeriesDataSource || mode !== this.timeSeriesDataSource.getMode()) {\n      if (mode === Mode[\"a\" /* Mode */].REAL_TIME) {\n        this.timeSeriesDataSource = this.timeSeriesRealtimeDataSource;\n      } else {\n        this.timeSeriesDataSource = this.timeSeriesReplayDataSource;\n      } // bind properties\n\n\n      this.properties = this.timeSeriesDataSource.properties;\n      this.id = this.timeSeriesDataSource.id;\n      this.name = this.timeSeriesDataSource.name;\n      this.properties.mode = mode;\n    }\n  }\n\n  getTimeTopicId() {\n    return this.timeSeriesDataSource.getTimeTopicId();\n  }\n  /**\n   * Gets the mode\n   * @returns {Mode} - Datasource mode\n   */\n\n\n  getMode() {\n    return this.timeSeriesDataSource.getMode();\n  }\n\n  setVersion(version) {\n    this.timeSeriesDataSource.setVersion(version);\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getStartTimeAsIsoDate() {\n    return this.timeSeriesDataSource.getStartTimeAsIsoDate();\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getStartTimeAsTimestamp() {\n    return this.timeSeriesDataSource.getStartTimeAsTimestamp();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getEndTimeAsIsoDate() {\n    return this.timeSeriesDataSource.getEndTimeAsIsoDate();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getEndTimeAsTimestamp() {\n    return this.timeSeriesDataSource.getEndTimeAsTimestamp();\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getMinTimeAsIsoDate() {\n    return this.timeSeriesDataSource.getMinTimeAsIsoDate();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getMaxTimeAsIsoDate() {\n    return this.timeSeriesDataSource.getMaxTimeAsIsoDate();\n  }\n  /**\n   * Gets the startTime\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getMinTimeAsTimestamp() {\n    return this.timeSeriesDataSource.getMinTimeAsTimestamp();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getMaxTimeAsTimestamp() {\n    return this.timeSeriesDataSource.getMaxTimeAsTimestamp();\n  }\n  /**\n   * Sets the min time\n   */\n\n\n  setMinTime(time) {\n    this.timeSeriesDataSource.setMinTime(time);\n  }\n  /**\n   * Sets the max time\n   */\n\n\n  setMaxTime(time) {\n    this.timeSeriesDataSource.setMaxTime(time);\n  }\n  /**\n   * Sets the start time\n   */\n\n\n  setStartTimestamp(timestamp) {\n    this.timeSeriesDataSource.setStartTimestamp(timestamp);\n  }\n  /**\n   * Sets the end time\n   */\n\n\n  setEndTimestamp(timestamp) {\n    this.timeSeriesDataSource.setEndTimestamp(timestamp);\n  }\n  /**\n   * Sets the start time\n   */\n\n\n  setStartTime(time) {\n    this.timeSeriesDataSource.setStartTime(time);\n  }\n  /**\n   * Sets the end time\n   */\n\n\n  setEndTime(time) {\n    this.timeSeriesDataSource.setEndTime(time);\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getReplaySpeed() {\n    return this.timeSeriesDataSource.getReplaySpeed();\n  }\n  /**\n   * Gets the endTime\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  setReplaySpeed(replaySpeed) {\n    this.timeSeriesDataSource.setReplaySpeed(replaySpeed);\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n  /**\n   * @param dataSynchronizer\n   * @returns {Promise}\n   */\n\n\n  async setDataSynchronizer(dataSynchronizer) {\n    return this.timeSeriesDataSource.setDataSynchronizer(dataSynchronizer);\n  }\n\n  async removeDataSynchronizer() {\n    return this.timeSeriesDataSource.removeDataSynchronizer();\n  }\n  /**\n   * Disconnect the dataSource then the protocol will be closed as well.\n   */\n\n\n  async disconnect() {\n    return this.timeSeriesDataSource.disconnect();\n  }\n\n  async doConnect() {\n    return this.timeSeriesDataSource.doConnect();\n  }\n  /**\n   * Inits the datasource with the constructor properties.\n   * @protected\n   * @param properties\n   */\n\n\n  async initDataSource(properties) {\n    return this.timeSeriesDataSource.initDataSource(properties);\n  }\n\n  version() {\n    return this.timeSeriesDataSource.version();\n  }\n  /**\n   * Sets the data source time range\n   * @param {String} startTime - the startTime (in date ISO)\n   * @param {String} endTime - the startTime (in date ISO)\n   * @param {Number} replaySpeed - the replay speed\n   * @param {boolean} reconnect - reconnect if was connected\n   * @param {Mode} mode - default dataSource mode\n   * @param {Number} version - version of data\n   */\n\n\n  async setTimeRange(startTime = this.getStartTimeAsIsoDate(), endTime = this.getEndTimeAsIsoDate(), replaySpeed = this.getReplaySpeed(), reconnect = false, mode = this.getMode(), version = this.version()) {\n    return this.timeSeriesDataSource.setTimeRange(startTime, endTime, replaySpeed, reconnect, mode, version);\n  }\n  /***********************************/\n\n  /**\n   * Gets the datasource id.\n   * @return {String} the datasource id\n   */\n\n\n  getId() {\n    return this.timeSeriesDataSource.getId();\n  }\n  /**\n   * Gets the datasource name.\n   * @return {String} the datasource name\n   */\n\n\n  getName() {\n    return this.timeSeriesDataSource.getName();\n  }\n\n  terminate() {\n    this.timeSeriesDataSource.terminate();\n  }\n\n  getTopicId() {\n    return this.timeSeriesDataSource.getTopicId();\n  }\n\n  subscribe(fn, eventTypes) {\n    this.timeSeriesDataSource.subscribe(fn, eventTypes);\n  }\n  /**\n   * Update properties\n   * @param {String} name - the datasource name\n   * @param {Object} properties - the datasource properties\n   * @param {Number} properties.bufferingTime - defines the time during the data has to be buffered\n   * @param {Number} properties.timeOut - defines the limit time before data has to be skipped\n   * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}\n   * @param {String} properties.endpointUrl the endpoint url\n   * @param {String} properties.service the service\n   * @param {Number} properties.responseFormat the response format (e.g video/mp4)\n   * @param {Number} properties.reconnectTimeout - the timeout before reconnecting\n   */\n\n\n  async updateProperties(properties) {\n    return this.timeSeriesDataSource.updateProperties(properties);\n  }\n  /**\n   * Connect the dataSource then the protocol will be opened as well.\n   */\n\n\n  async connect() {\n    return this.timeSeriesDataSource.connect();\n  }\n\n  async checkInit() {\n    return this.timeSeriesDataSource.checkInit();\n  }\n\n  async isConnected() {\n    return this.timeSeriesDataSource.isConnected();\n  }\n\n  reset() {\n    this.timeSeriesDataSource.reset();\n  }\n\n  onTimeChanged(min, max, start, end) {}\n\n}\n\n/* harmony default export */ var TimeSeries_datasource = (TimeSeries_datasource_TimeSeriesDatasource);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/sos/SosGetResult.datasource.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Georobotix Inc. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\nclass SosGetResult_datasource_SosGetResult extends TimeSeries_datasource {\n  /**\n   * @param {String} name - the datasource name\n   * @param {Object} properties - the datasource properties\n   * @param {String} properties.protocol - defines the protocol of the datasource. @see {@link DataConnector}, 'http', 'ws', 'mqtt', 'file', 'topic'\n   * @param {String} properties.endpointUrl the endpoint url, this property is ignored in case of using 'mqtt' protocol, the properties.mqttOpts.endpointUrl will be used instead\n   * @param {String} properties.collection the collection, /procedures, /fois, /observations, /tasks, /datastreams/4778/obs\n   * @param {Boolean} properties.tls - defines if use secure TLS connection\n   * @param {Number} [properties.responseFormat=application/om+json] the response format (e.g application/om+json)\n   * @param {String[]} [properties.prefetchBatchSize=1000000] Number of elements to prefetch at a time\n   * @param {String[]} [properties.prefetchBatchDuration=10000] Duration before prefetching the next batch. N.b the next batch will be prefetched at 80% of this duration\n   */\n  constructor(name, properties) {\n    super(name, {\n      protocol: 'ws',\n      // default for streaming\n      service: \"SOS\",\n      timeShift: 0,\n      reconnectTimeout: 1000 * 5,\n      // default if not defined into properties\n      reconnectRetry: 10,\n      tls: false,\n      type: 'SosGetResult',\n      mode: Mode[\"a\" /* Mode */].REAL_TIME,\n      prefetchBatchSize: 250,\n      prefetchBatchDuration: 5000,\n      ...properties\n    });\n  }\n\n}\n\n/* harmony default export */ var SosGetResult_datasource = __webpack_exports__[\"a\"] = (SosGetResult_datasource_SosGetResult);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9kYXRhc291cmNlL0RhdGFTb3VyY2UuZGF0YXNvdXJjZS5qcz80MjNkIiwid2VicGFjazovLy8vaG9tZS9uZXZyby9Qcm9ncy9wcm9ncy1sb2NhbC9naXQtcmVwby9PU0gvb3NoLWpzL3NvdXJjZS9jb3JlL2RhdGFzb3VyY2UvVGltZVNlcmllcy5yZWFsdGltZS5kYXRhc291cmNlLmpzP2EwZTUiLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvZGF0YXNvdXJjZS9UaW1lU2VyaWVzLnJlcGxheS5kYXRhc291cmNlLmpzP2M1NDYiLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvZGF0YXNvdXJjZS9UaW1lU2VyaWVzLmRhdGFzb3VyY2UuanM/MTg0OSIsIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9kYXRhc291cmNlL3Nvcy9Tb3NHZXRSZXN1bHQuZGF0YXNvdXJjZS5qcz8wYmRhIl0sIm5hbWVzIjpbIkRhdGFTb3VyY2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJwcm9wZXJ0aWVzIiwiaWQiLCJyYW5kb21VVUlEIiwiZXZlbnRTdWJzY3JpcHRpb25NYXAiLCJpbml0IiwidW5kZWZpbmVkIiwibWVzc2FnZXNNYXAiLCJtb2RlIiwiTW9kZSIsIlJFQUxfVElNRSIsImlzRGVmaW5lZCIsImdldElkIiwiZ2V0TmFtZSIsInRlcm1pbmF0ZSIsImRhdGFTb3VyY2VXb3JrZXIiLCJnZXRUb3BpY0lkIiwiREFUQVNPVVJDRV9EQVRBX1RPUElDIiwic3Vic2NyaWJlIiwiZm4iLCJldmVudFR5cGVzIiwiaSIsImxlbmd0aCIsInB1c2giLCJjcmVhdGVXb3JrZXIiLCJEYXRhU291cmNlV29ya2VyIiwidXBkYXRlUHJvcGVydGllcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicG9zdE1lc3NhZ2UiLCJtZXNzYWdlIiwiZGF0YSIsImNvbm5lY3QiLCJjaGVja0luaXQiLCJkb0Nvbm5lY3QiLCJpbml0RGF0YVNvdXJjZSIsInJlamVjdCIsImhhbmRsZVdvcmtlck1lc3NhZ2UiLCJ0b3BpY3MiLCJkYXRhc291cmNlQnJvYWRjYXN0Q2hhbm5lbCIsIkJyb2FkY2FzdENoYW5uZWwiLCJvbm1lc3NhZ2UiLCJoYW5kbGVNZXNzYWdlIiwidHlwZSIsImlzQ29ubmVjdGVkIiwiZGlzY29ubmVjdCIsInByb3BzIiwiRm4iLCJtZXNzYWdlSWQiLCJldmVudCIsIm9uRGlzY29ubmVjdCIsInJlc2V0Iiwib25SZW1vdmVkRGF0YVNvdXJjZSIsImRhdGFTb3VyY2VJZCIsIm9uQWRkZWREYXRhU291cmNlIiwiVGltZVNlcmllc1JlYWx0aW1lRGF0YXNvdXJjZSIsImRhdGFTeW5jaHJvbml6ZXIiLCJ2ZXJzaW9uIiwiZ2V0VGltZVRvcGljSWQiLCJEQVRBU09VUkNFX1RJTUVfVE9QSUMiLCJnZXRNb2RlIiwiZ2V0U3RhcnRUaW1lQXNJc29EYXRlIiwiZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAiLCJEYXRlIiwibm93IiwiZ2V0RW5kVGltZUFzSXNvRGF0ZSIsImdldE1heFRpbWVBc1RpbWVzdGFtcCIsImdldEVuZFRpbWVBc1RpbWVzdGFtcCIsImdldE1pblRpbWVBc0lzb0RhdGUiLCJnZXRNYXhUaW1lQXNJc29EYXRlIiwiZ2V0TWluVGltZUFzVGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJzZXRNaW5UaW1lIiwidGltZSIsInNldE1heFRpbWUiLCJzZXRTdGFydFRpbWVzdGFtcCIsInRpbWVzdGFtcCIsInNldEVuZFRpbWVzdGFtcCIsImdldFJlcGxheVNwZWVkIiwic2V0UmVwbGF5U3BlZWQiLCJyZXBsYXlTcGVlZCIsInNldFZlcnNpb24iLCJzZXREYXRhU3luY2hyb25pemVyIiwiY29uc29sZSIsImxvZyIsInRvcGljIiwiREFUQV9TWU5DSFJPTklaRVJfVE9QSUMiLCJzeW5jIiwicmVtb3ZlRGF0YVN5bmNocm9uaXplciIsInN0YXJ0VGltZSIsImhhbmRsZVRpbWVNZXNzYWdlIiwiVGltZVNlcmllc1JlcGxheURhdGFzb3VyY2UiLCJtaW5UaW1lc3RhbXAiLCJtaW5UaW1lIiwiZ2V0VGltZSIsImVuZFRpbWUiLCJtYXhUaW1lc3RhbXAiLCJtYXhUaW1lIiwic3RhcnRUaW1lc3RhbXAiLCJlbmRUaW1lc3RhbXAiLCJhc3NlcnREZWZpbmVkIiwiY29tcHV0ZU1pbk1heCIsInNldFN0YXJ0VGltZSIsInNldEVuZFRpbWUiLCJzZXRUaW1lUmFuZ2UiLCJyZWNvbm5lY3QiLCJUaW1lU2VyaWVzRGF0YXNvdXJjZSIsInRpbWVTZXJpZXNSZWFsdGltZURhdGFTb3VyY2UiLCJ0aW1lU2VyaWVzUmVwbGF5RGF0YVNvdXJjZSIsInNldE1vZGUiLCJ0aW1lU2VyaWVzRGF0YVNvdXJjZSIsIm9uVGltZUNoYW5nZWQiLCJtaW4iLCJtYXgiLCJzdGFydCIsImVuZCIsIlNvc0dldFJlc3VsdCIsInByb3RvY29sIiwic2VydmljZSIsInRpbWVTaGlmdCIsInJlY29ubmVjdFRpbWVvdXQiLCJyZWNvbm5lY3RSZXRyeSIsInRscyIsInByZWZldGNoQmF0Y2hTaXplIiwicHJlZmV0Y2hCYXRjaER1cmF0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBLE1BQU1BLGdDQUFOLENBQWlCO0VBQ2JDLFdBQVcsQ0FBQ0MsSUFBRCxFQUFPQyxVQUFQLEVBQW1CO0lBQzFCLEtBQUtDLEVBQUwsR0FBVUQsVUFBVSxD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aUIsRUFBRSxHQVRYO01BVVJDLHFCQUFxQixFQUFFLElBVmY7TUFXUixHQUFHM0g7SUFYSyxDQUFaO0VBYUg7O0FBMUIyQzs7QUE2QmpDbUgsMkhBQWYiLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIyIEdlb3JvYm90aXggSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQge2lzRGVmaW5lZCwgcmFuZG9tVVVJRH0gZnJvbSAnLi4vdXRpbHMvVXRpbHMuanMnO1xuaW1wb3J0IHtEQVRBU09VUkNFX0RBVEFfVE9QSUN9IGZyb20gXCIuLi9Db25zdGFudHNcIjtcbmltcG9ydCBEYXRhU291cmNlV29ya2VyIGZyb20gJy4vd29ya2VyL0RhdGFTb3VyY2Uud29ya2VyJztcbmltcG9ydCB7TW9kZX0gZnJvbSBcIi4vTW9kZVwiO1xuXG4vKipcbiAqIFRoZSBEYXRhU291cmNlIGlzIHRoZSBhYnN0cmFjdCBjbGFzcyB1c2VkIHRvIGNyZWF0ZSBkaWZmZXJlbnQgZGF0YXNvdXJjZXMuXG4gKlxuICovXG5jbGFzcyBEYXRhU291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMuaWQgPSBwcm9wZXJ0aWVzLmlkIHx8IFwiRGF0YVNvdXJjZS1cIiArIHJhbmRvbVVVSUQoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCA9IHt9O1xuICAgICAgICB0aGlzLmluaXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubWVzc2FnZXNNYXAgPSB7fTtcbiAgICAgICAgdGhpcy5tb2RlID0gTW9kZS5SRUFMX1RJTUU7XG5cbiAgICAgICAgaWYoaXNEZWZpbmVkKHByb3BlcnRpZXMubW9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IHByb3BlcnRpZXMubW9kZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGRhdGFzb3VyY2UgaWQuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGF0YXNvdXJjZSBpZFxuICAgICAqL1xuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkYXRhc291cmNlIG5hbWUuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGF0YXNvdXJjZSBuYW1lXG4gICAgICovXG4gICAgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIGlmKHRoaXMuZGF0YVNvdXJjZVdvcmtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlV29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VG9waWNJZCgpIHtcbiAgICAgICAgcmV0dXJuIERBVEFTT1VSQ0VfREFUQV9UT1BJQyArIHRoaXMuaWQ7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGZuLCBldmVudFR5cGVzKSB7XG4gICAgICAgIC8vIGFzc29jaWF0ZSBmdW5jdGlvbiB0byBldmVudFR5cGVcbiAgICAgICAgZm9yKGxldCBpPTA7aSA8IGV2ZW50VHlwZXMubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgaWYgKCEoZXZlbnRUeXBlc1tpXSBpbiB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbZXZlbnRUeXBlc1tpXV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbZXZlbnRUeXBlc1tpXV0ucHVzaChmbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLy0tLS0tLS0tLS0tIEFTWU5DSFJPTk9VUyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0vL1xuICAgIGFzeW5jIGNyZWF0ZVdvcmtlcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YVNvdXJjZVdvcmtlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSB0aGUgZGF0YXNvdXJjZSBuYW1lXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgLSB0aGUgZGF0YXNvdXJjZSBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb3BlcnRpZXMuYnVmZmVyaW5nVGltZSAtIGRlZmluZXMgdGhlIHRpbWUgZHVyaW5nIHRoZSBkYXRhIGhhcyB0byBiZSBidWZmZXJlZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9wZXJ0aWVzLnRpbWVPdXQgLSBkZWZpbmVzIHRoZSBsaW1pdCB0aW1lIGJlZm9yZSBkYXRhIGhhcyB0byBiZSBza2lwcGVkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMucHJvdG9jb2wgLSBkZWZpbmVzIHRoZSBwcm90b2NvbCBvZiB0aGUgZGF0YXNvdXJjZS4gQHNlZSB7QGxpbmsgRGF0YUNvbm5lY3Rvcn1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5lbmRwb2ludFVybCB0aGUgZW5kcG9pbnQgdXJsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuc2VydmljZSB0aGUgc2VydmljZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9wZXJ0aWVzLnJlc3BvbnNlRm9ybWF0IHRoZSByZXNwb25zZSBmb3JtYXQgKGUuZyB2aWRlby9tcDQpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb3BlcnRpZXMucmVjb25uZWN0VGltZW91dCAtIHRoZSB0aW1lb3V0IGJlZm9yZSByZWNvbm5lY3RpbmdcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgLi4udGhpcy5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAndXBkYXRlLXByb3BlcnRpZXMnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXNcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRoZSBkYXRhU291cmNlIHRoZW4gdGhlIHByb3RvY29sIHdpbGwgYmUgb3BlbmVkIGFzIHdlbGwuXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kb0Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0RGF0YVNvdXJjZShwcm9wZXJ0aWVzPXRoaXMucHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlV29ya2VyID0gYXdhaXQgdGhpcy5jcmVhdGVXb3JrZXIodGhpcy5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlV29ya2VyTWVzc2FnZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2luaXQnLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgdG9waWNzOiAge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldFRvcGljSWQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGFzeW5jIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuIGZvciBFdmVudHMgdG8gY2FsbGJhY2sgdG8gc3Vic2NyaXB0aW9uc1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwodGhpcy5nZXRUb3BpY0lkKCkpO1xuICAgICAgICAgICAgICAgIGRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZU1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICBjb25zdCB0eXBlID0gbWVzc2FnZS5kYXRhLnR5cGU7XG4gICAgICAgIGlmICh0eXBlIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbdHlwZV1baV0obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrSW5pdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmKCFpc0RlZmluZWQodGhpcy5pbml0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdCA9IHRoaXMuaW5pdERhdGFTb3VyY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdDtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZG9Db25uZWN0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnY29ubmVjdCdcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGlmKCF0aGlzLmluaXQpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lzLWNvbm5lY3RlZCdcbiAgICAgICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCB0aGUgZGF0YVNvdXJjZSB0aGVuIHRoZSBwcm90b2NvbCB3aWxsIGJlIGNsb3NlZCBhcyB3ZWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZGlzY29ubmVjdCdcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwb3N0TWVzc2FnZShwcm9wcywgRm4pIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2VXb3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYoaXNEZWZpbmVkKEZuKSkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc01hcFttZXNzYWdlSWRdID0gRm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVXb3JrZXJNZXNzYWdlKCkge1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2VXb3JrZXIub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGV2ZW50LmRhdGEubWVzc2FnZUlkO1xuICAgICAgICAgICAgaWYoaWQgaW4gdGhpcy5tZXNzYWdlc01hcCl7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc01hcFtpZF0oZXZlbnQuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5tZXNzYWdlc01hcFtpZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgb25EaXNjb25uZWN0KCl7fVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuaW5pdCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBvblJlbW92ZWREYXRhU291cmNlKGRhdGFTb3VyY2VJZCkge1xuICAgIH1cblxuICAgIG9uQWRkZWREYXRhU291cmNlKGRhdGFTb3VyY2VJZCkge1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhU291cmNlO1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMiBHZW9yb2JvdGl4IEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQywgREFUQVNPVVJDRV9USU1FX1RPUElDfSBmcm9tIFwiLi4vQ29uc3RhbnRzXCI7XG5pbXBvcnQge2Fzc2VydERlZmluZWQsIGlzRGVmaW5lZH0gZnJvbSBcIi4uL3V0aWxzL1V0aWxzXCI7XG5pbXBvcnQgRGF0YVNvdXJjZSBmcm9tIFwiLi9EYXRhU291cmNlLmRhdGFzb3VyY2VcIjtcbmltcG9ydCB7TW9kZX0gZnJvbSAnLi9Nb2RlJztcblxuLyoqXG4gKiBUaGUgRGF0YVNvdXJjZSBpcyB0aGUgYWJzdHJhY3QgY2xhc3MgdXNlZCB0byBjcmVhdGUgZGlmZmVyZW50IGRhdGFzb3VyY2VzLlxuICpcbiAqL1xuY2xhc3MgVGltZVNlcmllc1JlYWx0aW1lRGF0YXNvdXJjZSBleHRlbmRzIERhdGFTb3VyY2Uge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIobmFtZSwgcHJvcGVydGllcyk7XG5cbiAgICAgICAgdGhpcy5kYXRhU3luY2hyb25pemVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMudmVyc2lvbiA9IDA7XG4gICAgfVxuXG4gICAgZ2V0VGltZVRvcGljSWQoKSB7XG4gICAgICAgIHJldHVybiBEQVRBU09VUkNFX1RJTUVfVE9QSUMgKyB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1vZGVcbiAgICAgKiBAcmV0dXJucyB7TW9kZX0gLSBEYXRhc291cmNlIG1vZGVcbiAgICAgKi9cbiAgICBnZXRNb2RlKCkge1xuICAgICAgICByZXR1cm4gTW9kZS5SRUFMX1RJTUU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhcnRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBzdGFydFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRTdGFydFRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAnbm93JztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldFN0YXJ0VGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0RW5kVGltZUFzSXNvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWF4VGltZUFzVGltZXN0YW1wKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kVGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldEVuZFRpbWVBc1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWF4VGltZUFzVGltZXN0YW1wKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhcnRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBzdGFydFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRNaW5UaW1lQXNJc29EYXRlKCkge1xuICAgICAgICByZXR1cm4gJ25vdyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kVGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldE1heFRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAnMjA1NS0wMS0wMVonO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXJ0VGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gc3RhcnRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0TWluVGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsgLy8gb3Igc2hvdWxkIHdlIHVzZSBmaXJzdCB0aW1lc3RhbXAgb2YgbGFzdCBkYXRhIHJlY2VpdmVkPz8/XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kVGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldE1heFRpbWVBc1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCcyMDU1LTAxLTAxWicpLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbWluIHRpbWVcbiAgICAgKi9cbiAgICBzZXRNaW5UaW1lKHRpbWUpIHt9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBtYXggdGltZVxuICAgICAqL1xuICAgIHNldE1heFRpbWUodGltZSkge31cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKi9cbiAgICBzZXRTdGFydFRpbWVzdGFtcCh0aW1lc3RhbXApIHt9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBlbmQgdGltZVxuICAgICAqL1xuICAgIHNldEVuZFRpbWVzdGFtcCh0aW1lc3RhbXApIHt9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0UmVwbGF5U3BlZWQoKSB7XG4gICAgICAgIHJldHVybiAxLjA7XG4gICAgfVxuXG4gICAgc2V0UmVwbGF5U3BlZWQocmVwbGF5U3BlZWQpIHt9XG5cbiAgICBzZXRWZXJzaW9uKHZlcnNpb24pIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIH1cbiAgICAvLy0tLS0tLS0tLS0tIEFTWU5DSFJPTk9VUyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0vL1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRhdGFTeW5jaHJvbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKi9cbiAgICBhc3luYyBzZXREYXRhU3luY2hyb25pemVyKGRhdGFTeW5jaHJvbml6ZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXQgZGF0YVN5bmNocm9uaXplcicpXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuICAgICAgICAgICAgY29uc3QgdG9waWMgPSBEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyArIGRhdGFTeW5jaHJvbml6ZXIuaWQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFTeW5jaHJvbml6ZXIgPSBkYXRhU3luY2hyb25pemVyO1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnZlcnNpb24gPSB0aGlzLmRhdGFTeW5jaHJvbml6ZXIudmVyc2lvbigpO1xuICAgICAgICAgICAgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ3RvcGljcycsXG4gICAgICAgICAgICAgICAgdG9waWNzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvcGljLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdldFRpbWVUb3BpY0lkKCksXG4gICAgICAgICAgICAgICAgICAgIHN5bmM6IGRhdGFTeW5jaHJvbml6ZXIuZ2V0VGltZVRvcGljSWQoKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LCAoKSA9PiByZXNvbHZlKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyByZW1vdmVEYXRhU3luY2hyb25pemVyKCkge1xuICAgICAgICBpZih0aGlzLmRhdGFTb3VyY2VXb3JrZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZVdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLmluaXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG5cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCB0aGUgZGF0YVNvdXJjZSB0aGVuIHRoZSBwcm90b2NvbCB3aWxsIGJlIGNsb3NlZCBhcyB3ZWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZGlzY29ubmVjdCdcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBkb0Nvbm5lY3QoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YVN5bmNocm9uaXplcik7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdjb25uZWN0JyxcbiAgICAgICAgICAgICAgICBzdGFydFRpbWU6ICdub3cnLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbigpXG4gICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdHMgdGhlIGRhdGFzb3VyY2Ugd2l0aCB0aGUgY29uc3RydWN0b3IgcHJvcGVydGllcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBhc3luYyBpbml0RGF0YVNvdXJjZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXREYXRhU291cmNlKHByb3BlcnRpZXMpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9waWNzID0gIHtcbiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldFRvcGljSWQoKSxcbiAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdldFRpbWVUb3BpY0lkKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZih0aGlzLmRhdGFTeW5jaHJvbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0b3BpY3Muc3luYyA9IGRhdGFTeW5jaHJvbml6ZXIuZ2V0VGltZVRvcGljSWQoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAndG9waWNzJyxcbiAgICAgICAgICAgICAgICB0b3BpY3M6ICB0b3BpY3MsXG4gICAgICAgICAgICB9LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuIGZvciBFdmVudHMgdG8gY2FsbGJhY2sgdG8gc3Vic2NyaXB0aW9uc1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwodGhpcy5nZXRUaW1lVG9waWNJZCgpKTtcbiAgICAgICAgICAgICAgICBkYXRhc291cmNlQnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBhc3luYyAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVUaW1lTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVUaW1lTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgaWYgKHR5cGUgaW4gdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwW3R5cGVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXVtpXShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy52ZXJzaW9uO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGltZVNlcmllc1JlYWx0aW1lRGF0YXNvdXJjZTtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjIgR2Vvcm9ib3RpeCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmltcG9ydCB7REFUQV9TWU5DSFJPTklaRVJfVE9QSUMsIERBVEFTT1VSQ0VfVElNRV9UT1BJQ30gZnJvbSBcIi4uL0NvbnN0YW50c1wiO1xuaW1wb3J0IHthc3NlcnREZWZpbmVkLCBpc0RlZmluZWR9IGZyb20gXCIuLi91dGlscy9VdGlsc1wiO1xuaW1wb3J0IERhdGFTb3VyY2UgZnJvbSBcIi4vRGF0YVNvdXJjZS5kYXRhc291cmNlXCI7XG5pbXBvcnQge01vZGV9IGZyb20gJy4vTW9kZSc7XG5cbi8qKlxuICogVGhlIERhdGFTb3VyY2UgaXMgdGhlIGFic3RyYWN0IGNsYXNzIHVzZWQgdG8gY3JlYXRlIGRpZmZlcmVudCBkYXRhc291cmNlcy5cbiAqXG4gKi9cbmNsYXNzIFRpbWVTZXJpZXNSZXBsYXlEYXRhc291cmNlIGV4dGVuZHMgRGF0YVNvdXJjZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgcHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihuYW1lLCBwcm9wZXJ0aWVzKTtcblxuICAgICAgICBpZighKCdtaW5UaW1lJyBpbiBwcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRNaW5UaW1lKHByb3BlcnRpZXMuc3RhcnRUaW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5taW5UaW1lc3RhbXAgPSBuZXcgRGF0ZShwcm9wZXJ0aWVzLm1pblRpbWUpLmdldFRpbWUoKVxuICAgICAgICB9XG4gICAgICAgIGlmKCEoJ21heFRpbWUnIGluIHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnNldE1heFRpbWUocHJvcGVydGllcy5lbmRUaW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5tYXhUaW1lc3RhbXAgPSBuZXcgRGF0ZShwcm9wZXJ0aWVzLm1heFRpbWUpLmdldFRpbWUoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zdGFydFRpbWVzdGFtcCA9IG5ldyBEYXRlKHByb3BlcnRpZXMuc3RhcnRUaW1lKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5lbmRUaW1lc3RhbXAgPSBuZXcgRGF0ZShwcm9wZXJ0aWVzLmVuZFRpbWUpLmdldFRpbWUoKTtcblxuICAgICAgICBhc3NlcnREZWZpbmVkKHByb3BlcnRpZXMsJ1NvbWUgcHJvcGVydGllcyBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgdGhpcy5kYXRhU3luY2hyb25pemVyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucHJvcGVydGllcy52ZXJzaW9uID0gMDtcbiAgICB9XG5cbiAgICBnZXRUaW1lVG9waWNJZCgpIHtcbiAgICAgICAgcmV0dXJuIERBVEFTT1VSQ0VfVElNRV9UT1BJQyArIHRoaXMuaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbW9kZVxuICAgICAqIEByZXR1cm5zIHtNb2RlfSAtIERhdGFzb3VyY2UgbW9kZVxuICAgICAqL1xuICAgIGdldE1vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMubW9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldFN0YXJ0VGltZUFzSXNvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAoKSkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldFN0YXJ0VGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLnN0YXJ0VGltZXN0YW1wO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRFbmRUaW1lQXNJc29EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5nZXRFbmRUaW1lQXNUaW1lc3RhbXAoKSkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0RW5kVGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmVuZFRpbWVzdGFtcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldE1pblRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmdldE1pblRpbWVBc1RpbWVzdGFtcCgpKS50b0lTT1N0cmluZygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRNYXhUaW1lQXNJc29EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5nZXRNYXhUaW1lQXNUaW1lc3RhbXAoKSkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldE1pblRpbWVBc1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5taW5UaW1lc3RhbXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kVGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldE1heFRpbWVBc1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5tYXhUaW1lc3RhbXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbWluIHRpbWVcbiAgICAgKi9cbiAgICBzZXRNaW5UaW1lKHRpbWUpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLm1pblRpbWVzdGFtcCA9IG5ldyBEYXRlKHRpbWUpLmdldFRpbWUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBtYXggdGltZVxuICAgICAqL1xuICAgIHNldE1heFRpbWUodGltZSkge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMubWF4VGltZXN0YW1wID0gbmV3IERhdGUodGltZSkuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKi9cbiAgICBzZXRTdGFydFRpbWVzdGFtcCh0aW1lc3RhbXApIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnN0YXJ0VGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgICB0aGlzLmNvbXB1dGVNaW5NYXgoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBlbmQgdGltZVxuICAgICAqL1xuICAgIHNldEVuZFRpbWVzdGFtcCh0aW1lc3RhbXApIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLmVuZFRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5jb21wdXRlTWluTWF4KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RhcnQgdGltZVxuICAgICAqL1xuICAgIHNldFN0YXJ0VGltZSh0aW1lKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhcnRUaW1lc3RhbXAobmV3IERhdGUodGltZSkuZ2V0VGltZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBlbmQgdGltZVxuICAgICAqL1xuICAgIHNldEVuZFRpbWUodGltZSkge1xuICAgICAgICB0aGlzLnNldEVuZFRpbWVzdGFtcChuZXcgRGF0ZSh0aW1lKS5nZXRUaW1lKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRSZXBsYXlTcGVlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5yZXBsYXlTcGVlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgc2V0UmVwbGF5U3BlZWQocmVwbGF5U3BlZWQpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnJlcGxheVNwZWVkID0gcmVwbGF5U3BlZWQ7XG4gICAgfVxuXG4gICAgc2V0VmVyc2lvbih2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLSBBU1lOQ0hST05PVVMgRlVOQ1RJT05TIC0tLS0tLS0tLS0tLS0tLS0tLy9cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhU3luY2hyb25pemVyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICovXG4gICAgYXN5bmMgc2V0RGF0YVN5bmNocm9uaXplcihkYXRhU3luY2hyb25pemVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuICAgICAgICAgICAgY29uc3QgdG9waWMgPSBEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyArIGRhdGFTeW5jaHJvbml6ZXIuZ2V0SWQoKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplciA9IGRhdGFTeW5jaHJvbml6ZXI7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMudmVyc2lvbiA9IHRoaXMuZGF0YVN5bmNocm9uaXplci52ZXJzaW9uKCk7XG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAndG9waWNzJyxcbiAgICAgICAgICAgICAgICB0b3BpY3M6IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdG9waWMsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHRoaXMuZ2V0VGltZVRvcGljSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgc3luYzogZGF0YVN5bmNocm9uaXplci5nZXRUaW1lVG9waWNJZCgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sICgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHJlbW92ZURhdGFTeW5jaHJvbml6ZXIoKSB7XG4gICAgICAgIGlmKHRoaXMuZGF0YVNvdXJjZVdvcmtlcikge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlV29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhU3luY2hyb25pemVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMuaW5pdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcblxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0IHRoZSBkYXRhU291cmNlIHRoZW4gdGhlIHByb3RvY29sIHdpbGwgYmUgY2xvc2VkIGFzIHdlbGwuXG4gICAgICovXG4gICAgYXN5bmMgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkaXNjb25uZWN0J1xuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGRvQ29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgbGV0IHN0YXJ0VGltZTtcbiAgICAgICAgICAgIGlmKGlzRGVmaW5lZCh0aGlzLmRhdGFTeW5jaHJvbml6ZXIpKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gKHRoaXMuZGF0YVN5bmNocm9uaXplci5nZXRNb2RlKCkgPT09IE1vZGUuUkVBTF9USU1FKSA/ICdub3cnIDogdGhpcy5nZXRTdGFydFRpbWVBc0lzb0RhdGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2Nvbm5lY3QnLFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbigpXG4gICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdHMgdGhlIGRhdGFzb3VyY2Ugd2l0aCB0aGUgY29uc3RydWN0b3IgcHJvcGVydGllcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBhc3luYyBpbml0RGF0YVNvdXJjZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXREYXRhU291cmNlKHByb3BlcnRpZXMpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9waWNzID0gIHtcbiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldFRvcGljSWQoKSxcbiAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdldFRpbWVUb3BpY0lkKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZih0aGlzLmRhdGFTeW5jaHJvbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0b3BpY3Muc3luYyA9IGRhdGFTeW5jaHJvbml6ZXIuZ2V0VGltZVRvcGljSWQoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAndG9waWNzJyxcbiAgICAgICAgICAgICAgICB0b3BpY3M6ICB0b3BpY3MsXG4gICAgICAgICAgICB9LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuIGZvciBFdmVudHMgdG8gY2FsbGJhY2sgdG8gc3Vic2NyaXB0aW9uc1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFzb3VyY2VCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwodGhpcy5nZXRUaW1lVG9waWNJZCgpKTtcbiAgICAgICAgICAgICAgICBkYXRhc291cmNlQnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBhc3luYyAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVUaW1lTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuaW5pdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlVGltZU1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICBjb25zdCB0eXBlID0gbWVzc2FnZS5kYXRhLnR5cGU7XG4gICAgICAgIGlmICh0eXBlIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbdHlwZV1baV0obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMudmVyc2lvbjtcbiAgICB9XG5cbiAgICBjb21wdXRlTWluTWF4KCkge1xuICAgICAgICAvLyBpbnRlcnNlY3QgZW5kL3N0YXJ0IGRlcGVuZGluZyBvbiB0aGUgbWluL21heFxuICAgICAgICBpZih0aGlzLnByb3BlcnRpZXMuc3RhcnRUaW1lc3RhbXAgPCB0aGlzLnByb3BlcnRpZXMubWluVGltZXN0YW1wKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMuc3RhcnRUaW1lc3RhbXAgPSB0aGlzLnByb3BlcnRpZXMubWluVGltZXN0YW1wO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMucHJvcGVydGllcy5lbmRUaW1lc3RhbXAgPiB0aGlzLnByb3BlcnRpZXMubWF4VGltZXN0YW1wKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMuZW5kVGltZXN0YW1wID0gdGhpcy5wcm9wZXJ0aWVzLm1heFRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGRhdGEgc291cmNlIHRpbWUgcmFuZ2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhcnRUaW1lIC0gdGhlIHN0YXJ0VGltZSAoaW4gZGF0ZSBJU08pXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGVuZFRpbWUgLSB0aGUgc3RhcnRUaW1lIChpbiBkYXRlIElTTylcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcmVwbGF5U3BlZWQgLSB0aGUgcmVwbGF5IHNwZWVkXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZWNvbm5lY3QgLSByZWNvbm5lY3QgaWYgd2FzIGNvbm5lY3RlZFxuICAgICAqIEBwYXJhbSB7TW9kZX0gbW9kZSAtIGRlZmF1bHQgZGF0YVNvdXJjZSBtb2RlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHZlcnNpb24gLSB2ZXJzaW9uIG9mIGRhdGFcbiAgICAgKi9cbiAgICBhc3luYyBzZXRUaW1lUmFuZ2Uoc3RhcnRUaW1lPSB0aGlzLmdldFN0YXJ0VGltZUFzSXNvRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lPSB0aGlzLmdldEVuZFRpbWVBc0lzb0RhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3BlZWQ9IHRoaXMuZ2V0UmVwbGF5U3BlZWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVjb25uZWN0PSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgbW9kZT0gdGhpcy5nZXRNb2RlKCksXG4gICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSB0aGlzLnZlcnNpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICApIHtcblxuICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuXG4gICAgICAgIGlmKHZlcnNpb24gIT09IHRoaXMudmVyc2lvbigpKSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdmVyc2lvbiBpZiBjb21lIGluIGZyb20gb3RoZXIgaW5wdXRcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbXB1dGUgaW50ZXJzZWN0aW9uXG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zdGFydFRpbWVzdGFtcCA9IG5ldyBEYXRlKHN0YXJ0VGltZSkuZ2V0VGltZSgpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuZW5kVGltZXN0YW1wICAgPSBuZXcgRGF0ZShlbmRUaW1lKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMuY29tcHV0ZU1pbk1heCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoe1xuICAgICAgICAgICAgc3RhcnRUaW1lOiB0aGlzLmdldFN0YXJ0VGltZUFzSXNvRGF0ZSgpLFxuICAgICAgICAgICAgZW5kVGltZTogdGhpcy5nZXRFbmRUaW1lQXNJc29EYXRlKCksXG4gICAgICAgICAgICByZXBsYXlTcGVlZDogcmVwbGF5U3BlZWQsXG4gICAgICAgICAgICByZWNvbm5lY3Q6IHJlY29ubmVjdCxcbiAgICAgICAgICAgIG1vZGU6IG1vZGUsXG4gICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGltZVNlcmllc1JlcGxheURhdGFzb3VyY2U7XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIyIEdlb3JvYm90aXggSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQge01vZGV9IGZyb20gJy4vTW9kZSc7XG5pbXBvcnQgVGltZVNlcmllc1JlYWx0aW1lRGF0YXNvdXJjZSBmcm9tIFwiLi9UaW1lU2VyaWVzLnJlYWx0aW1lLmRhdGFzb3VyY2VcIjtcbmltcG9ydCBUaW1lU2VyaWVzUmVwbGF5RGF0YXNvdXJjZSBmcm9tIFwiLi9UaW1lU2VyaWVzLnJlcGxheS5kYXRhc291cmNlXCI7XG5pbXBvcnQge3JhbmRvbVVVSUR9IGZyb20gXCIuLi91dGlscy9VdGlsc1wiO1xuXG4vKipcbiAqIFRoZSBEYXRhU291cmNlIGlzIHRoZSBhYnN0cmFjdCBjbGFzcyB1c2VkIHRvIGNyZWF0ZSBkaWZmZXJlbnQgZGF0YXNvdXJjZXMuXG4gKlxuICovXG5jbGFzcyBUaW1lU2VyaWVzRGF0YXNvdXJjZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgcHJvcGVydGllcykge1xuICAgICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgICAgdGhpcy50aW1lU2VyaWVzUmVhbHRpbWVEYXRhU291cmNlID0gbmV3IFRpbWVTZXJpZXNSZWFsdGltZURhdGFzb3VyY2UobmFtZSx7XG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAuLi5wcm9wZXJ0aWVzXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRpbWVTZXJpZXNSZXBsYXlEYXRhU291cmNlID0gbmV3IFRpbWVTZXJpZXNSZXBsYXlEYXRhc291cmNlKG5hbWUse1xuICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNldE1vZGUocHJvcGVydGllcy5tb2RlKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRNb2RlKG1vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UuZGlzY29ubmVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlIHx8IG1vZGUgIT09IHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UuZ2V0TW9kZSgpKSB7XG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gTW9kZS5SRUFMX1RJTUUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlID0gdGhpcy50aW1lU2VyaWVzUmVhbHRpbWVEYXRhU291cmNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlID0gdGhpcy50aW1lU2VyaWVzUmVwbGF5RGF0YVNvdXJjZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYmluZCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5pZDtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UubmFtZTtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5tb2RlID0gbW9kZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFRpbWVUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5nZXRUaW1lVG9waWNJZCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1vZGVcbiAgICAgKiBAcmV0dXJucyB7TW9kZX0gLSBEYXRhc291cmNlIG1vZGVcbiAgICAgKi9cbiAgICBnZXRNb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5nZXRNb2RlKCk7XG4gICAgfVxuXG4gICAgc2V0VmVyc2lvbih2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2Uuc2V0VmVyc2lvbih2ZXJzaW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhcnRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBzdGFydFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRTdGFydFRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLmdldFN0YXJ0VGltZUFzSXNvRGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXJ0VGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gc3RhcnRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLmdldFN0YXJ0VGltZUFzVGltZXN0YW1wKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kVGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldEVuZFRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLmdldEVuZFRpbWVBc0lzb0RhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0RW5kVGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5nZXRFbmRUaW1lQXNUaW1lc3RhbXAoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldE1pblRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLmdldE1pblRpbWVBc0lzb0RhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0TWF4VGltZUFzSXNvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UuZ2V0TWF4VGltZUFzSXNvRGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXJ0VGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gc3RhcnRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0TWluVGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5nZXRNaW5UaW1lQXNUaW1lc3RhbXAoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lXG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0TWF4VGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5nZXRNYXhUaW1lQXNUaW1lc3RhbXAoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBtaW4gdGltZVxuICAgICAqL1xuICAgIHNldE1pblRpbWUodGltZSkge1xuICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnNldE1pblRpbWUodGltZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbWF4IHRpbWVcbiAgICAgKi9cbiAgICBzZXRNYXhUaW1lKHRpbWUpIHtcbiAgICAgICAgdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5zZXRNYXhUaW1lKHRpbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKi9cbiAgICBzZXRTdGFydFRpbWVzdGFtcCh0aW1lc3RhbXApIHtcbiAgICAgICAgdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5zZXRTdGFydFRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGVuZCB0aW1lXG4gICAgICovXG4gICAgc2V0RW5kVGltZXN0YW1wKHRpbWVzdGFtcCkge1xuICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnNldEVuZFRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXJ0IHRpbWVcbiAgICAgKi9cbiAgICBzZXRTdGFydFRpbWUodGltZSkge1xuICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnNldFN0YXJ0VGltZSh0aW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBlbmQgdGltZVxuICAgICAqL1xuICAgIHNldEVuZFRpbWUodGltZSkge1xuICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnNldEVuZFRpbWUodGltZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZW5kVGltZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldFJlcGxheVNwZWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5nZXRSZXBsYXlTcGVlZCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZFRpbWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBzZXRSZXBsYXlTcGVlZChyZXBsYXlTcGVlZCkge1xuICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnNldFJlcGxheVNwZWVkKHJlcGxheVNwZWVkKTtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLSBBU1lOQ0hST05PVVMgRlVOQ1RJT05TIC0tLS0tLS0tLS0tLS0tLS0tLy9cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhU3luY2hyb25pemVyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICovXG4gICAgYXN5bmMgc2V0RGF0YVN5bmNocm9uaXplcihkYXRhU3luY2hyb25pemVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnNldERhdGFTeW5jaHJvbml6ZXIoZGF0YVN5bmNocm9uaXplcik7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVtb3ZlRGF0YVN5bmNocm9uaXplcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UucmVtb3ZlRGF0YVN5bmNocm9uaXplcigpO1xuXG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgdGhlIGRhdGFTb3VyY2UgdGhlbiB0aGUgcHJvdG9jb2wgd2lsbCBiZSBjbG9zZWQgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5kaXNjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZG9Db25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5kb0Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0cyB0aGUgZGF0YXNvdXJjZSB3aXRoIHRoZSBjb25zdHJ1Y3RvciBwcm9wZXJ0aWVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0gcHJvcGVydGllc1xuICAgICAqL1xuICAgIGFzeW5jIGluaXREYXRhU291cmNlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UuaW5pdERhdGFTb3VyY2UocHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgdmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UudmVyc2lvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBkYXRhIHNvdXJjZSB0aW1lIHJhbmdlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXJ0VGltZSAtIHRoZSBzdGFydFRpbWUgKGluIGRhdGUgSVNPKVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBlbmRUaW1lIC0gdGhlIHN0YXJ0VGltZSAoaW4gZGF0ZSBJU08pXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJlcGxheVNwZWVkIC0gdGhlIHJlcGxheSBzcGVlZFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVjb25uZWN0IC0gcmVjb25uZWN0IGlmIHdhcyBjb25uZWN0ZWRcbiAgICAgKiBAcGFyYW0ge01vZGV9IG1vZGUgLSBkZWZhdWx0IGRhdGFTb3VyY2UgbW9kZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2ZXJzaW9uIC0gdmVyc2lvbiBvZiBkYXRhXG4gICAgICovXG4gICAgYXN5bmMgc2V0VGltZVJhbmdlKHN0YXJ0VGltZT0gdGhpcy5nZXRTdGFydFRpbWVBc0lzb0RhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZT0gdGhpcy5nZXRFbmRUaW1lQXNJc29EYXRlKCksXG4gICAgICAgICAgICAgICAgICAgICAgIHJlcGxheVNwZWVkPSB0aGlzLmdldFJlcGxheVNwZWVkKCksXG4gICAgICAgICAgICAgICAgICAgICAgIHJlY29ubmVjdD0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgIG1vZGU9IHRoaXMuZ2V0TW9kZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdGhpcy52ZXJzaW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgKSB7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2Uuc2V0VGltZVJhbmdlKHN0YXJ0VGltZSxlbmRUaW1lLHJlcGxheVNwZWVkLHJlY29ubmVjdCxtb2RlLHZlcnNpb24pO1xuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkYXRhc291cmNlIGlkLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGRhdGFzb3VyY2UgaWRcbiAgICAgKi9cbiAgICBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UuZ2V0SWQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkYXRhc291cmNlIG5hbWUuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGF0YXNvdXJjZSBuYW1lXG4gICAgICovXG4gICAgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2UuZ2V0TmFtZSgpO1xuICAgIH1cblxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS50ZXJtaW5hdGUoKTtcbiAgICB9XG5cbiAgICBnZXRUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5nZXRUb3BpY0lkKCk7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGZuLCBldmVudFR5cGVzKSB7XG4gICAgICAgIHRoaXMudGltZVNlcmllc0RhdGFTb3VyY2Uuc3Vic2NyaWJlKGZuLCBldmVudFR5cGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcHJvcGVydGllc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gdGhlIGRhdGFzb3VyY2UgbmFtZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIGRhdGFzb3VyY2UgcHJvcGVydGllc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9wZXJ0aWVzLmJ1ZmZlcmluZ1RpbWUgLSBkZWZpbmVzIHRoZSB0aW1lIGR1cmluZyB0aGUgZGF0YSBoYXMgdG8gYmUgYnVmZmVyZWRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy50aW1lT3V0IC0gZGVmaW5lcyB0aGUgbGltaXQgdGltZSBiZWZvcmUgZGF0YSBoYXMgdG8gYmUgc2tpcHBlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLnByb3RvY29sIC0gZGVmaW5lcyB0aGUgcHJvdG9jb2wgb2YgdGhlIGRhdGFzb3VyY2UuIEBzZWUge0BsaW5rIERhdGFDb25uZWN0b3J9XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuZW5kcG9pbnRVcmwgdGhlIGVuZHBvaW50IHVybFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLnNlcnZpY2UgdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy5yZXNwb25zZUZvcm1hdCB0aGUgcmVzcG9uc2UgZm9ybWF0IChlLmcgdmlkZW8vbXA0KVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9wZXJ0aWVzLnJlY29ubmVjdFRpbWVvdXQgLSB0aGUgdGltZW91dCBiZWZvcmUgcmVjb25uZWN0aW5nXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0aGUgZGF0YVNvdXJjZSB0aGVuIHRoZSBwcm90b2NvbCB3aWxsIGJlIG9wZW5lZCBhcyB3ZWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLmNvbm5lY3QoKTtcbiAgICB9XG5cbiAgICBhc3luYyBjaGVja0luaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLmNoZWNrSW5pdCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGlzQ29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lU2VyaWVzRGF0YVNvdXJjZS5pc0Nvbm5lY3RlZCgpO1xuICAgIH1cblxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnRpbWVTZXJpZXNEYXRhU291cmNlLnJlc2V0KCk7XG4gICAgfVxuXG5cbiAgICBvblRpbWVDaGFuZ2VkKG1pbiwgbWF4LCBzdGFydCwgZW5kKSB7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaW1lU2VyaWVzRGF0YXNvdXJjZTtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjIgR2Vvcm9ib3RpeCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblxuaW1wb3J0IFRpbWVTZXJpZXNEYXRhc291cmNlIGZyb20gXCIuLi9UaW1lU2VyaWVzLmRhdGFzb3VyY2VcIjtcbmltcG9ydCB7TW9kZX0gZnJvbSBcIi4uL01vZGVcIjtcblxuY2xhc3MgU29zR2V0UmVzdWx0IGV4dGVuZHMgVGltZVNlcmllc0RhdGFzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gdGhlIGRhdGFzb3VyY2UgbmFtZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIGRhdGFzb3VyY2UgcHJvcGVydGllc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLnByb3RvY29sIC0gZGVmaW5lcyB0aGUgcHJvdG9jb2wgb2YgdGhlIGRhdGFzb3VyY2UuIEBzZWUge0BsaW5rIERhdGFDb25uZWN0b3J9LCAnaHR0cCcsICd3cycsICdtcXR0JywgJ2ZpbGUnLCAndG9waWMnXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuZW5kcG9pbnRVcmwgdGhlIGVuZHBvaW50IHVybCwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkIGluIGNhc2Ugb2YgdXNpbmcgJ21xdHQnIHByb3RvY29sLCB0aGUgcHJvcGVydGllcy5tcXR0T3B0cy5lbmRwb2ludFVybCB3aWxsIGJlIHVzZWQgaW5zdGVhZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLmNvbGxlY3Rpb24gdGhlIGNvbGxlY3Rpb24sIC9wcm9jZWR1cmVzLCAvZm9pcywgL29ic2VydmF0aW9ucywgL3Rhc2tzLCAvZGF0YXN0cmVhbXMvNDc3OC9vYnNcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHByb3BlcnRpZXMudGxzIC0gZGVmaW5lcyBpZiB1c2Ugc2VjdXJlIFRMUyBjb25uZWN0aW9uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLnJlc3BvbnNlRm9ybWF0PWFwcGxpY2F0aW9uL29tK2pzb25dIHRoZSByZXNwb25zZSBmb3JtYXQgKGUuZyBhcHBsaWNhdGlvbi9vbStqc29uKVxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IFtwcm9wZXJ0aWVzLnByZWZldGNoQmF0Y2hTaXplPTEwMDAwMDBdIE51bWJlciBvZiBlbGVtZW50cyB0byBwcmVmZXRjaCBhdCBhIHRpbWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBbcHJvcGVydGllcy5wcmVmZXRjaEJhdGNoRHVyYXRpb249MTAwMDBdIER1cmF0aW9uIGJlZm9yZSBwcmVmZXRjaGluZyB0aGUgbmV4dCBiYXRjaC4gTi5iIHRoZSBuZXh0IGJhdGNoIHdpbGwgYmUgcHJlZmV0Y2hlZCBhdCA4MCUgb2YgdGhpcyBkdXJhdGlvblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIobmFtZSwge1xuICAgICAgICAgICAgcHJvdG9jb2w6ICd3cycsIC8vIGRlZmF1bHQgZm9yIHN0cmVhbWluZ1xuICAgICAgICAgICAgc2VydmljZTogXCJTT1NcIixcbiAgICAgICAgICAgIHRpbWVTaGlmdDowLFxuICAgICAgICAgICAgcmVjb25uZWN0VGltZW91dDogMTAwMCAqIDUsIC8vIGRlZmF1bHQgaWYgbm90IGRlZmluZWQgaW50byBwcm9wZXJ0aWVzXG4gICAgICAgICAgICByZWNvbm5lY3RSZXRyeTogMTAsXG4gICAgICAgICAgICB0bHM6IGZhbHNlLFxuICAgICAgICAgICAgdHlwZTogJ1Nvc0dldFJlc3VsdCcsXG4gICAgICAgICAgICBtb2RlOiBNb2RlLlJFQUxfVElNRSxcbiAgICAgICAgICAgIHByZWZldGNoQmF0Y2hTaXplOiAyNTAsXG4gICAgICAgICAgICBwcmVmZXRjaEJhdGNoRHVyYXRpb246IDUwMDAsXG4gICAgICAgICAgICAuLi5wcm9wZXJ0aWVzXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU29zR2V0UmVzdWx0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _Layer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13);\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2017 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends Layer\n * @example\n *\n * import PointMarkerLayer from \'core/ui/layer/PointMarkerLayer.js\';\n *\n * let pointMarkerLayer = new PointMarkerLayer({\n        location : {\n            x : 1.42376557,\n            y : 43.61758626,\n            z : 100\n        },\n        getLocation : {\n            dataSourceIds : [androidPhoneGpsDataSource.getId()],\n            handler : function(rec) {\n                return {\n                    x : rec.lon,\n                    y : rec.lat,\n                    z : rec.alt\n                };\n            }\n        },\n        getOrientation : {\n            dataSourceIds : [androidPhoneOrientationDataSource.getId()],\n            handler : function(rec) {\n                return {\n                    heading : rec.heading\n                };\n            }\n        },\n        icon : \'images/cameralook.png\',\n        getIcon : {\n            dataSourceIds: [androidPhoneGpsDataSource.getId()],\n            handler : function(rec,timeStamp,options) {\n                if(options.selected) {\n                    return \'images/cameralook-selected.png\'\n                } else {\n                    return \'images/cameralook.png\';\n                };\n            }\n        }\n    });\n */\n\nconst initialStates = {};\n\nclass PointMarkerLayer extends _Layer_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"] {\n  /**\n   * Create the PointMarker\n   * @param {Object} properties\n   * @param {Number[]} properties.location - [x,y,z]\n   * @param {Number} [properties.orientation=0] -\n   * @param {String} properties.icon -\n   * @param {Number} [properties.iconScale=1] - the icon scale size\n   * @param {String} [properties.iconColor="#000000"] - the icon color\n   * @param {Number[]} [properties.iconAnchor=[16,16]] -\n   * @param {Number[]} [properties.iconSize=[16,16]] -\n   * @param {Number} [properties.iconOpacity=0.75] - icon opacity\n   * @param {String} [properties.label=""] - the label to display\n   * @param {String} [properties.labelColor="#000000"] - color\n   * @param {String} [properties.labelOutlineColor=undefined] - color\n   * @param {String} [properties.labelBackgroundColor=undefined] -  color\n   * @param {Number} [properties.labelSize=16] -\n   * @param {Number} [properties.labelScale=1.0] - label scale\n   * @param {Number[]} [properties.labelOffset=[0,0]] -\n   * @param {Number} [properties.zIndex=0] - z-ordering of markers\n   * @param {Number} [properties.allowBillboardRotation=true] - allow billboard rotation\n   * @param {Function} [properties.getLocation] -\n   * @param {Function} [properties.getDescription] -\n   * @param {Function} [properties.getOrientation] -\n   * @param {Function} [properties.getIcon] -\n   * @param {Function} [properties.getIconColor] -\n   * @param {Function} [properties.getIconScale] -\n   * @param {Function} [properties.getLabel] -\n   * @param {Function} [properties.getLabelColor] -\n   * @param {Function} [properties.getLabelSize] -\n   * @param {Function} [properties.getZindex] - z-ordering of markers\n   * @param {Function} [properties.getMarkerId] - map an id to a unique marker\n   * @param {Number} [properties.zoomLevel=15] - Set the default zoom level\n   * @param {Boolean} [properties.defaultToTerrainElevation=false] - Set the default to terrain elevation\n   *\n   */\n  constructor(properties) {\n    super(properties);\n    this.type = \'marker\';\n  } // call by super class\n\n\n  init(properties = this.properties) {\n    super.init(properties);\n    const props = {\n      markerId: () => this.getId(),\n      location: null,\n      orientation: {\n        heading: 0\n      },\n      icon: null,\n      iconAnchor: [16, 16],\n      iconSize: [16, 16],\n      iconScale: 1.0,\n      iconColor: undefined,\n      iconOpacity: 0.75,\n      label: null,\n      labelColor: undefined,\n      labelOutlineColor: undefined,\n      labelBackgroundColor: undefined,\n      labelSize: 16,\n      labelScale: 1.0,\n      labelOffset: [0, 0],\n      zoomLevel: 15,\n      defaultToTerrainElevation: false,\n      zIndex: 0,\n      allowBillboardRotation: true,\n      options: {}\n    };\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* isDefined */ "l"])(properties.defaultToTerrainElevation)) {\n      props.defaultToTerrainElevation = properties.defaultToTerrainElevation;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.location)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertObject */ "f"])(properties.location, "location");\n      props.location = properties.location;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.orientation)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertObject */ "f"])(properties.orientation, "orientation");\n      props.orientation = properties.orientation;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.icon)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.icon, "icon");\n      props.icon = properties.icon;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.iconAnchor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(properties.iconAnchor, "iconAnchor");\n      props.iconAnchor = properties.iconAnchor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.iconSize)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(properties.iconSize, "iconSize");\n      props.iconSize = properties.iconSize;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.iconScale)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.iconScale, "iconScale");\n      props.iconScale = properties.iconScale;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.iconColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.iconColor, "iconColor");\n      props.iconColor = properties.iconColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.iconOpacity)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.iconOpacity, "iconOpacity");\n      props.iconOpacity = properties.iconOpacity;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.label)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.label, "label");\n      props.label = properties.label;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.labelColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.labelColor, "labelColor");\n      props.labelColor = properties.labelColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.labelOutlineColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.labelOutlineColor, "labelOutlineColor");\n      props.labelOutlineColor = properties.labelOutlineColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.labelBackgroundColor)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertString */ "h"])(properties.labelBackgroundColor, "labelBackgroundColor");\n      props.labelBackgroundColor = properties.labelBackgroundColor;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.labelSize)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.labelSize, "labelSize");\n      props.labelSize = properties.labelSize;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.labelScale)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.labelScale, "labelScale");\n      props.labelScale = properties.labelScale;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.labelOffset)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertArray */ "a"])(properties.labelOffset, "labelOffset");\n      props.labelOffset = properties.labelOffset;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.zoomLevel)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertPositive */ "g"])(properties.zoomLevel, "zoomLevel");\n      props.zoomLevel = properties.zoomLevel;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.zIndex)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertNumber */ "e"])(properties.zIndex, "zIndex");\n      props.zIndex = properties.zIndex;\n    }\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* hasValue */ "k"])(properties.allowBillboardRotation)) {\n      Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_0__[/* assertBoolean */ "b"])(properties.allowBillboardRotation, "allowBillboardRotation");\n      props.allowBillboardRotation = properties.allowBillboardRotation;\n    }\n\n    this.definedId(\'markerId\', props);\n\n    if (this.checkFn("getLocation")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'location\', await this.getFunc(\'getLocation\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getLocation\'), fn);\n    }\n\n    if (this.checkFn("getOrientation")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'orientation\', await this.getFunc(\'getOrientation\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getOrientation\'), fn);\n    }\n\n    if (this.checkFn("getIcon")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'icon\', await this.getFunc(\'getIcon\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getIcon\'), fn);\n    }\n\n    if (this.checkFn("getIconColor")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'iconColor\', await this.getFunc(\'getIconColor\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getIconColor\'), fn);\n    }\n\n    if (this.checkFn("getIconScale")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'iconScale\', await this.getFunc(\'getIconScale\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getIconScale\'), fn);\n    }\n\n    if (this.checkFn("getLabel")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'label\', await this.getFunc(\'getLabel\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getLabel\'), fn);\n    }\n\n    if (this.checkFn("getLabelColor")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'labelColor\', await this.getFunc(\'getLabelColor\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getLabelColor\'), fn);\n    }\n\n    if (this.checkFn("getLabelSize")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'labelSize\', await this.getFunc(\'getLabelSize\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getLabelSize\'), fn);\n    }\n\n    if (this.checkFn("getZindex")) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty(\'zIndex\', await this.getFunc(\'getZindex\')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty(\'getZindex\'), fn);\n    }\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (PointMarkerLayer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9Qb2ludE1hcmtlckxheWVyLmpzPzhiMDUiXSwibmFtZXMiOlsiaW5pdGlhbFN0YXRlcyIsIlBvaW50TWFya2VyTGF5ZXIiLCJMYXllciIsImNvbnN0cnVjdG9yIiwicHJvcGVydGllcyIsInR5cGUiLCJpbml0IiwicHJvcHMiLCJtYXJrZXJJZCIsImdldElkIiwibG9jYXRpb24iLCJvcmllbnRhdGlvbiIsImhlYWRpbmciLCJpY29uIiwiaWNvbkFuY2hvciIsImljb25TaXplIiwiaWNvblNjYWxlIiwiaWNvbkNvbG9yIiwidW5kZWZpbmVkIiwiaWNvbk9wYWNpdHkiLCJsYWJlbCIsImxhYmVsQ29sb3IiLCJsYWJlbE91dGxpbmVDb2xvciIsImxhYmVsQmFja2dyb3VuZENvbG9yIiwibGFiZWxTaXplIiwibGFiZWxTY2FsZSIsImxhYmVsT2Zmc2V0Iiwiem9vbUxldmVsIiwiZGVmYXVsdFRvVGVycmFpbkVsZXZhdGlvbiIsInpJbmRleCIsImFsbG93QmlsbGJvYXJkUm90YXRpb24iLCJvcHRpb25zIiwiaXNEZWZpbmVkIiwiaGFzVmFsdWUiLCJhc3NlcnRPYmplY3QiLCJhc3NlcnRTdHJpbmciLCJhc3NlcnRBcnJheSIsImFzc2VydFBvc2l0aXZlIiwiYXNzZXJ0TnVtYmVyIiwiYXNzZXJ0Qm9vbGVhbiIsImRlZmluZWRJZCIsImNoZWNrRm4iLCJmbiIsInJlYyIsInRpbWVzdGFtcCIsInVwZGF0ZVByb3BlcnR5IiwiZ2V0RnVuYyIsImFkZEZuIiwiZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFVQTtBQUVBO0FBQ0E7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SSxLQUFLRCxPQUFMLENBQWEsY0FBYixDQUFKLEVBQWtDO01BQzlCLElBQUlDLEVBQUUsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLFNBQVosRUFBdUJiLE9BQXZCLEtBQW1DO1FBQ3hDLEtBQUtjLGNBQUwsQ0FBb0IsV0FBcEIsRUFBZ0MsTUFBTSxLQUFLQyxPQUFMLENBQWEsY0FBYixFQUE2QkgsR0FBN0IsRUFBa0NDLFNBQWxDLEVBQTZDYixPQUE3QyxDQUF0QztNQUNILENBRkQ7O01BR0EsS0FBS2dCLEtBQUwsQ0FBVyxLQUFLQywyQkFBTCxDQUFpQyxjQUFqQyxDQUFYLEVBQTZETixFQUE3RDtJQUNIOztJQUVELElBQUksS0FBS0QsT0FBTCxDQUFhLFdBQWIsQ0FBSixFQUErQjtNQUMzQixJQUFJQyxFQUFFLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxTQUFaLEVBQXVCYixPQUF2QixLQUFtQztRQUN4QyxLQUFLYyxjQUFMLENBQW9CLFFBQXBCLEVBQTZCLE1BQU0sS0FBS0MsT0FBTCxDQUFhLFdBQWIsRUFBMEJILEdBQTFCLEVBQStCQyxTQUEvQixFQUEwQ2IsT0FBMUMsQ0FBbkM7TUFDSCxDQUZEOztNQUdBLEtBQUtnQixLQUFMLENBQVcsS0FBS0MsMkJBQUwsQ0FBaUMsV0FBakMsQ0FBWCxFQUEwRE4sRUFBMUQ7SUFDSDtFQUNKOztBQW5PZ0M7O0FBc090QnpDLHlFQUFmIiwiZmlsZSI6IjE4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAxNyBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQge1xuICAgIGFzc2VydEFycmF5LFxuICAgIGFzc2VydEZ1bmN0aW9uLCBhc3NlcnROdW1iZXIsXG4gICAgYXNzZXJ0T2JqZWN0LFxuICAgIGFzc2VydFBvc2l0aXZlLFxuICAgIGFzc2VydFN0cmluZyxcbiAgICBhc3NlcnRCb29sZWFuLFxuICAgIGhhc1ZhbHVlLFxuICAgIGlzRGVmaW5lZFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvVXRpbHMuanNcIjtcbmltcG9ydCBMYXllciBmcm9tIFwiLi9MYXllci5qc1wiO1xuXG4vKipcbiAqIEBleHRlbmRzIExheWVyXG4gKiBAZXhhbXBsZVxuICpcbiAqIGltcG9ydCBQb2ludE1hcmtlckxheWVyIGZyb20gJ2NvcmUvdWkvbGF5ZXIvUG9pbnRNYXJrZXJMYXllci5qcyc7XG4gKlxuICogbGV0IHBvaW50TWFya2VyTGF5ZXIgPSBuZXcgUG9pbnRNYXJrZXJMYXllcih7XG4gICAgICAgIGxvY2F0aW9uIDoge1xuICAgICAgICAgICAgeCA6IDEuNDIzNzY1NTcsXG4gICAgICAgICAgICB5IDogNDMuNjE3NTg2MjYsXG4gICAgICAgICAgICB6IDogMTAwXG4gICAgICAgIH0sXG4gICAgICAgIGdldExvY2F0aW9uIDoge1xuICAgICAgICAgICAgZGF0YVNvdXJjZUlkcyA6IFthbmRyb2lkUGhvbmVHcHNEYXRhU291cmNlLmdldElkKCldLFxuICAgICAgICAgICAgaGFuZGxlciA6IGZ1bmN0aW9uKHJlYykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHggOiByZWMubG9uLFxuICAgICAgICAgICAgICAgICAgICB5IDogcmVjLmxhdCxcbiAgICAgICAgICAgICAgICAgICAgeiA6IHJlYy5hbHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXRPcmllbnRhdGlvbiA6IHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2VJZHMgOiBbYW5kcm9pZFBob25lT3JpZW50YXRpb25EYXRhU291cmNlLmdldElkKCldLFxuICAgICAgICAgICAgaGFuZGxlciA6IGZ1bmN0aW9uKHJlYykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRpbmcgOiByZWMuaGVhZGluZ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGljb24gOiAnaW1hZ2VzL2NhbWVyYWxvb2sucG5nJyxcbiAgICAgICAgZ2V0SWNvbiA6IHtcbiAgICAgICAgICAgIGRhdGFTb3VyY2VJZHM6IFthbmRyb2lkUGhvbmVHcHNEYXRhU291cmNlLmdldElkKCldLFxuICAgICAgICAgICAgaGFuZGxlciA6IGZ1bmN0aW9uKHJlYyx0aW1lU3RhbXAsb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmKG9wdGlvbnMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdpbWFnZXMvY2FtZXJhbG9vay1zZWxlY3RlZC5wbmcnXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdpbWFnZXMvY2FtZXJhbG9vay5wbmcnO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAqL1xuY29uc3QgaW5pdGlhbFN0YXRlcyA9IHt9O1xuY2xhc3MgUG9pbnRNYXJrZXJMYXllciBleHRlbmRzIExheWVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIFBvaW50TWFya2VyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSBwcm9wZXJ0aWVzLmxvY2F0aW9uIC0gW3gseSx6XVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy5vcmllbnRhdGlvbj0wXSAtXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuaWNvbiAtXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLmljb25TY2FsZT0xXSAtIHRoZSBpY29uIHNjYWxlIHNpemVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3Byb3BlcnRpZXMuaWNvbkNvbG9yPVwiIzAwMDAwMFwiXSAtIHRoZSBpY29uIGNvbG9yXG4gICAgICogQHBhcmFtIHtOdW1iZXJbXX0gW3Byb3BlcnRpZXMuaWNvbkFuY2hvcj1bMTYsMTZdXSAtXG4gICAgICogQHBhcmFtIHtOdW1iZXJbXX0gW3Byb3BlcnRpZXMuaWNvblNpemU9WzE2LDE2XV0gLVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy5pY29uT3BhY2l0eT0wLjc1XSAtIGljb24gb3BhY2l0eVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcHJvcGVydGllcy5sYWJlbD1cIlwiXSAtIHRoZSBsYWJlbCB0byBkaXNwbGF5XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtwcm9wZXJ0aWVzLmxhYmVsQ29sb3I9XCIjMDAwMDAwXCJdIC0gY29sb3JcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3Byb3BlcnRpZXMubGFiZWxPdXRsaW5lQ29sb3I9dW5kZWZpbmVkXSAtIGNvbG9yXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtwcm9wZXJ0aWVzLmxhYmVsQmFja2dyb3VuZENvbG9yPXVuZGVmaW5lZF0gLSAgY29sb3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMubGFiZWxTaXplPTE2XSAtXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLmxhYmVsU2NhbGU9MS4wXSAtIGxhYmVsIHNjYWxlXG4gICAgICogQHBhcmFtIHtOdW1iZXJbXX0gW3Byb3BlcnRpZXMubGFiZWxPZmZzZXQ9WzAsMF1dIC1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMuekluZGV4PTBdIC0gei1vcmRlcmluZyBvZiBtYXJrZXJzXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLmFsbG93QmlsbGJvYXJkUm90YXRpb249dHJ1ZV0gLSBhbGxvdyBiaWxsYm9hcmQgcm90YXRpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRMb2NhdGlvbl0gLVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wZXJ0aWVzLmdldERlc2NyaXB0aW9uXSAtXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0T3JpZW50YXRpb25dIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRJY29uXSAtXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0SWNvbkNvbG9yXSAtXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0SWNvblNjYWxlXSAtXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0TGFiZWxdIC1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvcGVydGllcy5nZXRMYWJlbENvbG9yXSAtXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0TGFiZWxTaXplXSAtXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb3BlcnRpZXMuZ2V0WmluZGV4XSAtIHotb3JkZXJpbmcgb2YgbWFya2Vyc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wZXJ0aWVzLmdldE1hcmtlcklkXSAtIG1hcCBhbiBpZCB0byBhIHVuaXF1ZSBtYXJrZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMuem9vbUxldmVsPTE1XSAtIFNldCB0aGUgZGVmYXVsdCB6b29tIGxldmVsXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbcHJvcGVydGllcy5kZWZhdWx0VG9UZXJyYWluRWxldmF0aW9uPWZhbHNlXSAtIFNldCB0aGUgZGVmYXVsdCB0byB0ZXJyYWluIGVsZXZhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihwcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ21hcmtlcic7XG4gICAgfVxuXG4gICAgLy8gY2FsbCBieSBzdXBlciBjbGFzc1xuICAgIGluaXQocHJvcGVydGllcz10aGlzLnByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIuaW5pdChwcm9wZXJ0aWVzKTtcbiAgICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgICAgICBtYXJrZXJJZDogKCkgPT4gdGhpcy5nZXRJZCgpLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBvcmllbnRhdGlvbjoge2hlYWRpbmc6IDB9LFxuICAgICAgICAgICAgaWNvbjogbnVsbCxcbiAgICAgICAgICAgIGljb25BbmNob3I6IFsxNiwgMTZdLFxuICAgICAgICAgICAgaWNvblNpemU6IFsxNiwgMTZdLFxuICAgICAgICAgICAgaWNvblNjYWxlOiAxLjAsXG4gICAgICAgICAgICBpY29uQ29sb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGljb25PcGFjaXR5OiAwLjc1LFxuICAgICAgICAgICAgbGFiZWw6IG51bGwsXG4gICAgICAgICAgICBsYWJlbENvbG9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBsYWJlbE91dGxpbmVDb2xvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbGFiZWxCYWNrZ3JvdW5kQ29sb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxhYmVsU2l6ZTogMTYsXG4gICAgICAgICAgICBsYWJlbFNjYWxlOiAxLjAsXG4gICAgICAgICAgICBsYWJlbE9mZnNldDogWzAsIDBdLFxuICAgICAgICAgICAgem9vbUxldmVsOiAxNSxcbiAgICAgICAgICAgIGRlZmF1bHRUb1RlcnJhaW5FbGV2YXRpb246IGZhbHNlLFxuICAgICAgICAgICAgekluZGV4OiAwLFxuICAgICAgICAgICAgYWxsb3dCaWxsYm9hcmRSb3RhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHt9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmRlZmF1bHRUb1RlcnJhaW5FbGV2YXRpb24pKSB7XG4gICAgICAgICAgICBwcm9wcy5kZWZhdWx0VG9UZXJyYWluRWxldmF0aW9uID0gcHJvcGVydGllcy5kZWZhdWx0VG9UZXJyYWluRWxldmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMubG9jYXRpb24pKSB7XG4gICAgICAgICAgICBhc3NlcnRPYmplY3QocHJvcGVydGllcy5sb2NhdGlvbiwgXCJsb2NhdGlvblwiKTtcbiAgICAgICAgICAgIHByb3BzLmxvY2F0aW9uID0gcHJvcGVydGllcy5sb2NhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLm9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgYXNzZXJ0T2JqZWN0KHByb3BlcnRpZXMub3JpZW50YXRpb24sIFwib3JpZW50YXRpb25cIik7XG4gICAgICAgICAgICBwcm9wcy5vcmllbnRhdGlvbiA9IHByb3BlcnRpZXMub3JpZW50YXRpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5pY29uKSkge1xuICAgICAgICAgICAgYXNzZXJ0U3RyaW5nKHByb3BlcnRpZXMuaWNvbiwgXCJpY29uXCIpO1xuICAgICAgICAgICAgcHJvcHMuaWNvbiA9IHByb3BlcnRpZXMuaWNvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmljb25BbmNob3IpKSB7XG4gICAgICAgICAgICBhc3NlcnRBcnJheShwcm9wZXJ0aWVzLmljb25BbmNob3IsIFwiaWNvbkFuY2hvclwiKTtcbiAgICAgICAgICAgIHByb3BzLmljb25BbmNob3IgPSBwcm9wZXJ0aWVzLmljb25BbmNob3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5pY29uU2l6ZSkpIHtcbiAgICAgICAgICAgIGFzc2VydEFycmF5KHByb3BlcnRpZXMuaWNvblNpemUsIFwiaWNvblNpemVcIik7XG4gICAgICAgICAgICBwcm9wcy5pY29uU2l6ZSA9IHByb3BlcnRpZXMuaWNvblNpemU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5pY29uU2NhbGUpKSB7XG4gICAgICAgICAgICBhc3NlcnRQb3NpdGl2ZShwcm9wZXJ0aWVzLmljb25TY2FsZSwgXCJpY29uU2NhbGVcIik7XG4gICAgICAgICAgICBwcm9wcy5pY29uU2NhbGUgPSBwcm9wZXJ0aWVzLmljb25TY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmljb25Db2xvcikpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmljb25Db2xvciwgXCJpY29uQ29sb3JcIik7XG4gICAgICAgICAgICBwcm9wcy5pY29uQ29sb3IgPSBwcm9wZXJ0aWVzLmljb25Db2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmljb25PcGFjaXR5KSkge1xuICAgICAgICAgICAgYXNzZXJ0U3RyaW5nKHByb3BlcnRpZXMuaWNvbk9wYWNpdHksIFwiaWNvbk9wYWNpdHlcIik7XG4gICAgICAgICAgICBwcm9wcy5pY29uT3BhY2l0eSA9IHByb3BlcnRpZXMuaWNvbk9wYWNpdHk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5sYWJlbCkpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmxhYmVsLCBcImxhYmVsXCIpO1xuICAgICAgICAgICAgcHJvcHMubGFiZWwgPSBwcm9wZXJ0aWVzLmxhYmVsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMubGFiZWxDb2xvcikpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmxhYmVsQ29sb3IsIFwibGFiZWxDb2xvclwiKTtcbiAgICAgICAgICAgIHByb3BzLmxhYmVsQ29sb3IgPSBwcm9wZXJ0aWVzLmxhYmVsQ29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5sYWJlbE91dGxpbmVDb2xvcikpIHtcbiAgICAgICAgICAgIGFzc2VydFN0cmluZyhwcm9wZXJ0aWVzLmxhYmVsT3V0bGluZUNvbG9yLCBcImxhYmVsT3V0bGluZUNvbG9yXCIpO1xuICAgICAgICAgICAgcHJvcHMubGFiZWxPdXRsaW5lQ29sb3IgPSBwcm9wZXJ0aWVzLmxhYmVsT3V0bGluZUNvbG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMubGFiZWxCYWNrZ3JvdW5kQ29sb3IpKSB7XG4gICAgICAgICAgICBhc3NlcnRTdHJpbmcocHJvcGVydGllcy5sYWJlbEJhY2tncm91bmRDb2xvciwgXCJsYWJlbEJhY2tncm91bmRDb2xvclwiKTtcbiAgICAgICAgICAgIHByb3BzLmxhYmVsQmFja2dyb3VuZENvbG9yID0gcHJvcGVydGllcy5sYWJlbEJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmxhYmVsU2l6ZSkpIHtcbiAgICAgICAgICAgIGFzc2VydFBvc2l0aXZlKHByb3BlcnRpZXMubGFiZWxTaXplLCBcImxhYmVsU2l6ZVwiKTtcbiAgICAgICAgICAgIHByb3BzLmxhYmVsU2l6ZSA9IHByb3BlcnRpZXMubGFiZWxTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMubGFiZWxTY2FsZSkpIHtcbiAgICAgICAgICAgIGFzc2VydFBvc2l0aXZlKHByb3BlcnRpZXMubGFiZWxTY2FsZSwgXCJsYWJlbFNjYWxlXCIpO1xuICAgICAgICAgICAgcHJvcHMubGFiZWxTY2FsZSA9IHByb3BlcnRpZXMubGFiZWxTY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNWYWx1ZShwcm9wZXJ0aWVzLmxhYmVsT2Zmc2V0KSkge1xuICAgICAgICAgICAgYXNzZXJ0QXJyYXkocHJvcGVydGllcy5sYWJlbE9mZnNldCwgXCJsYWJlbE9mZnNldFwiKTtcbiAgICAgICAgICAgIHByb3BzLmxhYmVsT2Zmc2V0ID0gcHJvcGVydGllcy5sYWJlbE9mZnNldDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKGhhc1ZhbHVlKHByb3BlcnRpZXMuem9vbUxldmVsKSkge1xuICAgICAgICAgICAgYXNzZXJ0UG9zaXRpdmUocHJvcGVydGllcy56b29tTGV2ZWwsIFwiem9vbUxldmVsXCIpO1xuICAgICAgICAgICAgcHJvcHMuem9vbUxldmVsID0gcHJvcGVydGllcy56b29tTGV2ZWw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy56SW5kZXgpKSB7XG4gICAgICAgICAgICBhc3NlcnROdW1iZXIocHJvcGVydGllcy56SW5kZXgsIFwiekluZGV4XCIpO1xuICAgICAgICAgICAgcHJvcHMuekluZGV4ID0gcHJvcGVydGllcy56SW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzVmFsdWUocHJvcGVydGllcy5hbGxvd0JpbGxib2FyZFJvdGF0aW9uKSkge1xuICAgICAgICAgICAgYXNzZXJ0Qm9vbGVhbihwcm9wZXJ0aWVzLmFsbG93QmlsbGJvYXJkUm90YXRpb24sIFwiYWxsb3dCaWxsYm9hcmRSb3RhdGlvblwiKTtcbiAgICAgICAgICAgIHByb3BzLmFsbG93QmlsbGJvYXJkUm90YXRpb24gPSBwcm9wZXJ0aWVzLmFsbG93QmlsbGJvYXJkUm90YXRpb247XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlZmluZWRJZCgnbWFya2VySWQnLCBwcm9wcyk7XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldExvY2F0aW9uXCIpKSB7XG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnR5KCdsb2NhdGlvbicsYXdhaXQgdGhpcy5nZXRGdW5jKCdnZXRMb2NhdGlvbicpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0TG9jYXRpb24nKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldE9yaWVudGF0aW9uXCIpKSB7XG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnR5KCdvcmllbnRhdGlvbicsYXdhaXQgdGhpcy5nZXRGdW5jKCdnZXRPcmllbnRhdGlvbicpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0T3JpZW50YXRpb24nKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldEljb25cIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoJ2ljb24nLGF3YWl0IHRoaXMuZ2V0RnVuYygnZ2V0SWNvbicpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0SWNvbicpLCBmbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jaGVja0ZuKFwiZ2V0SWNvbkNvbG9yXCIpKSB7XG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnR5KCdpY29uQ29sb3InLGF3YWl0IHRoaXMuZ2V0RnVuYygnZ2V0SWNvbkNvbG9yJykocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFkZEZuKHRoaXMuZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5KCdnZXRJY29uQ29sb3InKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldEljb25TY2FsZVwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0eSgnaWNvblNjYWxlJyxhd2FpdCB0aGlzLmdldEZ1bmMoJ2dldEljb25TY2FsZScpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0SWNvblNjYWxlJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRMYWJlbFwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0eSgnbGFiZWwnLGF3YWl0IHRoaXMuZ2V0RnVuYygnZ2V0TGFiZWwnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhpcy5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldExhYmVsJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRMYWJlbENvbG9yXCIpKSB7XG4gICAgICAgICAgICBsZXQgZm4gPSBhc3luYyAocmVjLCB0aW1lc3RhbXAsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnR5KCdsYWJlbENvbG9yJyxhd2FpdCB0aGlzLmdldEZ1bmMoJ2dldExhYmVsQ29sb3InKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhpcy5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldExhYmVsQ29sb3InKSwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tGbihcImdldExhYmVsU2l6ZVwiKSkge1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0eSgnbGFiZWxTaXplJyxhd2FpdCB0aGlzLmdldEZ1bmMoJ2dldExhYmVsU2l6ZScpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0TGFiZWxTaXplJyksIGZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrRm4oXCJnZXRaaW5kZXhcIikpIHtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoJ3pJbmRleCcsYXdhaXQgdGhpcy5nZXRGdW5jKCdnZXRaaW5kZXgnKShyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm4odGhpcy5nZXREYXRhU291cmNlc0lkc0J5UHJvcGVydHkoJ2dldFppbmRleCcpLCBmbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvaW50TWFya2VyTGF5ZXI7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n')},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var _View_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14);\n/* harmony import */ var _utils_Utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends View\n * @example\n *\n import MjpegView from \'core/ui/view/video/MjpegView.js\';\n\n let videoView = new MjpegView({\n  container: \'container\',\n  css: \'video-h264\',\n  name: \'UAV Video\',\n  showTime: true,\n  showStats: true,\n  layers: [\n      new DataLayer({\n        dataSourceId: videoDataSource.id,\n         getFrameData: (rec) => rec.videoFrame,\n         getTimestamp: (rec) => rec.timestamp\n      })\n  ]\n});\n */\n\nclass MjpegView extends _View_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"] {\n  /**\n   * Create a View.\n   * @param {Object} [properties={}] - the properties of the view\n   * @param {string} properties.container - The div element to attach to\n   * @param {string} properties.css - The css classes to set, can be multiple if separate by spaces\n   * @param {String} properties.showTime - Display or not the time onto the view\n   * @param {String} properties.rotation - Allow to define a rotation in degree\n   *\n   */\n  constructor(properties) {\n    super({\n      supportedLayers: [\'videoData\'],\n      ...properties\n    }); // create timestamp slot\n\n    this.timestamp = null;\n\n    if (Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_1__[/* isDefined */ "l"])(properties.showTime) && properties.showTime) {\n      this.timestamp = document.createElement("div");\n      this.timestamp.setAttribute("class", "video-time");\n      document.getElementById(this.divId).appendChild(this.timestamp);\n    } // creates video tag element\n\n\n    this.imgTag = document.createElement("img");\n    this.imgTag.setAttribute("class", "video-mjpeg"); // rotation option\n\n    this.rotation = 0;\n\n    if (typeof properties != "undefined" && typeof properties.rotation != "undefined") {\n      this.rotation = properties.rotation * Math.PI / 180;\n      this.canvas = document.createElement(\'canvas\');\n      this.canvas.width = 640;\n      this.canvas.height = 480;\n      var ctx = this.canvas.getContext(\'2d\');\n      ctx.translate(0, 480);\n      ctx.rotate(this.rotation);\n      document.getElementById(this.divId).appendChild(this.canvas);\n    } else {\n      // appends <img> tag to <div>\n      document.getElementById(this.divId).appendChild(this.imgTag);\n    }\n  }\n\n  async setData(dataSourceId, data) {\n    if (data.type === \'videoData\') {\n      const values = data.values;\n\n      for (let i = 0; i < values.length; i++) {\n        this.updateVideo(values[i]);\n      }\n    }\n  }\n\n  updateVideo(props) {\n    let imgBlob = new Blob([props.frameData.data]);\n    let url = window.URL.createObjectURL(imgBlob);\n    let oldBlobURL = this.imgTag.src;\n    this.imgTag.src = url;\n\n    if (this.timestamp !== null) {\n      this.timestamp.innerHTML = new Date(props.timestamp).toISOString();\n    }\n\n    window.URL.revokeObjectURL(oldBlobURL);\n  }\n\n  selectDataView(dataSourceIds, entityId) {\n    if (dataSourceIds.indexOf(this.dataSourceId) > -1 || Object(_utils_Utils_js__WEBPACK_IMPORTED_MODULE_1__[/* isDefined */ "l"])(this.entity) && this.entity.getId() === entityId) {\n      document.getElementById(this.divId).setAttribute("class", this.css + " " + this.cssSelected);\n    } else {\n      document.getElementById(this.divId).setAttribute("class", this.css);\n    }\n  }\n\n  reset() {\n    this.imgTag.src = "";\n  }\n\n  async getCanvas() {\n    return this.canvas;\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (MjpegView);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS92aWV3L3ZpZGVvL01qcGVnVmlldy5qcz9kNmZhIl0sIm5hbWVzIjpbIk1qcGVnVmlldyIsIlZpZXciLCJjb25zdHJ1Y3RvciIsInByb3BlcnRpZXMiLCJzdXBwb3J0ZWRMYXllcnMiLCJ0aW1lc3RhbXAiLCJpc0RlZmluZWQiLCJzaG93VGltZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRCeUlkIiwiZGl2SWQiLCJhcHBlbmRDaGlsZCIsImltZ1RhZyIsInJvdGF0aW9uIiwiTWF0aCIsIlBJIiwiY2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwidHJhbnNsYXRlIiwicm90YXRlIiwic2V0RGF0YSIsImRhdGFTb3VyY2VJZCIsImRhdGEiLCJ0eXBlIiwidmFsdWVzIiwiaSIsImxlbmd0aCIsInVwZGF0ZVZpZGVvIiwicHJvcHMiLCJpbWdCbG9iIiwiQmxvYiIsImZyYW1lRGF0YSIsInVybCIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm9sZEJsb2JVUkwiLCJzcmMiLCJpbm5lckhUTUwiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZXZva2VPYmplY3RVUkwiLCJzZWxlY3REYXRhVmlldyIsImRhdGFTb3VyY2VJZHMiLCJlbnRpdHlJZCIsImluZGV4T2YiLCJlbnRpdHkiLCJnZXRJZCIsImNzcyIsImNzc1NlbGVjdGVkIiwicmVzZXQiLCJnZXRDYW52YXMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QVk0QixHQUE3QjtJQUNBLEtBQUs1QixNQUFMLENBQVk0QixHQUFaLEdBQWtCTCxHQUFsQjs7SUFDQSxJQUFJLEtBQUtoQyxTQUFMLEtBQW1CLElBQXZCLEVBQTZCO01BQ3pCLEtBQUtBLFNBQUwsQ0FBZXNDLFNBQWYsR0FBMkIsSUFBSUMsSUFBSixDQUFTWCxLQUFLLENBQUM1QixTQUFmLEVBQTBCd0MsV0FBMUIsRUFBM0I7SUFDSDs7SUFDRFAsTUFBTSxDQUFDQyxHQUFQLENBQVdPLGVBQVgsQ0FBMkJMLFVBQTNCO0VBQ0g7O0VBRURNLGNBQWMsQ0FBQ0MsYUFBRCxFQUFnQkMsUUFBaEIsRUFBMEI7SUFDcEMsSUFBSUQsYUFBYSxDQUFDRSxPQUFkLENBQXNCLEtBQUt4QixZQUEzQixJQUEyQyxDQUFDLENBQTVDLElBQWtEcEIseUVBQVMsQ0FBQyxLQUFLNkMsTUFBTixDQUFWLElBQTRCLEtBQUtBLE1BQUwsQ0FBWUMsS0FBWixPQUF3QkgsUUFBekcsRUFBbUg7TUFDL0d6QyxRQUFRLENBQUNHLGNBQVQsQ0FBd0IsS0FBS0MsS0FBN0IsRUFBb0NGLFlBQXBDLENBQWlELE9BQWpELEVBQTBELEtBQUsyQyxHQUFMLEdBQVcsR0FBWCxHQUFpQixLQUFLQyxXQUFoRjtJQUNILENBRkQsTUFFTztNQUNIOUMsUUFBUSxDQUFDRyxjQUFULENBQXdCLEtBQUtDLEtBQTdCLEVBQW9DRixZQUFwQyxDQUFpRCxPQUFqRCxFQUEwRCxLQUFLMkMsR0FBL0Q7SUFDSDtFQUNKOztFQUVERSxLQUFLLEdBQUc7SUFDSixLQUFLekMsTUFBTCxDQUFZNEIsR0FBWixHQUFrQixFQUFsQjtFQUNIOztFQUVjLE1BQVRjLFNBQVMsR0FBRztJQUNkLE9BQU8sS0FBS3RDLE1BQVo7RUFDSDs7QUFoRndCOztBQW1GZGxCLGtFQUFmIiwiZmlsZSI6IjIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgVmlldyBmcm9tIFwiLi4vVmlldy5qc1wiO1xuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gXCIuLi8uLi8uLi91dGlscy9VdGlscy5qc1wiO1xuXG4vKipcbiAqIEBleHRlbmRzIFZpZXdcbiAqIEBleGFtcGxlXG4gKlxuIGltcG9ydCBNanBlZ1ZpZXcgZnJvbSAnY29yZS91aS92aWV3L3ZpZGVvL01qcGVnVmlldy5qcyc7XG5cbiBsZXQgdmlkZW9WaWV3ID0gbmV3IE1qcGVnVmlldyh7XG4gIGNvbnRhaW5lcjogJ2NvbnRhaW5lcicsXG4gIGNzczogJ3ZpZGVvLWgyNjQnLFxuICBuYW1lOiAnVUFWIFZpZGVvJyxcbiAgc2hvd1RpbWU6IHRydWUsXG4gIHNob3dTdGF0czogdHJ1ZSxcbiAgbGF5ZXJzOiBbXG4gICAgICBuZXcgRGF0YUxheWVyKHtcbiAgICAgICAgZGF0YVNvdXJjZUlkOiB2aWRlb0RhdGFTb3VyY2UuaWQsXG4gICAgICAgICBnZXRGcmFtZURhdGE6IChyZWMpID0+IHJlYy52aWRlb0ZyYW1lLFxuICAgICAgICAgZ2V0VGltZXN0YW1wOiAocmVjKSA9PiByZWMudGltZXN0YW1wXG4gICAgICB9KVxuICBdXG59KTtcbiAqL1xuXG5jbGFzcyBNanBlZ1ZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBWaWV3LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gLSB0aGUgcHJvcGVydGllcyBvZiB0aGUgdmlld1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0aWVzLmNvbnRhaW5lciAtIFRoZSBkaXYgZWxlbWVudCB0byBhdHRhY2ggdG9cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydGllcy5jc3MgLSBUaGUgY3NzIGNsYXNzZXMgdG8gc2V0LCBjYW4gYmUgbXVsdGlwbGUgaWYgc2VwYXJhdGUgYnkgc3BhY2VzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuc2hvd1RpbWUgLSBEaXNwbGF5IG9yIG5vdCB0aGUgdGltZSBvbnRvIHRoZSB2aWV3XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMucm90YXRpb24gLSBBbGxvdyB0byBkZWZpbmUgYSByb3RhdGlvbiBpbiBkZWdyZWVcbiAgICAgKlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgc3VwcG9ydGVkTGF5ZXJzOiBbJ3ZpZGVvRGF0YSddLFxuICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjcmVhdGUgdGltZXN0YW1wIHNsb3RcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBudWxsO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKHByb3BlcnRpZXMuc2hvd1RpbWUpICYmIHByb3BlcnRpZXMuc2hvd1RpbWUpIHtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidmlkZW8tdGltZVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2SWQpLmFwcGVuZENoaWxkKHRoaXMudGltZXN0YW1wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNyZWF0ZXMgdmlkZW8gdGFnIGVsZW1lbnRcbiAgICAgICAgdGhpcy5pbWdUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICB0aGlzLmltZ1RhZy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInZpZGVvLW1qcGVnXCIpO1xuXG4gICAgICAgIC8vIHJvdGF0aW9uIG9wdGlvblxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiAocHJvcGVydGllcykgIT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKHByb3BlcnRpZXMucm90YXRpb24pICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBwcm9wZXJ0aWVzLnJvdGF0aW9uICogTWF0aC5QSSAvIDE4MDtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IDY0MDtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDQ4MDtcbiAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgwLCA0ODApO1xuICAgICAgICAgICAgY3R4LnJvdGF0ZSh0aGlzLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2SWQpLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFwcGVuZHMgPGltZz4gdGFnIHRvIDxkaXY+XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRpdklkKS5hcHBlbmRDaGlsZCh0aGlzLmltZ1RhZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzZXREYXRhKGRhdGFTb3VyY2VJZCwgZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS50eXBlID09PSAndmlkZW9EYXRhJykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gZGF0YS52YWx1ZXM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlkZW8odmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVZpZGVvKHByb3BzKSB7XG4gICAgICAgIGxldCBpbWdCbG9iID0gbmV3IEJsb2IoW3Byb3BzLmZyYW1lRGF0YS5kYXRhXSk7XG4gICAgICAgIGxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChpbWdCbG9iKTtcblxuICAgICAgICBsZXQgb2xkQmxvYlVSTCA9IHRoaXMuaW1nVGFnLnNyYztcbiAgICAgICAgdGhpcy5pbWdUYWcuc3JjID0gdXJsO1xuICAgICAgICBpZiAodGhpcy50aW1lc3RhbXAgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wLmlubmVySFRNTCA9IG5ldyBEYXRlKHByb3BzLnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChvbGRCbG9iVVJMKTtcbiAgICB9XG5cbiAgICBzZWxlY3REYXRhVmlldyhkYXRhU291cmNlSWRzLCBlbnRpdHlJZCkge1xuICAgICAgICBpZiAoZGF0YVNvdXJjZUlkcy5pbmRleE9mKHRoaXMuZGF0YVNvdXJjZUlkKSA+IC0xIHx8IChpc0RlZmluZWQodGhpcy5lbnRpdHkpKSAmJiB0aGlzLmVudGl0eS5nZXRJZCgpID09PSBlbnRpdHlJZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXZJZCkuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5jc3MgKyBcIiBcIiArIHRoaXMuY3NzU2VsZWN0ZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXZJZCkuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5jc3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuaW1nVGFnLnNyYyA9IFwiXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Q2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXM7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNanBlZ1ZpZXc7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n')},function(module,exports,__webpack_require__){eval('module.exports = function () {\n  return new Worker(__webpack_require__.p + "d3a92e5d20dce103b9b3.worker.js");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9kYXRhc291cmNlL3dvcmtlci9EYXRhU291cmNlLndvcmtlci5qcz8zYTVjIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJXb3JrZXIiLCJfX3dlYnBhY2tfcHVibGljX3BhdGhfXyJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixZQUFXO0VBQzFCLE9BQU8sSUFBSUMsTUFBSixDQUFXQyxxQkFBdUIsR0FBRyxnQ0FBckMsQ0FBUDtBQUNELENBRkQiLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZDNhOTJlNWQyMGRjZTEwM2I5YjMud29ya2VyLmpzXCIpO1xufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n')},function(module,exports,__webpack_require__){eval('module.exports = function () {\n  return new Worker(__webpack_require__.p + "19c3352bf44f05ae9ef6.worker.js");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS90aW1lc3luYy9yZXBsYXkvRGF0YVN5bmNocm9uaXplci5yZXBsYXkud29ya2VyLmpzPzI2ZmQiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIldvcmtlciIsIl9fd2VicGFja19wdWJsaWNfcGF0aF9fIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFlBQVc7RUFDMUIsT0FBTyxJQUFJQyxNQUFKLENBQVdDLHFCQUF1QixHQUFHLGdDQUFyQyxDQUFQO0FBQ0QsQ0FGRCIsImZpbGUiOiIyMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgV29ya2VyKF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCIxOWMzMzUyYmY0NGYwNWFlOWVmNi53b3JrZXIuanNcIik7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n')},function(module,exports,__webpack_require__){eval('module.exports = function () {\n  return new Worker(__webpack_require__.p + "d6dbefe5d1a92b5d462c.worker.js");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS90aW1lc3luYy9ydC9EYXRhU3luY2hyb25pemVyLnJlYWx0aW1lLndvcmtlci5qcz8yZWE1Il0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJXb3JrZXIiLCJfX3dlYnBhY2tfcHVibGljX3BhdGhfXyJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixZQUFXO0VBQzFCLE9BQU8sSUFBSUMsTUFBSixDQUFXQyxxQkFBdUIsR0FBRyxnQ0FBckMsQ0FBUDtBQUNELENBRkQiLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZDZkYmVmZTVkMWE5MmI1ZDQ2MmMud29ya2VyLmpzXCIpO1xufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///23\n')},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/datasource/Mode.js\nvar Mode = __webpack_require__(2);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/timesync/replay/DataSynchronizer.replay.worker.js\nvar DataSynchronizer_replay_worker = __webpack_require__(22);\nvar DataSynchronizer_replay_worker_default = /*#__PURE__*/__webpack_require__.n(DataSynchronizer_replay_worker);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/Constants.js\nvar Constants = __webpack_require__(3);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/event/EventType.js\nvar EventType = __webpack_require__(7);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/timesync/replay/DataSynchronizer.replay.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n\n\nclass DataSynchronizer_replay_DataSynchronizerReplay {\n  /**\n   * Creates The dataSynchronizer.\n   * @param {Object} properties - the property of the object\n   * @param {String} [properties.id=randomUUID] - id of the dataSynchronizer or random if not provided\n   * @param {Number} [properties.replaySpeed=1] - replaySpeed value\n   * @param {Number} [properties.timerResolution=5] - interval in which data is played (in milliseconds)\n   * @param {Number} [properties.masterTimeRefreshRate=250] - interval in which time value is send through broadcast channel (in milliseconds)\n   * @param {Number} [properties.mode=Mode.REPLAY] - mode of the data synchronizer\n   * @param {String} properties.minTime - min range time as ISO date\n   * @param {String} properties.maxTime - max range time as ISO date\n   * @param {Datasource[]} properties.dataSources - the dataSource array\n   * @param {DataSynchronizer} timeSync - dataSynchronizer\n   */\n  constructor(properties, timeSync) {\n    this.bufferingTime = 1000; // default\n\n    this.id = properties.id || Object(Utils["n" /* randomUUID */])();\n    this.dataSources = properties.dataSources || [];\n    this.replaySpeed = properties.replaySpeed || 1;\n    this.timerResolution = properties.timerResolution || 5;\n    this.masterTimeRefreshRate = properties.masterTimeRefreshRate || 250;\n    this.initialized = false;\n    this.timeSync = timeSync;\n    this.properties = {};\n    this.properties.replaySpeed = this.replaySpeed;\n    this.properties.startTimestamp = undefined;\n    this.properties.endTimestamp = undefined;\n    this.properties.minTimestamp = undefined;\n    this.properties.maxTimestamp = undefined;\n    this.properties.version = 0;\n\n    if (Object(Utils["l" /* isDefined */])(properties)) {\n      if (Object(Utils["l" /* isDefined */])(properties.minTime)) {\n        this.minTimestamp = new Date(properties.minTime).getTime();\n      }\n\n      if (Object(Utils["l" /* isDefined */])(properties.maxTime)) {\n        this.maxTimestamp = new Date(properties.maxTime).getTime();\n      }\n    }\n\n    this.eventSubscriptionMap = {};\n    this.messagesMap = {};\n    this.computeMinMax();\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  getTopicId() {\n    return Constants["c" /* DATA_SYNCHRONIZER_TOPIC */] + this.id;\n  }\n\n  getTimeTopicId() {\n    return Constants["d" /* TIME_SYNCHRONIZER_TOPIC */] + this.id;\n  }\n\n  getDataSources() {\n    return this.dataSources;\n  }\n\n  computeMinMax() {\n    if (this.dataSources.length > 0) {\n      let minTimestamp = Number.MAX_VALUE,\n          maxTimestamp = Number.MIN_VALUE;\n      let startTimestamp = Number.MAX_VALUE,\n          endTimestamp = Number.MIN_VALUE; // default min/max will be adjusted on the most min/max DataSource\n\n      for (let ds of this.dataSources) {\n        // compute min/max range of dataSynchronizer\n        let dsMinTimestamp = ds.getMinTimeAsTimestamp();\n        let dsMaxTimestamp = ds.getMaxTimeAsTimestamp();\n\n        if (dsMinTimestamp < minTimestamp) {\n          minTimestamp = dsMinTimestamp;\n        }\n\n        if (dsMaxTimestamp > maxTimestamp) {\n          maxTimestamp = dsMaxTimestamp;\n        } // compute start/end range of dataSynchronizer\n\n\n        let dsStartTimestamp = ds.getStartTimeAsTimestamp();\n        let dsEndStartTimestamp = ds.getEndTimeAsTimestamp();\n\n        if (dsStartTimestamp < startTimestamp) {\n          startTimestamp = dsStartTimestamp;\n        }\n\n        if (dsEndStartTimestamp > endTimestamp) {\n          endTimestamp = dsEndStartTimestamp;\n        }\n      } // check if a default Min/Max has been defined into DataSynchronizer forcing intersection with current computed ones\n\n\n      if (Object(Utils["l" /* isDefined */])(this.minTimestamp) && this.minTimestamp > minTimestamp) {\n        // intersect and takes the min of dataSynchronizer\n        minTimestamp = this.minTimestamp;\n      }\n\n      if (Object(Utils["l" /* isDefined */])(this.maxTimestamp) && this.maxTimestamp > endTimestamp) {\n        // intersect and takes the min of dataSynchronizer\n        maxTimestamp = this.maxTimestamp;\n      }\n\n      this.properties.minTimestamp = minTimestamp;\n      this.properties.maxTimestamp = maxTimestamp;\n\n      if (!Object(Utils["l" /* isDefined */])(this.properties.startTimestamp)) {\n        this.properties.startTimestamp = startTimestamp;\n      }\n\n      if (!Object(Utils["l" /* isDefined */])(this.properties.endTimestamp)) {\n        this.properties.endTimestamp = endTimestamp;\n      }\n    }\n  }\n  /**\n   * @private\n   */\n\n\n  initEventSubscription() {\n    // listen for Events to callback to subscriptions\n    new BroadcastChannel(this.getTopicId()).onmessage = message => {\n      const type = message.data.type;\n\n      if (type in this.eventSubscriptionMap) {\n        for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n          this.eventSubscriptionMap[type][i](message.data);\n        }\n      }\n    };\n\n    new BroadcastChannel(this.getTimeTopicId()).onmessage = message => {\n      if (message.data.type === EventType["a" /* EventType */].MASTER_TIME) {\n        this.properties.startTimestamp = message.data.timestamp; // save as last timestamp\n      }\n\n      const type = message.data.type;\n\n      if (type in this.eventSubscriptionMap) {\n        for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n          this.eventSubscriptionMap[type][i](message.data);\n        }\n      }\n    };\n  }\n  /**\n   * Gets the startTime of the first DataSource objet\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getStartTimeAsIsoDate() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return new Date(this.properties.startTimestamp).toISOString();\n  }\n  /**\n   * Gets the startTime of the first DataSource objet\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getStartTimeAsTimestamp() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return this.properties.startTimestamp;\n  }\n  /**\n   * Gets the endTime of the first DataSource objet\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getEndTimeAsIsoDate() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return new Date(this.properties.endTimestamp).toISOString();\n  }\n\n  getEndTimeAsTimestamp() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return this.properties.endTimestamp;\n  }\n  /**\n   * Gets the minTime of the first DataSource objet\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getMinTimeAsIsoDate() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return new Date(this.properties.minTimestamp).toISOString();\n  }\n  /**\n   * Gets the minTime of the first DataSource objet\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getMinTimeAsTimestamp() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return this.properties.minTimestamp;\n  }\n  /**\n   * Gets the maxTime of the first DataSource objet\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getMaxTimeAsIsoDate() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return new Date(this.properties.maxTimestamp).toISOString();\n  }\n  /**\n   * Gets the maxTime of the first DataSource objet\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getMaxTimeAsTimestamp() {\n    if (this.dataSources.length === 0) {\n      throw \'dataSource array is empty\';\n    }\n\n    return this.properties.maxTimestamp;\n  }\n\n  async setStartTime(time, lazy = false) {\n    this.properties.startTimestamp = new Date(time).getTime();\n\n    if (!lazy) {\n      await this.updateAlgo();\n    }\n  }\n\n  async setEndTime(time, lazy = false) {\n    this.properties.endTimestamp = new Date(time).getTime();\n\n    if (!lazy) {\n      await this.updateAlgo();\n    }\n  }\n\n  async setMaxTime(maxTime) {\n    this.properties.maxTimestamp = new Date(maxTime).getTime();\n\n    for (let ds of this.dataSources) {\n      ds.setMaxTime(maxTime);\n    }\n\n    this.computeMinMax();\n    this.timeChanged();\n  }\n  /**\n   * Gets the replaySpeed\n   * @returns {Number} - the replay speed\n   */\n\n\n  getReplaySpeed() {\n    return this.replaySpeed;\n  }\n  /**\n   * Terminate the corresponding running WebWorker by calling terminate() on it.\n   */\n\n\n  terminate() {\n    if (this.synchronizerWorker !== null) {\n      this.synchronizerWorker.terminate();\n      this.synchronizerWorker = null;\n    }\n\n    for (let dataSource of this.dataSources) {\n      dataSource.terminate();\n    }\n  }\n\n  subscribe(fn, eventTypes) {\n    // associate function to eventType\n    for (let i = 0; i < eventTypes.length; i++) {\n      if (!(eventTypes[i] in this.eventSubscriptionMap)) {\n        this.eventSubscriptionMap[eventTypes[i]] = [];\n      }\n\n      this.eventSubscriptionMap[eventTypes[i]].push(fn);\n    }\n  }\n\n  getMode() {\n    return Mode["a" /* Mode */].REPLAY;\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n\n  async initDataSources() {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const dataSourcesForWorker = [];\n\n        for (let dataSource of this.dataSources) {\n          const dataSourceForWorker = await this.createDataSourceForWorker(dataSource);\n          dataSourcesForWorker.push(dataSourceForWorker);\n        }\n\n        this.synchronizerWorker = new DataSynchronizer_replay_worker_default.a();\n        this.handleWorkerMessage();\n        await this.postMessage({\n          message: \'init\',\n          dataSources: dataSourcesForWorker,\n          replaySpeed: this.replaySpeed,\n          timerResolution: this.timerResolution,\n          masterTimeRefreshRate: this.masterTimeRefreshRate,\n          startTimestamp: this.getStartTimeAsTimestamp(),\n          endTimestamp: this.getEndTimeAsTimestamp(),\n          mode: this.getMode(),\n          version: this.version(),\n          topics: {\n            data: this.getTopicId(),\n            time: this.getTimeTopicId()\n          }\n        }, function () {\n          this.initEventSubscription();\n          this.initialized = true;\n          resolve();\n        }.bind(this), false);\n      } catch (error) {\n        console.error(error);\n        reject(error);\n      }\n    });\n  }\n  /**\n   * @private\n   * @param dataSource\n   */\n\n\n  async createDataSourceForWorker(dataSource) {\n    const obj = {\n      bufferingTime: dataSource.properties.bufferingTime || 0,\n      timeOut: dataSource.properties.timeOut || 0,\n      id: dataSource.getId(),\n      name: dataSource.getName(),\n      minTimestamp: dataSource.getMinTimeAsTimestamp(),\n      maxTimestamp: dataSource.getMaxTimeAsTimestamp()\n    }; // bind dataSource data onto dataSynchronizer data\n\n    try {\n      await dataSource.setDataSynchronizer(this.timeSync);\n      dataSource.properties.replaySpeed = this.replaySpeed;\n    } catch (ex) {\n      console.error("Cannot set the synchronizer to this DataSource", ex);\n      throw ex;\n    }\n\n    return obj;\n  }\n\n  timeChanged() {\n    this.onTimeChanged(this.getMinTimeAsTimestamp(), this.getMaxTimeAsTimestamp(), this.getStartTimeAsTimestamp(), this.getEndTimeAsTimestamp());\n  }\n  /**\n   * Adds a new DataSource object to the list of datasources to synchronize.\n   * note: don\'t forget to call reset() to be sure to re-init the synchronizer internal properties.\n   * @param {TimeSeriesDataSource} dataSource - the new datasource to add\n   */\n\n\n  async addDataSource(dataSource) {\n    return new Promise(async resolve => {\n      this.dataSources.push(dataSource);\n      this.computeMinMax();\n\n      if (!this.initialized) {\n        console.log(`DataSynchronizer not initialized yet, add DataSource ${dataSource.id} as it`);\n        this.timeChanged();\n        resolve();\n      } else {\n        const dataSourceForWorker = await this.createDataSourceForWorker(dataSource);\n        await dataSource.setTimeRange(this.getStartTimeAsIsoDate(), this.getEndTimeAsIsoDate(), this.getReplaySpeed(), false, this.getMode(), this.version()); // add dataSource to synchronizer algorithm\n\n        await this.postMessage({\n          message: \'add\',\n          dataSources: [dataSourceForWorker]\n        }, async () => {\n          this.onAddedDataSource(dataSource.id);\n          this.timeChanged();\n          resolve();\n        });\n      }\n    });\n  }\n  /**\n   * Removes a DataSource object from the list of datasources of the synchronizer.\n   * @param {TimeSeriesDatasource} dataSource - the new datasource to add\n   */\n\n\n  async removeDataSource(dataSource) {\n    return new Promise(async resolve => {\n      this.dataSources = this.dataSources.filter(elt => elt.id !== dataSource.getId());\n\n      if (this.dataSources.length === 0) {\n        await this.reset();\n      }\n\n      this.computeMinMax();\n\n      if (!this.initialized) {\n        console.log(`DataSynchronizer not initialized yet, remove DataSource ${dataSource.id} as it`);\n        this.timeChanged();\n        resolve();\n      } else {\n        // await dataSource.disconnect();\n        await dataSource.removeDataSynchronizer();\n        await this.postMessage({\n          message: \'remove\',\n          dataSourceIds: [dataSource.getId()],\n          startTimestamp: this.getStartTimeAsTimestamp(),\n          endTimestamp: this.getEndTimeAsTimestamp()\n        }, async () => {\n          this.timeChanged();\n          this.onRemovedDataSource(dataSource.id);\n          resolve();\n        });\n      }\n    });\n  }\n  /**\n   * @param {String} dataSourceId - the dataSource id\n   * @param {Object} data - the data to push into the data synchronizer\n   */\n\n\n  async push(dataSourceId, data) {\n    return new Promise(async (resolve, reject) => {\n      if (this.synchronizerWorker !== null) {\n        await this.postMessage({\n          type: \'data\',\n          dataSourceId: dataSourceId,\n          data: data\n        }, resolve);\n      }\n    });\n  }\n\n  version() {\n    return this.properties.version;\n  }\n  /**\n   * Connects all dataSources\n   */\n\n\n  async connect() {\n    if (this.dataSources.length === 0) {\n      return;\n    } else {\n      console.log(\'connect replay\');\n      await this.checkInit();\n\n      if (!(await this.isConnected())) {\n        await this.doConnect();\n      }\n    }\n  }\n\n  async checkInit() {\n    const that = this;\n    return new Promise(async (resolve, reject) => {\n      if (!Object(Utils["l" /* isDefined */])(that.init)) {\n        that.init = that.initDataSources();\n      }\n\n      await that.init;\n      resolve();\n    });\n  }\n\n  async doConnect() {\n    return new Promise(async resolve => {\n      await this.updateAlgo();\n\n      for (let dataSource of this.dataSources) {\n        await dataSource.connect();\n      }\n\n      await this.postMessage({\n        message: \'connect\',\n        version: this.version()\n      }, resolve);\n    });\n  }\n  /**\n   * Disconnects all dataSources\n   */\n\n\n  async disconnect() {\n    await this.reset();\n\n    for (let dataSource of this.dataSources) {\n      await dataSource.disconnect();\n    }\n  }\n  /**\n   * Sets the replaySpeed\n   */\n\n\n  async setReplaySpeed(replaySpeed) {\n    return new Promise(async resolve => {\n      this.replaySpeed = replaySpeed;\n      this.properties.replaySpeed = replaySpeed;\n      await this.postMessage({\n        message: \'replay-speed\',\n        replaySpeed: replaySpeed\n      }, resolve);\n    });\n  }\n  /**\n   * Sets the data source time range\n   * @param {String} startTime - the startTime (in date ISO)\n   * @param {String} endTime - the startTime (in date ISO)\n   * @param {Number} replaySpeed - the replay speed\n   * @param {boolean} reconnect - reconnect if was connected\n   * @param {Mode} mode - default dataSource mode\n   */\n\n\n  async setTimeRange(startTime = this.getStartTimeAsIsoDate(), endTime = this.getEndTimeAsIsoDate(), replaySpeed = this.getReplaySpeed(), reconnect = false) {\n    return new Promise(async resolve => {\n      this.incVersion(); // update properties of DataSynchronizer\n\n      this.replaySpeed = replaySpeed;\n      await this.setStartTime(startTime, true);\n      await this.setEndTime(endTime, true);\n      this.computeMinMax(); // update properties of each DataSource\n\n      for (let ds of this.dataSources) {\n        await ds.setTimeRange(startTime, endTime, this.getReplaySpeed(), false, this.getMode(), this.version());\n      } // update algo using these new properties\n\n\n      return this.updateAlgo();\n    });\n  }\n\n  async updateAlgo() {\n    // synchronize startTimestamp of synchronizer to datasources\n    for (let dataSource of this.dataSources) {\n      dataSource.setStartTimestamp(this.getStartTimeAsTimestamp());\n      dataSource.setEndTimestamp(this.getEndTimeAsTimestamp());\n    } // re-compute new min/max of synchronizer\n\n\n    this.computeMinMax(); // provide new min/max of each dataSource to dataSynchronizer\n\n    const dataSourcesForWorker = [];\n\n    for (let dataSource of this.dataSources) {\n      const obj = {\n        bufferingTime: dataSource.properties.bufferingTime || 0,\n        timeOut: dataSource.properties.timeOut || 0,\n        id: dataSource.getId(),\n        name: dataSource.getName(),\n        minTimestamp: dataSource.getMinTimeAsTimestamp(),\n        maxTimestamp: dataSource.getMaxTimeAsTimestamp()\n      };\n      dataSourcesForWorker.push(obj);\n    }\n\n    return new Promise(resolve => {\n      return this.postMessage({\n        message: \'time-range\',\n        mode: this.getMode(),\n        replaySpeed: this.getReplaySpeed(),\n        startTimestamp: this.getStartTimeAsTimestamp(),\n        endTimestamp: this.getEndTimeAsTimestamp(),\n        version: this.version(),\n        dataSources: dataSourcesForWorker\n      }, resolve);\n    });\n  }\n\n  async updateProperties(properties) {\n    for (let ds of this.dataSources) {\n      ds.updateProperties(properties);\n    }\n  }\n\n  resetTimes() {\n    this.computeMinMax();\n  }\n  /**\n   * Resets reference time\n   */\n\n\n  async reset() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      await this.postMessage({\n        message: \'reset\'\n      });\n      this.resetTimes();\n      resolve();\n    });\n  }\n\n  async getCurrentTime() {\n    return new Promise(async resolve => {\n      await this.postMessage({\n        message: \'current-time\'\n      }, resolve);\n    });\n  }\n  /**\n   * Connect the dataSource then the protocol will be opened as well.\n   */\n\n\n  async isConnected() {\n    if (this.dataSources.length === 0) {\n      return false;\n    } else {\n      await this.checkInit();\n      return new Promise(async resolve => {\n        await this.postMessage({\n          message: \'is-connected\'\n        }, message => resolve(message.data));\n      });\n    }\n  }\n\n  async postMessage(props, Fn, checkInit = true) {\n    if (checkInit) {\n      await this.checkInit();\n    }\n\n    const messageId = Object(Utils["n" /* randomUUID */])();\n    this.synchronizerWorker.postMessage({ ...props,\n      messageId: messageId\n    });\n\n    if (Object(Utils["l" /* isDefined */])(Fn)) {\n      this.messagesMap[messageId] = Fn;\n    }\n  }\n\n  handleWorkerMessage() {\n    this.synchronizerWorker.onmessage = event => {\n      const id = event.data.messageId;\n\n      if (id in this.messagesMap) {\n        this.messagesMap[id](event.data.data);\n        delete this.messagesMap[id];\n      }\n    };\n  }\n\n  incVersion() {\n    this.properties.version++;\n  }\n\n  onTimeChanged(min, max, start, end) {}\n\n  onRemovedDataSource(dataSourceId) {}\n\n  onAddedDataSource(dataSourceId) {}\n\n}\n\n/* harmony default export */ var DataSynchronizer_replay = (DataSynchronizer_replay_DataSynchronizerReplay);\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/timesync/rt/DataSynchronizer.realtime.worker.js\nvar DataSynchronizer_realtime_worker = __webpack_require__(23);\nvar DataSynchronizer_realtime_worker_default = /*#__PURE__*/__webpack_require__.n(DataSynchronizer_realtime_worker);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/timesync/rt/DataSynchronizer.realtime.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n\nclass DataSynchronizer_realtime_DataSynchronizerRealtime {\n  /**\n   * Creates The dataSynchronizer.\n   * @param {Object} properties - the property of the object\n   * @param {String} [properties.id=randomUUID] - id of the dataSynchronizer or random if not provided\n   * @param {Number} [properties.timerResolution=5] - interval in which data is played (in milliseconds)\n   * @param {Number} [properties.masterTimeRefreshRate=250] - interval in which time value is send through broadcast channel (in milliseconds)\n   * @param {Datasource[]} properties.dataSources - the dataSource array\n   * @param {DataSynchronizer} timeSync - dataSynchronizer\n   */\n  constructor(properties, timeSync) {\n    this.bufferingTime = 1000; // default\n\n    this.id = properties.id || Object(Utils["n" /* randomUUID */])();\n    this.dataSources = properties.dataSources || [];\n    this.timerResolution = properties.timerResolution || 5;\n    this.masterTimeRefreshRate = properties.masterTimeRefreshRate || 250;\n    this.initialized = false;\n    this.timeSync = timeSync;\n    this.properties = {};\n    this.properties.version = 0;\n    this.eventSubscriptionMap = {};\n    this.messagesMap = {};\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  getDataSources() {\n    return this.dataSources;\n  }\n\n  getTopicId() {\n    return Constants["c" /* DATA_SYNCHRONIZER_TOPIC */] + this.id;\n  }\n\n  getTimeTopicId() {\n    return Constants["d" /* TIME_SYNCHRONIZER_TOPIC */] + this.id;\n  }\n  /**\n   * @private\n   */\n\n\n  initEventSubscription() {\n    // listen for Events to callback to subscriptions\n    new BroadcastChannel(this.getTopicId()).onmessage = message => {\n      const type = message.data.type;\n\n      if (type in this.eventSubscriptionMap) {\n        for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n          this.eventSubscriptionMap[type][i](message.data);\n        }\n      }\n    };\n\n    new BroadcastChannel(this.getTimeTopicId()).onmessage = message => {\n      const type = message.data.type;\n\n      if (type in this.eventSubscriptionMap) {\n        for (let i = 0; i < this.eventSubscriptionMap[type].length; i++) {\n          this.eventSubscriptionMap[type][i](message.data);\n        }\n      }\n    };\n  }\n  /**\n   * Terminate the corresponding running WebWorker by calling terminate() on it.\n   */\n\n\n  terminate() {\n    if (this.synchronizerWorker !== null) {\n      this.synchronizerWorker.terminate();\n      this.synchronizerWorker = null;\n    }\n\n    for (let dataSource of this.dataSources) {\n      dataSource.terminate();\n    }\n  }\n\n  subscribe(fn, eventTypes) {\n    // associate function to eventType\n    for (let i = 0; i < eventTypes.length; i++) {\n      if (!(eventTypes[i] in this.eventSubscriptionMap)) {\n        this.eventSubscriptionMap[eventTypes[i]] = [];\n      }\n\n      this.eventSubscriptionMap[eventTypes[i]].push(fn);\n    }\n  }\n\n  getMode() {\n    return Mode["a" /* Mode */].REAL_TIME;\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n\n  async initDataSources() {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const dataSourcesForWorker = [];\n\n        for (let dataSource of this.dataSources) {\n          const dataSourceForWorker = await this.createDataSourceForWorker(dataSource);\n          dataSourcesForWorker.push(dataSourceForWorker);\n        }\n\n        this.synchronizerWorker = new DataSynchronizer_realtime_worker_default.a();\n        this.handleWorkerMessage();\n        await this.postMessage({\n          message: \'init\',\n          dataSources: dataSourcesForWorker,\n          timerResolution: this.timerResolution,\n          masterTimeRefreshRate: this.masterTimeRefreshRate,\n          mode: Mode["a" /* Mode */].REAL_TIME,\n          version: this.version(),\n          topics: {\n            data: this.getTopicId(),\n            time: this.getTimeTopicId()\n          }\n        }, function () {\n          this.initEventSubscription();\n          this.initialized = true;\n          resolve();\n        }.bind(this), false);\n      } catch (error) {\n        console.log(error);\n        reject(error);\n      }\n    });\n  }\n  /**\n   * @private\n   * @param dataSource\n   */\n\n\n  async createDataSourceForWorker(dataSource) {\n    const obj = {\n      bufferingTime: dataSource.properties.bufferingTime || 0,\n      timeOut: dataSource.properties.timeOut || 0,\n      id: dataSource.id,\n      name: dataSource.name\n    }; // bind dataSource data onto dataSynchronizer data\n\n    try {\n      await dataSource.setDataSynchronizer(this.timeSync);\n    } catch (ex) {\n      console.error("Cannot set the synchronizer to this DataSource", ex);\n      throw ex;\n    }\n\n    return obj;\n  }\n  /**\n   * Adds a new DataSource object to the list of datasources to synchronize.\n   * note: don\'t forget to call reset() to be sure to re-init the synchronizer internal properties.\n   * @param {TimeSeriesDataSource} dataSource - the new datasource to add\n   */\n\n\n  async addDataSource(dataSource) {\n    return new Promise(async resolve => {\n      this.dataSources.push(dataSource);\n\n      if (!this.initialized) {\n        console.log(`DataSynchronizer not initialized yet, add DataSource ${dataSource.id} as it`);\n        resolve();\n      } else {\n        const dataSourceForWorker = await this.createDataSourceForWorker(dataSource); // add dataSource to synchronizer algorithm\n\n        await this.postMessage({\n          message: \'add\',\n          dataSources: [dataSourceForWorker]\n        }, async () => {\n          this.onAddedDataSource(dataSource.id);\n          resolve();\n        });\n      }\n    });\n  }\n  /**\n   * Removes a DataSource object from the list of datasources of the synchronizer.\n   * @param {TimeSeriesDatasource} dataSource - the new datasource to add\n   */\n\n\n  async removeDataSource(dataSource) {\n    return new Promise(async resolve => {\n      await dataSource.removeDataSynchronizer();\n      this.dataSources = this.dataSources.filter(elt => elt.id !== dataSource.getId());\n\n      if (this.dataSources.length === 0) {\n        await this.reset();\n      }\n\n      if (!this.initialized) {\n        console.log(`DataSynchronizer not initialized yet, remove DataSource ${dataSource.id} as it`);\n        resolve();\n      } else {\n        await this.postMessage({\n          message: \'remove\',\n          dataSourceIds: [dataSource.getId()]\n        }, async () => {\n          this.onRemovedDataSource(dataSource.id);\n          resolve();\n        });\n      }\n    });\n  }\n  /**\n   * @param {String} dataSourceId - the dataSource id\n   * @param {Object} data - the data to push into the data synchronizer\n   */\n\n\n  async push(dataSourceId, data) {\n    return new Promise(async (resolve, reject) => {\n      if (this.synchronizerWorker !== null) {\n        await this.postMessage({\n          type: \'data\',\n          dataSourceId: dataSourceId,\n          data: data\n        }, resolve);\n      }\n    });\n  }\n\n  version() {\n    return this.properties.version;\n  }\n  /**\n   * Connects all dataSources\n   */\n\n\n  async connect() {\n    await this.checkInit();\n    await this.doConnect();\n  }\n\n  async checkInit() {\n    const that = this;\n    return new Promise(async (resolve, reject) => {\n      if (!Object(Utils["l" /* isDefined */])(that.init)) {\n        that.init = that.initDataSources();\n      }\n\n      await that.init;\n      resolve();\n    });\n  }\n\n  async doConnect() {\n    return new Promise(async resolve => {\n      for (let dataSource of this.dataSources) {\n        await dataSource.connect();\n      }\n\n      await this.postMessage({\n        message: \'connect\',\n        version: this.version()\n      }, resolve);\n    });\n  }\n  /**\n   * Disconnects all dataSources\n   */\n\n\n  async disconnect() {\n    await this.reset();\n\n    for (let dataSource of this.dataSources) {\n      await dataSource.disconnect();\n    }\n  }\n\n  async updateProperties(properties) {\n    for (let ds of this.dataSources) {\n      ds.updateProperties(properties);\n    }\n  }\n  /**\n   * Resets reference time\n   */\n\n\n  async reset() {\n    return new Promise(async resolve => {\n      await this.checkInit();\n      await this.postMessage({\n        message: \'reset\'\n      });\n      resolve();\n    });\n  }\n\n  async getCurrentTime() {\n    return new Promise(async resolve => {\n      await this.postMessage({\n        message: \'current-time\'\n      }, resolve);\n    });\n  }\n  /**\n   * Connect the dataSource then the protocol will be opened as well.\n   */\n\n\n  async isConnected() {\n    if (this.dataSources.length === 0) {\n      return false;\n    } else {\n      await this.checkInit();\n      return new Promise(async resolve => {\n        await this.postMessage({\n          message: \'is-connected\'\n        }, message => resolve(message.data));\n      });\n    }\n  }\n\n  setMinTime(minTime) {}\n\n  setMaxTime(maxTime) {}\n\n  async postMessage(props, Fn, checkInit = true) {\n    if (checkInit) {\n      await this.checkInit();\n    }\n\n    const messageId = Object(Utils["n" /* randomUUID */])();\n    this.synchronizerWorker.postMessage({ ...props,\n      messageId: messageId\n    });\n\n    if (Object(Utils["l" /* isDefined */])(Fn)) {\n      this.messagesMap[messageId] = Fn;\n    }\n  }\n\n  handleWorkerMessage() {\n    this.synchronizerWorker.onmessage = event => {\n      const id = event.data.messageId;\n\n      if (id in this.messagesMap) {\n        this.messagesMap[id](event.data.data);\n        delete this.messagesMap[id];\n      }\n    };\n  }\n\n  incVersion() {\n    this.properties.version++;\n  }\n\n  onTimeChanged(start, min) {}\n\n  onRemovedDataSource(dataSourceId) {}\n\n  onAddedDataSource(dataSourceId) {}\n\n}\n\n/* harmony default export */ var DataSynchronizer_realtime = (DataSynchronizer_realtime_DataSynchronizerRealtime);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/timesync/DataSynchronizer.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n\nclass DataSynchronizer_DataSynchronizer {\n  /**\n   * Creates The dataSynchronizer.\n   * @param {Object} properties - the property of the object\n   * @param {String} [properties.id=randomUUID] - id of the dataSynchronizer or random if not provided\n   * @param {Number} [properties.replaySpeed=1] - replaySpeed value\n   * @param {Number} [properties.timerResolution=5] - interval in which data is played (in milliseconds)\n   * @param {Number} [properties.masterTimeRefreshRate=250] - interval in which time value is send through broadcast channel (in milliseconds)\n   * @param {Number} [properties.mode=Mode.REPLAY] - mode of the data synchronizer\n   * @param {String} properties.startTime - start time of the temporal run\n   * @param {String} properties.endTime - end time of the temporal run\n   * @param {Datasource[]} properties.dataSources - the dataSource array\n   */\n  constructor(properties) {\n    const id = properties.id || Object(Utils["n" /* randomUUID */])();\n    this.dataSynchronizerReplay = new DataSynchronizer_replay({ ...properties,\n      id: id + \'-replay\'\n    }, this);\n    this.dataSynchronizerRt = new DataSynchronizer_realtime({ ...properties,\n      id: id + \'-realtime\'\n    }, this);\n    this.setMode(properties.mode || Mode["a" /* Mode */].REPLAY).then(() => {\n      this.dataSynchronizer.onTimeChanged = (min, max, start, end) => this.onTimeChanged(min, max, start, end);\n\n      this.dataSynchronizer.onAddedDataSource = dataSourceId => this.onAddedDataSource(dataSourceId);\n\n      this.dataSynchronizer.onRemovedDataSource = dataSourceId => this.onRemovedDataSource(dataSourceId);\n    });\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  async setMode(mode) {\n    if (this.dataSynchronizer) {\n      await this.dataSynchronizer.disconnect();\n    }\n\n    if (mode === Mode["a" /* Mode */].REPLAY) {\n      this.dataSynchronizer = this.dataSynchronizerReplay;\n    } else if (mode === Mode["a" /* Mode */].REAL_TIME) {\n      this.dataSynchronizer = this.dataSynchronizerRt;\n    }\n\n    this.id = this.dataSynchronizer.id;\n\n    for (let ds of this.dataSynchronizer.getDataSources()) {\n      await ds.setMode(mode);\n    }\n  }\n\n  getDataSources() {\n    return this.dataSynchronizer.getDataSources();\n  }\n\n  getTopicId() {\n    return this.dataSynchronizer.getTopicId();\n  }\n\n  getTimeTopicId() {\n    return this.dataSynchronizer.getTimeTopicId();\n  }\n  /**\n   * Gets the startTime of the first DataSource objet\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getStartTimeAsIsoDate() {\n    return this.dataSynchronizer.getStartTimeAsIsoDate();\n  }\n  /**\n   * Gets the startTime of the first DataSource objet\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getStartTimeAsTimestamp() {\n    return this.dataSynchronizer.getStartTimeAsTimestamp();\n  }\n  /**\n   * Gets the endTime of the first DataSource objet\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getEndTimeAsIsoDate() {\n    return this.dataSynchronizer.getEndTimeAsIsoDate();\n  }\n\n  getEndTimeAsTimestamp() {\n    return this.dataSynchronizer.getEndTimeAsTimestamp();\n  }\n  /**\n   * Gets the minTime of the first DataSource objet\n   * @returns {String} - startTime as ISO date\n   */\n\n\n  getMinTimeAsIsoDate() {\n    return this.dataSynchronizer.getMinTimeAsIsoDate();\n  }\n  /**\n   * Gets the minTime of the first DataSource objet\n   * @returns {String} - startTime as unix timestamp\n   */\n\n\n  getMinTimeAsTimestamp() {\n    return this.dataSynchronizer.getMinTimeAsTimestamp();\n  }\n  /**\n   * Gets the maxTime of the first DataSource objet\n   * @returns {String} - endTime as ISO date\n   */\n\n\n  getMaxTimeAsIsoDate() {\n    return this.dataSynchronizer.getMinTimeAsTimestamp();\n  }\n  /**\n   * Gets the maxTime of the first DataSource objet\n   * @returns {String} - endTime as unix timestamp\n   */\n\n\n  getMaxTimeAsTimestamp() {\n    return this.dataSynchronizer.getMaxTimeAsTimestamp();\n  }\n  /**\n   * Gets the replaySpeed\n   * @returns {Number} - the replay speed\n   */\n\n\n  getReplaySpeed() {\n    return this.dataSynchronizer.getReplaySpeed();\n  }\n  /**\n   * Terminate the corresponding running WebWorker by calling terminate() on it.\n   */\n\n\n  terminate() {\n    return this.dataSynchronizer.terminate();\n  }\n\n  subscribe(fn, eventTypes) {\n    this.dataSynchronizerRt.subscribe(fn, eventTypes);\n    this.dataSynchronizerReplay.subscribe(fn, eventTypes);\n  }\n\n  getMode() {\n    return this.dataSynchronizer.getMode();\n  } //----------- ASYNCHRONOUS FUNCTIONS -----------------//\n\n\n  async initDataSources() {\n    return this.dataSynchronizer.initDataSources();\n  }\n  /**\n   * Adds a new DataSource object to the list of datasources to synchronize.\n   * note: don\'t forget to call reset() to be sure to re-init the synchronizer internal properties.\n   * @param {TimeSeriesDataSource} dataSource - the new datasource to add\n   */\n\n\n  async addDataSource(dataSource) {\n    return new Promise(async resolve => {\n      await this.dataSynchronizerRt.addDataSource(dataSource);\n      await this.dataSynchronizerReplay.addDataSource(dataSource);\n      resolve();\n    });\n  }\n  /**\n   * Removes a DataSource object from the list of datasources of the synchronizer.\n   * @param {TimeSeriesDatasource} dataSource - the new datasource to add\n   */\n\n\n  async removeDataSource(dataSource) {\n    return new Promise(async resolve => {\n      await this.dataSynchronizerRt.removeDataSource(dataSource);\n      await this.dataSynchronizerReplay.removeDataSource(dataSource);\n      resolve();\n    });\n  }\n  /**\n   * @param {String} dataSourceId - the dataSource id\n   * @param {Object} data - the data to push into the data synchronizer\n   */\n\n\n  async push(dataSourceId, data) {\n    return this.dataSynchronizer.push(dataSourceId, data);\n  }\n\n  version() {\n    return this.dataSynchronizer.version();\n  }\n  /**\n   * Connects all dataSources\n   */\n\n\n  async connect() {\n    await this.dataSynchronizer.connect();\n  }\n\n  async checkInit() {\n    return this.dataSynchronizer.checkInit();\n  }\n\n  async doConnect() {\n    console.log(\'do connect\');\n    return this.dataSynchronizer.doConnect();\n  }\n  /**\n   * Disconnects all dataSources\n   */\n\n\n  async disconnect() {\n    return this.dataSynchronizer.disconnect();\n  }\n  /**\n   * Sets the replaySpeed\n   */\n\n\n  async setReplaySpeed(replaySpeed) {\n    return this.dataSynchronizer.setReplaySpeed(replaySpeed);\n  }\n  /**\n   * Sets the data source time range\n   * @param {String} startTime - the startTime (in date ISO)\n   * @param {String} endTime - the startTime (in date ISO)\n   * @param {Number} replaySpeed - the replay speed\n   * @param {boolean} reconnect - reconnect if was connected\n   */\n\n\n  async setTimeRange(startTime = this.getStartTimeAsIsoDate(), endTime = this.getEndTimeAsIsoDate(), replaySpeed = this.getReplaySpeed(), reconnect = false) {\n    return this.dataSynchronizer.setTimeRange(startTime, endTime, replaySpeed, reconnect);\n  }\n\n  async updateProperties(properties) {\n    return this.dataSynchronizer.updateProperties(properties);\n  }\n  /**\n   * Resets reference time\n   */\n\n\n  async reset() {\n    return this.dataSynchronizer.reset();\n  }\n\n  async getCurrentTime() {\n    return this.dataSynchronizer.getCurrentTime();\n  }\n\n  setMinTime(minTime) {\n    this.dataSynchronizer.setMinTime(minTime);\n  }\n\n  setMaxTime(maxTime) {\n    this.dataSynchronizer.setMaxTime(maxTime);\n  }\n  /**\n  * Connect the dataSource then the protocol will be opened as well.\n  */\n\n\n  async isConnected() {\n    return this.dataSynchronizer.isConnected();\n  }\n\n  onTimeChanged(start, min) {}\n\n  onRemovedDataSource(dataSourceId) {}\n\n  onAddedDataSource(dataSourceId) {}\n\n}\n\n/* harmony default export */ var timesync_DataSynchronizer = __webpack_exports__["a"] = (DataSynchronizer_DataSynchronizer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS90aW1lc3luYy9yZXBsYXkvRGF0YVN5bmNocm9uaXplci5yZXBsYXkuanM/ZDhiZiIsIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS90aW1lc3luYy9ydC9EYXRhU3luY2hyb25pemVyLnJlYWx0aW1lLmpzPzQwY2YiLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvdGltZXN5bmMvRGF0YVN5bmNocm9uaXplci5qcz82MTRkIl0sIm5hbWVzIjpbIkRhdGFTeW5jaHJvbml6ZXJSZXBsYXkiLCJjb25zdHJ1Y3RvciIsInByb3BlcnRpZXMiLCJ0aW1lU3luYyIsImJ1ZmZlcmluZ1RpbWUiLCJpZCIsInJhbmRvbVVVSUQiLCJkYXRhU291cmNlcyIsInJlcGxheVNwZWVkIiwidGltZXJSZXNvbHV0aW9uIiwibWFzdGVyVGltZVJlZnJlc2hSYXRlIiwiaW5pdGlhbGl6ZWQiLCJzdGFydFRpbWVzdGFtcCIsInVuZGVmaW5lZCIsImVuZFRpbWVzdGFtcCIsIm1pblRpbWVzdGFtcCIsIm1heFRpbWVzdGFtcCIsInZlcnNpb24iLCJpc0RlZmluZWQiLCJtaW5UaW1lIiwiRGF0ZSIsImdldFRpbWUiLCJtYXhUaW1lIiwiZXZlbnRTdWJzY3JpcHRpb25NYXAiLCJtZXNzYWdlc01hcCIsImNvbXB1dGVNaW5NYXgiLCJnZXRJZCIsImdldFRvcGljSWQiLCJEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQyIsImdldFRpbWVUb3BpY0lkIiwiVElNRV9TWU5DSFJPTklaRVJfVE9QSUMiLCJnZXREYXRhU291cmNlcyIsImxlbmd0aCIsIk51bWJlciIsIk1BWF9WQUxVRSIsIk1JTl9WQUxVRSIsImRzIiwiZHNNaW5UaW1lc3RhbXAiLCJnZXRNaW5UaW1lQXNUaW1lc3RhbXAiLCJkc01heFRpbWVzdGFtcCIsImdldE1heFRpbWVBc1RpbWVzdGFtcCIsImRzU3RhcnRUaW1lc3RhbXAiLCJnZXRTdGFydFRpbWVBc1RpbWVzdGFtcCIsImRzRW5kU3RhcnRUaW1lc3RhbXAiLCJnZXRFbmRUaW1lQXNUaW1lc3RhbXAiLCJpbml0RXZlbnRTdWJzY3JpcHRpb24iLCJCcm9hZGNhc3RDaGFubmVsIiwib25tZXNzYWdlIiwibWVzc2FnZSIsInR5cGUiLCJkYXRhIiwiaSIsIkV2ZW50VHlwZSIsIk1BU1RFUl9USU1FIiwidGltZXN0YW1wIiwiZ2V0U3RhcnRUaW1lQXNJc29EYXRlIiwidG9JU09TdHJpbmciLCJnZXRFbmRUaW1lQXNJc29EYXRlIiwiZ2V0TWluVGltZUFzSXNvRGF0ZSIsImdldE1heFRpbWVBc0lzb0RhdGUiLCJzZXRTdGFydFRpbWUiLCJ0aW1lIiwibGF6eSIsInVwZGF0ZUFsZ28iLCJzZXRFbmRUaW1lIiwic2V0TWF4VGltZSIsInRpbWVDaGFuZ2VkIiwiZ2V0UmVwbGF5U3BlZWQiLCJ0ZXJtaW5hdGUiLCJzeW5jaHJvbml6ZXJXb3JrZXIiLCJkYXRhU291cmNlIiwic3Vic2NyaWJlIiwiZm4iLCJldmVudFR5cGVzIiwicHVzaCIsImdldE1vZGUiLCJNb2RlIiwiUkVQTEFZIiwiaW5pdERhdGFTb3VyY2VzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJkYXRhU291cmNlc0ZvcldvcmtlciIsImRhdGFTb3VyY2VGb3JXb3JrZXIiLCJjcmVhdGVEYXRhU291cmNlRm9yV29ya2VyIiwiRGF0YVN5bmNocm9uaXplcldvcmtlciIsImhhbmRsZVdvcmtlck1lc3NhZ2UiLCJwb3N0TWVzc2FnZSIsIm1vZGUiLCJ0b3BpY3MiLCJiaW5kIiwiZXJyb3IiLCJjb25zb2xlIiwib2JqIiwidGltZU91dCIsIm5hbWUiLCJnZXROYW1lIiwic2V0RGF0YVN5bmNocm9uaXplciIsImV4Iiwib25UaW1lQ2hhbmdlZCIsImFkZERhdGFTb3VyY2UiLCJsb2ciLCJzZXRUaW1lUmFuZ2UiLCJvbkFkZGVkRGF0YVNvdXJjZSIsInJlbW92ZURhdGFTb3VyY2UiLCJmaWx0ZXIiLCJlbHQiLCJyZXNldCIsInJlbW92ZURhdGFTeW5jaHJvbml6ZXIiLCJkYXRhU291cmNlSWRzIiwib25SZW1vdmVkRGF0YVNvdXJjZSIsImRhdGFTb3VyY2VJZCIsImNvbm5lY3QiLCJjaGVja0luaXQiLCJpc0Nvbm5lY3RlZCIsImRvQ29ubmVjdCIsInRoYXQiLCJpbml0IiwiZGlzY29ubmVjdCIsInNldFJlcGxheVNwZWVkIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInJlY29ubmVjdCIsImluY1ZlcnNpb24iLCJzZXRTdGFydFRpbWVzdGFtcCIsInNldEVuZFRpbWVzdGFtcCIsInVwZGF0ZVByb3BlcnRpZXMiLCJyZXNldFRpbWVzIiwiZ2V0Q3VycmVudFRpbWUiLCJwcm9wcyIsIkZuIiwibWVzc2FnZUlkIiwiZXZlbnQiLCJtaW4iLCJtYXgiLCJzdGFydCIsImVuZCIsIkRhdGFTeW5jaHJvbml6ZXJSZWFsdGltZSIsIlJFQUxfVElNRSIsInNldE1pblRpbWUiLCJEYXRhU3luY2hyb25pemVyIiwiZGF0YVN5bmNocm9uaXplclJlcGxheSIsImRhdGFTeW5jaHJvbml6ZXJSdCIsInNldE1vZGUiLCJ0aGVuIiwiZGF0YVN5bmNocm9uaXplciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSw4Q0FBTixDQUE2QjtFQUN6QjtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNJQyxXQUFXLENBQUNDLFVBQUQsRUFBYUMsUUFBYixFQUF1QjtJQUM5QixLQUFLQyxh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LGNBQXRCLEVBQVA7RUFDSDs7RUFFRFcsVUFBVSxDQUFDeEgsT0FBRCxFQUFVO0lBQ2hCLEtBQUs4SCxnQkFBTCxDQUFzQk4sVUFBdEIsQ0FBaUN4SCxPQUFqQztFQUNIOztFQUVEOEMsVUFBVSxDQUFDM0MsT0FBRCxFQUFVO0lBQ2hCLEtBQUsySCxnQkFBTCxDQUFzQmhGLFVBQXRCLENBQWlDM0MsT0FBakM7RUFDSDtFQUVHO0FBQ1I7QUFDQTs7O0VBQ3FCLE1BQVg0RixXQUFXLEdBQUc7SUFDaEIsT0FBTyxLQUFLK0IsZ0JBQUwsQ0FBc0IvQixXQUF0QixFQUFQO0VBQ0g7O0VBRURmLGFBQWEsQ0FBQ29DLEtBQUQsRUFBUUYsR0FBUixFQUFhLENBQ3pCOztFQUVEdkIsbUJBQW1CLENBQUNDLFlBQUQsRUFBZSxDQUNqQzs7RUFFRFIsaUJBQWlCLENBQUNRLFlBQUQsRUFBZSxDQUMvQjs7QUEzUWtCOztBQThRUjZCLDBIQUFmIiwiZmlsZSI6IjI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQge2Fzc2VydERlZmluZWQsIGlzRGVmaW5lZCwgcmFuZG9tVVVJRH0gZnJvbSBcIi4uLy4uL3V0aWxzL1V0aWxzLmpzXCI7XG5pbXBvcnQgRGF0YVN5bmNocm9uaXplcldvcmtlciBmcm9tICcuL0RhdGFTeW5jaHJvbml6ZXIucmVwbGF5Lndvcmtlci5qcyc7XG5pbXBvcnQge0RBVEFfU1lOQ0hST05JWkVSX1RPUElDLCBUSU1FX1NZTkNIUk9OSVpFUl9UT1BJQ30gZnJvbSBcIi4uLy4uL0NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHtNb2RlfSBmcm9tIFwiLi4vLi4vZGF0YXNvdXJjZS9Nb2RlXCI7XG5pbXBvcnQge0V2ZW50VHlwZX0gZnJvbSBcIi4uLy4uL2V2ZW50L0V2ZW50VHlwZVwiO1xuXG5jbGFzcyBEYXRhU3luY2hyb25pemVyUmVwbGF5IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIFRoZSBkYXRhU3luY2hyb25pemVyLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIHByb3BlcnR5IG9mIHRoZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3Byb3BlcnRpZXMuaWQ9cmFuZG9tVVVJRF0gLSBpZCBvZiB0aGUgZGF0YVN5bmNocm9uaXplciBvciByYW5kb20gaWYgbm90IHByb3ZpZGVkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLnJlcGxheVNwZWVkPTFdIC0gcmVwbGF5U3BlZWQgdmFsdWVcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMudGltZXJSZXNvbHV0aW9uPTVdIC0gaW50ZXJ2YWwgaW4gd2hpY2ggZGF0YSBpcyBwbGF5ZWQgKGluIG1pbGxpc2Vjb25kcylcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMubWFzdGVyVGltZVJlZnJlc2hSYXRlPTI1MF0gLSBpbnRlcnZhbCBpbiB3aGljaCB0aW1lIHZhbHVlIGlzIHNlbmQgdGhyb3VnaCBicm9hZGNhc3QgY2hhbm5lbCAoaW4gbWlsbGlzZWNvbmRzKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy5tb2RlPU1vZGUuUkVQTEFZXSAtIG1vZGUgb2YgdGhlIGRhdGEgc3luY2hyb25pemVyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMubWluVGltZSAtIG1pbiByYW5nZSB0aW1lIGFzIElTTyBkYXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMubWF4VGltZSAtIG1heCByYW5nZSB0aW1lIGFzIElTTyBkYXRlXG4gICAgICogQHBhcmFtIHtEYXRhc291cmNlW119IHByb3BlcnRpZXMuZGF0YVNvdXJjZXMgLSB0aGUgZGF0YVNvdXJjZSBhcnJheVxuICAgICAqIEBwYXJhbSB7RGF0YVN5bmNocm9uaXplcn0gdGltZVN5bmMgLSBkYXRhU3luY2hyb25pemVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcGVydGllcywgdGltZVN5bmMpIHtcbiAgICAgICAgdGhpcy5idWZmZXJpbmdUaW1lID0gMTAwMDsgLy8gZGVmYXVsdFxuICAgICAgICB0aGlzLmlkID0gcHJvcGVydGllcy5pZCB8fCByYW5kb21VVUlEKCk7XG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZXMgPSBwcm9wZXJ0aWVzLmRhdGFTb3VyY2VzIHx8IFtdO1xuICAgICAgICB0aGlzLnJlcGxheVNwZWVkID0gcHJvcGVydGllcy5yZXBsYXlTcGVlZCB8fCAxO1xuICAgICAgICB0aGlzLnRpbWVyUmVzb2x1dGlvbiA9IHByb3BlcnRpZXMudGltZXJSZXNvbHV0aW9uIHx8IDU7XG4gICAgICAgIHRoaXMubWFzdGVyVGltZVJlZnJlc2hSYXRlID0gcHJvcGVydGllcy5tYXN0ZXJUaW1lUmVmcmVzaFJhdGUgfHwgMjUwO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZVN5bmMgPSB0aW1lU3luYztcblxuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnJlcGxheVNwZWVkID0gdGhpcy5yZXBsYXlTcGVlZDtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnN0YXJ0VGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuZW5kVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMubWluVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMubWF4VGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMudmVyc2lvbiA9IDA7XG5cbiAgICAgICAgaWYoaXNEZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBpZihpc0RlZmluZWQocHJvcGVydGllcy5taW5UaW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWluVGltZXN0YW1wID0gbmV3IERhdGUocHJvcGVydGllcy5taW5UaW1lKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihpc0RlZmluZWQocHJvcGVydGllcy5tYXhUaW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4VGltZXN0YW1wID0gbmV3IERhdGUocHJvcGVydGllcy5tYXhUaW1lKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCA9IHt9O1xuICAgICAgICB0aGlzLm1lc3NhZ2VzTWFwID0ge307XG5cbiAgICAgICAgdGhpcy5jb21wdXRlTWluTWF4KCk7XG4gICAgfVxuXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cbiAgICBnZXRUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gREFUQV9TWU5DSFJPTklaRVJfVE9QSUMgKyB0aGlzLmlkO1xuICAgIH1cblxuICAgIGdldFRpbWVUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gVElNRV9TWU5DSFJPTklaRVJfVE9QSUMgKyB0aGlzLmlkO1xuICAgIH1cblxuICAgIGdldERhdGFTb3VyY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU291cmNlcztcbiAgICB9XG5cbiAgICBjb21wdXRlTWluTWF4KCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhU291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgbWluVGltZXN0YW1wID0gTnVtYmVyLk1BWF9WQUxVRSwgbWF4VGltZXN0YW1wID0gTnVtYmVyLk1JTl9WQUxVRTtcbiAgICAgICAgICAgIGxldCBzdGFydFRpbWVzdGFtcCA9IE51bWJlci5NQVhfVkFMVUUsIGVuZFRpbWVzdGFtcCA9IE51bWJlci5NSU5fVkFMVUU7XG4gICAgICAgICAgICAvLyBkZWZhdWx0IG1pbi9tYXggd2lsbCBiZSBhZGp1c3RlZCBvbiB0aGUgbW9zdCBtaW4vbWF4IERhdGFTb3VyY2VcbiAgICAgICAgICAgIGZvciAobGV0IGRzIG9mIHRoaXMuZGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgICAgICAvLyBjb21wdXRlIG1pbi9tYXggcmFuZ2Ugb2YgZGF0YVN5bmNocm9uaXplclxuICAgICAgICAgICAgICAgIGxldCBkc01pblRpbWVzdGFtcCA9IGRzLmdldE1pblRpbWVBc1RpbWVzdGFtcCgpO1xuICAgICAgICAgICAgICAgIGxldCBkc01heFRpbWVzdGFtcCA9IGRzLmdldE1heFRpbWVBc1RpbWVzdGFtcCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRzTWluVGltZXN0YW1wIDwgbWluVGltZXN0YW1wICkge1xuICAgICAgICAgICAgICAgICAgICBtaW5UaW1lc3RhbXAgPSBkc01pblRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZHNNYXhUaW1lc3RhbXAgPiBtYXhUaW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4VGltZXN0YW1wID0gZHNNYXhUaW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gY29tcHV0ZSBzdGFydC9lbmQgcmFuZ2Ugb2YgZGF0YVN5bmNocm9uaXplclxuICAgICAgICAgICAgICAgIGxldCBkc1N0YXJ0VGltZXN0YW1wID0gZHMuZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAoKTtcbiAgICAgICAgICAgICAgICBsZXQgZHNFbmRTdGFydFRpbWVzdGFtcCA9IGRzLmdldEVuZFRpbWVBc1RpbWVzdGFtcCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRzU3RhcnRUaW1lc3RhbXAgPCBzdGFydFRpbWVzdGFtcCApIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXAgPSBkc1N0YXJ0VGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkc0VuZFN0YXJ0VGltZXN0YW1wID4gZW5kVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuZFRpbWVzdGFtcCA9IGRzRW5kU3RhcnRUaW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGEgZGVmYXVsdCBNaW4vTWF4IGhhcyBiZWVuIGRlZmluZWQgaW50byBEYXRhU3luY2hyb25pemVyIGZvcmNpbmcgaW50ZXJzZWN0aW9uIHdpdGggY3VycmVudCBjb21wdXRlZCBvbmVzXG4gICAgICAgICAgICBpZihpc0RlZmluZWQodGhpcy5taW5UaW1lc3RhbXApICYmIHRoaXMubWluVGltZXN0YW1wID4gbWluVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgLy8gaW50ZXJzZWN0IGFuZCB0YWtlcyB0aGUgbWluIG9mIGRhdGFTeW5jaHJvbml6ZXJcbiAgICAgICAgICAgICAgICBtaW5UaW1lc3RhbXAgPSB0aGlzLm1pblRpbWVzdGFtcDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKHRoaXMubWF4VGltZXN0YW1wKSAmJiB0aGlzLm1heFRpbWVzdGFtcCA+IGVuZFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgIC8vIGludGVyc2VjdCBhbmQgdGFrZXMgdGhlIG1pbiBvZiBkYXRhU3luY2hyb25pemVyXG4gICAgICAgICAgICAgICAgbWF4VGltZXN0YW1wID0gdGhpcy5tYXhUaW1lc3RhbXA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5taW5UaW1lc3RhbXAgPSBtaW5UaW1lc3RhbXA7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMubWF4VGltZXN0YW1wID0gbWF4VGltZXN0YW1wO1xuXG5cbiAgICAgICAgICAgIGlmKCFpc0RlZmluZWQodGhpcy5wcm9wZXJ0aWVzLnN0YXJ0VGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5zdGFydFRpbWVzdGFtcCA9IHN0YXJ0VGltZXN0YW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIWlzRGVmaW5lZCh0aGlzLnByb3BlcnRpZXMuZW5kVGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5lbmRUaW1lc3RhbXAgPSBlbmRUaW1lc3RhbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGluaXRFdmVudFN1YnNjcmlwdGlvbigpIHtcbiAgICAgICAgLy8gbGlzdGVuIGZvciBFdmVudHMgdG8gY2FsbGJhY2sgdG8gc3Vic2NyaXB0aW9uc1xuICAgICAgICBuZXcgQnJvYWRjYXN0Q2hhbm5lbCh0aGlzLmdldFRvcGljSWQoKSkub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbdHlwZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXVtpXShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBuZXcgQnJvYWRjYXN0Q2hhbm5lbCh0aGlzLmdldFRpbWVUb3BpY0lkKCkpLm9ubWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhLnR5cGUgPT09IEV2ZW50VHlwZS5NQVNURVJfVElNRSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5zdGFydFRpbWVzdGFtcCA9IG1lc3NhZ2UuZGF0YS50aW1lc3RhbXA7IC8vIHNhdmUgYXMgbGFzdCB0aW1lc3RhbXBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbdHlwZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXVtpXShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldFN0YXJ0VGltZUFzSXNvRGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyAnZGF0YVNvdXJjZSBhcnJheSBpcyBlbXB0eSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMucHJvcGVydGllcy5zdGFydFRpbWVzdGFtcCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGFydFRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldFN0YXJ0VGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhU291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93ICdkYXRhU291cmNlIGFycmF5IGlzIGVtcHR5JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLnN0YXJ0VGltZXN0YW1wO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZFRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgSVNPIGRhdGVcbiAgICAgKi9cbiAgICBnZXRFbmRUaW1lQXNJc29EYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhU291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93ICdkYXRhU291cmNlIGFycmF5IGlzIGVtcHR5JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5wcm9wZXJ0aWVzLmVuZFRpbWVzdGFtcCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBnZXRFbmRUaW1lQXNUaW1lc3RhbXAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZW5kVGltZXN0YW1wO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1pblRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldE1pblRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnByb3BlcnRpZXMubWluVGltZXN0YW1wKS50b0lTT1N0cmluZygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1pblRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldE1pblRpbWVBc1RpbWVzdGFtcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyAnZGF0YVNvdXJjZSBhcnJheSBpcyBlbXB0eSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5taW5UaW1lc3RhbXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbWF4VGltZSBvZiB0aGUgZmlyc3QgRGF0YVNvdXJjZSBvYmpldFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gZW5kVGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldE1heFRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnByb3BlcnRpZXMubWF4VGltZXN0YW1wKS50b0lTT1N0cmluZygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1heFRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIGVuZFRpbWUgYXMgdW5peCB0aW1lc3RhbXBcbiAgICAgKi9cbiAgICBnZXRNYXhUaW1lQXNUaW1lc3RhbXAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgJ2RhdGFTb3VyY2UgYXJyYXkgaXMgZW1wdHknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMubWF4VGltZXN0YW1wO1xuICAgIH1cblxuXG4gICAgYXN5bmMgc2V0U3RhcnRUaW1lKHRpbWUsIGxhenkgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc3RhcnRUaW1lc3RhbXAgPSBuZXcgRGF0ZSh0aW1lKS5nZXRUaW1lKCk7XG4gICAgICAgIGlmKCFsYXp5KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUFsZ28oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHNldEVuZFRpbWUodGltZSwgbGF6eSA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5lbmRUaW1lc3RhbXAgPSBuZXcgRGF0ZSh0aW1lKS5nZXRUaW1lKCk7XG4gICAgICAgIGlmKCFsYXp5KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUFsZ28oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHNldE1heFRpbWUobWF4VGltZSkge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMubWF4VGltZXN0YW1wID0gbmV3IERhdGUobWF4VGltZSkuZ2V0VGltZSgpO1xuICAgICAgICBmb3IobGV0IGRzIG9mIHRoaXMuZGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgIGRzLnNldE1heFRpbWUobWF4VGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21wdXRlTWluTWF4KCk7XG4gICAgICAgIHRoaXMudGltZUNoYW5nZWQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByZXBsYXlTcGVlZFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IC0gdGhlIHJlcGxheSBzcGVlZFxuICAgICAqL1xuICAgIGdldFJlcGxheVNwZWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYXlTcGVlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGUgdGhlIGNvcnJlc3BvbmRpbmcgcnVubmluZyBXZWJXb3JrZXIgYnkgY2FsbGluZyB0ZXJtaW5hdGUoKSBvbiBpdC5cbiAgICAgKi9cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN5bmNocm9uaXplcldvcmtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZXJXb3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBkYXRhU291cmNlLnRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGZuLCBldmVudFR5cGVzKSB7XG4gICAgICAgIC8vIGFzc29jaWF0ZSBmdW5jdGlvbiB0byBldmVudFR5cGVcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudFR5cGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIShldmVudFR5cGVzW2ldIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFtldmVudFR5cGVzW2ldXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFtldmVudFR5cGVzW2ldXS5wdXNoKGZuKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldE1vZGUoKSB7XG4gICAgICAgIHJldHVybiBNb2RlLlJFUExBWTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLS0tLS0tIEFTWU5DSFJPTk9VUyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0vL1xuXG4gICAgYXN5bmMgaW5pdERhdGFTb3VyY2VzKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhU291cmNlc0ZvcldvcmtlciA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGRhdGFTb3VyY2Ugb2YgdGhpcy5kYXRhU291cmNlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhU291cmNlRm9yV29ya2VyID0gYXdhaXQgdGhpcy5jcmVhdGVEYXRhU291cmNlRm9yV29ya2VyKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlc0Zvcldvcmtlci5wdXNoKGRhdGFTb3VyY2VGb3JXb3JrZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlciA9IG5ldyBEYXRhU3luY2hyb25pemVyV29ya2VyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVXb3JrZXJNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbml0JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZXM6IGRhdGFTb3VyY2VzRm9yV29ya2VyLFxuICAgICAgICAgICAgICAgICAgICByZXBsYXlTcGVlZDogdGhpcy5yZXBsYXlTcGVlZCxcbiAgICAgICAgICAgICAgICAgICAgdGltZXJSZXNvbHV0aW9uOiB0aGlzLnRpbWVyUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgbWFzdGVyVGltZVJlZnJlc2hSYXRlOiB0aGlzLm1hc3RlclRpbWVSZWZyZXNoUmF0ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXA6IHRoaXMuZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICAgICAgZW5kVGltZXN0YW1wOiB0aGlzLmdldEVuZFRpbWVBc1RpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgICAgICBtb2RlOiB0aGlzLmdldE1vZGUoKSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uKCksXG4gICAgICAgICAgICAgICAgICAgIHRvcGljczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRUb3BpY0lkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdldFRpbWVUb3BpY0lkKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RXZlbnRTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSBkYXRhU291cmNlXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlRGF0YVNvdXJjZUZvcldvcmtlcihkYXRhU291cmNlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgICAgICAgIGJ1ZmZlcmluZ1RpbWU6IGRhdGFTb3VyY2UucHJvcGVydGllcy5idWZmZXJpbmdUaW1lIHx8IDAsXG4gICAgICAgICAgICB0aW1lT3V0OiBkYXRhU291cmNlLnByb3BlcnRpZXMudGltZU91dCB8fCAwLFxuICAgICAgICAgICAgaWQ6IGRhdGFTb3VyY2UuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5hbWU6IGRhdGFTb3VyY2UuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgbWluVGltZXN0YW1wOiBkYXRhU291cmNlLmdldE1pblRpbWVBc1RpbWVzdGFtcCgpLFxuICAgICAgICAgICAgbWF4VGltZXN0YW1wOiBkYXRhU291cmNlLmdldE1heFRpbWVBc1RpbWVzdGFtcCgpXG4gICAgICAgIH07XG4gICAgICAgIC8vIGJpbmQgZGF0YVNvdXJjZSBkYXRhIG9udG8gZGF0YVN5bmNocm9uaXplciBkYXRhXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLnNldERhdGFTeW5jaHJvbml6ZXIodGhpcy50aW1lU3luYyk7XG4gICAgICAgICAgICBkYXRhU291cmNlLnByb3BlcnRpZXMucmVwbGF5U3BlZWQgPSB0aGlzLnJlcGxheVNwZWVkO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBzZXQgdGhlIHN5bmNocm9uaXplciB0byB0aGlzIERhdGFTb3VyY2VcIiwgZXgpO1xuICAgICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICB0aW1lQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5vblRpbWVDaGFuZ2VkKFxuICAgICAgICAgICAgdGhpcy5nZXRNaW5UaW1lQXNUaW1lc3RhbXAoKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0TWF4VGltZUFzVGltZXN0YW1wKCksXG4gICAgICAgICAgICB0aGlzLmdldFN0YXJ0VGltZUFzVGltZXN0YW1wKCksXG4gICAgICAgICAgICB0aGlzLmdldEVuZFRpbWVBc1RpbWVzdGFtcCgpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBEYXRhU291cmNlIG9iamVjdCB0byB0aGUgbGlzdCBvZiBkYXRhc291cmNlcyB0byBzeW5jaHJvbml6ZS5cbiAgICAgKiBub3RlOiBkb24ndCBmb3JnZXQgdG8gY2FsbCByZXNldCgpIHRvIGJlIHN1cmUgdG8gcmUtaW5pdCB0aGUgc3luY2hyb25pemVyIGludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICogQHBhcmFtIHtUaW1lU2VyaWVzRGF0YVNvdXJjZX0gZGF0YVNvdXJjZSAtIHRoZSBuZXcgZGF0YXNvdXJjZSB0byBhZGRcbiAgICAgKi9cbiAgICBhc3luYyBhZGREYXRhU291cmNlKGRhdGFTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlcy5wdXNoKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgdGhpcy5jb21wdXRlTWluTWF4KCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRGF0YVN5bmNocm9uaXplciBub3QgaW5pdGlhbGl6ZWQgeWV0LCBhZGQgRGF0YVNvdXJjZSAke2RhdGFTb3VyY2UuaWR9IGFzIGl0YCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lQ2hhbmdlZCgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVNvdXJjZUZvcldvcmtlciA9IGF3YWl0IHRoaXMuY3JlYXRlRGF0YVNvdXJjZUZvcldvcmtlcihkYXRhU291cmNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLnNldFRpbWVSYW5nZShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTdGFydFRpbWVBc0lzb0RhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRFbmRUaW1lQXNJc29EYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVwbGF5U3BlZWQoKSxcbiAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW9kZSgpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlcnNpb24oKVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgZGF0YVNvdXJjZSB0byBzeW5jaHJvbml6ZXIgYWxnb3JpdGhtXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdhZGQnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlczogW2RhdGFTb3VyY2VGb3JXb3JrZXJdXG4gICAgICAgICAgICAgICAgfSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWRkZWREYXRhU291cmNlKGRhdGFTb3VyY2UuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVDaGFuZ2VkKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIERhdGFTb3VyY2Ugb2JqZWN0IGZyb20gdGhlIGxpc3Qgb2YgZGF0YXNvdXJjZXMgb2YgdGhlIHN5bmNocm9uaXplci5cbiAgICAgKiBAcGFyYW0ge1RpbWVTZXJpZXNEYXRhc291cmNlfSBkYXRhU291cmNlIC0gdGhlIG5ldyBkYXRhc291cmNlIHRvIGFkZFxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZURhdGFTb3VyY2UoZGF0YVNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2VzID0gdGhpcy5kYXRhU291cmNlcy5maWx0ZXIoZWx0ID0+IGVsdC5pZCAhPT0gZGF0YVNvdXJjZS5nZXRJZCgpKTtcbiAgICAgICAgICAgIGlmKHRoaXMuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb21wdXRlTWluTWF4KCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBEYXRhU3luY2hyb25pemVyIG5vdCBpbml0aWFsaXplZCB5ZXQsIHJlbW92ZSBEYXRhU291cmNlICR7ZGF0YVNvdXJjZS5pZH0gYXMgaXRgKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVDaGFuZ2VkKCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhd2FpdCBkYXRhU291cmNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLnJlbW92ZURhdGFTeW5jaHJvbml6ZXIoKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAncmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUlkczogW2RhdGFTb3VyY2UuZ2V0SWQoKV0sXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiB0aGlzLmdldFN0YXJ0VGltZUFzVGltZXN0YW1wKCksXG4gICAgICAgICAgICAgICAgICAgIGVuZFRpbWVzdGFtcDogdGhpcy5nZXRFbmRUaW1lQXNUaW1lc3RhbXAoKVxuICAgICAgICAgICAgICAgIH0sIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lQ2hhbmdlZCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVtb3ZlZERhdGFTb3VyY2UoZGF0YVNvdXJjZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGFTb3VyY2VJZCAtIHRoZSBkYXRhU291cmNlIGlkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSB0aGUgZGF0YSB0byBwdXNoIGludG8gdGhlIGRhdGEgc3luY2hyb25pemVyXG4gICAgICovXG4gICAgYXN5bmMgcHVzaChkYXRhU291cmNlSWQsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN5bmNocm9uaXplcldvcmtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGF0YScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJZDogZGF0YVNvdXJjZUlkLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMudmVyc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdHMgYWxsIGRhdGFTb3VyY2VzXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdCByZXBsYXknKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgICAgIGlmKCEoYXdhaXQgdGhpcy5pc0Nvbm5lY3RlZCgpKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZG9Db25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBjaGVja0luaXQoKSB7XG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc0RlZmluZWQodGhhdC5pbml0KSkge1xuICAgICAgICAgICAgICAgIHRoYXQuaW5pdCA9IHRoYXQuaW5pdERhdGFTb3VyY2VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGF0LmluaXQ7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGRvQ29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVBbGdvKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBkYXRhU291cmNlIG9mIHRoaXMuZGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLmNvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdjb25uZWN0JyxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24oKVxuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIGFsbCBkYXRhU291cmNlc1xuICAgICAqL1xuICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVzZXQoKTtcbiAgICAgICAgZm9yIChsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHJlcGxheVNwZWVkXG4gICAgICovXG4gICAgYXN5bmMgc2V0UmVwbGF5U3BlZWQocmVwbGF5U3BlZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXBsYXlTcGVlZCA9IHJlcGxheVNwZWVkO1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnJlcGxheVNwZWVkID0gcmVwbGF5U3BlZWQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAncmVwbGF5LXNwZWVkJyxcbiAgICAgICAgICAgICAgICByZXBsYXlTcGVlZDogcmVwbGF5U3BlZWQsXG4gICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGF0YSBzb3VyY2UgdGltZSByYW5nZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydFRpbWUgLSB0aGUgc3RhcnRUaW1lIChpbiBkYXRlIElTTylcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5kVGltZSAtIHRoZSBzdGFydFRpbWUgKGluIGRhdGUgSVNPKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByZXBsYXlTcGVlZCAtIHRoZSByZXBsYXkgc3BlZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlY29ubmVjdCAtIHJlY29ubmVjdCBpZiB3YXMgY29ubmVjdGVkXG4gICAgICogQHBhcmFtIHtNb2RlfSBtb2RlIC0gZGVmYXVsdCBkYXRhU291cmNlIG1vZGVcbiAgICAgKi9cbiAgICBhc3luYyBzZXRUaW1lUmFuZ2Uoc3RhcnRUaW1lID0gdGhpcy5nZXRTdGFydFRpbWVBc0lzb0RhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZSA9IHRoaXMuZ2V0RW5kVGltZUFzSXNvRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICByZXBsYXlTcGVlZCA9IHRoaXMuZ2V0UmVwbGF5U3BlZWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVjb25uZWN0ID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbmNWZXJzaW9uKCk7XG4gICAgICAgICAgICAvLyB1cGRhdGUgcHJvcGVydGllcyBvZiBEYXRhU3luY2hyb25pemVyXG4gICAgICAgICAgICB0aGlzLnJlcGxheVNwZWVkID0gcmVwbGF5U3BlZWQ7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0U3RhcnRUaW1lKHN0YXJ0VGltZSwgdHJ1ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldEVuZFRpbWUoZW5kVGltZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1pbk1heCgpO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgcHJvcGVydGllcyBvZiBlYWNoIERhdGFTb3VyY2VcbiAgICAgICAgICAgIGZvciAobGV0IGRzIG9mIHRoaXMuZGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkcy5zZXRUaW1lUmFuZ2Uoc3RhcnRUaW1lLCBlbmRUaW1lLCB0aGlzLmdldFJlcGxheVNwZWVkKCksIGZhbHNlLCB0aGlzLmdldE1vZGUoKSwgdGhpcy52ZXJzaW9uKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgYWxnbyB1c2luZyB0aGVzZSBuZXcgcHJvcGVydGllc1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQWxnbygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVBbGdvKCkge1xuICAgICAgICAvLyBzeW5jaHJvbml6ZSBzdGFydFRpbWVzdGFtcCBvZiBzeW5jaHJvbml6ZXIgdG8gZGF0YXNvdXJjZXNcbiAgICAgICAgZm9yIChsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBkYXRhU291cmNlLnNldFN0YXJ0VGltZXN0YW1wKHRoaXMuZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAoKSk7XG4gICAgICAgICAgICBkYXRhU291cmNlLnNldEVuZFRpbWVzdGFtcCh0aGlzLmdldEVuZFRpbWVBc1RpbWVzdGFtcCgpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZS1jb21wdXRlIG5ldyBtaW4vbWF4IG9mIHN5bmNocm9uaXplclxuICAgICAgICB0aGlzLmNvbXB1dGVNaW5NYXgoKTtcbiAgICAgICAgLy8gcHJvdmlkZSBuZXcgbWluL21heCBvZiBlYWNoIGRhdGFTb3VyY2UgdG8gZGF0YVN5bmNocm9uaXplclxuICAgICAgICBjb25zdCBkYXRhU291cmNlc0ZvcldvcmtlciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBkYXRhU291cmNlIG9mIHRoaXMuZGF0YVNvdXJjZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgICAgICAgICAgICBidWZmZXJpbmdUaW1lOiBkYXRhU291cmNlLnByb3BlcnRpZXMuYnVmZmVyaW5nVGltZSB8fCAwLFxuICAgICAgICAgICAgICAgIHRpbWVPdXQ6IGRhdGFTb3VyY2UucHJvcGVydGllcy50aW1lT3V0IHx8IDAsXG4gICAgICAgICAgICAgICAgaWQ6IGRhdGFTb3VyY2UuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhU291cmNlLmdldE5hbWUoKSxcbiAgICAgICAgICAgICAgICBtaW5UaW1lc3RhbXA6IGRhdGFTb3VyY2UuZ2V0TWluVGltZUFzVGltZXN0YW1wKCksXG4gICAgICAgICAgICAgICAgbWF4VGltZXN0YW1wOiBkYXRhU291cmNlLmdldE1heFRpbWVBc1RpbWVzdGFtcCgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGF0YVNvdXJjZXNGb3JXb3JrZXIucHVzaChvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICd0aW1lLXJhbmdlJyxcbiAgICAgICAgICAgICAgICBtb2RlOiB0aGlzLmdldE1vZGUoKSxcbiAgICAgICAgICAgICAgICByZXBsYXlTcGVlZDogdGhpcy5nZXRSZXBsYXlTcGVlZCgpLFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiB0aGlzLmdldFN0YXJ0VGltZUFzVGltZXN0YW1wKCksXG4gICAgICAgICAgICAgICAgZW5kVGltZXN0YW1wOiB0aGlzLmdldEVuZFRpbWVBc1RpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbigpLFxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VzOiBkYXRhU291cmNlc0ZvcldvcmtlclxuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgICAgICBmb3IgKGxldCBkcyBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBkcy51cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRUaW1lcygpIHtcbiAgICAgICAgdGhpcy5jb21wdXRlTWluTWF4KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHJlZmVyZW5jZSB0aW1lXG4gICAgICovXG4gICAgYXN5bmMgcmVzZXQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAncmVzZXQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRUaW1lcygpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDdXJyZW50VGltZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2N1cnJlbnQtdGltZSdcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRoZSBkYXRhU291cmNlIHRoZW4gdGhlIHByb3RvY29sIHdpbGwgYmUgb3BlbmVkIGFzIHdlbGwuXG4gICAgICovXG4gICAgYXN5bmMgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lzLWNvbm5lY3RlZCdcbiAgICAgICAgICAgICAgICB9LCAobWVzc2FnZSkgPT4gcmVzb2x2ZShtZXNzYWdlLmRhdGEpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcG9zdE1lc3NhZ2UocHJvcHMsIEZuLCBjaGVja0luaXQgPSB0cnVlKSB7XG4gICAgICAgIGlmIChjaGVja0luaXQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZUlkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKEZuKSkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc01hcFttZXNzYWdlSWRdID0gRm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVXb3JrZXJNZXNzYWdlKCkge1xuICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlci5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZXZlbnQuZGF0YS5tZXNzYWdlSWQ7XG4gICAgICAgICAgICBpZiAoaWQgaW4gdGhpcy5tZXNzYWdlc01hcCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNNYXBbaWRdKGV2ZW50LmRhdGEuZGF0YSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubWVzc2FnZXNNYXBbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5jVmVyc2lvbigpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnZlcnNpb24rKztcbiAgICB9XG5cbiAgICBvblRpbWVDaGFuZ2VkKG1pbiwgbWF4LCBzdGFydCwgZW5kKSB7XG4gICAgfVxuXG4gICAgb25SZW1vdmVkRGF0YVNvdXJjZShkYXRhU291cmNlSWQpIHtcbiAgICB9XG5cbiAgICBvbkFkZGVkRGF0YVNvdXJjZShkYXRhU291cmNlSWQpIHtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGFTeW5jaHJvbml6ZXJSZXBsYXk7XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQkVHSU4gTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuIFRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHN1YmplY3QgdG8gdGhlIE1vemlsbGEgUHVibGljIExpY2Vuc2UsIHYuIDIuMC5cbiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcyBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmVcbiBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG5cbiBTb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsXG4gV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlXG4gZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcmlnaHRzIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuIENvcHlyaWdodCAoQykgMjAxNS0yMDIwIE1hdGhpZXUgRGhhaW5hdXQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cbiBBdXRob3I6IE1hdGhpZXUgRGhhaW5hdXQgPG1hdGhpZXUuZGhhaW5hdXRAZ21haWwuY29tPlxuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFTkQgTElDRU5TRSBCTE9DSyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmltcG9ydCB7YXNzZXJ0RGVmaW5lZCwgaXNEZWZpbmVkLCByYW5kb21VVUlEfSBmcm9tIFwiLi4vLi4vdXRpbHMvVXRpbHMuanNcIjtcbmltcG9ydCBEYXRhU3luY2hyb25pemVyV29ya2VyIGZyb20gJy4vRGF0YVN5bmNocm9uaXplci5yZWFsdGltZS53b3JrZXIuanMnO1xuaW1wb3J0IHtEQVRBX1NZTkNIUk9OSVpFUl9UT1BJQywgVElNRV9TWU5DSFJPTklaRVJfVE9QSUN9IGZyb20gXCIuLi8uLi9Db25zdGFudHMuanNcIjtcbmltcG9ydCB7TW9kZX0gZnJvbSBcIi4uLy4uL2RhdGFzb3VyY2UvTW9kZVwiO1xuXG5jbGFzcyBEYXRhU3luY2hyb25pemVyUmVhbHRpbWUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgVGhlIGRhdGFTeW5jaHJvbml6ZXIuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgLSB0aGUgcHJvcGVydHkgb2YgdGhlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcHJvcGVydGllcy5pZD1yYW5kb21VVUlEXSAtIGlkIG9mIHRoZSBkYXRhU3luY2hyb25pemVyIG9yIHJhbmRvbSBpZiBub3QgcHJvdmlkZWRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMudGltZXJSZXNvbHV0aW9uPTVdIC0gaW50ZXJ2YWwgaW4gd2hpY2ggZGF0YSBpcyBwbGF5ZWQgKGluIG1pbGxpc2Vjb25kcylcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMubWFzdGVyVGltZVJlZnJlc2hSYXRlPTI1MF0gLSBpbnRlcnZhbCBpbiB3aGljaCB0aW1lIHZhbHVlIGlzIHNlbmQgdGhyb3VnaCBicm9hZGNhc3QgY2hhbm5lbCAoaW4gbWlsbGlzZWNvbmRzKVxuICAgICAqIEBwYXJhbSB7RGF0YXNvdXJjZVtdfSBwcm9wZXJ0aWVzLmRhdGFTb3VyY2VzIC0gdGhlIGRhdGFTb3VyY2UgYXJyYXlcbiAgICAgKiBAcGFyYW0ge0RhdGFTeW5jaHJvbml6ZXJ9IHRpbWVTeW5jIC0gZGF0YVN5bmNocm9uaXplclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMsIHRpbWVTeW5jKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyaW5nVGltZSA9IDEwMDA7IC8vIGRlZmF1bHRcbiAgICAgICAgdGhpcy5pZCA9IHByb3BlcnRpZXMuaWQgfHwgcmFuZG9tVVVJRCgpO1xuICAgICAgICB0aGlzLmRhdGFTb3VyY2VzID0gcHJvcGVydGllcy5kYXRhU291cmNlcyB8fCBbXTtcbiAgICAgICAgdGhpcy50aW1lclJlc29sdXRpb24gPSBwcm9wZXJ0aWVzLnRpbWVyUmVzb2x1dGlvbiB8fCA1O1xuICAgICAgICB0aGlzLm1hc3RlclRpbWVSZWZyZXNoUmF0ZSA9IHByb3BlcnRpZXMubWFzdGVyVGltZVJlZnJlc2hSYXRlIHx8IDI1MDtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRpbWVTeW5jID0gdGltZVN5bmM7XG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IHt9O1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMudmVyc2lvbiA9IDA7XG5cbiAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCA9IHt9O1xuICAgICAgICB0aGlzLm1lc3NhZ2VzTWFwID0ge307XG4gICAgfVxuXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIGdldERhdGFTb3VyY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU291cmNlcztcbiAgICB9XG5cbiAgICBnZXRUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gREFUQV9TWU5DSFJPTklaRVJfVE9QSUMgKyB0aGlzLmlkO1xuICAgIH1cblxuICAgIGdldFRpbWVUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gVElNRV9TWU5DSFJPTklaRVJfVE9QSUMgKyB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgaW5pdEV2ZW50U3Vic2NyaXB0aW9uKCkge1xuICAgICAgICAvLyBsaXN0ZW4gZm9yIEV2ZW50cyB0byBjYWxsYmFjayB0byBzdWJzY3JpcHRpb25zXG4gICAgICAgIG5ldyBCcm9hZGNhc3RDaGFubmVsKHRoaXMuZ2V0VG9waWNJZCgpKS5vbm1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuZGF0YS50eXBlO1xuICAgICAgICAgICAgaWYgKHR5cGUgaW4gdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50U3Vic2NyaXB0aW9uTWFwW3R5cGVdW2ldKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ldyBCcm9hZGNhc3RDaGFubmVsKHRoaXMuZ2V0VGltZVRvcGljSWQoKSkub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtZXNzYWdlLmRhdGEudHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXBbdHlwZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFt0eXBlXVtpXShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGUgdGhlIGNvcnJlc3BvbmRpbmcgcnVubmluZyBXZWJXb3JrZXIgYnkgY2FsbGluZyB0ZXJtaW5hdGUoKSBvbiBpdC5cbiAgICAgKi9cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN5bmNocm9uaXplcldvcmtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZXJXb3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICBkYXRhU291cmNlLnRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGZuLCBldmVudFR5cGVzKSB7XG4gICAgICAgIC8vIGFzc29jaWF0ZSBmdW5jdGlvbiB0byBldmVudFR5cGVcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudFR5cGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIShldmVudFR5cGVzW2ldIGluIHRoaXMuZXZlbnRTdWJzY3JpcHRpb25NYXApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFtldmVudFR5cGVzW2ldXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ldmVudFN1YnNjcmlwdGlvbk1hcFtldmVudFR5cGVzW2ldXS5wdXNoKGZuKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldE1vZGUoKSB7XG4gICAgICAgIHJldHVybiBNb2RlLlJFQUxfVElNRTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLS0tLS0tIEFTWU5DSFJPTk9VUyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0vL1xuXG4gICAgYXN5bmMgaW5pdERhdGFTb3VyY2VzKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhU291cmNlc0ZvcldvcmtlciA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGRhdGFTb3VyY2Ugb2YgdGhpcy5kYXRhU291cmNlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhU291cmNlRm9yV29ya2VyID0gYXdhaXQgdGhpcy5jcmVhdGVEYXRhU291cmNlRm9yV29ya2VyKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlc0Zvcldvcmtlci5wdXNoKGRhdGFTb3VyY2VGb3JXb3JrZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlciA9IG5ldyBEYXRhU3luY2hyb25pemVyV29ya2VyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVXb3JrZXJNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbml0JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZXM6IGRhdGFTb3VyY2VzRm9yV29ya2VyLFxuICAgICAgICAgICAgICAgICAgICB0aW1lclJlc29sdXRpb246IHRoaXMudGltZXJSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICAgICBtYXN0ZXJUaW1lUmVmcmVzaFJhdGU6IHRoaXMubWFzdGVyVGltZVJlZnJlc2hSYXRlLFxuICAgICAgICAgICAgICAgICAgICBtb2RlOiBNb2RlLlJFQUxfVElNRSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uKCksXG4gICAgICAgICAgICAgICAgICAgIHRvcGljczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRUb3BpY0lkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLmdldFRpbWVUb3BpY0lkKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RXZlbnRTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gZGF0YVNvdXJjZVxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZURhdGFTb3VyY2VGb3JXb3JrZXIoZGF0YVNvdXJjZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgICAgICBidWZmZXJpbmdUaW1lOiBkYXRhU291cmNlLnByb3BlcnRpZXMuYnVmZmVyaW5nVGltZSB8fCAwLFxuICAgICAgICAgICAgdGltZU91dDogZGF0YVNvdXJjZS5wcm9wZXJ0aWVzLnRpbWVPdXQgfHwgMCxcbiAgICAgICAgICAgIGlkOiBkYXRhU291cmNlLmlkLFxuICAgICAgICAgICAgbmFtZTogZGF0YVNvdXJjZS5uYW1lXG4gICAgICAgIH07XG4gICAgICAgIC8vIGJpbmQgZGF0YVNvdXJjZSBkYXRhIG9udG8gZGF0YVN5bmNocm9uaXplciBkYXRhXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLnNldERhdGFTeW5jaHJvbml6ZXIodGhpcy50aW1lU3luYyk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHNldCB0aGUgc3luY2hyb25pemVyIHRvIHRoaXMgRGF0YVNvdXJjZVwiLCBleCk7XG4gICAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgRGF0YVNvdXJjZSBvYmplY3QgdG8gdGhlIGxpc3Qgb2YgZGF0YXNvdXJjZXMgdG8gc3luY2hyb25pemUuXG4gICAgICogbm90ZTogZG9uJ3QgZm9yZ2V0IHRvIGNhbGwgcmVzZXQoKSB0byBiZSBzdXJlIHRvIHJlLWluaXQgdGhlIHN5bmNocm9uaXplciBpbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSB7VGltZVNlcmllc0RhdGFTb3VyY2V9IGRhdGFTb3VyY2UgLSB0aGUgbmV3IGRhdGFzb3VyY2UgdG8gYWRkXG4gICAgICovXG4gICAgYXN5bmMgYWRkRGF0YVNvdXJjZShkYXRhU291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZXMucHVzaChkYXRhU291cmNlKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBEYXRhU3luY2hyb25pemVyIG5vdCBpbml0aWFsaXplZCB5ZXQsIGFkZCBEYXRhU291cmNlICR7ZGF0YVNvdXJjZS5pZH0gYXMgaXRgKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFTb3VyY2VGb3JXb3JrZXIgPSBhd2FpdCB0aGlzLmNyZWF0ZURhdGFTb3VyY2VGb3JXb3JrZXIoZGF0YVNvdXJjZSk7XG4gICAgICAgICAgICAgICAgLy8gYWRkIGRhdGFTb3VyY2UgdG8gc3luY2hyb25pemVyIGFsZ29yaXRobVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnYWRkJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZXM6IFtkYXRhU291cmNlRm9yV29ya2VyXVxuICAgICAgICAgICAgICAgIH0sIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFkZGVkRGF0YVNvdXJjZShkYXRhU291cmNlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgRGF0YVNvdXJjZSBvYmplY3QgZnJvbSB0aGUgbGlzdCBvZiBkYXRhc291cmNlcyBvZiB0aGUgc3luY2hyb25pemVyLlxuICAgICAqIEBwYXJhbSB7VGltZVNlcmllc0RhdGFzb3VyY2V9IGRhdGFTb3VyY2UgLSB0aGUgbmV3IGRhdGFzb3VyY2UgdG8gYWRkXG4gICAgICovXG4gICAgYXN5bmMgcmVtb3ZlRGF0YVNvdXJjZShkYXRhU291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucmVtb3ZlRGF0YVN5bmNocm9uaXplcigpO1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlcyA9IHRoaXMuZGF0YVNvdXJjZXMuZmlsdGVyKGVsdCA9PiBlbHQuaWQgIT09IGRhdGFTb3VyY2UuZ2V0SWQoKSk7XG4gICAgICAgICAgICBpZih0aGlzLmRhdGFTb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBEYXRhU3luY2hyb25pemVyIG5vdCBpbml0aWFsaXplZCB5ZXQsIHJlbW92ZSBEYXRhU291cmNlICR7ZGF0YVNvdXJjZS5pZH0gYXMgaXRgKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAncmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNvdXJjZUlkczogW2RhdGFTb3VyY2UuZ2V0SWQoKV0sXG4gICAgICAgICAgICAgICAgfSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVtb3ZlZERhdGFTb3VyY2UoZGF0YVNvdXJjZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGFTb3VyY2VJZCAtIHRoZSBkYXRhU291cmNlIGlkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSB0aGUgZGF0YSB0byBwdXNoIGludG8gdGhlIGRhdGEgc3luY2hyb25pemVyXG4gICAgICovXG4gICAgYXN5bmMgcHVzaChkYXRhU291cmNlSWQsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN5bmNocm9uaXplcldvcmtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGF0YScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJZDogZGF0YVNvdXJjZUlkLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMudmVyc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdHMgYWxsIGRhdGFTb3VyY2VzXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGVja0luaXQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kb0Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICBhc3luYyBjaGVja0luaXQoKSB7XG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc0RlZmluZWQodGhhdC5pbml0KSkge1xuICAgICAgICAgICAgICAgIHRoYXQuaW5pdCA9IHRoYXQuaW5pdERhdGFTb3VyY2VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGF0LmluaXQ7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGRvQ29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgZGF0YVNvdXJjZSBvZiB0aGlzLmRhdGFTb3VyY2VzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGF0YVNvdXJjZS5jb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnY29ubmVjdCcsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uKClcbiAgICAgICAgICAgIH0sIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0cyBhbGwgZGF0YVNvdXJjZXNcbiAgICAgKi9cbiAgICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJlc2V0KCk7XG4gICAgICAgIGZvciAobGV0IGRhdGFTb3VyY2Ugb2YgdGhpcy5kYXRhU291cmNlcykge1xuICAgICAgICAgICAgYXdhaXQgZGF0YVNvdXJjZS5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVQcm9wZXJ0aWVzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgZm9yIChsZXQgZHMgb2YgdGhpcy5kYXRhU291cmNlcykge1xuICAgICAgICAgICAgZHMudXBkYXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyByZWZlcmVuY2UgdGltZVxuICAgICAqL1xuICAgIGFzeW5jIHJlc2V0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ3Jlc2V0J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEN1cnJlbnRUaW1lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnY3VycmVudC10aW1lJ1xuICAgICAgICAgICAgfSwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdGhlIGRhdGFTb3VyY2UgdGhlbiB0aGUgcHJvdG9jb2wgd2lsbCBiZSBvcGVuZWQgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBhc3luYyBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrSW5pdCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaXMtY29ubmVjdGVkJ1xuICAgICAgICAgICAgICAgIH0sIChtZXNzYWdlKSA9PiByZXNvbHZlKG1lc3NhZ2UuZGF0YSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRNaW5UaW1lKG1pblRpbWUpIHt9XG4gICAgc2V0TWF4VGltZShtYXhUaW1lKSB7fVxuXG4gICAgYXN5bmMgcG9zdE1lc3NhZ2UocHJvcHMsIEZuLCBjaGVja0luaXQgPSB0cnVlKSB7XG4gICAgICAgIGlmIChjaGVja0luaXQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tJbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZUlkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNEZWZpbmVkKEZuKSkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc01hcFttZXNzYWdlSWRdID0gRm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVXb3JrZXJNZXNzYWdlKCkge1xuICAgICAgICB0aGlzLnN5bmNocm9uaXplcldvcmtlci5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZXZlbnQuZGF0YS5tZXNzYWdlSWQ7XG4gICAgICAgICAgICBpZiAoaWQgaW4gdGhpcy5tZXNzYWdlc01hcCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNNYXBbaWRdKGV2ZW50LmRhdGEuZGF0YSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubWVzc2FnZXNNYXBbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5jVmVyc2lvbigpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnZlcnNpb24rKztcbiAgICB9XG4gICAgb25UaW1lQ2hhbmdlZChzdGFydCwgbWluKSB7XG4gICAgfVxuXG4gICAgb25SZW1vdmVkRGF0YVNvdXJjZShkYXRhU291cmNlSWQpIHtcbiAgICB9XG5cbiAgICBvbkFkZGVkRGF0YVNvdXJjZShkYXRhU291cmNlSWQpIHtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGFTeW5jaHJvbml6ZXJSZWFsdGltZTtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjAgTWF0aGlldSBEaGFpbmF1dC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtNb2RlfSBmcm9tIFwiLi4vZGF0YXNvdXJjZS9Nb2RlXCI7XG5pbXBvcnQgRGF0YVN5bmNocm9uaXplclJlcGxheSBmcm9tIFwiLi9yZXBsYXkvRGF0YVN5bmNocm9uaXplci5yZXBsYXlcIjtcbmltcG9ydCBEYXRhU3luY2hyb25pemVyUmVhbHRpbWUgZnJvbSBcIi4vcnQvRGF0YVN5bmNocm9uaXplci5yZWFsdGltZVwiO1xuaW1wb3J0IHtyYW5kb21VVUlEfSBmcm9tIFwiLi4vdXRpbHMvVXRpbHNcIjtcblxuY2xhc3MgRGF0YVN5bmNocm9uaXplciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBUaGUgZGF0YVN5bmNocm9uaXplci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIHRoZSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtwcm9wZXJ0aWVzLmlkPXJhbmRvbVVVSURdIC0gaWQgb2YgdGhlIGRhdGFTeW5jaHJvbml6ZXIgb3IgcmFuZG9tIGlmIG5vdCBwcm92aWRlZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJvcGVydGllcy5yZXBsYXlTcGVlZD0xXSAtIHJlcGxheVNwZWVkIHZhbHVlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLnRpbWVyUmVzb2x1dGlvbj01XSAtIGludGVydmFsIGluIHdoaWNoIGRhdGEgaXMgcGxheWVkIChpbiBtaWxsaXNlY29uZHMpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcm9wZXJ0aWVzLm1hc3RlclRpbWVSZWZyZXNoUmF0ZT0yNTBdIC0gaW50ZXJ2YWwgaW4gd2hpY2ggdGltZSB2YWx1ZSBpcyBzZW5kIHRocm91Z2ggYnJvYWRjYXN0IGNoYW5uZWwgKGluIG1pbGxpc2Vjb25kcylcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3Byb3BlcnRpZXMubW9kZT1Nb2RlLlJFUExBWV0gLSBtb2RlIG9mIHRoZSBkYXRhIHN5bmNocm9uaXplclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLnN0YXJ0VGltZSAtIHN0YXJ0IHRpbWUgb2YgdGhlIHRlbXBvcmFsIHJ1blxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLmVuZFRpbWUgLSBlbmQgdGltZSBvZiB0aGUgdGVtcG9yYWwgcnVuXG4gICAgICogQHBhcmFtIHtEYXRhc291cmNlW119IHByb3BlcnRpZXMuZGF0YVNvdXJjZXMgLSB0aGUgZGF0YVNvdXJjZSBhcnJheVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgaWQgPSBwcm9wZXJ0aWVzLmlkIHx8IHJhbmRvbVVVSUQoKTtcbiAgICAgICAgdGhpcy5kYXRhU3luY2hyb25pemVyUmVwbGF5ID0gbmV3IERhdGFTeW5jaHJvbml6ZXJSZXBsYXkoe1xuICAgICAgICAgICAgLi4ucHJvcGVydGllcyxcbiAgICAgICAgICAgIGlkOiBpZCsnLXJlcGxheSdcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplclJ0ID0gbmV3IERhdGFTeW5jaHJvbml6ZXJSZWFsdGltZSh7XG4gICAgICAgICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgaWQ6IGlkKyctcmVhbHRpbWUnXG4gICAgICAgIH0sIHRoaXMpXG5cbiAgICAgICAgdGhpcy5zZXRNb2RlKHByb3BlcnRpZXMubW9kZSB8fCBNb2RlLlJFUExBWSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTeW5jaHJvbml6ZXIub25UaW1lQ2hhbmdlZCA9IChtaW4sIG1heCwgc3RhcnQsIGVuZCkgPT4gdGhpcy5vblRpbWVDaGFuZ2VkKG1pbiwgbWF4LCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplci5vbkFkZGVkRGF0YVNvdXJjZSA9IChkYXRhU291cmNlSWQpID0+IHRoaXMub25BZGRlZERhdGFTb3VyY2UoZGF0YVNvdXJjZUlkKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplci5vblJlbW92ZWREYXRhU291cmNlID0gKGRhdGFTb3VyY2VJZCkgPT4gdGhpcy5vblJlbW92ZWREYXRhU291cmNlKGRhdGFTb3VyY2VJZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZDtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRNb2RlKG1vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YVN5bmNocm9uaXplcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhU3luY2hyb25pemVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW9kZSA9PT0gTW9kZS5SRVBMQVkpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplciA9IHRoaXMuZGF0YVN5bmNocm9uaXplclJlcGxheTtcbiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSBNb2RlLlJFQUxfVElNRSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhU3luY2hyb25pemVyID0gdGhpcy5kYXRhU3luY2hyb25pemVyUnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pZCA9IHRoaXMuZGF0YVN5bmNocm9uaXplci5pZDtcbiAgICAgICAgZm9yKGxldCBkcyBvZiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIuZ2V0RGF0YVNvdXJjZXMoKSkge1xuICAgICAgICAgICAgYXdhaXQgZHMuc2V0TW9kZShtb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXREYXRhU291cmNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5nZXREYXRhU291cmNlcygpO1xuICAgIH1cbiAgICBnZXRUb3BpY0lkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLmdldFRvcGljSWQoKTtcbiAgICB9XG5cbiAgICBnZXRUaW1lVG9waWNJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5nZXRUaW1lVG9waWNJZCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXJ0VGltZSBvZiB0aGUgZmlyc3QgRGF0YVNvdXJjZSBvYmpldFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gc3RhcnRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0U3RhcnRUaW1lQXNJc29EYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLmdldFN0YXJ0VGltZUFzSXNvRGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXJ0VGltZSBvZiB0aGUgZmlyc3QgRGF0YVNvdXJjZSBvYmpldFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IC0gc3RhcnRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIuZ2V0U3RhcnRUaW1lQXNUaW1lc3RhbXAoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbmRUaW1lIG9mIHRoZSBmaXJzdCBEYXRhU291cmNlIG9iamV0XG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0RW5kVGltZUFzSXNvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5nZXRFbmRUaW1lQXNJc29EYXRlKCk7XG4gICAgfVxuXG4gICAgZ2V0RW5kVGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLmdldEVuZFRpbWVBc1RpbWVzdGFtcCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1pblRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyBJU08gZGF0ZVxuICAgICAqL1xuICAgIGdldE1pblRpbWVBc0lzb0RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIuZ2V0TWluVGltZUFzSXNvRGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1pblRpbWUgb2YgdGhlIGZpcnN0IERhdGFTb3VyY2Ugb2JqZXRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAtIHN0YXJ0VGltZSBhcyB1bml4IHRpbWVzdGFtcFxuICAgICAqL1xuICAgIGdldE1pblRpbWVBc1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5nZXRNaW5UaW1lQXNUaW1lc3RhbXAoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtYXhUaW1lIG9mIHRoZSBmaXJzdCBEYXRhU291cmNlIG9iamV0XG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIElTTyBkYXRlXG4gICAgICovXG4gICAgZ2V0TWF4VGltZUFzSXNvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5nZXRNaW5UaW1lQXNUaW1lc3RhbXAoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtYXhUaW1lIG9mIHRoZSBmaXJzdCBEYXRhU291cmNlIG9iamV0XG4gICAgICogQHJldHVybnMge1N0cmluZ30gLSBlbmRUaW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAgICovXG4gICAgZ2V0TWF4VGltZUFzVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLmdldE1heFRpbWVBc1RpbWVzdGFtcCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlcGxheVNwZWVkXG4gICAgICogQHJldHVybnMge051bWJlcn0gLSB0aGUgcmVwbGF5IHNwZWVkXG4gICAgICovXG4gICAgZ2V0UmVwbGF5U3BlZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIuZ2V0UmVwbGF5U3BlZWQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGUgdGhlIGNvcnJlc3BvbmRpbmcgcnVubmluZyBXZWJXb3JrZXIgYnkgY2FsbGluZyB0ZXJtaW5hdGUoKSBvbiBpdC5cbiAgICAgKi9cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIudGVybWluYXRlKCk7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlKGZuLCBldmVudFR5cGVzKSB7XG4gICAgICAgIHRoaXMuZGF0YVN5bmNocm9uaXplclJ0LnN1YnNjcmliZShmbixldmVudFR5cGVzKTtcbiAgICAgICAgdGhpcy5kYXRhU3luY2hyb25pemVyUmVwbGF5LnN1YnNjcmliZShmbixldmVudFR5cGVzKTtcbiAgICB9XG5cbiAgICBnZXRNb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLmdldE1vZGUoKTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLS0tLS0tIEFTWU5DSFJPTk9VUyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0vL1xuXG4gICAgYXN5bmMgaW5pdERhdGFTb3VyY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLmluaXREYXRhU291cmNlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgRGF0YVNvdXJjZSBvYmplY3QgdG8gdGhlIGxpc3Qgb2YgZGF0YXNvdXJjZXMgdG8gc3luY2hyb25pemUuXG4gICAgICogbm90ZTogZG9uJ3QgZm9yZ2V0IHRvIGNhbGwgcmVzZXQoKSB0byBiZSBzdXJlIHRvIHJlLWluaXQgdGhlIHN5bmNocm9uaXplciBpbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSB7VGltZVNlcmllc0RhdGFTb3VyY2V9IGRhdGFTb3VyY2UgLSB0aGUgbmV3IGRhdGFzb3VyY2UgdG8gYWRkXG4gICAgICovXG4gICAgYXN5bmMgYWRkRGF0YVNvdXJjZShkYXRhU291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGF0YVN5bmNocm9uaXplclJ0LmFkZERhdGFTb3VyY2UoZGF0YVNvdXJjZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFTeW5jaHJvbml6ZXJSZXBsYXkuYWRkRGF0YVNvdXJjZShkYXRhU291cmNlKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIERhdGFTb3VyY2Ugb2JqZWN0IGZyb20gdGhlIGxpc3Qgb2YgZGF0YXNvdXJjZXMgb2YgdGhlIHN5bmNocm9uaXplci5cbiAgICAgKiBAcGFyYW0ge1RpbWVTZXJpZXNEYXRhc291cmNlfSBkYXRhU291cmNlIC0gdGhlIG5ldyBkYXRhc291cmNlIHRvIGFkZFxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZURhdGFTb3VyY2UoZGF0YVNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFTeW5jaHJvbml6ZXJSdC5yZW1vdmVEYXRhU291cmNlKGRhdGFTb3VyY2UpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhU3luY2hyb25pemVyUmVwbGF5LnJlbW92ZURhdGFTb3VyY2UoZGF0YVNvdXJjZSlcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGFTb3VyY2VJZCAtIHRoZSBkYXRhU291cmNlIGlkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSB0aGUgZGF0YSB0byBwdXNoIGludG8gdGhlIGRhdGEgc3luY2hyb25pemVyXG4gICAgICovXG4gICAgYXN5bmMgcHVzaChkYXRhU291cmNlSWQsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5wdXNoKGRhdGFTb3VyY2VJZCwgZGF0YSk7XG4gICAgfVxuXG4gICAgdmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci52ZXJzaW9uKClcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdHMgYWxsIGRhdGFTb3VyY2VzXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhU3luY2hyb25pemVyLmNvbm5lY3QoKVxuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrSW5pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5jaGVja0luaXQoKVxuICAgIH1cblxuICAgIGFzeW5jIGRvQ29ubmVjdCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2RvIGNvbm5lY3QnKVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLmRvQ29ubmVjdCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdHMgYWxsIGRhdGFTb3VyY2VzXG4gICAgICovXG4gICAgYXN5bmMgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5kaXNjb25uZWN0KClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSByZXBsYXlTcGVlZFxuICAgICAqL1xuICAgIGFzeW5jIHNldFJlcGxheVNwZWVkKHJlcGxheVNwZWVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIuc2V0UmVwbGF5U3BlZWQocmVwbGF5U3BlZWQpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGF0YSBzb3VyY2UgdGltZSByYW5nZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydFRpbWUgLSB0aGUgc3RhcnRUaW1lIChpbiBkYXRlIElTTylcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZW5kVGltZSAtIHRoZSBzdGFydFRpbWUgKGluIGRhdGUgSVNPKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByZXBsYXlTcGVlZCAtIHRoZSByZXBsYXkgc3BlZWRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlY29ubmVjdCAtIHJlY29ubmVjdCBpZiB3YXMgY29ubmVjdGVkXG4gICAgICovXG4gICAgYXN5bmMgc2V0VGltZVJhbmdlKHN0YXJ0VGltZSA9IHRoaXMuZ2V0U3RhcnRUaW1lQXNJc29EYXRlKCksXG4gICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWUgPSB0aGlzLmdldEVuZFRpbWVBc0lzb0RhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3BlZWQgPSB0aGlzLmdldFJlcGxheVNwZWVkKCksXG4gICAgICAgICAgICAgICAgICAgICAgIHJlY29ubmVjdCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIuc2V0VGltZVJhbmdlKHN0YXJ0VGltZSxlbmRUaW1lLCByZXBsYXlTcGVlZCxyZWNvbm5lY3QpO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU3luY2hyb25pemVyLnVwZGF0ZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHJlZmVyZW5jZSB0aW1lXG4gICAgICovXG4gICAgYXN5bmMgcmVzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTeW5jaHJvbml6ZXIucmVzZXQoKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDdXJyZW50VGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5nZXRDdXJyZW50VGltZSgpO1xuICAgIH1cblxuICAgIHNldE1pblRpbWUobWluVGltZSkge1xuICAgICAgICB0aGlzLmRhdGFTeW5jaHJvbml6ZXIuc2V0TWluVGltZShtaW5UaW1lKTtcbiAgICB9XG5cbiAgICBzZXRNYXhUaW1lKG1heFRpbWUpIHtcbiAgICAgICAgdGhpcy5kYXRhU3luY2hyb25pemVyLnNldE1heFRpbWUobWF4VGltZSk7XG4gICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAqIENvbm5lY3QgdGhlIGRhdGFTb3VyY2UgdGhlbiB0aGUgcHJvdG9jb2wgd2lsbCBiZSBvcGVuZWQgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBhc3luYyBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVN5bmNocm9uaXplci5pc0Nvbm5lY3RlZCgpO1xuICAgIH1cblxuICAgIG9uVGltZUNoYW5nZWQoc3RhcnQsIG1pbikge1xuICAgIH1cblxuICAgIG9uUmVtb3ZlZERhdGFTb3VyY2UoZGF0YVNvdXJjZUlkKSB7XG4gICAgfVxuXG4gICAgb25BZGRlZERhdGFTb3VyY2UoZGF0YVNvdXJjZUlkKSB7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhU3luY2hyb25pemVyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///25\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/leaflet/dist/leaflet-src.js\nvar leaflet_src = __webpack_require__(1);\nvar leaflet_src_default = /*#__PURE__*/__webpack_require__.n(leaflet_src);\n\n// EXTERNAL MODULE: ./node_modules/leaflet/dist/leaflet.css\nvar leaflet = __webpack_require__(28);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/View.js + 1 modules\nvar View = __webpack_require__(14);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/map/MapView.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * This class is an abstract class in charge of handling common Map operations.\n * @extends View\n */\n\nclass MapView_MapView extends View["a" /* default */] {\n  constructor(properties) {\n    super(properties); // map Layer id to array of corresponding markers\n\n    this.layerIdToMarkers = {}; // map Layer id to array of corresponding polylines\n\n    this.layerIdToPolylines = {}; // map Layer id to array of corresponding polylines\n\n    this.layerIdToEllipsoids = {}; // map Layer id to array of corresponding polygons\n\n    this.layerIdToPolygon = {}; // map Layer id to array of corresponding frustums\n\n    this.layerIdToFrustum = {}; // map Layer id to array of corresponding draping\n\n    this.layerIdToDrapedImage = {};\n  }\n\n  async setData(dataSourceId, data) {\n    const values = data.values;\n\n    for (let i = 0; i < values.length; i++) {\n      const d = values[i];\n\n      if (data.type === \'marker\') {\n        this.updateMarker(d);\n      } else if (data.type === \'polyline\') {\n        this.updatePolyline(d);\n      } else if (data.type === \'drapedImage\') {\n        this.updateDrapedImage(d);\n      } else if (data.type === \'ellipse\') {\n        this.updateEllipse(d);\n      } else if (data.type === \'polygon\') {\n        this.updatePolygon(d);\n      } else if (data.type === \'coplanarPolygon\') {\n        this.updateCoPlanarPolygon(d);\n      } else if (data.type === \'frustum\') {\n        this.updateFrustum(d);\n      }\n    }\n  }\n\n  async addPolygonToLayer(props, polygon) {\n    this.layerIdToPolygon[props.polygonId] = polygon;\n  }\n  /**\n   * Associate a markerId to a Layer for a fast lookup\n   * @protected\n   * @param {PointMarkerLayer.props} layer - the Layer object\n   * @param {Object} markerObject - the Map marker object\n   */\n\n\n  async addMarkerToLayer(props, markerObject) {\n    this.layerIdToMarkers[props.markerId] = markerObject;\n  }\n  /**\n   * Associate a polylineId to a Layer for a fast lookup\n   * @protected\n   * @param {Polyline.props} layer - the Layer object\n   * @param {Object} polylineObject - the Map polyline object\n   */\n\n\n  async addPolylineToLayer(props, polylineObject) {\n    this.layerIdToPolylines[props.polylineId] = polylineObject;\n  }\n  /**\n   * Associate a ellipseId to a Layer for a fast lookup\n   * @protected\n   * @param {Ellipse.props} layer - the Layer object\n   * @param {Object} ellipseObject - the Map ellipse object\n   */\n\n\n  async addEllipseToLayer(props, ellipseObject) {\n    this.layerIdToEllipsoids[props.ellipseId] = ellipseObject;\n  }\n  /**\n   * Associate a drapedImageId to a Layer for a fast lookup\n   * @protected\n   * @param {ImageDraping.props} layer - the Layer object\n   * @param {Object} drapedImageObject - the Map drapedImage object\n   */\n\n\n  async addDrapedImageToLayer(props, drapedImageObject) {\n    this.layerIdToDrapedImage[props.drapedImageId] = drapedImageObject;\n  }\n\n  async addFrustumToLayer(props, frustum) {\n    this.layerIdToFrustum[props.frustumId] = frustum;\n  }\n\n  getPolygons() {\n    const array = [];\n\n    for (let id in this.layerIdToPolygon) {\n      array.push(this.layerIdToPolygon[id]);\n    }\n\n    return array;\n  }\n\n  getPolygon(props) {\n    if (!(props.polygonId in this.layerIdToPolygon)) {\n      return null;\n    }\n\n    return this.layerIdToPolygon[props.polygonId];\n  }\n  /**\n   * Get the markerId associate to the Layer\n   * @protected\n   * @param {PointMarkerLayer.props} props - the Layer Object\n   */\n\n\n  getMarker(props) {\n    if (!(props.markerId in this.layerIdToMarkers)) {\n      return null;\n    }\n\n    return this.layerIdToMarkers[props.markerId];\n  }\n  /**\n   * Get all markers contained in this view\n   * @protected\n   */\n\n\n  getMarkers() {\n    const array = [];\n\n    for (let id in this.layerIdToMarkers) {\n      array.push(this.layerIdToMarkers[id]);\n    }\n\n    return array;\n  }\n  /**\n   * Get all polylines contained in this view\n   * @protected\n   */\n\n\n  getPolylines() {\n    const array = [];\n\n    for (let id in this.layerIdToPolylines) {\n      array.push(this.layerIdToPolylines[id]);\n    }\n\n    return array;\n  }\n  /**\n   * Get all ellpsoids contained in this view\n   * @protected\n   */\n\n\n  getEllipsoids() {\n    const array = [];\n\n    for (let id in this.layerIdToEllipsoids) {\n      array.push(this.layerIdToEllipsoids[id]);\n    }\n\n    return array;\n  }\n  /**\n   * Get the ellipse associate to the Layer\n   * @protected\n   * @param {Ellipse.props} layer - the Layer Object\n   */\n\n\n  getPolyline(props) {\n    if (!(props.polylineId in this.layerIdToEllipsoids)) {\n      return null;\n    }\n\n    return this.layerIdToPolylines[props.polylineId];\n  }\n  /**\n   * Get the ellipse associate to the Layer\n   * @protected\n   * @param {Ellipse.props} layer - the Layer Object\n   */\n\n\n  getEllipse(props) {\n    if (!(props.ellipseId in this.layerIdToEllipsoids)) {\n      return null;\n    }\n\n    return this.layerIdToEllipsoids[props.ellipseId];\n  }\n  /**\n   * Get the polyline associate to the Layer\n   * @protected\n   * @param {Polyline.props} layer - the Layer Object\n   */\n\n\n  getPolyline(props) {\n    if (!(props.polylineId in this.layerIdToPolylines)) {\n      return null;\n    }\n\n    return this.layerIdToPolylines[props.polylineId];\n  }\n  /**\n   * Get the draped image associate to the Layer\n   * @protected\n   * @param {ImageDrapingLayer.props} layer - the Layer Object\n   */\n\n\n  getDrapedImage(props) {\n    if (!(props.drapedImageId in this.layerIdToDrapedImage)) {\n      return null;\n    }\n\n    return this.layerIdToDrapedImage[props.drapedImageId];\n  }\n\n  getFrustums() {\n    const array = [];\n\n    for (let id in this.layerIdToFrustum) {\n      array.push(this.layerIdToFrustum[id]);\n    }\n\n    return array;\n  }\n\n  getFrustum(props) {\n    if (!(props.frustumId in this.layerIdToFrustum)) {\n      return null;\n    }\n\n    return this.layerIdToFrustum[props.frustumId];\n  }\n  /**\n   * Get the Layer associated to its id\n   * @param {String} layerId - the id of the Layer\n   * @return {Layer} - the corresponding layer, null otherwise\n   */\n\n\n  getLayer(layerId) {\n    // find corresponding layer\n    for (let currentLayer of this.layers) {\n      if (currentLayer.props.id === layerId) {\n        return currentLayer;\n      }\n    }\n\n    return null;\n  }\n  /**\n   * Remove Corresponding Layer\n   * @param {Layer} layer - The layer object\n   */\n\n\n  removeAllFromLayer(layer) {\n    // check for marker\n    this.removeMarkers(layer); // check for polylines\n\n    this.removePolylines(layer);\n    this.removeEllipsoids(layer);\n    this.removePolygons(layer);\n    this.removeDrapedImages(layer);\n    this.removeFrustums(layer);\n    super.removeAllFromLayer(layer);\n  }\n\n  removePolygons(layer) {\n    const ids = layer.getIds() || [];\n\n    for (let id of ids) {\n      const polygon = this.layerIdToPolygon[id];\n\n      if (Object(Utils["l" /* isDefined */])(polygon)) {\n        this.removePolygonFromLayer(polygon);\n      } // remove markers ids from Layer map\n\n\n      delete this.layerIdToPolygon[id];\n    }\n  }\n  /**\n   * Remove the markers corresponding to a PointMarker Layer\n   * @param {PointMarkerLayer} layer - the layer to remove the markers from\n   */\n\n\n  removeMarkers(layer) {\n    const ids = layer.getIds() || [];\n\n    for (let id of ids) {\n      const marker = this.layerIdToMarkers[id];\n\n      if (Object(Utils["l" /* isDefined */])(marker)) {\n        this.removeMarkerFromLayer(marker);\n      } // remove markers ids from Layer map\n\n\n      delete this.layerIdToMarkers[id];\n    }\n  }\n  /**\n   * Remove the ellipsoids corresponding to a EllipseLayer Layer\n   * @param {Ellipse} ellipse - the layer to remove the ellipsoids from\n   */\n\n\n  removeEllipsoids(ellipse) {\n    const ids = ellipse.getIds() || [];\n\n    for (let id of ids) {\n      const ellipse = this.layerIdToEllipsoids[id];\n\n      if (Object(Utils["l" /* isDefined */])(ellipse)) {\n        this.removeEllipseFromLayer(ellipse);\n      } // remove polylines ids from Layer map\n\n\n      delete this.layerIdToEllipsoids[id];\n    }\n  }\n  /**\n   * Remove the polylines corresponding to a PolylineLayer Layer\n   * @param {Polyline} polyline - the layer to remove the polylines from\n   */\n\n\n  removePolylines(polyline) {\n    const ids = polyline.getIds() || [];\n\n    for (let id of ids) {\n      const polyline = this.layerIdToPolylines[id];\n\n      if (Object(Utils["l" /* isDefined */])(polyline)) {\n        this.removePolylineFromLayer(polyline);\n      } // remove polylines ids from Layer map\n\n\n      delete this.layerIdToPolylines[id];\n    }\n  }\n  /**\n   * Remove the drapedImage corresponding to a ImageDraping Layer\n   * @param {ImageDraping} imageDraping - the layer to remove the drapedImage from\n   */\n\n\n  removeDrapedImages(drapedImage) {\n    const ids = drapedImage.getIds() || [];\n\n    for (let id of ids) {\n      const drapedImage = this.layerIdToDrapedImage[id];\n\n      if (Object(Utils["l" /* isDefined */])(drapedImage)) {\n        this.removeDrapedImageFromLayer(drapedImage);\n      } // remove drapedImage ids from Layer map\n\n\n      delete this.layerIdToDrapedImage[id];\n    }\n  }\n  /**\n   * Remove the frustums corresponding to a Frustum Layer\n   * @param {FrustumLayer} polyline - the layer to remove the Frustum from\n   */\n\n\n  removeFrustums(layer) {\n    const ids = layer.getIds() || [];\n\n    for (let id of ids) {\n      const frustum = this.layerIdToFrustum[id];\n\n      if (Object(Utils["l" /* isDefined */])(frustum)) {\n        this.removeFrustumFromLayer(frustum);\n      } // remove markers ids from Layer map\n\n\n      delete this.layerIdToFrustum[id];\n    }\n  }\n  /**\n   * Abstract method to remove a marker from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} marker - The Map marker object\n   */\n\n\n  removeMarkerFromLayer(marker) {}\n  /**\n   * Abstract method to remove a polyline from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} polyline - The Map polyline object\n   */\n\n\n  removePolylineFromLayer(polyline) {}\n  /**\n   * Abstract method to remove a draped image from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} drapedImage - The Map drapedImage object\n   */\n\n\n  removeDrapedImageFromLayer(drapedImage) {}\n  /**\n   * Abstract method to remove a polygon from its corresponding layer.\n   * This is library dependant.\n   * @protected\n   * @param {Object} polygon - The Map polygon object\n   */\n\n\n  removePolygonFromLayer(marker) {}\n  /**\n   * Method to call onLeftClick Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerLeftClick(markerId, markerObject, layer, event) {\n    if (Object(Utils["l" /* isDefined */])(layer.onLeftClick)) {\n      layer.onLeftClick.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Method to call onRightClick Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerRightClick(markerId, markerObject, layer, event) {\n    if (Object(Utils["l" /* isDefined */])(layer.onRightClick)) {\n      layer.onRightClick.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Method to call onMove Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerMove(markerId, markerObject, layer, event) {\n    if (Object(Utils["l" /* isDefined */])(layer.onMove)) {\n      layer.onMove.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Method to call onHover Layer method if exists\n   * @param {String} markerId - the Layer markerId\n   * @param {Object} markerObject - the View marker object\n   * @param {PointMarkerLayer} layer - the Layer object\n   * @param {Object} event - the original Map View event\n   */\n\n\n  onMarkerHover(markerId, markerObject, layer, event) {\n    if (Object(Utils["l" /* isDefined */])(layer.onHover)) {\n      layer.onHover.call(layer, markerId, markerObject, event);\n    }\n  }\n  /**\n   * Gets the the Layer id from  a concatenated id\n   * @param {String} id - the concatenated such as layerId$markerId\n   * @return {null|String} the Layer id\n   */\n\n\n  getLayerId(id) {\n    const split = id.split(\'$\');\n\n    if (Object(Utils["l" /* isDefined */])(split) && split.length === 2) {\n      return split[0];\n    }\n\n    return null;\n  }\n  /**\n   * Gets the the Marker id from  a concatenated id\n   * @param {String} id - the concatenated such as layerId$markerId\n   * @return {null|String} the marker id\n   */\n\n\n  getMarkerId(id) {\n    if (!Object(Utils["l" /* isDefined */])(id)) {\n      return null;\n    }\n\n    const split = id.split(\'$\');\n\n    if (Object(Utils["l" /* isDefined */])(split) && split.length === 2) {\n      return split[1];\n    }\n\n    return null;\n  }\n\n  async updateMarker() {}\n\n  async updatePolyline() {}\n\n  async updatePolygon() {}\n\n  async updateEllipse() {}\n\n  async updateCoPlanarPolygon() {}\n\n  async updateDrapedImage() {}\n\n}\n\n/* harmony default export */ var map_MapView = (MapView_MapView);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/view/map/LeafletView.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an "AS IS" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n\n\n/**\n * This class is in charge of displaying GPS/orientation data by adding a marker to the Leaflet Map object.\n * @extends MapView\n * @example\n\n import LeafletView from \'core/ui/view/map/LeafletView.js\';\n\n let leafletMapView = new LeafletView({\n\tcontainer: \'leafletMap\',\n\tlayers: [\n\t  new PointMarkerLayer({\n      dataSourceId: gpsDataSource.id,\n      getLocation: (rec) => ({\n        x: rec.location.lon,\n        y: rec.location.lat,\n        z: rec.location.alt\n      }),\n      icon: \'./images/car-location.png\',\n      iconSize: [32, 64],\n      iconAnchor: [16, 65],\n      name: \'Car\',\n      description: \'GPS car Toulouse\'\n    })\n  ],\n\tautoZoomOnFirstMarker: true\n});\n */\n\nclass LeafletView_LeafletView extends map_MapView {\n  /**\n   * Create a View.\n   * @param {Object} [properties={}] - the properties of the view\n   * @param {String} properties.container - The div element to attach to\n   * @param {Object[]}  [properties.layers=[]] - The initial layers to add\n   * @param {Boolean} [properties.autoZoomOnFirstMarker=false] - auto zoom on the first added marker\n   * @param {Boolean} [properties.follow=false] - follow the marker\n   * @param {Object} [properties.initialView] - Sets the view of the map (geographical center and zoom) with the given animation options. [See details]{@link https://leafletjs.com/reference-1.7.1.html#map-setview}\n   * @param {Object[]} [properties.overlayLayers] - [L.tileLayer]{@link https://leafletjs.com/reference-1.7.1.html#tilelayer-l-tilelayer} objects to use as overlay layer\n   * @param {Object[]} [properties.baseLayers] - [L.tileLayer]{@link https://leafletjs.com/reference-1.7.1.html#tilelayer-l-tilelayer} objects to use as base layer\n   *\n   */\n  constructor(properties) {\n    super({\n      supportedLayers: [\'marker\', \'draping\', \'polyline\', \'polygon\'],\n      ...properties\n    });\n    let cssClass = document.getElementById(this.divId).className;\n    document.getElementById(this.divId).setAttribute("class", cssClass + " " + this.css);\n  }\n\n  beforeAddingItems(options) {\n    // inits the map\n    this.initMap(options);\n  } //---------- MAP SETUP --------------//\n\n  /**\n   *\n   * @private\n   */\n\n\n  initMap(options) {\n    // #region snippet_leafletview_initial_view\n    let initialView = {\n      location: new leaflet_src_default.a.LatLng(0, 0),\n      zoom: 3\n    }; // #endregion snippet_leafletview_initial_view\n\n    this.first = true;\n    this.follow = false;\n    this.autoZoomOnFirstMarker = false;\n    let defaultLayers = this.getDefaultLayers();\n    let defaultLayer = defaultLayers[0].layer;\n    let baseLayers = {};\n    let overlays = {};\n    baseLayers[defaultLayers[0].name] = defaultLayers[0].layer;\n    overlays[defaultLayers[1].name] = defaultLayers[1].layer;\n\n    if (Object(Utils["l" /* isDefined */])(options)) {\n      if (Object(Utils["l" /* isDefined */])(options.initialView)) {\n        initialView = {\n          location: new leaflet_src_default.a.LatLng(options.initialView.lat, options.initialView.lon),\n          zoom: options.initialView.zoom\n        };\n      } // checks autoZoom\n\n\n      if (Object(Utils["l" /* isDefined */])(options.autoZoomOnFirstMarker)) {\n        this.autoZoomOnFirstMarker = options.autoZoomOnFirstMarker;\n      } // checks overlayers\n\n\n      if (Object(Utils["l" /* isDefined */])(options.overlayLayers)) {\n        overlays = options.overlayLayers;\n      } // checks baseLayer\n\n\n      if (Object(Utils["l" /* isDefined */])(options.baseLayers)) {\n        baseLayers = options.baseLayers;\n      }\n\n      if (Object(Utils["l" /* isDefined */])(options.follow)) {\n        this.follow = options.follow;\n      } // checks defaultLayer\n\n\n      if (Object(Utils["l" /* isDefined */])(options.defaultLayer)) {\n        defaultLayer = options.defaultLayer;\n      }\n    } // sets layers to map\n\n\n    this.map = new leaflet_src_default.a.Map(this.divId, {\n      fullscreenControl: true,\n      layers: defaultLayer\n    });\n    leaflet_src_default.a.control.layers(baseLayers, overlays).addTo(this.map);\n    this.map.setView(initialView.location, initialView.zoom); //this.initLayers();\n  }\n  /**\n   * Gets the list of default layers.\n   * @return {Array}\n   */\n\n\n  getDefaultLayers(options) {\n    let maxZoom = 22;\n\n    if (Object(Utils["l" /* isDefined */])(options) && options.maxZoom) {\n      maxZoom = options.maxZoom;\n    } // copyrights\n\n\n    let mbAttr = \'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors\',\n        mbUrl = \'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\';\n    let esriLink = \'<a href="http://www.esri.com/">Esri</a>\';\n    let esriWholink = \'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\'; // leaflet layers\n\n    let esriLayer = leaflet_src_default.a.tileLayer(\'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\', {\n      attribution: \'&copy; \' + esriLink + \', \' + esriWholink,\n      maxZoom: maxZoom,\n      maxNativeZoom: 19\n    });\n    let streets = leaflet_src_default.a.tileLayer(mbUrl, {\n      id: \'mapbox.streets\',\n      attribution: mbAttr,\n      maxZoom: maxZoom\n    });\n    return [{\n      name: "OSM Streets",\n      layer: streets\n    }, {\n      name: "Esri Satellite",\n      layer: esriLayer\n    }];\n  }\n  /**\n   * @private\n   */\n\n\n  initLayers() {\n    // create the tile layer with correct attribution\n    let osmUrl = \'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\';\n    let osmAttrib = \'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors\';\n    let osm = new leaflet_src_default.a.tileLayer(osmUrl, {\n      minZoom: 1,\n      maxZoom: 22,\n      attribution: osmAttrib\n    });\n    this.map.addLayer(osm);\n  }\n  /**\n   * Add a marker to the map.\n   * @param {PointMarkerLayer.properties} properties - the layer properties\n   * @return {Object} the the new created marker\n   */\n\n\n  addMarker(properties) {\n    Object(Utils["c" /* assertDefined */])(properties.location, \'location\'); //create marker\n\n    let marker = null;\n\n    if (properties.icon !== null) {\n      let markerIcon = leaflet_src_default.a.icon({\n        iconAnchor: properties.iconAnchor,\n        iconUrl: properties.icon,\n        iconSize: properties.iconSize\n      });\n      marker = leaflet_src_default.a.marker([properties.location.y, properties.location.x], {\n        icon: markerIcon\n      });\n    } else {\n      marker = leaflet_src_default.a.marker([properties.location.y, properties.location.x]);\n    }\n\n    if (properties.label !== null) {\n      marker.bindTooltip(properties.label, {\n        permanent: false,\n        direction: \'center\',\n        offset: leaflet_src_default.a.point(properties.labelOffset[0], properties.labelOffset[1])\n      });\n    }\n\n    let name = properties.hasOwnProperty("name") && properties.label != null ? properties.label : "";\n    let desc = properties.hasOwnProperty("description") && properties.description != null ? properties.description : "";\n\n    if (!Object(Utils["l" /* isDefined */])(properties.onLeftClick) && (name.length > 0 || desc.length > 0)) {\n      marker.bindPopup(name + \'<div>\' + desc + \'</div>\', {\n        offset: leaflet_src_default.a.point(properties.labelOffset[0], properties.labelOffset[1])\n      });\n    }\n\n    marker.setZIndexOffset(properties.zIndex);\n    marker.id = properties.id + "$" + properties.markerId;\n    marker.addTo(this.map);\n\n    if (properties.hasOwnProperty(properties.orientation)) {\n      marker.setRotationAngle(properties.orientation.heading);\n    }\n\n    return marker;\n  }\n  /**\n   * Add a polyline to the map.\n   * @param {Object} properties\n   */\n\n\n  addPolyline(properties) {\n    const locations = properties.locations;\n    let polylinePoints = [];\n\n    if (Object(Utils["l" /* isDefined */])(locations) && locations.length > 0) {\n      for (let i = 0; i < locations.length; i++) {\n        polylinePoints.push(new leaflet_src_default.a.LatLng(locations[i].y, locations[i].x));\n      }\n    } //create path\n\n\n    let polyline = new leaflet_src_default.a.Polyline(polylinePoints, {\n      color: properties.color,\n      weight: properties.weight,\n      opacity: properties.opacity,\n      smoothFactor: properties.smoothFactor\n    }).addTo(this.map);\n    return polyline;\n  }\n  /**\n   * Updates the marker associated to the layer.\n   * @param {PointMarkerLayer.props} props - The layer properties allowing the update of the marker\n   */\n\n\n  async updateMarker(props) {\n    let marker = this.getMarker(props);\n\n    if (!Object(Utils["l" /* isDefined */])(marker)) {\n      // adds a new marker to the leaflet renderer\n      marker = this.addMarker(props);\n      this.addMarkerToLayer(props, marker);\n      const mId = props.markerId; //need to freeze\n\n      marker.on(\'click\', event => this.onMarkerLeftClick(mId, marker, props, event));\n      marker.on(\'contextmenu\', event => this.onMarkerRightClick(mId, marker, props, event));\n      marker.on(\'mouseover\', event => this.onMarkerHover(mId, marker, props, event));\n    } // get the current marker corresponding to the current markerId value of the PointMarker\n    // updates position\n\n\n    let lon = props.location.x;\n    let lat = props.location.y;\n\n    if (!isNaN(lon) && !isNaN(lat)) {\n      let newLatLng = new leaflet_src_default.a.LatLng(lat, lon);\n      marker.setLatLng(newLatLng);\n\n      if (this.first && this.autoZoomOnFirstMarker || this.follow) {\n        const markerBounds = leaflet_src_default.a.latLngBounds([newLatLng]);\n        this.map.fitBounds(markerBounds, {\n          maxZoom: props.zoomLevel\n        });\n\n        if (this.first) {\n          this.first = false;\n        }\n      }\n    } // updates orientation\n\n\n    if (Object(Utils["l" /* isDefined */])(props.orientation)) {\n      marker.setRotationAngle(props.orientation.heading);\n    }\n\n    if (props.icon !== null && marker._icon.iconUrl !== props.icon) {\n      // updates icon\n      let markerIcon = leaflet_src_default.a.icon({\n        iconAnchor: props.iconAnchor,\n        iconUrl: props.icon\n      });\n      marker.setIcon(markerIcon);\n    }\n\n    marker.setZIndexOffset(props.zIndex);\n  }\n  /**\n   * Abstract method to remove a marker from its corresponding layer.\n   * This is library dependant.\n   * @param {Object} marker - The Map marker object\n   */\n\n\n  removeMarkerFromLayer(marker) {\n    this.map.removeLayer(marker);\n  }\n  /**\n   * Abstract method to remove a polyline from its corresponding layer.\n   * This is library dependant.\n   * @param {Object} polyline - The Map polyline object\n   */\n\n\n  removePolylineFromLayer(polyline) {\n    this.map.removeLayer(polyline);\n  }\n  /**\n   * Updates the polyline associated to the layer.\n   * @param {PolylineLayer.props} props - The layer properties allowing the update of the polyline\n   */\n\n\n  async updatePolyline(props) {\n    let polyline = this.getPolyline(props);\n\n    if (!Object(Utils["l" /* isDefined */])(polyline)) {\n      // adds a new polygon to the leaflet renderer\n      const polylineObj = this.addPolyline(props);\n      this.addPolylineToLayer(props, polylineObj);\n    } else {\n      let polylinePoints = [];\n      const locations = props.locations;\n\n      if (Object(Utils["l" /* isDefined */])(locations) && locations.length > 0) {\n        for (let i = 0; i < locations.length; i++) {\n          polylinePoints.push(new leaflet_src_default.a.LatLng(locations[i].y, locations[i].x));\n        }\n      }\n\n      polyline.setLatLngs(polylinePoints); // update style\n\n      polyline.setStyle({\n        color: props.color,\n        weight: props.weight,\n        opacity: props.opacity\n      });\n    }\n  }\n  /**\n   * Updates the polygon associated to the layer.\n   * @param {Polygon.props} props - The layer properties allowing the update of the polygon\n   */\n\n\n  async updatePolygon(props) {\n    let polygon = this.getPolygon(props);\n\n    if (!Object(Utils["l" /* isDefined */])(polygon)) {\n      // adds a new polygon to the leaflet renderer\n      const polygonObj = this.addPolygon(props);\n      this.addPolygonToLayer(props, polygonObj);\n    } else {\n      // update location\n      const vertices = props.vertices;\n      let polygonPoints = [];\n\n      if (Object(Utils["l" /* isDefined */])(vertices) && vertices.length > 0) {\n        for (let i = 0; i < vertices.length - 1; i = i + 2) {\n          let latLon = new leaflet_src_default.a.LatLng(vertices[i + 1], vertices[i]);\n          polygonPoints.push([latLon.lat, latLon.lng]);\n        }\n      }\n\n      polygon.setLatLngs(polygonPoints); // update style\n\n      polygon.setStyle({\n        color: props.outlineColor,\n        weight: props.outlineWidth,\n        fillColor: props.color,\n        fill: true,\n        fillOpacity: props.opacity\n      });\n    }\n  }\n  /**\n   * Abstract method to remove a polygon from its corresponding layer.\n   * This is library dependant.\n   * @param {Object} polygon - The Map polygon object\n   */\n\n\n  removePolygonFromLayer(polygon) {\n    this.map.removeLayer(polygon);\n  }\n  /**\n   * Add a polygon to the map.\n   * @param {Object} properties\n   */\n\n\n  addPolygon(properties) {\n    const vertices = properties.vertices;\n    let polygonPoints = [];\n\n    if (Object(Utils["l" /* isDefined */])(vertices) && vertices.length > 0) {\n      for (let i = 0; i < vertices.length - 1; i = i + 2) {\n        let latLon = new leaflet_src_default.a.LatLng(vertices[i + 1], vertices[i]);\n        polygonPoints.push([latLon.lat, latLon.lng]);\n      }\n    } //create polygon\n\n\n    let polygon = new leaflet_src_default.a.polygon(polygonPoints, {\n      color: properties.outlineColor,\n      weight: properties.outlineWidth,\n      fillColor: properties.color,\n      fill: true,\n      fillOpacity: properties.opacity\n    }).addTo(this.map);\n    return polygon;\n  }\n\n  attachTo(parentElement) {\n    super.attachTo(parentElement); // Fix leaflet bug when resizing the div parent container\n\n    this.map.invalidateSize();\n  }\n\n  onResize() {\n    super.onResize();\n    let that = this;\n    setTimeout(function () {\n      that.map.invalidateSize();\n    }, 100);\n  }\n\n  onChange(data) {}\n\n}\n/***  little hack starts here ***/\n\n\nleaflet_src_default.a.Map = leaflet_src_default.a.Map.extend({\n  openPopup: function (popup) {\n    this._popup = popup;\n    return this.addLayer(popup).fire(\'popupopen\', {\n      popup: this._popup\n    });\n  }\n}); // Defines rotated marker\n\n(function () {\n  // save these original methods before they are overwritten\n  let proto_initIcon = leaflet_src_default.a.Marker.prototype._initIcon;\n  let proto_setPos = leaflet_src_default.a.Marker.prototype._setPos;\n  let oldIE = leaflet_src_default.a.DomUtil.TRANSFORM === \'msTransform\';\n  leaflet_src_default.a.Marker.addInitHook(function () {\n    let iconAnchor = this.options.icon.options.iconAnchor;\n\n    if (iconAnchor) {\n      iconAnchor = iconAnchor[0] + \'px \' + iconAnchor[1] + \'px\';\n    }\n\n    this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || \'center bottom\';\n    this.options.rotationAngle = this.options.rotationAngle || 0;\n  });\n  leaflet_src_default.a.Marker.include({\n    _initIcon: function () {\n      proto_initIcon.call(this);\n    },\n    _setPos: function (pos) {\n      proto_setPos.call(this, pos);\n\n      if (this.options.rotationAngle) {\n        this._icon.style[leaflet_src_default.a.DomUtil.TRANSFORM + \'Origin\'] = this.options.rotationOrigin;\n\n        if (oldIE) {\n          // for IE 9, use the 2D rotation\n          this._icon.style[leaflet_src_default.a.DomUtil.TRANSFORM] = \' rotate(\' + this.options.rotationAngle + \'deg)\';\n        } else {\n          // for modern browsers, prefer the 3D accelerated version\n          this._icon.style[leaflet_src_default.a.DomUtil.TRANSFORM] += \' rotateZ(\' + this.options.rotationAngle + \'deg)\';\n        }\n      }\n    },\n    setRotationAngle: function (angle) {\n      this.options.rotationAngle = angle;\n      this.update();\n      return this;\n    },\n    setRotationOrigin: function (origin) {\n      this.options.rotationOrigin = origin;\n      this.update();\n      return this;\n    }\n  });\n})();\n/***  end of hack ***/\n\n\n/* harmony default export */ var map_LeafletView = __webpack_exports__["a"] = (LeafletView_LeafletView);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS92aWV3L21hcC9NYXBWaWV3LmpzPzA1ZDciLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL2NvcmUvdWkvdmlldy9tYXAvTGVhZmxldFZpZXcuanM/NWMzMCJdLCJuYW1lcyI6WyJNYXBWaWV3IiwiVmlldyIsImNvbnN0cnVjdG9yIiwicHJvcGVydGllcyIsImxheWVySWRUb01hcmtlcnMiLCJsYXllcklkVG9Qb2x5bGluZXMiLCJsYXllcklkVG9FbGxpcHNvaWRzIiwibGF5ZXJJZFRvUG9seWdvbiIsImxheWVySWRUb0ZydXN0dW0iLCJsYXllcklkVG9EcmFwZWRJbWFnZSIsInNldERhdGEiLCJkYXRhU291cmNlSWQiLCJkYXRhIiwidmFsdWVzIiwiaSIsImxlbmd0aCIsImQiLCJ0eXBlIiwidXBkYXRlTWFya2VyIiwidXBkYXRlUG9seWxpbmUiLCJ1cGRhdGVEcmFwZWRJbWFnZSIsInVwZGF0ZUVsbGlwc2UiLCJ1cGRhdGVQb2x5Z29uIiwidXBkYXRlQ29QbGFuYXJQb2x5Z29uIiwidXBkYXRlRnJ1c3R1bSIsImFkZFBvbHlnb25Ub0xheWVyIiwicHJvcHMiLCJwb2x5Z29uIiwicG9seWdvbklkIiwiYWRkTWFya2VyVG9MYXllciIsIm1hcmtlck9iamVjdCIsIm1hcmtlcklkIiwiYWRkUG9seWxpbmVUb0xheWVyIiwicG9seWxpbmVPYmplY3QiLCJwb2x5bGluZUlkIiwiYWRkRWxsaXBzZVRvTGF5ZXIiLCJlbGxpcHNlT2JqZWN0IiwiZWxsaXBzZUlkIiwiYWRkRHJhcGVkSW1hZ2VUb0xheWVyIiwiZHJhcGVkSW1hZ2VPYmplY3QiLCJkcmFwZWRJbWFnZUlkIiwiYWRkRnJ1c3R1bVRvTGF5ZXIiLCJmcnVzdHVtIiwiZnJ1c3R1bUlkIiwiZ2V0UG9seWdvbnMiLCJhcnJheSIsImlkIiwicHVzaCIsImdldFBvbHlnb24iLCJnZXRNYXJrZXIiLCJnZXRNYXJrZXJzIiwiZ2V0UG9seWxpbmVzIiwiZ2V0RWxsaXBzb2lkcyIsImdldFBvbHlsaW5lIiwiZ2V0RWxsaXBzZSIsImdldERyYXBlZEltYWdlIiwiZ2V0RnJ1c3R1bXMiLCJnZXRGcnVzdHVtIiwiZ2V0TGF5ZXIiLCJsYXllcklkIiwiY3VycmVudExheWVyIiwibGF5ZXJzIiwicmVtb3ZlQWxsRnJvbUxheWVyIiwibGF5ZXIiLCJyZW1vdmVNYXJrZXJzIiwicmVtb3ZlUG9seWxpbmVzIiwicmVtb3ZlRWxsaXBzb2lkcyIsInJlbW92ZVBvbHlnb25zIiwicmVtb3ZlRHJhcGVkSW1hZ2VzIiwicmVtb3ZlRnJ1c3R1bXMiLCJpZHMiLCJnZXRJZHMiLCJpc0RlZmluZWQiLCJyZW1vdmVQb2x5Z29uRnJvbUxheWVyIiwibWFya2VyIiwicmVtb3ZlTWFya2VyRnJvbUxheWVyIiwiZWxsaXBzZSIsInJlbW92ZUVsbGlwc2VGcm9tTGF5ZXIiLCJwb2x5bGluZSIsInJlbW92ZVBvbHlsaW5lRnJvbUxheWVyIiwiZHJhcGVkSW1hZ2UiLCJyZW1vdmVEcmFwZWRJbWFnZUZyb21MYXllciIsInJlbW92ZUZydXN0dW1Gcm9tTGF5ZXIiLCJvbk1hcmtlckxlZnRDbGljayIsImV2ZW50Iiwib25MZWZ0Q2xpY2siLCJjYWxsIiwib25NYXJrZXJSaWdodENsaWNrIiwib25SaWdodENsaWNrIiwib25NYXJrZXJNb3ZlIiwib25Nb3ZlIiwib25NYXJrZXJIb3ZlciIsIm9uSG92ZXIiLCJnZXRMYXllcklkIiwic3BsaXQiLCJnZXRNYXJrZXJJZCIsIkxlYWZsZXRWaWV3Iiwic3VwcG9ydGVkTGF5ZXJzIiwiY3NzQ2xhc3MiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZGl2SWQiLCJjbGFzc05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjc3MiLCJiZWZvcmVBZGRpbmdJdGVtcyIsIm9wdGlvbnMiLCJpbml0TWFwIiwiaW5pdGlhbFZpZXciLCJsb2NhdGlvbiIsIkwiLCJMYXRMbmciLCJ6b29tIiwiZmlyc3QiLCJmb2xsb3ciLCJhdXRvWm9vbU9uRmlyc3RNYXJrZXIiLCJkZWZhdWx0TGF5ZXJzIiwiZ2V0RGVmYXVsdExheWVycyIsImRlZmF1bHRMYXllciIsImJhc2VMYXllcnMiLCJvdmVybGF5cyIsIm5hbWUiLCJsYXQiLCJsb24iLCJvdmVybGF5TGF5ZXJzIiwibWFwIiwiTWFwIiwiZnVsbHNjcmVlbkNvbnRyb2wiLCJjb250cm9sIiwiYWRkVG8iLCJzZXRWaWV3IiwibWF4Wm9vbSIsIm1iQXR0ciIsIm1iVXJsIiwiZXNyaUxpbmsiLCJlc3JpV2hvbGluayIsImVzcmlMYXllciIsInRpbGVMYXllciIsImF0dHJpYnV0aW9uIiwibWF4TmF0aXZlWm9vbSIsInN0cmVldHMiLCJpbml0TGF5ZXJzIiwib3NtVXJsIiwib3NtQXR0cmliIiwib3NtIiwibWluWm9vbSIsImFkZExheWVyIiwiYWRkTWFya2VyIiwiYXNzZXJ0RGVmaW5lZCIsImljb24iLCJtYXJrZXJJY29uIiwiaWNvbkFuY2hvciIsImljb25VcmwiLCJpY29uU2l6ZSIsInkiLCJ4IiwibGFiZWwiLCJiaW5kVG9vbHRpcCIsInBlcm1hbmVudCIsImRpcmVjdGlvbiIsIm9mZnNldCIsInBvaW50IiwibGFiZWxPZmZzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImRlc2MiLCJkZXNjcmlwdGlvbiIsImJpbmRQb3B1cCIsInNldFpJbmRleE9mZnNldCIsInpJbmRleCIsIm9yaWVudGF0aW9uIiwic2V0Um90YXRpb25BbmdsZSIsImhlYWRpbmciLCJhZGRQb2x5bGluZSIsImxvY2F0aW9ucyIsInBvbHlsaW5lUG9pbnRzIiwiUG9seWxpbmUiLCJjb2xvciIsIndlaWdodCIsIm9wYWNpdHkiLCJzbW9vdGhGYWN0b3IiLCJtSWQiLCJvbiIsImlzTmFOIiwibmV3TGF0TG5nIiwic2V0TGF0TG5nIiwibWFya2VyQm91bmRzIiwibGF0TG5nQm91bmRzIiwiZml0Qm91bmRzIiwiem9vbUxldmVsIiwiX2ljb24iLCJzZXRJY29uIiwicmVtb3ZlTGF5ZXIiLCJwb2x5bGluZU9iaiIsInNldExhdExuZ3MiLCJzZXRTdHlsZSIsInBvbHlnb25PYmoiLCJhZGRQb2x5Z29uIiwidmVydGljZXMiLCJwb2x5Z29uUG9pbnRzIiwibGF0TG9uIiwibG5nIiwib3V0bGluZUNvbG9yIiwib3V0bGluZVdpZHRoIiwiZmlsbENvbG9yIiwiZmlsbCIsImZpbGxPcGFjaXR5IiwiYXR0YWNoVG8iLCJwYXJlbnRFbGVtZW50IiwiaW52YWxpZGF0ZVNpemUiLCJvblJlc2l6ZSIsInRoYXQiLCJzZXRUaW1lb3V0Iiwib25DaGFuZ2UiLCJleHRlbmQiLCJvcGVuUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsImZpcmUiLCJwcm90b19pbml0SWNvbiIsIk1hcmtlciIsInByb3RvdHlwZSIsIl9pbml0SWNvbiIsInByb3RvX3NldFBvcyIsIl9zZXRQb3MiLCJvbGRJRSIsIkRvbVV0aWwiLCJUUkFOU0ZPUk0iLCJhZGRJbml0SG9vayIsInJvdGF0aW9uT3JpZ2luIiwicm90YXRpb25BbmdsZSIsImluY2x1ZGUiLCJwb3MiLCJzdHlsZSIsImFuZ2xlIiwidXBkYXRlIiwic2V0Um90YXRpb25PcmlnaW4iLCJvcmlnaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQSxNQUFNQSxlQUFOLFNBQXNCQyx1QkFBdEIsQ0FBMkI7RUFDdkJDLFdBQVcsQ0FBQ0MsVUFBRCxFQUFhO0lBQ3BCLE1BQU1BLFVBQU4sRUFEb0IsQ0FHcEI7O0lBQ0EsS0FBS0MsZ0JBQUwsR0FBd0IsRUFBeEIsQ0FKb0IsQ0FNcEI7O0lBQ0EsS0FBS0Msa0JBQUwsR0FBeUIsRUFBekIsQ0FQb0IsQ0FTcEI7O0lBQ0EsS0FBS0MsbUJBQUwsR0FBMEIs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QyxNQUFWLEVBQWtCO01BQ2pDLEtBQUtsSSxPQUFMLENBQWEwSCxjQUFiLEdBQThCUSxNQUE5QjtNQUNBLEtBQUtGLE1BQUw7TUFDQSxPQUFPLElBQVA7SUFDSDtFQS9CWSxDQUFqQjtBQWlDSCxDQWpERDtBQW9EQTs7O0FBRWdCMUksc0dBQWhCIiwiZmlsZSI6IjI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgVmlldyBmcm9tIFwiLi4vVmlld1wiO1xuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gXCIuLi8uLi8uLi91dGlscy9VdGlsc1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYW4gYWJzdHJhY3QgY2xhc3MgaW4gY2hhcmdlIG9mIGhhbmRsaW5nIGNvbW1vbiBNYXAgb3BlcmF0aW9ucy5cbiAqIEBleHRlbmRzIFZpZXdcbiAqL1xuY2xhc3MgTWFwVmlldyBleHRlbmRzIFZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocHJvcGVydGllcyk7XG5cbiAgICAgICAgLy8gbWFwIExheWVyIGlkIHRvIGFycmF5IG9mIGNvcnJlc3BvbmRpbmcgbWFya2Vyc1xuICAgICAgICB0aGlzLmxheWVySWRUb01hcmtlcnMgPSB7fTtcblxuICAgICAgICAvLyBtYXAgTGF5ZXIgaWQgdG8gYXJyYXkgb2YgY29ycmVzcG9uZGluZyBwb2x5bGluZXNcbiAgICAgICAgdGhpcy5sYXllcklkVG9Qb2x5bGluZXM9IHt9O1xuXG4gICAgICAgIC8vIG1hcCBMYXllciBpZCB0byBhcnJheSBvZiBjb3JyZXNwb25kaW5nIHBvbHlsaW5lc1xuICAgICAgICB0aGlzLmxheWVySWRUb0VsbGlwc29pZHM9IHt9O1xuXG4gICAgICAgIC8vIG1hcCBMYXllciBpZCB0byBhcnJheSBvZiBjb3JyZXNwb25kaW5nIHBvbHlnb25zXG4gICAgICAgIHRoaXMubGF5ZXJJZFRvUG9seWdvbj0ge307XG5cbiAgICAgICAgLy8gbWFwIExheWVyIGlkIHRvIGFycmF5IG9mIGNvcnJlc3BvbmRpbmcgZnJ1c3R1bXNcbiAgICAgICAgdGhpcy5sYXllcklkVG9GcnVzdHVtPSB7fTtcblxuICAgICAgICAvLyBtYXAgTGF5ZXIgaWQgdG8gYXJyYXkgb2YgY29ycmVzcG9uZGluZyBkcmFwaW5nXG4gICAgICAgIHRoaXMubGF5ZXJJZFRvRHJhcGVkSW1hZ2U9IHt9O1xuICAgIH1cblxuICAgIGFzeW5jIHNldERhdGEoZGF0YVNvdXJjZUlkLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGRhdGEudmFsdWVzO1xuICAgICAgICBmb3IobGV0IGk9MDtpIDwgdmFsdWVzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSB2YWx1ZXNbaV07XG4gICAgICAgICAgICBpZihkYXRhLnR5cGUgPT09ICdtYXJrZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXJrZXIoZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYoZGF0YS50eXBlID09PSAncG9seWxpbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb2x5bGluZShkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihkYXRhLnR5cGUgPT09ICdkcmFwZWRJbWFnZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURyYXBlZEltYWdlKGQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGRhdGEudHlwZSA9PT0gJ2VsbGlwc2UnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFbGxpcHNlKGQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdwb2x5Z29uJykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUG9seWdvbihkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY29wbGFuYXJQb2x5Z29uJykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29QbGFuYXJQb2x5Z29uKGQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGRhdGEudHlwZSA9PT0gJ2ZydXN0dW0nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGcnVzdHVtKGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkUG9seWdvblRvTGF5ZXIocHJvcHMsIHBvbHlnb24pIHtcbiAgICAgICAgdGhpcy5sYXllcklkVG9Qb2x5Z29uW3Byb3BzLnBvbHlnb25JZF0gPSBwb2x5Z29uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc29jaWF0ZSBhIG1hcmtlcklkIHRvIGEgTGF5ZXIgZm9yIGEgZmFzdCBsb29rdXBcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtQb2ludE1hcmtlckxheWVyLnByb3BzfSBsYXllciAtIHRoZSBMYXllciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFya2VyT2JqZWN0IC0gdGhlIE1hcCBtYXJrZXIgb2JqZWN0XG4gICAgICovXG4gICAgYXN5bmMgYWRkTWFya2VyVG9MYXllcihwcm9wcywgbWFya2VyT2JqZWN0KSB7XG4gICAgICAgIHRoaXMubGF5ZXJJZFRvTWFya2Vyc1twcm9wcy5tYXJrZXJJZF0gPSBtYXJrZXJPYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXNzb2NpYXRlIGEgcG9seWxpbmVJZCB0byBhIExheWVyIGZvciBhIGZhc3QgbG9va3VwXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UG9seWxpbmUucHJvcHN9IGxheWVyIC0gdGhlIExheWVyIG9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwb2x5bGluZU9iamVjdCAtIHRoZSBNYXAgcG9seWxpbmUgb2JqZWN0XG4gICAgICovXG4gICAgYXN5bmMgYWRkUG9seWxpbmVUb0xheWVyKHByb3BzLCBwb2x5bGluZU9iamVjdCkge1xuICAgICAgICB0aGlzLmxheWVySWRUb1BvbHlsaW5lc1twcm9wcy5wb2x5bGluZUlkXSA9IHBvbHlsaW5lT2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc29jaWF0ZSBhIGVsbGlwc2VJZCB0byBhIExheWVyIGZvciBhIGZhc3QgbG9va3VwXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7RWxsaXBzZS5wcm9wc30gbGF5ZXIgLSB0aGUgTGF5ZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGVsbGlwc2VPYmplY3QgLSB0aGUgTWFwIGVsbGlwc2Ugb2JqZWN0XG4gICAgICovXG4gICAgYXN5bmMgYWRkRWxsaXBzZVRvTGF5ZXIocHJvcHMsIGVsbGlwc2VPYmplY3QpIHtcbiAgICAgICAgdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzW3Byb3BzLmVsbGlwc2VJZF0gPSBlbGxpcHNlT2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc29jaWF0ZSBhIGRyYXBlZEltYWdlSWQgdG8gYSBMYXllciBmb3IgYSBmYXN0IGxvb2t1cFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge0ltYWdlRHJhcGluZy5wcm9wc30gbGF5ZXIgLSB0aGUgTGF5ZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRyYXBlZEltYWdlT2JqZWN0IC0gdGhlIE1hcCBkcmFwZWRJbWFnZSBvYmplY3RcbiAgICAgKi9cbiAgICBhc3luYyBhZGREcmFwZWRJbWFnZVRvTGF5ZXIocHJvcHMsIGRyYXBlZEltYWdlT2JqZWN0KSB7XG4gICAgICAgIHRoaXMubGF5ZXJJZFRvRHJhcGVkSW1hZ2VbcHJvcHMuZHJhcGVkSW1hZ2VJZF0gPSBkcmFwZWRJbWFnZU9iamVjdDtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRGcnVzdHVtVG9MYXllcihwcm9wcywgZnJ1c3R1bSkge1xuICAgICAgICB0aGlzLmxheWVySWRUb0ZydXN0dW1bcHJvcHMuZnJ1c3R1bUlkXSA9IGZydXN0dW07XG4gICAgfVxuXG4gICAgZ2V0UG9seWdvbnMoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy5sYXllcklkVG9Qb2x5Z29uKSB7XG4gICAgICAgICAgICBhcnJheS5wdXNoKHRoaXMubGF5ZXJJZFRvUG9seWdvbltpZF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICBnZXRQb2x5Z29uKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMucG9seWdvbklkIGluICB0aGlzLmxheWVySWRUb1BvbHlnb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXllcklkVG9Qb2x5Z29uW3Byb3BzLnBvbHlnb25JZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXJrZXJJZCBhc3NvY2lhdGUgdG8gdGhlIExheWVyXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7UG9pbnRNYXJrZXJMYXllci5wcm9wc30gcHJvcHMgLSB0aGUgTGF5ZXIgT2JqZWN0XG4gICAgICovXG4gICAgZ2V0TWFya2VyKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMubWFya2VySWQgaW4gIHRoaXMubGF5ZXJJZFRvTWFya2VycykpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVySWRUb01hcmtlcnNbcHJvcHMubWFya2VySWRdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgbWFya2VycyBjb250YWluZWQgaW4gdGhpcyB2aWV3XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGdldE1hcmtlcnMoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy5sYXllcklkVG9NYXJrZXJzKSB7XG4gICAgICAgICAgICBhcnJheS5wdXNoKHRoaXMubGF5ZXJJZFRvTWFya2Vyc1tpZF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIHBvbHlsaW5lcyBjb250YWluZWQgaW4gdGhpcyB2aWV3XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGdldFBvbHlsaW5lcygpIHtcbiAgICAgICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICAgICAgZm9yKGxldCBpZCBpbiB0aGlzLmxheWVySWRUb1BvbHlsaW5lcykge1xuICAgICAgICAgICAgYXJyYXkucHVzaCh0aGlzLmxheWVySWRUb1BvbHlsaW5lc1tpZF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGVsbHBzb2lkcyBjb250YWluZWQgaW4gdGhpcyB2aWV3XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGdldEVsbGlwc29pZHMoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzKSB7XG4gICAgICAgICAgICBhcnJheS5wdXNoKHRoaXMubGF5ZXJJZFRvRWxsaXBzb2lkc1tpZF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsbGlwc2UgYXNzb2NpYXRlIHRvIHRoZSBMYXllclxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge0VsbGlwc2UucHJvcHN9IGxheWVyIC0gdGhlIExheWVyIE9iamVjdFxuICAgICAqL1xuICAgIGdldFBvbHlsaW5lKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMucG9seWxpbmVJZCBpbiAgdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzW3Byb3BzLnBvbHlsaW5lSWRdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxsaXBzZSBhc3NvY2lhdGUgdG8gdGhlIExheWVyXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7RWxsaXBzZS5wcm9wc30gbGF5ZXIgLSB0aGUgTGF5ZXIgT2JqZWN0XG4gICAgICovXG4gICAgZ2V0RWxsaXBzZShwcm9wcykge1xuICAgICAgICBpZighKHByb3BzLmVsbGlwc2VJZCBpbiAgdGhpcy5sYXllcklkVG9FbGxpcHNvaWRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJJZFRvRWxsaXBzb2lkc1twcm9wcy5lbGxpcHNlSWRdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcG9seWxpbmUgYXNzb2NpYXRlIHRvIHRoZSBMYXllclxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge1BvbHlsaW5lLnByb3BzfSBsYXllciAtIHRoZSBMYXllciBPYmplY3RcbiAgICAgKi9cbiAgICBnZXRQb2x5bGluZShwcm9wcykge1xuICAgICAgICBpZighKHByb3BzLnBvbHlsaW5lSWQgaW4gIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzW3Byb3BzLnBvbHlsaW5lSWRdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZHJhcGVkIGltYWdlIGFzc29jaWF0ZSB0byB0aGUgTGF5ZXJcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtJbWFnZURyYXBpbmdMYXllci5wcm9wc30gbGF5ZXIgLSB0aGUgTGF5ZXIgT2JqZWN0XG4gICAgICovXG4gICAgZ2V0RHJhcGVkSW1hZ2UocHJvcHMpIHtcbiAgICAgICAgaWYoIShwcm9wcy5kcmFwZWRJbWFnZUlkIGluICB0aGlzLmxheWVySWRUb0RyYXBlZEltYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJJZFRvRHJhcGVkSW1hZ2VbcHJvcHMuZHJhcGVkSW1hZ2VJZF07XG4gICAgfVxuXG4gICAgZ2V0RnJ1c3R1bXMoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy5sYXllcklkVG9GcnVzdHVtKSB7XG4gICAgICAgICAgICBhcnJheS5wdXNoKHRoaXMubGF5ZXJJZFRvRnJ1c3R1bVtpZF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICBnZXRGcnVzdHVtKHByb3BzKSB7XG4gICAgICAgIGlmKCEocHJvcHMuZnJ1c3R1bUlkIGluICB0aGlzLmxheWVySWRUb0ZydXN0dW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXllcklkVG9GcnVzdHVtW3Byb3BzLmZydXN0dW1JZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBMYXllciBhc3NvY2lhdGVkIHRvIGl0cyBpZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYXllcklkIC0gdGhlIGlkIG9mIHRoZSBMYXllclxuICAgICAqIEByZXR1cm4ge0xheWVyfSAtIHRoZSBjb3JyZXNwb25kaW5nIGxheWVyLCBudWxsIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGdldExheWVyKGxheWVySWQpIHtcbiAgICAgICAgLy8gZmluZCBjb3JyZXNwb25kaW5nIGxheWVyXG4gICAgICAgIGZvciAobGV0IGN1cnJlbnRMYXllciBvZiB0aGlzLmxheWVycykge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXllci5wcm9wcy5pZCA9PT0gbGF5ZXJJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50TGF5ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIENvcnJlc3BvbmRpbmcgTGF5ZXJcbiAgICAgKiBAcGFyYW0ge0xheWVyfSBsYXllciAtIFRoZSBsYXllciBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVBbGxGcm9tTGF5ZXIobGF5ZXIpIHtcbiAgICAgICAgLy8gY2hlY2sgZm9yIG1hcmtlclxuICAgICAgICB0aGlzLnJlbW92ZU1hcmtlcnMobGF5ZXIpO1xuXG4gICAgICAgIC8vIGNoZWNrIGZvciBwb2x5bGluZXNcbiAgICAgICAgdGhpcy5yZW1vdmVQb2x5bGluZXMobGF5ZXIpO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlRWxsaXBzb2lkcyhsYXllcik7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVQb2x5Z29ucyhsYXllcik7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVEcmFwZWRJbWFnZXMobGF5ZXIpO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlRnJ1c3R1bXMobGF5ZXIpO1xuXG4gICAgICAgIHN1cGVyLnJlbW92ZUFsbEZyb21MYXllcihsYXllcik7XG5cbiAgICB9XG5cbiAgICByZW1vdmVQb2x5Z29ucyhsYXllcikge1xuICAgICAgICBjb25zdCBpZHMgPSBsYXllci5nZXRJZHMoKSB8fCBbXTtcbiAgICAgICAgZm9yKGxldCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvbHlnb24gPSB0aGlzLmxheWVySWRUb1BvbHlnb25baWRdO1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChwb2x5Z29uKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUG9seWdvbkZyb21MYXllcihwb2x5Z29uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVtb3ZlIG1hcmtlcnMgaWRzIGZyb20gTGF5ZXIgbWFwXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sYXllcklkVG9Qb2x5Z29uW2lkXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgbWFya2VycyBjb3JyZXNwb25kaW5nIHRvIGEgUG9pbnRNYXJrZXIgTGF5ZXJcbiAgICAgKiBAcGFyYW0ge1BvaW50TWFya2VyTGF5ZXJ9IGxheWVyIC0gdGhlIGxheWVyIHRvIHJlbW92ZSB0aGUgbWFya2VycyBmcm9tXG4gICAgICovXG4gICAgcmVtb3ZlTWFya2VycyhsYXllcikge1xuICAgICAgICBjb25zdCBpZHMgPSBsYXllci5nZXRJZHMoKSB8fCBbXTtcbiAgICAgICAgZm9yKGxldCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IHRoaXMubGF5ZXJJZFRvTWFya2Vyc1tpZF07XG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG1hcmtlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU1hcmtlckZyb21MYXllcihtYXJrZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZW1vdmUgbWFya2VycyBpZHMgZnJvbSBMYXllciBtYXBcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxheWVySWRUb01hcmtlcnNbaWRdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBlbGxpcHNvaWRzIGNvcnJlc3BvbmRpbmcgdG8gYSBFbGxpcHNlTGF5ZXIgTGF5ZXJcbiAgICAgKiBAcGFyYW0ge0VsbGlwc2V9IGVsbGlwc2UgLSB0aGUgbGF5ZXIgdG8gcmVtb3ZlIHRoZSBlbGxpcHNvaWRzIGZyb21cbiAgICAgKi9cbiAgICByZW1vdmVFbGxpcHNvaWRzKGVsbGlwc2UpIHtcbiAgICAgICAgY29uc3QgaWRzID0gZWxsaXBzZS5nZXRJZHMoKSB8fCBbXTtcbiAgICAgICAgZm9yKGxldCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsbGlwc2UgPSB0aGlzLmxheWVySWRUb0VsbGlwc29pZHNbaWRdO1xuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKGVsbGlwc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFbGxpcHNlRnJvbUxheWVyKGVsbGlwc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZW1vdmUgcG9seWxpbmVzIGlkcyBmcm9tIExheWVyIG1hcFxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubGF5ZXJJZFRvRWxsaXBzb2lkc1tpZF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIHBvbHlsaW5lcyBjb3JyZXNwb25kaW5nIHRvIGEgUG9seWxpbmVMYXllciBMYXllclxuICAgICAqIEBwYXJhbSB7UG9seWxpbmV9IHBvbHlsaW5lIC0gdGhlIGxheWVyIHRvIHJlbW92ZSB0aGUgcG9seWxpbmVzIGZyb21cbiAgICAgKi9cbiAgICByZW1vdmVQb2x5bGluZXMocG9seWxpbmUpIHtcbiAgICAgICAgY29uc3QgaWRzID0gcG9seWxpbmUuZ2V0SWRzKCkgfHwgW107XG4gICAgICAgIGZvcihsZXQgaWQgb2YgaWRzKSB7XG4gICAgICAgICAgICBjb25zdCBwb2x5bGluZSA9IHRoaXMubGF5ZXJJZFRvUG9seWxpbmVzW2lkXTtcbiAgICAgICAgICAgIGlmKGlzRGVmaW5lZChwb2x5bGluZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBvbHlsaW5lRnJvbUxheWVyKHBvbHlsaW5lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHBvbHlsaW5lcyBpZHMgZnJvbSBMYXllciBtYXBcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxheWVySWRUb1BvbHlsaW5lc1tpZF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGRyYXBlZEltYWdlIGNvcnJlc3BvbmRpbmcgdG8gYSBJbWFnZURyYXBpbmcgTGF5ZXJcbiAgICAgKiBAcGFyYW0ge0ltYWdlRHJhcGluZ30gaW1hZ2VEcmFwaW5nIC0gdGhlIGxheWVyIHRvIHJlbW92ZSB0aGUgZHJhcGVkSW1hZ2UgZnJvbVxuICAgICAqL1xuICAgIHJlbW92ZURyYXBlZEltYWdlcyhkcmFwZWRJbWFnZSkge1xuICAgICAgICBjb25zdCBpZHMgPSBkcmFwZWRJbWFnZS5nZXRJZHMoKSB8fCBbXTtcbiAgICAgICAgZm9yKGxldCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRyYXBlZEltYWdlID0gdGhpcy5sYXllcklkVG9EcmFwZWRJbWFnZVtpZF07XG4gICAgICAgICAgICBpZihpc0RlZmluZWQoZHJhcGVkSW1hZ2UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVEcmFwZWRJbWFnZUZyb21MYXllcihkcmFwZWRJbWFnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBkcmFwZWRJbWFnZSBpZHMgZnJvbSBMYXllciBtYXBcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxheWVySWRUb0RyYXBlZEltYWdlW2lkXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZnJ1c3R1bXMgY29ycmVzcG9uZGluZyB0byBhIEZydXN0dW0gTGF5ZXJcbiAgICAgKiBAcGFyYW0ge0ZydXN0dW1MYXllcn0gcG9seWxpbmUgLSB0aGUgbGF5ZXIgdG8gcmVtb3ZlIHRoZSBGcnVzdHVtIGZyb21cbiAgICAgKi9cbiAgICByZW1vdmVGcnVzdHVtcyhsYXllcikge1xuICAgICAgICBjb25zdCBpZHMgPSBsYXllci5nZXRJZHMoKSB8fCBbXTtcbiAgICAgICAgZm9yKGxldCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZydXN0dW0gPSB0aGlzLmxheWVySWRUb0ZydXN0dW1baWRdO1xuICAgICAgICAgICAgaWYoaXNEZWZpbmVkKGZydXN0dW0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcnVzdHVtRnJvbUxheWVyKGZydXN0dW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZW1vdmUgbWFya2VycyBpZHMgZnJvbSBMYXllciBtYXBcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxheWVySWRUb0ZydXN0dW1baWRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCB0byByZW1vdmUgYSBtYXJrZXIgZnJvbSBpdHMgY29ycmVzcG9uZGluZyBsYXllci5cbiAgICAgKiBUaGlzIGlzIGxpYnJhcnkgZGVwZW5kYW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFya2VyIC0gVGhlIE1hcCBtYXJrZXIgb2JqZWN0XG4gICAgICovXG4gICAgcmVtb3ZlTWFya2VyRnJvbUxheWVyKG1hcmtlcikge31cblxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCB0byByZW1vdmUgYSBwb2x5bGluZSBmcm9tIGl0cyBjb3JyZXNwb25kaW5nIGxheWVyLlxuICAgICAqIFRoaXMgaXMgbGlicmFyeSBkZXBlbmRhbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwb2x5bGluZSAtIFRoZSBNYXAgcG9seWxpbmUgb2JqZWN0XG4gICAgICovXG4gICAgcmVtb3ZlUG9seWxpbmVGcm9tTGF5ZXIocG9seWxpbmUpIHt9XG5cbiAgICAvKipcbiAgICAgKiBBYnN0cmFjdCBtZXRob2QgdG8gcmVtb3ZlIGEgZHJhcGVkIGltYWdlIGZyb20gaXRzIGNvcnJlc3BvbmRpbmcgbGF5ZXIuXG4gICAgICogVGhpcyBpcyBsaWJyYXJ5IGRlcGVuZGFudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRyYXBlZEltYWdlIC0gVGhlIE1hcCBkcmFwZWRJbWFnZSBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVEcmFwZWRJbWFnZUZyb21MYXllcihkcmFwZWRJbWFnZSkge31cblxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCB0byByZW1vdmUgYSBwb2x5Z29uIGZyb20gaXRzIGNvcnJlc3BvbmRpbmcgbGF5ZXIuXG4gICAgICogVGhpcyBpcyBsaWJyYXJ5IGRlcGVuZGFudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBvbHlnb24gLSBUaGUgTWFwIHBvbHlnb24gb2JqZWN0XG4gICAgICovXG4gICAgcmVtb3ZlUG9seWdvbkZyb21MYXllcihtYXJrZXIpIHt9XG5cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gY2FsbCBvbkxlZnRDbGljayBMYXllciBtZXRob2QgaWYgZXhpc3RzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcmtlcklkIC0gdGhlIExheWVyIG1hcmtlcklkXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcmtlck9iamVjdCAtIHRoZSBWaWV3IG1hcmtlciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge1BvaW50TWFya2VyTGF5ZXJ9IGxheWVyIC0gdGhlIExheWVyIG9iamVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAtIHRoZSBvcmlnaW5hbCBNYXAgVmlldyBldmVudFxuICAgICAqL1xuICAgIG9uTWFya2VyTGVmdENsaWNrKG1hcmtlcklkLCBtYXJrZXJPYmplY3QsIGxheWVyLCBldmVudCkge1xuICAgICAgICBpZiAoaXNEZWZpbmVkKGxheWVyLm9uTGVmdENsaWNrKSkge1xuICAgICAgICAgICAgbGF5ZXIub25MZWZ0Q2xpY2suY2FsbChsYXllcixtYXJrZXJJZCwgbWFya2VyT2JqZWN0LCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gY2FsbCBvblJpZ2h0Q2xpY2sgTGF5ZXIgbWV0aG9kIGlmIGV4aXN0c1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYXJrZXJJZCAtIHRoZSBMYXllciBtYXJrZXJJZFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXJrZXJPYmplY3QgLSB0aGUgVmlldyBtYXJrZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtQb2ludE1hcmtlckxheWVyfSBsYXllciAtIHRoZSBMYXllciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgLSB0aGUgb3JpZ2luYWwgTWFwIFZpZXcgZXZlbnRcbiAgICAgKi9cbiAgICBvbk1hcmtlclJpZ2h0Q2xpY2sobWFya2VySWQsIG1hcmtlck9iamVjdCwgbGF5ZXIsIGV2ZW50KSB7XG4gICAgICAgIGlmIChpc0RlZmluZWQobGF5ZXIub25SaWdodENsaWNrKSkge1xuICAgICAgICAgICAgbGF5ZXIub25SaWdodENsaWNrLmNhbGwobGF5ZXIsbWFya2VySWQsIG1hcmtlck9iamVjdCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGNhbGwgb25Nb3ZlIExheWVyIG1ldGhvZCBpZiBleGlzdHNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFya2VySWQgLSB0aGUgTGF5ZXIgbWFya2VySWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFya2VyT2JqZWN0IC0gdGhlIFZpZXcgbWFya2VyIG9iamVjdFxuICAgICAqIEBwYXJhbSB7UG9pbnRNYXJrZXJMYXllcn0gbGF5ZXIgLSB0aGUgTGF5ZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IC0gdGhlIG9yaWdpbmFsIE1hcCBWaWV3IGV2ZW50XG4gICAgICovXG4gICAgb25NYXJrZXJNb3ZlKG1hcmtlcklkLCBtYXJrZXJPYmplY3QsIGxheWVyLCBldmVudCkge1xuICAgICAgICBpZiAoaXNEZWZpbmVkKGxheWVyLm9uTW92ZSkpIHtcbiAgICAgICAgICAgIGxheWVyLm9uTW92ZS5jYWxsKGxheWVyLG1hcmtlcklkLCBtYXJrZXJPYmplY3QsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBjYWxsIG9uSG92ZXIgTGF5ZXIgbWV0aG9kIGlmIGV4aXN0c1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYXJrZXJJZCAtIHRoZSBMYXllciBtYXJrZXJJZFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXJrZXJPYmplY3QgLSB0aGUgVmlldyBtYXJrZXIgb2JqZWN0XG4gICAgICogQHBhcmFtIHtQb2ludE1hcmtlckxheWVyfSBsYXllciAtIHRoZSBMYXllciBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgLSB0aGUgb3JpZ2luYWwgTWFwIFZpZXcgZXZlbnRcbiAgICAgKi9cbiAgICBvbk1hcmtlckhvdmVyKG1hcmtlcklkLCBtYXJrZXJPYmplY3QsIGxheWVyLCBldmVudCkge1xuICAgICAgICBpZiAoaXNEZWZpbmVkKGxheWVyLm9uSG92ZXIpKSB7XG4gICAgICAgICAgICBsYXllci5vbkhvdmVyLmNhbGwobGF5ZXIsbWFya2VySWQsIG1hcmtlck9iamVjdCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdGhlIExheWVyIGlkIGZyb20gIGEgY29uY2F0ZW5hdGVkIGlkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gdGhlIGNvbmNhdGVuYXRlZCBzdWNoIGFzIGxheWVySWQkbWFya2VySWRcbiAgICAgKiBAcmV0dXJuIHtudWxsfFN0cmluZ30gdGhlIExheWVyIGlkXG4gICAgICovXG4gICAgZ2V0TGF5ZXJJZChpZCkge1xuICAgICAgICBjb25zdCBzcGxpdCA9IGlkLnNwbGl0KCckJyk7XG5cbiAgICAgICAgaWYoaXNEZWZpbmVkKHNwbGl0KSAmJiBzcGxpdC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgcmV0dXJuICBzcGxpdFswXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB0aGUgTWFya2VyIGlkIGZyb20gIGEgY29uY2F0ZW5hdGVkIGlkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gdGhlIGNvbmNhdGVuYXRlZCBzdWNoIGFzIGxheWVySWQkbWFya2VySWRcbiAgICAgKiBAcmV0dXJuIHtudWxsfFN0cmluZ30gdGhlIG1hcmtlciBpZFxuICAgICAqL1xuICAgIGdldE1hcmtlcklkKGlkKSB7XG4gICAgICAgIGlmKCFpc0RlZmluZWQoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzcGxpdCA9IGlkLnNwbGl0KCckJyk7XG5cbiAgICAgICAgaWYoaXNEZWZpbmVkKHNwbGl0KSAmJiBzcGxpdC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiAgc3BsaXRbMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlTWFya2VyKCkge31cbiAgICBhc3luYyB1cGRhdGVQb2x5bGluZSgpIHt9XG4gICAgYXN5bmMgdXBkYXRlUG9seWdvbigpIHt9XG4gICAgYXN5bmMgdXBkYXRlRWxsaXBzZSgpIHt9XG4gICAgYXN5bmMgdXBkYXRlQ29QbGFuYXJQb2x5Z29uKCkge31cbiAgICBhc3luYyB1cGRhdGVEcmFwZWRJbWFnZSgpIHt9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWFwVmlldztcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjAgTWF0aGlldSBEaGFpbmF1dC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtpc0RlZmluZWQsIGFzc2VydCwgYXNzZXJ0RGVmaW5lZH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL1V0aWxzLmpzXCI7XG5pbXBvcnQgTCBmcm9tICdsZWFmbGV0JztcbmltcG9ydCAnbGVhZmxldC9kaXN0L2xlYWZsZXQuY3NzJztcbmltcG9ydCBNYXBWaWV3IGZyb20gXCIuL01hcFZpZXdcIjtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGluIGNoYXJnZSBvZiBkaXNwbGF5aW5nIEdQUy9vcmllbnRhdGlvbiBkYXRhIGJ5IGFkZGluZyBhIG1hcmtlciB0byB0aGUgTGVhZmxldCBNYXAgb2JqZWN0LlxuICogQGV4dGVuZHMgTWFwVmlld1xuICogQGV4YW1wbGVcblxuIGltcG9ydCBMZWFmbGV0VmlldyBmcm9tICdjb3JlL3VpL3ZpZXcvbWFwL0xlYWZsZXRWaWV3LmpzJztcblxuIGxldCBsZWFmbGV0TWFwVmlldyA9IG5ldyBMZWFmbGV0Vmlldyh7XG5cdGNvbnRhaW5lcjogJ2xlYWZsZXRNYXAnLFxuXHRsYXllcnM6IFtcblx0ICBuZXcgUG9pbnRNYXJrZXJMYXllcih7XG4gICAgICBkYXRhU291cmNlSWQ6IGdwc0RhdGFTb3VyY2UuaWQsXG4gICAgICBnZXRMb2NhdGlvbjogKHJlYykgPT4gKHtcbiAgICAgICAgeDogcmVjLmxvY2F0aW9uLmxvbixcbiAgICAgICAgeTogcmVjLmxvY2F0aW9uLmxhdCxcbiAgICAgICAgejogcmVjLmxvY2F0aW9uLmFsdFxuICAgICAgfSksXG4gICAgICBpY29uOiAnLi9pbWFnZXMvY2FyLWxvY2F0aW9uLnBuZycsXG4gICAgICBpY29uU2l6ZTogWzMyLCA2NF0sXG4gICAgICBpY29uQW5jaG9yOiBbMTYsIDY1XSxcbiAgICAgIG5hbWU6ICdDYXInLFxuICAgICAgZGVzY3JpcHRpb246ICdHUFMgY2FyIFRvdWxvdXNlJ1xuICAgIH0pXG4gIF0sXG5cdGF1dG9ab29tT25GaXJzdE1hcmtlcjogdHJ1ZVxufSk7XG4gKi9cbmNsYXNzIExlYWZsZXRWaWV3IGV4dGVuZHMgTWFwVmlldyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVmlldy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIC0gdGhlIHByb3BlcnRpZXMgb2YgdGhlIHZpZXdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5jb250YWluZXIgLSBUaGUgZGl2IGVsZW1lbnQgdG8gYXR0YWNoIHRvXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gIFtwcm9wZXJ0aWVzLmxheWVycz1bXV0gLSBUaGUgaW5pdGlhbCBsYXllcnMgdG8gYWRkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbcHJvcGVydGllcy5hdXRvWm9vbU9uRmlyc3RNYXJrZXI9ZmFsc2VdIC0gYXV0byB6b29tIG9uIHRoZSBmaXJzdCBhZGRlZCBtYXJrZXJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtwcm9wZXJ0aWVzLmZvbGxvdz1mYWxzZV0gLSBmb2xsb3cgdGhlIG1hcmtlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcy5pbml0aWFsVmlld10gLSBTZXRzIHRoZSB2aWV3IG9mIHRoZSBtYXAgKGdlb2dyYXBoaWNhbCBjZW50ZXIgYW5kIHpvb20pIHdpdGggdGhlIGdpdmVuIGFuaW1hdGlvbiBvcHRpb25zLiBbU2VlIGRldGFpbHNde0BsaW5rIGh0dHBzOi8vbGVhZmxldGpzLmNvbS9yZWZlcmVuY2UtMS43LjEuaHRtbCNtYXAtc2V0dmlld31cbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBbcHJvcGVydGllcy5vdmVybGF5TGF5ZXJzXSAtIFtMLnRpbGVMYXllcl17QGxpbmsgaHR0cHM6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS0xLjcuMS5odG1sI3RpbGVsYXllci1sLXRpbGVsYXllcn0gb2JqZWN0cyB0byB1c2UgYXMgb3ZlcmxheSBsYXllclxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IFtwcm9wZXJ0aWVzLmJhc2VMYXllcnNdIC0gW0wudGlsZUxheWVyXXtAbGluayBodHRwczovL2xlYWZsZXRqcy5jb20vcmVmZXJlbmNlLTEuNy4xLmh0bWwjdGlsZWxheWVyLWwtdGlsZWxheWVyfSBvYmplY3RzIHRvIHVzZSBhcyBiYXNlIGxheWVyXG4gICAgICpcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIHN1cHBvcnRlZExheWVyczogWydtYXJrZXInLCdkcmFwaW5nJywgJ3BvbHlsaW5lJywgJ3BvbHlnb24nXSxcbiAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBjc3NDbGFzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2SWQpLmNsYXNzTmFtZTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXZJZCkuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgY3NzQ2xhc3MrXCIgXCIrdGhpcy5jc3MpO1xuICAgIH1cblxuICAgIGJlZm9yZUFkZGluZ0l0ZW1zKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gaW5pdHMgdGhlIG1hcFxuICAgICAgICB0aGlzLmluaXRNYXAob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8tLS0tLS0tLS0tIE1BUCBTRVRVUCAtLS0tLS0tLS0tLS0tLS8vXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGluaXRNYXAob3B0aW9ucykge1xuICAgICAgICAvLyAjcmVnaW9uIHNuaXBwZXRfbGVhZmxldHZpZXdfaW5pdGlhbF92aWV3XG4gICAgICAgIGxldCBpbml0aWFsVmlldyA9IHtcbiAgICAgICAgICAgIGxvY2F0aW9uOiBuZXcgTC5MYXRMbmcoMCwgMCksXG4gICAgICAgICAgICB6b29tOiAzXG4gICAgICAgIH07XG4gICAgICAgIC8vICNlbmRyZWdpb24gc25pcHBldF9sZWFmbGV0dmlld19pbml0aWFsX3ZpZXdcbiAgICAgICAgdGhpcy5maXJzdCA9IHRydWU7XG4gICAgICAgIHRoaXMuZm9sbG93ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXV0b1pvb21PbkZpcnN0TWFya2VyID0gZmFsc2U7XG4gICAgICAgIGxldCBkZWZhdWx0TGF5ZXJzID0gdGhpcy5nZXREZWZhdWx0TGF5ZXJzKCk7XG5cbiAgICAgICAgbGV0IGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbMF0ubGF5ZXI7XG5cbiAgICAgICAgbGV0IGJhc2VMYXllcnMgPSB7fTtcbiAgICAgICAgbGV0IG92ZXJsYXlzID0ge307XG5cbiAgICAgICAgYmFzZUxheWVyc1tkZWZhdWx0TGF5ZXJzWzBdLm5hbWVdID0gZGVmYXVsdExheWVyc1swXS5sYXllcjtcbiAgICAgICAgb3ZlcmxheXNbZGVmYXVsdExheWVyc1sxXS5uYW1lXSA9IGRlZmF1bHRMYXllcnNbMV0ubGF5ZXI7XG4gICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9ucy5pbml0aWFsVmlldykpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsVmlldyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IG5ldyBMLkxhdExuZyhvcHRpb25zLmluaXRpYWxWaWV3LmxhdCwgb3B0aW9ucy5pbml0aWFsVmlldy5sb24pLFxuICAgICAgICAgICAgICAgICAgICB6b29tOiBvcHRpb25zLmluaXRpYWxWaWV3Lnpvb21cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2tzIGF1dG9ab29tXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbnMuYXV0b1pvb21PbkZpcnN0TWFya2VyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0b1pvb21PbkZpcnN0TWFya2VyID0gb3B0aW9ucy5hdXRvWm9vbU9uRmlyc3RNYXJrZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNoZWNrcyBvdmVybGF5ZXJzXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbnMub3ZlcmxheUxheWVycykpIHtcbiAgICAgICAgICAgICAgICBvdmVybGF5cyA9IG9wdGlvbnMub3ZlcmxheUxheWVycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY2hlY2tzIGJhc2VMYXllclxuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb25zLmJhc2VMYXllcnMpKSB7XG4gICAgICAgICAgICAgICAgYmFzZUxheWVycyA9IG9wdGlvbnMuYmFzZUxheWVycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb25zLmZvbGxvdykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvbGxvdyA9IG9wdGlvbnMuZm9sbG93O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjaGVja3MgZGVmYXVsdExheWVyXG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbnMuZGVmYXVsdExheWVyKSkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRMYXllciA9IG9wdGlvbnMuZGVmYXVsdExheWVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0cyBsYXllcnMgdG8gbWFwXG4gICAgICAgIHRoaXMubWFwID0gbmV3IEwuTWFwKHRoaXMuZGl2SWQsIHtcbiAgICAgICAgICAgIGZ1bGxzY3JlZW5Db250cm9sOiB0cnVlLFxuICAgICAgICAgICAgbGF5ZXJzOiBkZWZhdWx0TGF5ZXJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgTC5jb250cm9sLmxheWVycyhiYXNlTGF5ZXJzLCBvdmVybGF5cykuYWRkVG8odGhpcy5tYXApO1xuXG4gICAgICAgIHRoaXMubWFwLnNldFZpZXcoaW5pdGlhbFZpZXcubG9jYXRpb24sIGluaXRpYWxWaWV3Lnpvb20pO1xuXG4gICAgICAgIC8vdGhpcy5pbml0TGF5ZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbGlzdCBvZiBkZWZhdWx0IGxheWVycy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXREZWZhdWx0TGF5ZXJzKG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IG1heFpvb20gPSAyMjtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb25zKSAmJiBvcHRpb25zLm1heFpvb20pIHtcbiAgICAgICAgICAgIG1heFpvb20gPSBvcHRpb25zLm1heFpvb207XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29weXJpZ2h0c1xuICAgICAgICBsZXQgbWJBdHRyID0gJ01hcCBkYXRhIMKpIDxhIGhyZWY9XCJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmdcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMnLFxuICAgICAgICAgICAgbWJVcmwgPSAnaHR0cDovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZyc7XG5cbiAgICAgICAgbGV0IGVzcmlMaW5rID0gJzxhIGhyZWY9XCJodHRwOi8vd3d3LmVzcmkuY29tL1wiPkVzcmk8L2E+JztcbiAgICAgICAgbGV0IGVzcmlXaG9saW5rID0gJ2ktY3ViZWQsIFVTREEsIFVTR1MsIEFFWCwgR2VvRXllLCBHZXRtYXBwaW5nLCBBZXJvZ3JpZCwgSUdOLCBJR1AsIFVQUi1FR1AsIGFuZCB0aGUgR0lTIFVzZXIgQ29tbXVuaXR5JztcblxuICAgICAgICAvLyBsZWFmbGV0IGxheWVyc1xuICAgICAgICBsZXQgZXNyaUxheWVyID0gTC50aWxlTGF5ZXIoXG4gICAgICAgICAgICAnaHR0cDovL3NlcnZlci5hcmNnaXNvbmxpbmUuY29tL0FyY0dJUy9yZXN0L3NlcnZpY2VzL1dvcmxkX0ltYWdlcnkvTWFwU2VydmVyL3RpbGUve3p9L3t5fS97eH0nLCB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRpb246ICcmY29weTsgJyArIGVzcmlMaW5rICsgJywgJyArIGVzcmlXaG9saW5rLFxuICAgICAgICAgICAgICAgIG1heFpvb206IG1heFpvb20sXG4gICAgICAgICAgICAgICAgbWF4TmF0aXZlWm9vbTogMTlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBzdHJlZXRzID0gTC50aWxlTGF5ZXIobWJVcmwsIHtpZDogJ21hcGJveC5zdHJlZXRzJywgYXR0cmlidXRpb246IG1iQXR0ciwgbWF4Wm9vbTogbWF4Wm9vbX0pO1xuXG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAgbmFtZTogXCJPU00gU3RyZWV0c1wiLFxuICAgICAgICAgICAgbGF5ZXI6IHN0cmVldHNcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogXCJFc3JpIFNhdGVsbGl0ZVwiLFxuICAgICAgICAgICAgbGF5ZXI6IGVzcmlMYXllclxuICAgICAgICB9XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGluaXRMYXllcnMoKSB7XG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgdGlsZSBsYXllciB3aXRoIGNvcnJlY3QgYXR0cmlidXRpb25cbiAgICAgICAgbGV0IG9zbVVybCA9ICdodHRwOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJztcbiAgICAgICAgbGV0IG9zbUF0dHJpYiA9ICdNYXAgZGF0YSDCqSA8YSBocmVmPVwiaHR0cDovL29wZW5zdHJlZXRtYXAub3JnXCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJztcbiAgICAgICAgbGV0IG9zbSA9IG5ldyBMLnRpbGVMYXllcihvc21VcmwsIHtcbiAgICAgICAgICAgIG1pblpvb206IDEsXG4gICAgICAgICAgICBtYXhab29tOiAyMixcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uOiBvc21BdHRyaWJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFwLmFkZExheWVyKG9zbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgbWFya2VyIHRvIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtQb2ludE1hcmtlckxheWVyLnByb3BlcnRpZXN9IHByb3BlcnRpZXMgLSB0aGUgbGF5ZXIgcHJvcGVydGllc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gdGhlIHRoZSBuZXcgY3JlYXRlZCBtYXJrZXJcbiAgICAgKi9cbiAgICBhZGRNYXJrZXIocHJvcGVydGllcykge1xuICAgICAgICBhc3NlcnREZWZpbmVkKHByb3BlcnRpZXMubG9jYXRpb24sJ2xvY2F0aW9uJyk7XG4gICAgICAgIC8vY3JlYXRlIG1hcmtlclxuICAgICAgICBsZXQgbWFya2VyID0gbnVsbDtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMuaWNvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IG1hcmtlckljb24gPSBMLmljb24oe1xuICAgICAgICAgICAgICAgIGljb25BbmNob3I6IHByb3BlcnRpZXMuaWNvbkFuY2hvcixcbiAgICAgICAgICAgICAgICBpY29uVXJsOiBwcm9wZXJ0aWVzLmljb24sXG4gICAgICAgICAgICAgICAgaWNvblNpemU6IHByb3BlcnRpZXMuaWNvblNpemVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXJrZXIgPSBMLm1hcmtlcihbcHJvcGVydGllcy5sb2NhdGlvbi55LCBwcm9wZXJ0aWVzLmxvY2F0aW9uLnhdLCB7XG4gICAgICAgICAgICAgICAgaWNvbjogbWFya2VySWNvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXJrZXIgPSBMLm1hcmtlcihbcHJvcGVydGllcy5sb2NhdGlvbi55LCBwcm9wZXJ0aWVzLmxvY2F0aW9uLnhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmxhYmVsICE9PSBudWxsKSB7XG4gICAgICAgICAgICBtYXJrZXIuYmluZFRvb2x0aXAocHJvcGVydGllcy5sYWJlbCwge1xuICAgICAgICAgICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IEwucG9pbnQocHJvcGVydGllcy5sYWJlbE9mZnNldFswXSwgcHJvcGVydGllcy5sYWJlbE9mZnNldFsxXSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5hbWUgPSBwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KFwibmFtZVwiKSAmJiBwcm9wZXJ0aWVzLmxhYmVsICE9IG51bGwgPyBwcm9wZXJ0aWVzLmxhYmVsIDogXCJcIjtcbiAgICAgICAgbGV0IGRlc2MgPSBwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KFwiZGVzY3JpcHRpb25cIikgJiYgcHJvcGVydGllcy5kZXNjcmlwdGlvbiAhPSBudWxsID8gcHJvcGVydGllcy5kZXNjcmlwdGlvbiA6IFwiXCI7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKHByb3BlcnRpZXMub25MZWZ0Q2xpY2spICYmIChuYW1lLmxlbmd0aCA+IDAgfHwgZGVzYy5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgbWFya2VyLmJpbmRQb3B1cChuYW1lICsgJzxkaXY+JyArIGRlc2MgKyAnPC9kaXY+Jyx7XG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBMLnBvaW50KHByb3BlcnRpZXMubGFiZWxPZmZzZXRbMF0sIHByb3BlcnRpZXMubGFiZWxPZmZzZXRbMV0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1hcmtlci5zZXRaSW5kZXhPZmZzZXQocHJvcGVydGllcy56SW5kZXgpO1xuICAgICAgICBtYXJrZXIuaWQgPSBwcm9wZXJ0aWVzLmlkK1wiJFwiK3Byb3BlcnRpZXMubWFya2VySWQ7XG4gICAgICAgIG1hcmtlci5hZGRUbyh0aGlzLm1hcCk7XG4gICAgICAgIGlmKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcGVydGllcy5vcmllbnRhdGlvbikpIHtcbiAgICAgICAgICAgIG1hcmtlci5zZXRSb3RhdGlvbkFuZ2xlKHByb3BlcnRpZXMub3JpZW50YXRpb24uaGVhZGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIHBvbHlsaW5lIHRvIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBhZGRQb2x5bGluZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IHByb3BlcnRpZXMubG9jYXRpb25zO1xuICAgICAgICBsZXQgcG9seWxpbmVQb2ludHMgPSBbXTtcblxuICAgICAgICBpZihpc0RlZmluZWQobG9jYXRpb25zKSAmJiBsb2NhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwb2x5bGluZVBvaW50cy5wdXNoKG5ldyBMLkxhdExuZyhcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zW2ldLnksXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uc1tpXS54KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL2NyZWF0ZSBwYXRoXG4gICAgICAgIGxldCBwb2x5bGluZSA9IG5ldyBMLlBvbHlsaW5lKHBvbHlsaW5lUG9pbnRzLCB7XG4gICAgICAgICAgICBjb2xvcjogcHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgIHdlaWdodDogcHJvcGVydGllcy53ZWlnaHQsXG4gICAgICAgICAgICBvcGFjaXR5OiBwcm9wZXJ0aWVzLm9wYWNpdHksXG4gICAgICAgICAgICBzbW9vdGhGYWN0b3I6IHByb3BlcnRpZXMuc21vb3RoRmFjdG9yXG4gICAgICAgIH0pLmFkZFRvKHRoaXMubWFwKTtcblxuICAgICAgICByZXR1cm4gcG9seWxpbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgbWFya2VyIGFzc29jaWF0ZWQgdG8gdGhlIGxheWVyLlxuICAgICAqIEBwYXJhbSB7UG9pbnRNYXJrZXJMYXllci5wcm9wc30gcHJvcHMgLSBUaGUgbGF5ZXIgcHJvcGVydGllcyBhbGxvd2luZyB0aGUgdXBkYXRlIG9mIHRoZSBtYXJrZXJcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVNYXJrZXIocHJvcHMpIHtcbiAgICAgICAgbGV0IG1hcmtlciA9IHRoaXMuZ2V0TWFya2VyKHByb3BzKTtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQobWFya2VyKSkge1xuICAgICAgICAgICAgLy8gYWRkcyBhIG5ldyBtYXJrZXIgdG8gdGhlIGxlYWZsZXQgcmVuZGVyZXJcbiAgICAgICAgICAgIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuYWRkTWFya2VyVG9MYXllcihwcm9wcywgbWFya2VyKTtcbiAgICAgICAgICAgIGNvbnN0IG1JZCA9IHByb3BzLm1hcmtlcklkOyAvL25lZWQgdG8gZnJlZXplXG4gICAgICAgICAgICBtYXJrZXIub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB0aGlzLm9uTWFya2VyTGVmdENsaWNrKG1JZCxtYXJrZXIsIHByb3BzLCBldmVudCkpO1xuICAgICAgICAgICAgbWFya2VyLm9uKCdjb250ZXh0bWVudScsIChldmVudCkgPT4gdGhpcy5vbk1hcmtlclJpZ2h0Q2xpY2sobUlkLG1hcmtlciwgcHJvcHMsIGV2ZW50KSk7XG4gICAgICAgICAgICBtYXJrZXIub24oJ21vdXNlb3ZlcicsIChldmVudCkgPT4gdGhpcy5vbk1hcmtlckhvdmVyKG1JZCxtYXJrZXIsIHByb3BzLCBldmVudCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBjdXJyZW50IG1hcmtlciBjb3JyZXNwb25kaW5nIHRvIHRoZSBjdXJyZW50IG1hcmtlcklkIHZhbHVlIG9mIHRoZSBQb2ludE1hcmtlclxuICAgICAgICAvLyB1cGRhdGVzIHBvc2l0aW9uXG4gICAgICAgIGxldCBsb24gPSBwcm9wcy5sb2NhdGlvbi54O1xuICAgICAgICBsZXQgbGF0ID0gcHJvcHMubG9jYXRpb24ueTtcblxuICAgICAgICBpZiAoIWlzTmFOKGxvbikgJiYgIWlzTmFOKGxhdCkpIHtcbiAgICAgICAgICAgIGxldCBuZXdMYXRMbmcgPSBuZXcgTC5MYXRMbmcobGF0LCBsb24pO1xuICAgICAgICAgICAgbWFya2VyLnNldExhdExuZyhuZXdMYXRMbmcpO1xuICAgICAgICAgICAgaWYoKHRoaXMuZmlyc3QgJiYgdGhpcy5hdXRvWm9vbU9uRmlyc3RNYXJrZXIpIHx8IHRoaXMuZm9sbG93KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFya2VyQm91bmRzID0gTC5sYXRMbmdCb3VuZHMoW25ld0xhdExuZyBdKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcC5maXRCb3VuZHMobWFya2VyQm91bmRzLCB7XG4gICAgICAgICAgICAgICAgICAgIG1heFpvb206IHByb3BzLnpvb21MZXZlbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZXMgb3JpZW50YXRpb25cbiAgICAgICAgaWYoaXNEZWZpbmVkKHByb3BzLm9yaWVudGF0aW9uKSkge1xuICAgICAgICAgICAgbWFya2VyLnNldFJvdGF0aW9uQW5nbGUocHJvcHMub3JpZW50YXRpb24uaGVhZGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvcHMuaWNvbiAhPT0gbnVsbCAmJiBtYXJrZXIuX2ljb24uaWNvblVybCAhPT0gcHJvcHMuaWNvbikge1xuICAgICAgICAgICAgLy8gdXBkYXRlcyBpY29uXG4gICAgICAgICAgICBsZXQgbWFya2VySWNvbiA9IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogcHJvcHMuaWNvbkFuY2hvcixcbiAgICAgICAgICAgICAgICBpY29uVXJsOiBwcm9wcy5pY29uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1hcmtlci5zZXRJY29uKG1hcmtlckljb24pO1xuICAgICAgICB9XG4gICAgICAgIG1hcmtlci5zZXRaSW5kZXhPZmZzZXQocHJvcHMuekluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBYnN0cmFjdCBtZXRob2QgdG8gcmVtb3ZlIGEgbWFya2VyIGZyb20gaXRzIGNvcnJlc3BvbmRpbmcgbGF5ZXIuXG4gICAgICogVGhpcyBpcyBsaWJyYXJ5IGRlcGVuZGFudC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFya2VyIC0gVGhlIE1hcCBtYXJrZXIgb2JqZWN0XG4gICAgICovXG4gICAgcmVtb3ZlTWFya2VyRnJvbUxheWVyKG1hcmtlcikge1xuICAgICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCB0byByZW1vdmUgYSBwb2x5bGluZSBmcm9tIGl0cyBjb3JyZXNwb25kaW5nIGxheWVyLlxuICAgICAqIFRoaXMgaXMgbGlicmFyeSBkZXBlbmRhbnQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBvbHlsaW5lIC0gVGhlIE1hcCBwb2x5bGluZSBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVQb2x5bGluZUZyb21MYXllcihwb2x5bGluZSkge1xuICAgICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcihwb2x5bGluZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcG9seWxpbmUgYXNzb2NpYXRlZCB0byB0aGUgbGF5ZXIuXG4gICAgICogQHBhcmFtIHtQb2x5bGluZUxheWVyLnByb3BzfSBwcm9wcyAtIFRoZSBsYXllciBwcm9wZXJ0aWVzIGFsbG93aW5nIHRoZSB1cGRhdGUgb2YgdGhlIHBvbHlsaW5lXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlUG9seWxpbmUocHJvcHMpIHtcbiAgICAgICAgbGV0IHBvbHlsaW5lID0gdGhpcy5nZXRQb2x5bGluZShwcm9wcyk7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKHBvbHlsaW5lKSkge1xuICAgICAgICAgICAgLy8gYWRkcyBhIG5ldyBwb2x5Z29uIHRvIHRoZSBsZWFmbGV0IHJlbmRlcmVyXG4gICAgICAgICAgICBjb25zdCBwb2x5bGluZU9iaiA9IHRoaXMuYWRkUG9seWxpbmUocHJvcHMpO1xuICAgICAgICAgICAgdGhpcy5hZGRQb2x5bGluZVRvTGF5ZXIocHJvcHMsIHBvbHlsaW5lT2JqKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwb2x5bGluZVBvaW50cyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25zID0gcHJvcHMubG9jYXRpb25zO1xuXG4gICAgICAgICAgICBpZihpc0RlZmluZWQobG9jYXRpb25zKSAmJiBsb2NhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvbHlsaW5lUG9pbnRzLnB1c2gobmV3IEwuTGF0TG5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zW2ldLnksXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnNbaV0ueClcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2x5bGluZS5zZXRMYXRMbmdzKHBvbHlsaW5lUG9pbnRzKTtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIHN0eWxlXG4gICAgICAgICAgICBwb2x5bGluZS5zZXRTdHlsZSh7XG4gICAgICAgICAgICAgICAgY29sb3I6IHByb3BzLmNvbG9yLFxuICAgICAgICAgICAgICAgIHdlaWdodDogcHJvcHMud2VpZ2h0LFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IHByb3BzLm9wYWNpdHlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcG9seWdvbiBhc3NvY2lhdGVkIHRvIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge1BvbHlnb24ucHJvcHN9IHByb3BzIC0gVGhlIGxheWVyIHByb3BlcnRpZXMgYWxsb3dpbmcgdGhlIHVwZGF0ZSBvZiB0aGUgcG9seWdvblxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZVBvbHlnb24ocHJvcHMpIHtcbiAgICAgICAgbGV0IHBvbHlnb24gPSB0aGlzLmdldFBvbHlnb24ocHJvcHMpO1xuICAgICAgICBpZiAoIWlzRGVmaW5lZChwb2x5Z29uKSkge1xuICAgICAgICAgICAgLy8gYWRkcyBhIG5ldyBwb2x5Z29uIHRvIHRoZSBsZWFmbGV0IHJlbmRlcmVyXG4gICAgICAgICAgICBjb25zdCBwb2x5Z29uT2JqID0gdGhpcy5hZGRQb2x5Z29uKHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuYWRkUG9seWdvblRvTGF5ZXIocHJvcHMsIHBvbHlnb25PYmopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdXBkYXRlIGxvY2F0aW9uXG4gICAgICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IHByb3BzLnZlcnRpY2VzO1xuXG4gICAgICAgICAgICBsZXQgcG9seWdvblBvaW50cyA9IFtdO1xuXG4gICAgICAgICAgICBpZihpc0RlZmluZWQodmVydGljZXMpICYmIHZlcnRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aCAtIDE7IGkgPSBpICsgMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGF0TG9uID0gbmV3IEwuTGF0TG5nKHZlcnRpY2VzW2kgKyAxIF0sIHZlcnRpY2VzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgcG9seWdvblBvaW50cy5wdXNoKFtsYXRMb24ubGF0LGxhdExvbi5sbmddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2x5Z29uLnNldExhdExuZ3MocG9seWdvblBvaW50cyk7XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzdHlsZVxuICAgICAgICAgICAgcG9seWdvbi5zZXRTdHlsZSh7XG4gICAgICAgICAgICAgICAgY29sb3I6IHByb3BzLm91dGxpbmVDb2xvcixcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IHByb3BzLm91dGxpbmVXaWR0aCxcbiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IHByb3BzLmNvbG9yLFxuICAgICAgICAgICAgICAgIGZpbGwgOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiBwcm9wcy5vcGFjaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFic3RyYWN0IG1ldGhvZCB0byByZW1vdmUgYSBwb2x5Z29uIGZyb20gaXRzIGNvcnJlc3BvbmRpbmcgbGF5ZXIuXG4gICAgICogVGhpcyBpcyBsaWJyYXJ5IGRlcGVuZGFudC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcG9seWdvbiAtIFRoZSBNYXAgcG9seWdvbiBvYmplY3RcbiAgICAgKi9cbiAgICByZW1vdmVQb2x5Z29uRnJvbUxheWVyKHBvbHlnb24pIHtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIocG9seWdvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcG9seWdvbiB0byB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgYWRkUG9seWdvbihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gcHJvcGVydGllcy52ZXJ0aWNlcztcblxuICAgICAgICBsZXQgcG9seWdvblBvaW50cyA9IFtdO1xuXG4gICAgICAgIGlmKGlzRGVmaW5lZCh2ZXJ0aWNlcykgJiYgdmVydGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5sZW5ndGggLSAxOyBpID0gaSArIDIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbGF0TG9uID0gbmV3IEwuTGF0TG5nKHZlcnRpY2VzW2kgKyAxIF0sIHZlcnRpY2VzW2ldKTtcbiAgICAgICAgICAgICAgICBwb2x5Z29uUG9pbnRzLnB1c2goW2xhdExvbi5sYXQsbGF0TG9uLmxuZ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9jcmVhdGUgcG9seWdvblxuICAgICAgICBsZXQgcG9seWdvbiA9IG5ldyBMLnBvbHlnb24ocG9seWdvblBvaW50cywge1xuICAgICAgICAgICAgY29sb3I6IHByb3BlcnRpZXMub3V0bGluZUNvbG9yLFxuICAgICAgICAgICAgd2VpZ2h0OiBwcm9wZXJ0aWVzLm91dGxpbmVXaWR0aCxcbiAgICAgICAgICAgIGZpbGxDb2xvcjogcHJvcGVydGllcy5jb2xvcixcbiAgICAgICAgICAgIGZpbGwgOiB0cnVlLFxuICAgICAgICAgICAgZmlsbE9wYWNpdHk6IHByb3BlcnRpZXMub3BhY2l0eVxuICAgICAgICB9KS5hZGRUbyh0aGlzLm1hcCk7XG4gICAgICAgIHJldHVybiBwb2x5Z29uO1xuICAgIH1cblxuICAgIGF0dGFjaFRvKHBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIuYXR0YWNoVG8ocGFyZW50RWxlbWVudCk7XG4gICAgICAgIC8vIEZpeCBsZWFmbGV0IGJ1ZyB3aGVuIHJlc2l6aW5nIHRoZSBkaXYgcGFyZW50IGNvbnRhaW5lclxuICAgICAgICB0aGlzLm1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuICAgIH1cblxuICAgIG9uUmVzaXplKCkge1xuICAgICAgICBzdXBlci5vblJlc2l6ZSgpO1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgdGhhdC5tYXAuaW52YWxpZGF0ZVNpemUoKX0sIDEwMCk7XG5cbiAgICB9XG5cbiAgICBvbkNoYW5nZShkYXRhKSB7fVxufVxuXG4vKioqICBsaXR0bGUgaGFjayBzdGFydHMgaGVyZSAqKiovXG5cbkwuTWFwID0gTC5NYXAuZXh0ZW5kKHtcbiAgICBvcGVuUG9wdXA6IGZ1bmN0aW9uIChwb3B1cCkge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRMYXllcihwb3B1cCkuZmlyZSgncG9wdXBvcGVuJywge1xuICAgICAgICAgICAgcG9wdXA6IHRoaXMuX3BvcHVwXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vLyBEZWZpbmVzIHJvdGF0ZWQgbWFya2VyXG4oZnVuY3Rpb24gKCkge1xuICAgIC8vIHNhdmUgdGhlc2Ugb3JpZ2luYWwgbWV0aG9kcyBiZWZvcmUgdGhleSBhcmUgb3ZlcndyaXR0ZW5cbiAgICBsZXQgcHJvdG9faW5pdEljb24gPSBMLk1hcmtlci5wcm90b3R5cGUuX2luaXRJY29uO1xuICAgIGxldCBwcm90b19zZXRQb3MgPSBMLk1hcmtlci5wcm90b3R5cGUuX3NldFBvcztcblxuICAgIGxldCBvbGRJRSA9IChMLkRvbVV0aWwuVFJBTlNGT1JNID09PSAnbXNUcmFuc2Zvcm0nKTtcblxuICAgIEwuTWFya2VyLmFkZEluaXRIb29rKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGljb25BbmNob3IgPSB0aGlzLm9wdGlvbnMuaWNvbi5vcHRpb25zLmljb25BbmNob3I7XG4gICAgICAgIGlmIChpY29uQW5jaG9yKSB7XG4gICAgICAgICAgICBpY29uQW5jaG9yID0gKGljb25BbmNob3JbMF0gKyAncHggJyArIGljb25BbmNob3JbMV0gKyAncHgnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMucm90YXRpb25PcmlnaW4gPSB0aGlzLm9wdGlvbnMucm90YXRpb25PcmlnaW4gfHwgaWNvbkFuY2hvciB8fCAnY2VudGVyIGJvdHRvbSc7XG4gICAgICAgIHRoaXMub3B0aW9ucy5yb3RhdGlvbkFuZ2xlID0gdGhpcy5vcHRpb25zLnJvdGF0aW9uQW5nbGUgfHwgMDtcbiAgICB9KTtcblxuICAgIEwuTWFya2VyLmluY2x1ZGUoe1xuICAgICAgICBfaW5pdEljb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb3RvX2luaXRJY29uLmNhbGwodGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX3NldFBvczogZnVuY3Rpb24gKHBvcykge1xuICAgICAgICAgICAgcHJvdG9fc2V0UG9zLmNhbGwodGhpcywgcG9zKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yb3RhdGlvbkFuZ2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faWNvbi5zdHlsZVtMLkRvbVV0aWwuVFJBTlNGT1JNICsgJ09yaWdpbiddID0gdGhpcy5vcHRpb25zLnJvdGF0aW9uT3JpZ2luO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9sZElFKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciBJRSA5LCB1c2UgdGhlIDJEIHJvdGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ljb24uc3R5bGVbTC5Eb21VdGlsLlRSQU5TRk9STV0gPSAnIHJvdGF0ZSgnICsgdGhpcy5vcHRpb25zLnJvdGF0aW9uQW5nbGUgKyAnZGVnKSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIG1vZGVybiBicm93c2VycywgcHJlZmVyIHRoZSAzRCBhY2NlbGVyYXRlZCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ljb24uc3R5bGVbTC5Eb21VdGlsLlRSQU5TRk9STV0gKz0gJyByb3RhdGVaKCcgKyB0aGlzLm9wdGlvbnMucm90YXRpb25BbmdsZSArICdkZWcpJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0Um90YXRpb25BbmdsZTogZnVuY3Rpb24gKGFuZ2xlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucm90YXRpb25BbmdsZSA9IGFuZ2xlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFJvdGF0aW9uT3JpZ2luOiBmdW5jdGlvbiAob3JpZ2luKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucm90YXRpb25PcmlnaW4gPSBvcmlnaW47XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG5cblxuLyoqKiAgZW5kIG9mIGhhY2sgKioqL1xuXG5leHBvcnQgZGVmYXVsdCAgTGVhZmxldFZpZXc7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///26\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/utils/Utils.js\nvar Utils = __webpack_require__(0);\n\n// EXTERNAL MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/layer/Layer.js\nvar Layer = __webpack_require__(13);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/layer/BinaryDataLayer.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends Layer\n * @example\n *\n * import BinaryDataLayer from 'osh-js/core/ui/layer/BinaryDataLayer';\n *\n */\n\nclass BinaryDataLayer_BinaryDataLayer extends Layer[\"a\" /* default */] {\n  constructor(properties) {\n    super(properties);\n    this.type = 'binaryData';\n  } // call by super class\n\n\n  init(properties = this.properties) {\n    super.init(properties);\n    const props = {\n      frameData: undefined\n    };\n\n    if (Object(Utils[\"l\" /* isDefined */])(properties.frameData)) {\n      this.props.frameData = properties.frameData;\n    }\n\n    this.definedId('dataId', props);\n\n    if (Object(Utils[\"l\" /* isDefined */])(properties.getFrameData)) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty('frameData', await this.getFunc('getFrameData')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty('getFrameData'), fn);\n    }\n  }\n\n}\n\n/* harmony default export */ var layer_BinaryDataLayer = (BinaryDataLayer_BinaryDataLayer);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/core/ui/layer/VideoDataLayer.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2022 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * @extends BinaryDataLayer\n * @example\n *\n * import VideoDataLayer from 'osh-js/core/ui/layer/VideoDataLayer';\n *\n */\n\nclass VideoDataLayer_VideoDataLayer extends layer_BinaryDataLayer {\n  constructor(properties) {\n    super(properties);\n    this.type = 'videoData';\n  } // call by super class\n\n\n  init(properties = this.properties) {\n    super.init(properties);\n    const props = {\n      roll: 0\n    };\n\n    if (Object(Utils[\"l\" /* isDefined */])(properties.roll)) {\n      props.roll = properties.roll;\n    }\n\n    this.definedId('videoDataId', props);\n\n    if (Object(Utils[\"l\" /* isDefined */])(properties.getRoll)) {\n      let fn = async (rec, timestamp, options) => {\n        this.updateProperty('roll', await this.getFunc('getRoll')(rec, timestamp, options));\n      };\n\n      this.addFn(this.getDataSourcesIdsByProperty('getRoll'), fn);\n    }\n  }\n\n}\n\n/* harmony default export */ var layer_VideoDataLayer = __webpack_exports__[\"a\"] = (VideoDataLayer_VideoDataLayer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9CaW5hcnlEYXRhTGF5ZXIuanM/MzMzYyIsIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS91aS9sYXllci9WaWRlb0RhdGFMYXllci5qcz9kZjZhIl0sIm5hbWVzIjpbIkJpbmFyeURhdGFMYXllciIsIkxheWVyIiwiY29uc3RydWN0b3IiLCJwcm9wZXJ0aWVzIiwidHlwZSIsImluaXQiLCJwcm9wcyIsImZyYW1lRGF0YSIsInVuZGVmaW5lZCIsImlzRGVmaW5lZCIsImRlZmluZWRJZCIsImdldEZyYW1lRGF0YSIsImZuIiwicmVjIiwidGltZXN0YW1wIiwib3B0aW9ucyIsInVwZGF0ZVByb3BlcnR5IiwiZ2V0RnVuYyIsImFkZEZuIiwiZ2V0RGF0YVNvdXJjZXNJZHNCeVByb3BlcnR5IiwiVmlkZW9EYXRhTGF5ZXIiLCJyb2xsIiwiZ2V0Um9sbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsTUFBTUEsK0JBQU4sU0FBOEJDLHdCQUE5QixDQUFvQztFQUVoQ0MsV0FBVyxDQUFDQyxVQUFELEVBQWE7SUFDcEIsTUFBTUEsVUFBTjtJQUNBLEtBQUtDLElBQUwsR0FBWSxZQUFaO0VBQ0gsQ0FMK0IsQ0FNaEM7OztFQUNBQyxJQUFJLENBQUNGLFVBQVUsR0FBQyxLQUFLQSxVQUFqQixFQUE2QjtJQUM3QixNQUFNRSxJQUFOLENBQVdGLFVBQVg7SUFDQSxNQUFNRyxLQUFLLEdBQUc7TUFDVkMsU0FBUyxFQUFFQztJQURELENBQWQ7O0lBSUEsSUFBSUMsa0NBQVMsQ0FBQ04sVUFBVSxDQUFDSSxTQUFaLENBQWIsRUFBb0M7TUFDaEMsS0FBS0QsS0FBTCxDQUFXQyxTQUFYLEdBQXVCSixVQUFVLENBQUNJLFNBQWxDO0lBQ0g7O0lBRUQsS0FBS0csU0FBTCxDQUFlLFFBQWYsRUFBeUJKLEtBQXpCOztJQUVBLElBQUlHLGtDQUFTLENBQUNOLFVBQVUsQ0FBQ1EsWUFBWixDQUFiLEVBQXVDO01BQ25DLElBQUlDLEVBQUUsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLFNBQVosRUFBdUJDLE9BQXZCLEtBQW1DO1FBQ3hDLEtBQUtDLGNBQUwsQ0FBb0IsV0FBcEIsRUFBZ0MsTUFBTSxLQUFLQyxPQUFMLENBQWEsY0FBYixFQUE2QkosR0FBN0IsRUFBa0NDLFNBQWxDLEVBQTZDQyxPQUE3QyxDQUF0QztNQUNILENBRkQ7O01BR0EsS0FBS0csS0FBTCxDQUFXLEtBQUtDLDJCQUFMLENBQWlDLGNBQWpDLENBQVgsRUFBNkRQLEVBQTdEO0lBQ0g7RUFDSjs7QUF6QitCOztBQTJCckJaLHlGQUFmLEU7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQSxNQUFNb0IsNkJBQU4sU0FBNkJwQixxQkFBN0IsQ0FBNkM7RUFFekNFLFdBQVcsQ0FBQ0MsVUFBRCxFQUFhO0lBQ3BCLE1BQU1BLFVBQU47SUFDQSxLQUFLQyxJQUFMLEdBQVksV0FBWjtFQUNILENBTHdDLENBTXpDOzs7RUFDQUMsSUFBSSxDQUFDRixVQUFVLEdBQUMsS0FBS0EsVUFBakIsRUFBNkI7SUFDN0IsTUFBTUUsSUFBTixDQUFXRixVQUFYO0lBQ0EsTUFBTUcsS0FBSyxHQUFHO01BQ1plLElBQUksRUFBRTtJQURNLENBQWQ7O0lBSUEsSUFBSVosa0NBQVMsQ0FBQ04sVUFBVSxDQUFDa0IsSUFBWixDQUFiLEVBQStCO01BQzNCZixLQUFLLENBQUNlLElBQU4sR0FBYWxCLFVBQVUsQ0FBQ2tCLElBQXhCO0lBQ0g7O0lBRUQsS0FBS1gsU0FBTCxDQUFlLGFBQWYsRUFBOEJKLEtBQTlCOztJQUVBLElBQUlHLGtDQUFTLENBQUNOLFVBQVUsQ0FBQ21CLE9BQVosQ0FBYixFQUFrQztNQUM5QixJQUFJVixFQUFFLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxTQUFaLEVBQXVCQyxPQUF2QixLQUFtQztRQUN4QyxLQUFLQyxjQUFMLENBQW9CLE1BQXBCLEVBQTJCLE1BQU0sS0FBS0MsT0FBTCxDQUFhLFNBQWIsRUFBd0JKLEdBQXhCLEVBQTZCQyxTQUE3QixFQUF3Q0MsT0FBeEMsQ0FBakM7TUFDSCxDQUZEOztNQUdBLEtBQUtHLEtBQUwsQ0FBVyxLQUFLQywyQkFBTCxDQUFpQyxTQUFqQyxDQUFYLEVBQXdEUCxFQUF4RDtJQUNIO0VBQ0o7O0FBekJ3Qzs7QUEyQjlCUSxpSEFBZiIsImZpbGUiOiIyNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjIgTWF0aGlldSBEaGFpbmF1dC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IExheWVyIGZyb20gXCIuL0xheWVyLmpzXCI7XG5pbXBvcnQge2lzRGVmaW5lZCwgcmFuZG9tVVVJRH0gZnJvbSBcIi4uLy4uL3V0aWxzL1V0aWxzXCI7XG5cbi8qKlxuICogQGV4dGVuZHMgTGF5ZXJcbiAqIEBleGFtcGxlXG4gKlxuICogaW1wb3J0IEJpbmFyeURhdGFMYXllciBmcm9tICdvc2gtanMvY29yZS91aS9sYXllci9CaW5hcnlEYXRhTGF5ZXInO1xuICpcbiAqL1xuY2xhc3MgQmluYXJ5RGF0YUxheWVyIGV4dGVuZHMgTGF5ZXIge1xuXG4gICAgY29uc3RydWN0b3IocHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihwcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ2JpbmFyeURhdGEnO1xuICAgIH1cbiAgICAvLyBjYWxsIGJ5IHN1cGVyIGNsYXNzXG4gICAgaW5pdChwcm9wZXJ0aWVzPXRoaXMucHJvcGVydGllcykge1xuICAgICAgICBzdXBlci5pbml0KHByb3BlcnRpZXMpO1xuICAgICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgICAgIGZyYW1lRGF0YTogdW5kZWZpbmVkXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmZyYW1lRGF0YSkpe1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5mcmFtZURhdGEgPSBwcm9wZXJ0aWVzLmZyYW1lRGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGVmaW5lZElkKCdkYXRhSWQnLCBwcm9wcyk7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmdldEZyYW1lRGF0YSkpe1xuICAgICAgICAgICAgbGV0IGZuID0gYXN5bmMgKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0eSgnZnJhbWVEYXRhJyxhd2FpdCB0aGlzLmdldEZ1bmMoJ2dldEZyYW1lRGF0YScpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0RnJhbWVEYXRhJyksIGZuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEJpbmFyeURhdGFMYXllcjtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjIgTWF0aGlldSBEaGFpbmF1dC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gXCIuLi8uLi91dGlscy9VdGlsc1wiO1xuaW1wb3J0IEJpbmFyeURhdGFMYXllciBmcm9tIFwiLi9CaW5hcnlEYXRhTGF5ZXJcIjtcblxuLyoqXG4gKiBAZXh0ZW5kcyBCaW5hcnlEYXRhTGF5ZXJcbiAqIEBleGFtcGxlXG4gKlxuICogaW1wb3J0IFZpZGVvRGF0YUxheWVyIGZyb20gJ29zaC1qcy9jb3JlL3VpL2xheWVyL1ZpZGVvRGF0YUxheWVyJztcbiAqXG4gKi9cbmNsYXNzIFZpZGVvRGF0YUxheWVyIGV4dGVuZHMgQmluYXJ5RGF0YUxheWVyIHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocHJvcGVydGllcyk7XG4gICAgICAgIHRoaXMudHlwZSA9ICd2aWRlb0RhdGEnO1xuICAgIH1cbiAgICAvLyBjYWxsIGJ5IHN1cGVyIGNsYXNzXG4gICAgaW5pdChwcm9wZXJ0aWVzPXRoaXMucHJvcGVydGllcykge1xuICAgICAgICBzdXBlci5pbml0KHByb3BlcnRpZXMpO1xuICAgICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgICByb2xsOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLnJvbGwpKXtcbiAgICAgICAgICAgIHByb3BzLnJvbGwgPSBwcm9wZXJ0aWVzLnJvbGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlZmluZWRJZCgndmlkZW9EYXRhSWQnLCBwcm9wcyk7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLmdldFJvbGwpKXtcbiAgICAgICAgICAgIGxldCBmbiA9IGFzeW5jIChyZWMsIHRpbWVzdGFtcCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoJ3JvbGwnLGF3YWl0IHRoaXMuZ2V0RnVuYygnZ2V0Um9sbCcpKHJlYywgdGltZXN0YW1wLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRGbih0aGlzLmdldERhdGFTb3VyY2VzSWRzQnlQcm9wZXJ0eSgnZ2V0Um9sbCcpLCBmbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBWaWRlb0RhdGFMYXllcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///27\n")},,,,,,,function(module,exports,__webpack_require__){eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(35);\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = __webpack_require__(5).default\nvar update = add(\"759d7ef5\", content, false, {});\n// Hot Module Replacement\nif(false) {}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9yZXNvdXJjZXMvY3NzL3ZpZXcuY3NzPzM5ZjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQSxjQUFjLG1CQUFPLENBQUMsRUFBc0c7QUFDNUg7QUFDQSw0Q0FBNEMsUUFBUztBQUNyRDtBQUNBO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLENBQTJHO0FBQzdILCtDQUErQztBQUMvQztBQUNBLEdBQUcsS0FBVSxFQUFFIiwiZmlsZSI6IjM0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uLy4uL2RlbW9zL3ZpZGVvLWRpc3BsYXkvdmlkZW8tZGlzcGxheS12dWVqcy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3ZpZXcuY3NzXCIpO1xuaWYoY29udGVudC5fX2VzTW9kdWxlKSBjb250ZW50ID0gY29udGVudC5kZWZhdWx0O1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciBhZGQgPSByZXF1aXJlKFwiIS4uLy4uLy4uLy4uL2RlbW9zL3ZpZGVvLWRpc3BsYXkvdmlkZW8tZGlzcGxheS12dWVqcy9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzQ2xpZW50LmpzXCIpLmRlZmF1bHRcbnZhciB1cGRhdGUgPSBhZGQoXCI3NTlkN2VmNVwiLCBjb250ZW50LCBmYWxzZSwge30pO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuIC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG4gaWYoIWNvbnRlbnQubG9jYWxzKSB7XG4gICBtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vLi4vLi4vZGVtb3MvdmlkZW8tZGlzcGxheS92aWRlby1kaXNwbGF5LXZ1ZWpzL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdmlldy5jc3NcIiwgZnVuY3Rpb24oKSB7XG4gICAgIHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vLi4vZGVtb3MvdmlkZW8tZGlzcGxheS92aWRlby1kaXNwbGF5LXZ1ZWpzL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdmlldy5jc3NcIik7XG4gICAgIGlmKG5ld0NvbnRlbnQuX19lc01vZHVsZSkgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQuZGVmYXVsdDtcbiAgICAgaWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG4gICAgIHVwZGF0ZShuZXdDb250ZW50KTtcbiAgIH0pO1xuIH1cbiAvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG4gbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///34\n")},function(module,exports,__webpack_require__){eval('// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(4);\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, ".osh-view {\\n    width:100%;\\n    height: 100%;\\n}\\n", ""]);\n// Exports\nmodule.exports = exports;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2UvY29yZS9yZXNvdXJjZXMvY3NzL3ZpZXcuY3NzPzE1ZGQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxrQ0FBa0MsbUJBQU8sQ0FBQyxDQUFpRztBQUMzSTtBQUNBO0FBQ0EsY0FBYyxRQUFTLGNBQWMsaUJBQWlCLG1CQUFtQixHQUFHO0FBQzVFO0FBQ0EiLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL2RlbW9zL3ZpZGVvLWRpc3BsYXkvdmlkZW8tZGlzcGxheS12dWVqcy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5vc2gtdmlldyB7XFxuICAgIHdpZHRoOjEwMCU7XFxuICAgIGhlaWdodDogMTAwJTtcXG59XFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///35\n')}]]);