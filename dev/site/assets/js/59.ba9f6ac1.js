(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{420:function(t,e,s){"use strict";s.r(e);var a=s(9),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"video-codec-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#video-codec-api"}},[t._v("#")]),t._v(" Video Codec API "),s("Badge",{attrs:{text:"beta",type:"warning"}})],1),t._v(" "),s("p",[t._v("New APIs are being released such as the WebCodec API and allow more flexible support for video streaming.")]),t._v(" "),s("p",[t._v("Details of the API can be found here "),s("a",{attrs:{href:"https://github.com/w3c/webcodecs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/w3c/webcodecs"),s("OutboundLink")],1),t._v("\nand here "),s("a",{attrs:{href:"https://web.dev/webcodecs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://web.dev/webcodecs/"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Full specification: "),s("a",{attrs:{href:"https://www.w3.org/TR/webcodecs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.w3.org/TR/webcodecs/"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("This new API allows, among other things, to decode Video frames using Hardware acceleration.")]),t._v(" "),s("br"),t._v(" "),s("DocumentationLoad",{attrs:{path:"/guide/api/WebCodecView.html"}}),t._v(" "),s("h2",{attrs:{id:"supported-layers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#supported-layers"}},[t._v("#")]),t._v(" Supported layers")]),t._v(" "),s("p",[t._v("The view supports type layers:")]),t._v(" "),s("ul",[s("li",[t._v("data")])]),t._v(" "),s("h2",{attrs:{id:"limitation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#limitation"}},[t._v("#")]),t._v(" Limitation")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("This experimental version can be used in chrome >= 94 and support only H264, VP8 & VP9.\nThe VideoDecoder use a lot of memory. This may lead to some issues while playing multiple videos\nat the same time.")])]),t._v(" "),s("h2",{attrs:{id:"codec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#codec"}},[t._v("#")]),t._v(" Codec")]),t._v(" "),s("p",[t._v("By default, the following profiles are used for the codecs:")]),t._v(" "),s("ul",[s("li",[t._v("'vp9':'vp09.02.10.10.01.09.16.09.01',")]),t._v(" "),s("li",[t._v("'vp8': 'vp08.00.41.08',")]),t._v(" "),s("li",[t._v("'h264': 'avc1.42e01e'")])]),t._v(" "),s("p",[t._v("The codec string can be passed in parameter but the the profile cannot be overrided yet.")]),t._v(" "),s("p",[t._v("By default, the h264 codec is used.")]),t._v(" "),s("h2",{attrs:{id:"architecture"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#architecture"}},[t._v("#")]),t._v(" Architecture")]),t._v(" "),s("p",[t._v("The WebCodec API is used to decode frame using the VideoDecoder. In addition, the VideoDecoder is used within a webWorker to optimize performance.")]),t._v(" "),s("h2",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SosGetResultVideo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'osh-js/core/datasource/SosGetResultVideo.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" WebCodecView "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'osh-js/core/ui/view/video/WebCodecView.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// create data source for UAV camera")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" videoDataSource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SosGetResultVideo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"drone-Video"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  protocol"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ws"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  service"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SOS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  endpointUrl"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sensiasoft.net:8181/sensorhub/sos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  offeringID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"urn:mysos:solo:video2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  observedProperty"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://sensorml.com/ont/swe/property/VideoFrame"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  startTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2015-12-19T21:04:30Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  endTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2015-12-19T21:09:19Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  replaySpeed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// show it in video view using FFMPEG JS decoder")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" videoView "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebCodecView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  container"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'video-h264-container'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  css"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"video-h264"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UAV Video"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  showTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  showStats"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  dataSourceId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" videoDataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// start streaming")]),t._v("\nvideoDataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr",{staticClass:"demo-hr"}),t._v(" "),s("br"),s("br"),t._v(" "),s("Example",{staticStyle:{border:"none",width:"100%",height:"500px"},attrs:{path:"/showcase/video-h264-webcodec-api.html"}})],1)}),[],!1,null,null,null);e.default=r.exports}}]);