(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{137:function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"h",(function(){return h}));Math.pow(2,53);function i(t){return null!=t}function o(t){return i(t)&&null!==t}function a(t,e){if(void 0===e&&(e="letiable"),!i(t))throw e+" must be defined";return t}function r(t,e,n){if(void 0===n&&(n="letiable"),a(t,n),typeof t!==e)throw n+" must be of type "+e;return t}function s(t,e){return r(t,"string",e)}function c(t,e){if(function(t,e){r(t,"number",e)}(t,e),t<=0)throw e+" must be a positive number"}function l(t,e){return r(t,"object",e)}function u(t,e){if(void 0===e&&(e="letiable"),a(t,e),!Array.isArray(t))throw e+" must be an array";return t}function d(t,e){return r(t,"function",e)}function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},150:function(t,e,n){"use strict";var i=n(238),o=n(137),a=new(function(){function t(){this.eventMap={}}var e=t.prototype;return e.remove=function(t,e){t in this.eventMap&&(this.eventMap[t]=this.eventMap[t].filter((function(t){return t.id!==e})))},e.removeById=function(t){for(var e in this.eventMap)this.eventMap[e]=this.eventMap[e].filter((function(e){return e.id!==t}))},e.observe=function(t,e,n){void 0===n&&(n="any"),Object(o.g)(t)&&Object(o.g)(e)&&Object(o.g)(n)&&(t in this.eventMap||(this.eventMap[t]=[]),this.eventMap[t].push({fn:e,id:n}))},e.fire=function(t,e){if(Object(o.g)(t)&&t in this.eventMap)for(var n=this.eventMap[t],i=0;i<n.length;i++)n[i].fn(e)},t}()),r=function(){function t(){}return t.remove=function(t,e){void 0===e&&(e="any"),a.remove("osh:"+t,e)},t.removeById=function(t){void 0===t&&(t="any"),a.removeById(t)},t.registerView=function(t){t.registerCallback()},t.unregisterView=function(t){t.unregisterCallback()},t.fire=function(t,e){e.name=t,a.fire("osh:"+t,e)},t.observe=function(t,e,n){void 0===n&&(n="any"),a.observe("osh:"+t,e,n)},t.observeDiv=function(t,e,n){document.getElementById(t).addEventListener(e,n)},Object(i.a)(t,null,[{key:"EVENT",get:function(){return{SELECT_VIEW:"selectView",SHOW_VIEW:"showView",UAV_TAKEOFF:"uav:takeoff",UAV_GOTO:"uav:goto",UAV_LOOKAT:"uav:lookat",UAV_LAND:"uav:land",UAV_ORBIT:"uav:orbit",LOADING_START:"loading:start",LOADING_STOP:"loading:stop",ADD_VIEW_ITEM:"addViewItem",RESIZE:"resize",PTZ_SEND_REQUEST:"ptzSendRequest"}}}]),t}();e.a=r},157:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var i="data-synchronizer-",o="datasource-data-"},184:function(t,e,n){t.exports=function(){return new Worker(n.p+"80a548c2c2e2e933c21e.worker.js")}},190:function(t,e,n){"use strict";var i=n(244),o=n(137),a=n(150),r=(n(47),n(157)),s="disconnected",c="data",l="status",u=function(){function t(t,e,n){this.stylers=[],this.viewItems=[],this.names={},this.stylerToObj={},this.stylerIdToStyler={},this.lastRec={},this.selectedDataSources=[],this.dataSources=[],this.viewItemsBroadcastChannels={},this.entity=null,this.id="view-"+Object(o.h)(),this.entity=null,this.dataSourceId=-1,Object(o.g)(n)&&Object(o.g)(n.dataSourceId)&&(this.dataSourceId=n.dataSourceId),Object(o.g)(n)&&Object(o.g)(n.entity)&&(this.entity=n.entity),this.css="",this.cssSelected="",Object(o.g)(n)&&Object(o.g)(n.css)&&(this.css=n.css),Object(o.g)(n)&&Object(o.g)(n.cssSelected)&&(this.cssSelected=n.cssSelected),this.init(t,e,n)}var e=t.prototype;return e.init=function(t,e,n){this.elementDiv=document.createElement("div"),this.elementDiv.setAttribute("id",this.id),this.elementDiv.setAttribute("class",this.css+" osh-view"),this.divId=this.id;var i=document.getElementById(t);if(Object(o.g)(i)&&null!==i?(i.appendChild(this.elementDiv),this.container=i):(document.body.appendChild(this.elementDiv),this.hide(),this.container=document.body),this.beforeAddingItems(n),Object(o.g)(e))for(var a=0;a<e.length;a++)this.addViewItem(e[a]);Object(o.g)(n)&&Object(o.g)(n.show)&&(document.getElementById(this.divId).style.display=n.show?"block":"none"),this.handleEvents();var r=this;this.registerCallback(),new MutationObserver((function(t){t.forEach((function(t){"style"===t.attributeName&&r.onResize()}))})).observe(this.elementDiv,{attributes:!0}),new MutationObserver((function(t){Object(o.g)(document.getElementById(r.divId))||(this.disconnect(),r.destroy())})).observe(document.body,{childList:!0})},e.registerCallback=function(){if(Object(o.g)(this.dataSourceId)||Object(o.g)(this.entity)){var t=this;function e(e){new BroadcastChannel(r.a+e).onmessage=function(n){n.data.message&&"reset"===n.data.message?t.reset():n.data.type===c?t.setData(e,n.data.values):n.data.type===l&&n.data.status===s&&t.reset()}}if(null!==this.entity)for(var n,a=Object(i.a)(this.entity.getDataSources());!(n=a()).done;){e(n.value.id)}else e(this.dataSourceId)}},e.unregisterCallback=function(){a.a.removeById(this.divId)},e.hide=function(){this.elementDiv.style.display="none"},e.onResize=function(){},e.attachTo=function(t){Object(o.g)(this.elementDiv.parentNode)&&this.elementDiv.parentNode.removeChild(this.elementDiv),document.getElementById(t).appendChild(this.elementDiv),"none"===this.elementDiv.style.display&&(this.elementDiv.style.display="block"),this.onResize()},e.beforeAddingItems=function(t){},e.getId=function(){return this.id},e.getDivId=function(){return this.divId},e.setData=function(t,e){},e.show=function(t){},e.destroy=function(){this.unregisterCallback()},e.addViewItem=function(t){var e=this;this.viewItems.push(t),t.hasOwnProperty("styler")&&function(){var n=t.styler;e.stylers.push(n),t.hasOwnProperty("name")&&(e.names[n.getId()]=t.name),n.viewItem=t,n.init(e),e.stylerIdToStyler[n.id]=n;for(var i=n.getDataSourcesIds(),u=function(u){var d=i[u],h=e,f=new BroadcastChannel(r.a+d);e.viewItemsBroadcastChannels[d]=f,f.onmessage=function(e){if(e.data.type!==l||e.data.status!==s){var i=!1;i=Object(o.g)(h.selectedEntity)?t.entityId===h.selectedEntity:h.selectedDataSources.indexOf(d)>-1,e.data.type===c&&(n.setData(d,e.data,h,{selected:i}),h.lastRec[d]=e.data)}},a.a.observe(a.a.EVENT.SELECT_VIEW,(function(e){var i=!1;i=Object(o.g)(e.entityId)?t.entityId===e.entityId:e.dataSourcesIds.indexOf(d)>-1,d in h.lastRec&&n.setData(d,h.lastRec[d],h,{selected:i})}),e.divId)},d=0;d<i.length;d++)u(d)}()},e.removeViewItem=function(t){if(this.viewItems.includes(t)){for(var e in t.styler.dataSourceToStylerMap)this.viewItemsBroadcastChannels[e].close(),delete this.viewItemsBroadcastChannels[e],delete this.lastRec[e];this.viewItems=this.viewItems.filter((function(e){return e!==t}))}delete this.stylerIdToStyler[t.styler.id],this.stylers=this.stylers.filter((function(e){return e.id!==t.styler.id})),delete this.names[t.styler.id],delete this.stylerToObj[t.styler.id]},e.removeViewItems=function(){for(var t,e=Object(i.a)(this.viewItems);!(t=e()).done;){var n=t.value;this.removeViewItem(n)}},e.handleEvents=function(){var t=this;a.a.observe(a.a.EVENT.SELECT_VIEW,(function(e){return t.selectDataView(e.dataSourcesIds,e.entityId)}),this.divId),a.a.observe(a.a.EVENT.SHOW_VIEW,(function(e){return t.show(e)}),this.divId),a.a.observe(a.a.EVENT.ADD_VIEW_ITEM,(function(e){Object(o.g)(e.viewId)&&e.viewId===t.id&&t.addViewItem(e.viewItem)}),this.divId),a.a.observe(a.a.EVENT.RESIZE+"-"+this.divId,(function(e){return t.onResize()}),this.divId)},e.selectDataView=function(t,e){if(Object(o.g)(this.dataSources)){this.selectedDataSources=t,this.selectedEntity=e;for(var n=0;n<this.dataSources.length;n++)this.setData(this.dataSources[n],this.lastRec[this.dataSources[n]])}},e.getDataSourcesId=function(){var t=[];-1!==this.dataSourceId&&t.push(this.dataSourceId);for(var e=0;e<this.viewItems.length;e++){var n=this.viewItems[e];if(n.hasOwnProperty("styler")){var i=n.styler;t=t.concat(i.getDataSourcesIds())}}return t},e.reset=function(){},t}();e.a=u},191:function(t,e,n){"use strict";var i=n(3),o=n(235),a=n.n(o),r=n(236),s=n(137),c=n(157),l=function(){function t(t,e,n){this.id="DataSource-"+Object(s.h)(),this.name=t,this.properties=Object.assign({fetch:1},e),this.dataSourceWorker=n,this.dataSynchronizer=null,this.currentRunningProperties={},this.initDataSource(e)}var e=t.prototype;return e.initDataSource=function(t){this.dataSourceWorker.postMessage({message:"init",id:this.id,properties:JSON.stringify(t),topic:c.a+this.id})},e.setDataSynchronizer=function(t){this.dataSynchronizer=t,this.dataSourceWorker.postMessage({message:"topic",topic:c.b+this.dataSynchronizer.id})},e.setTimeRange=function(t,e,n){this.updateUrl(Object.assign({},this.currentRunningProperties,{startTime:t,endTime:e,replaySpeed:n}))},e.getStartTime=function(){return this.properties.startTime},e.getEndTime=function(){return this.properties.endTime},e.getReplaySpeed=function(){return Object(s.g)(this.properties.replaySpeed)?this.properties.replaySpeed:1},e.disconnect=function(){this.dataSourceWorker.postMessage({message:"disconnect"})},e.connect=function(){this.dataSourceWorker.postMessage({message:"connect"})},e.isConnected=function(){var t=Object(r.a)(a.a.mark((function t(){var e,n=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Promise((function(t){null!==n.dataSourceWorker&&(n.dataSourceWorker.onmessage=function(e){"is-connected"===e.data.message&&t(e.data.data)})})),null!==this.dataSourceWorker&&this.dataSourceWorker.postMessage({message:"is-connected"}),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getCurrentTime=function(){var t=Object(r.a)(a.a.mark((function t(){var e,n=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(s.g)(this.dataSynchronizer)){t.next=4;break}return t.abrupt("return",this.dataSynchronizer.getCurrentTime());case 4:return e=new Promise((function(t){null!==n.dataSourceWorker&&(n.dataSourceWorker.onmessage=function(e){"last-timestamp"===e.data.message&&t(e.data.data)})})),null!==this.dataSourceWorker&&this.dataSourceWorker.postMessage({message:"last-timestamp"}),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getId=function(){return this.id},e.getName=function(){return this.name},e.updateUrl=function(t){this.currentRunningProperties=Object.assign({},this.properties,t),null!==this.dataSourceWorker&&this.dataSourceWorker.postMessage({message:"update-url",data:t})},e.getCurrentRunningProperties=function(){return this.currentRunningProperties},e.terminate=function(){null!==this.dataSourceWorker&&this.dataSourceWorker.terminate()},t}(),u=n(184),d=n.n(u),h=function(t){function e(e,n){return t.call(this,e,Object.assign({timeShift:0,reconnectTimeout:5e3},n),new d.a)||this}return Object(i.a)(e,t),e}(l);e.a=h},192:function(t,e,n){"use strict";var i=n(237),o=n(3),a=n(137),r=n(150),s=function(t){function e(e){var n;(n=t.call(this,e)||this).properties=e,n.location=null,n.orientation={heading:0},n.icon=null,n.iconAnchor=[16,16],n.iconSize=[16,16],n.label=null,n.labelColor="#000000",n.labelSize=16,n.labelOffset=[0,0],n.zoomLevel=15,n.color=null,n.defaultToTerrainElevation=!1,n.options={},Object(a.g)(e.defaultToTerrainElevation)&&(n.defaultToTerrainElevation=e.defaultToTerrainElevation),Object(a.f)(e.location)&&(Object(a.c)(e.location,"location"),n.location=e.location),Object(a.f)(e.orientation)&&(Object(a.c)(e.orientation,"orientation"),n.orientation=e.orientation),Object(a.f)(e.icon)&&(Object(a.e)(e.icon,"icon"),n.icon=e.icon),Object(a.f)(e.iconAnchor)&&(Object(a.a)(e.iconAnchor,"iconAnchor"),n.iconAnchor=e.iconAnchor),Object(a.f)(e.iconSize)&&(Object(a.a)(e.iconSize,"iconSize"),n.iconSize=e.iconSize),Object(a.f)(e.label)&&(Object(a.e)(e.label,"label"),n.label=e.label),Object(a.f)(e.labelColor)&&(Object(a.e)(e.labelColor,"labelColor"),n.labelColor=e.labelColor),Object(a.f)(e.labelSize)&&(Object(a.d)(e.labelSize,"labelSize"),n.labelSize=e.labelSize),Object(a.f)(e.labelOffset)&&(Object(a.a)(e.labelOffset,"labelOffset"),n.labelOffset=e.labelOffset),Object(a.f)(e.zoomLevel)&&(Object(a.d)(e.zoomLevel,"zoomLevel"),n.zoomLevel=e.zoomLevel);var o=Object(i.a)(n);if(n.checkFn("locationFunc")){n.addFn(e.locationFunc.dataSourceIds,(function(t,n,i){o.location=e.locationFunc.handler(t,n,i)}))}if(n.checkFn("orientationFunc")){n.addFn(e.orientationFunc.dataSourceIds,(function(t,n,i){o.orientation=e.orientationFunc.handler(t,n,i)}))}if(n.checkFn("iconFunc")){n.addFn(e.iconFunc.dataSourceIds,(function(t,n,i){o.icon=e.iconFunc.handler(t,n,i)}))}if(n.checkFn("labelFunc")){n.addFn(e.labelFunc.dataSourceIds,(function(t,n,i){o.label=e.labelFunc.handler(t,n,i)}))}if(n.checkFn("labelColorFunc")){n.addFn(e.labelColorFunc.dataSourceIds,(function(t,n,i){o.labelColor=e.labelColorFunc.handler(t,n,i)}))}if(n.checkFn("labelSizeFunc")){n.addFn(e.labelSizeFunc.dataSourceIds,(function(t,n,i){o.labelSize=e.labelSizeFunc.handler(t,n,i)}))}return n}Object(o.a)(e,t);var n=e.prototype;return n.init=function(e){t.prototype.init.call(this,e),Object(a.g)(e)&&null!==this.location&&e.updateMarker(this,0,{})},n.setData=function(e,n,i,o){return!(!t.prototype.setData.call(this,e,n,i,o)||!Object(a.g)(i)||null===this.location)&&(i.updateMarker(this,n.timeStamp,o),!0)},e}(function(){function t(t){this.properties=t,this.id="styler-"+Object(a.h)(),this.dataSourceToStylerMap={},this.initEvents()}var e=t.prototype;return e.checkFn=function(t){var e=this.properties[t],n=Object(a.f)(e);return n&&(Object(a.a)(e.dataSourceIds,t+".dataSourceIds"),Object(a.b)(e.handler,t+".handler")),n},e.initEvents=function(){var t=this;r.a.observe(r.a.EVENT.DATASOURCE_UPDATE_TIME,(function(e){return t.clear()}))},e.clear=function(){},e.getId=function(){return this.id},e.select=function(t){},e.addFn=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];Object(a.g)(this.dataSourceToStylerMap[i])||(this.dataSourceToStylerMap[i]=[]),this.dataSourceToStylerMap[i].push(e)}},e.setData=function(t,e,n,i){if(t in this.dataSourceToStylerMap){for(var o=this.dataSourceToStylerMap[t],a=0;a<o.length;a++)for(var r=0;r<e.values.length;r++)o[a](e.values[r].data,e.values[r].timeStamp,i);return!0}return!1},e.getDataSourcesIds=function(){var t=[];for(var e in this.dataSourceToStylerMap)t.push(e);return t},e.init=function(){},t}());e.a=s},309:function(t,e,n){"use strict";var i,o,a,r=n(3),s=n(190),c=n(137),l=n(150),u=n(350),d=n.n(u),h=(n(55),function(t){function e(e,n,i){var o;o=t.call(this,e,n,i)||this;var a=document.getElementById(o.divId).className;return document.getElementById(o.divId).setAttribute("class",a+" "+o.css),o}Object(r.a)(e,t);var n=e.prototype;return n.beforeAddingItems=function(t){this.initMap(t)},n.initMap=function(t){var e={location:new d.a.LatLng(0,0),zoom:3};this.first=!0,this.follow=!1,this.autoZoomOnFirstMarker=!1;var n=this.getDefaultLayers(),i=n[0].layer,o={},a={};o[n[0].name]=n[0].layer,a[n[1].name]=n[1].layer,Object(c.g)(t)&&(Object(c.g)(t.initialView)&&(e={location:new d.a.LatLng(t.initialView.lat,t.initialView.lon),zoom:t.initialView.zoom}),Object(c.g)(t.autoZoomOnFirstMarker)&&(this.autoZoomOnFirstMarker=t.autoZoomOnFirstMarker),Object(c.g)(t.overlayLayers)&&(a=t.overlayLayers),Object(c.g)(t.baseLayers)&&(o=t.baseLayers),Object(c.g)(t.follow)&&(this.follow=t.follow),Object(c.g)(t.defaultLayer)&&(i=t.defaultLayer)),this.map=new d.a.Map(this.divId,{fullscreenControl:!0,layers:i}),d.a.control.layers(o,a).addTo(this.map),this.map.setView(e.location,e.zoom),this.markers={},this.polylines={}},n.getDefaultLayers=function(t){var e=22;Object(c.g)(t)&&t.maxZoom&&(e=t.maxZoom);var n=d.a.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:'&copy; <a href="http://www.esri.com/">Esri</a>, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',maxZoom:e,maxNativeZoom:19});return[{name:"OSM Streets",layer:d.a.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{id:"mapbox.streets",attribution:'Map data \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:e})},{name:"Esri Satellite",layer:n}]},n.initLayers=function(){var t=new d.a.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:1,maxZoom:22,attribution:'Map data \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'});this.map.addLayer(t)},n.addMarker=function(t){var e=null;if(null!==t.icon){var n=d.a.icon({iconAnchor:t.iconAnchor,iconUrl:t.icon});e=d.a.marker([t.lat,t.lon],{icon:n})}else e=d.a.marker([t.lat,t.lon]);null!==t.label&&e.bindTooltip(t.label,{permanent:!1,direction:"center",offset:d.a.point(t.labelOffset[0],t.labelOffset[1])});var i=t.hasOwnProperty("name")&&null!=t.name?t.name:"",o=t.hasOwnProperty("description")&&null!=t.description?t.description:"";(i.length>0||o.length>0)&&e.bindPopup(i+"<div>"+o+"</div>"),e.addTo(this.map),e.setRotationAngle(t.orientation);var a="view-marker-"+Object(c.h)();this.markers[a]=e;var r=this;return e._icon.id=a,e.on("click",(function(){var t=[];for(var e in r.stylerToObj)if(r.stylerToObj[e]===a){var n=r.stylerIdToStyler[e];l.a.fire(l.a.EVENT.SELECT_VIEW,{dataSourcesIds:t.concat(n.getDataSourcesIds()),entityId:n.viewItem.entityId});break}})),a},n.removeViewItem=function(e){var n=this.stylerToObj[e.styler.id];if(t.prototype.removeViewItem.call(this,e),Object(c.g)(n)){var i=this.markers[n];Object(c.g)(i)&&this.map.removeLayer(i),delete this.markers[n]}},n.addPolyline=function(t){for(var e=[],n=0;n<t.locations.length;n++)e.push(new d.a.LatLng(t.locations[n].y,t.locations[n].x));var i=new d.a.Polyline(e,{color:t.color,weight:t.weight,opacity:t.opacity,smoothFactor:t.smoothFactor}).addTo(this.map),o="view-polyline-"+Object(c.h)();return this.polylines[o]=i,o},n.updateMarker=function(t){var e=0;t.getId()in this.stylerToObj?e=this.stylerToObj[t.getId()]:(e=this.addMarker({lat:t.location.y,lon:t.location.x,orientation:t.orientation.heading,color:t.color,icon:t.icon,iconAnchor:t.iconAnchor,label:t.label,labelColor:t.labelColor,labelSize:t.labelSize,labelOffset:t.labelOffset,name:t.viewItem.name,description:t.viewItem.description}),this.stylerToObj[t.getId()]=e);var n=this.markers[e],i=t.location.x,o=t.location.y;if(!isNaN(i)&&!isNaN(o)){var a=new d.a.LatLng(o,i);if(n.setLatLng(a),this.first&&this.autoZoomOnFirstMarker||this.follow){var r=d.a.latLngBounds([a]);this.map.fitBounds(r,{maxZoom:t.zoomLevel}),this.first&&(this.first=!1)}}if(Object(c.g)(t.orientation)&&n.setRotationAngle(t.orientation.heading),null!==t.icon&&n._icon.iconUrl!==t.icon){var s=d.a.icon({iconAnchor:t.iconAnchor,iconUrl:t.icon});n.setIcon(s)}},n.updatePolyline=function(t){var e=0;if(t.getId()in this.stylerToObj?e=this.stylerToObj[t.getId()]:(e=this.addPolyline({color:t.color,weight:t.weight,locations:t.locations,maxPoints:t.maxPoints,opacity:t.opacity,smoothFactor:t.smoothFactor}),this.stylerToObj[t.getId()]=e),e in this.polylines){var n=this.polylines[e];this.map.removeLayer(n);for(var i=[],o=0;o<t.locations.length;o++)i.push(new d.a.LatLng(t.locations[o].y,t.locations[o].x));n=new d.a.Polyline(i,{color:t.color,weight:t.weight,opacity:t.opacity,smoothFactor:t.smoothFactor}).addTo(this.map),this.polylines[e]=n}},n.attachTo=function(e){t.prototype.attachTo.call(this,e),this.map.invalidateSize()},n.onResize=function(){t.prototype.onResize.call(this);var e=this;setTimeout((function(){e.map.invalidateSize()}),100)},n.onChange=function(t){},e}(s.a));d.a.Map=d.a.Map.extend({openPopup:function(t){return this._popup=t,this.addLayer(t).fire("popupopen",{popup:this._popup})}}),i=d.a.Marker.prototype._initIcon,o=d.a.Marker.prototype._setPos,a="msTransform"===d.a.DomUtil.TRANSFORM,d.a.Marker.addInitHook((function(){var t=this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0})),d.a.Marker.include({_initIcon:function(){i.call(this)},_setPos:function(t){o.call(this,t),this.options.rotationAngle&&(this._icon.style[d.a.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,a?this._icon.style[d.a.DomUtil.TRANSFORM]=" rotate("+this.options.rotationAngle+"deg)":this._icon.style[d.a.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}}),e.a=h},349:function(t,e,n){"use strict";n.r(e);var i=n(3),o=n(0),a=n(191),r=n(192),s=n(309),c=n(137),l=function(t){function e(e){var n;return(n=t.call(this,e)||this).divId=Object(c.h)(),n}Object(i.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.dataSource=new a.a("android-GPS",{protocol:"ws",service:"SOS",endpointUrl:"sensiasoft.net:8181/sensorhub/sos",offeringID:"urn:android:device:060693280a28e015-sos",observedProperty:"http://sensorml.com/ont/swe/property/Location",startTime:"2015-02-16T07:58:32Z",endTime:"2015-02-16T08:09:00Z",replaySpeed:2});var t=new r.a({locationFunc:{dataSourceIds:[this.dataSource.getId()],handler:function(t){return{x:t.location.lon,y:t.location.lat}}},orientation:{heading:0},icon:this.props.base+"img/car-location.png",iconAnchor:[16,64],iconSize:[32,64]});this.view=new s.a("leaflet-single-map",[{styler:t,name:"Android Phone GPS"}],{autoZoomOnFirstMarker:!0}),this.dataSource.connect()},n.componentWillUnmount=function(){this.dataSource.terminate(),this.view.destroy()},n.render=function(){return o.createElement("div",{style:{height:"500px"},id:"leaflet-single-map"})},e}(o.Component);e.default=l}}]);