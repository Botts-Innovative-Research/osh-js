(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{131:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return j}));var n=a(0),r=a.n(n);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},b=Object.keys(e);for(n=0;n<b.length;n++)a=b[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(n=0;n<b.length;n++)a=b[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=r.a.createContext({}),p=function(e){var t=r.a.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},d=function(e){var t=p(e.components);return r.a.createElement(i.Provider,{value:t},e.children)},O={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},s=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,b=e.originalType,l=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),d=p(a),s=n,j=d["".concat(l,".").concat(s)]||d[s]||O[s]||b;return a?r.a.createElement(j,c(c({ref:t},i),{},{components:a})):r.a.createElement(j,c({ref:t},i))}));function j(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var b=a.length,l=new Array(b);l[0]=s;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:n,l[1]=c;for(var i=2;i<b;i++)l[i]=a[i];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,a)}s.displayName="MDXCreateElement"},70:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return o})),a.d(t,"default",(function(){return p}));var n=a(2),r=a(6),b=(a(0),a(131)),l={id:"index",title:"DataSources",sidebar_label:"General"},c={unversionedId:"datasources/sos/index",id:"datasources/sos/index",isDocsHomePage:!1,title:"DataSources",description:"The DataSource is the entry point defining some properties about the kind of data you want to display and how to connect to it.",source:"@site/docs/datasources/sos/index.md",slug:"/datasources/sos/index",permalink:"/docs/datasources/sos/index",version:"current",sidebar_label:"General",sidebar:"someSidebar",previous:{title:"DataSources",permalink:"/docs/datasources/index"},next:{title:"SweJson",permalink:"/docs/datasources/sos/swejson"}},o=[{value:"Data parsing",id:"data-parsing",children:[]},{value:"Global configuration",id:"global-configuration",children:[]},{value:"Properties configuration",id:"properties-configuration",children:[]},{value:"Example",id:"example",children:[]}],i={rightToc:o};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(b.b)("wrapper",Object(n.a)({},i,a,{components:t,mdxType:"MDXLayout"}),Object(b.b)("p",null,"The DataSource is the entry point defining some properties about the kind of data you want to display and how to connect to it."),Object(b.b)("p",null,"There are properties to control the playback stream, server version, data connector, buffering, and some other network options."),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"osh-js")," comes with built-in datasource types:"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/datasources/sos/swejson"}),"SweJson")),Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/datasources/sos/video"}),"Video")),Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/datasources/sos/videoroll"}),"VideoWithRoll"))),Object(b.b)("h2",{id:"data-parsing"},"Data parsing"),Object(b.b)("p",null,"The second role of the DataSource is to provide a way to parse the data depending on the kind of DataSource we invoke.\nEach DataSource provides an inner parser which defines how to parse the data."),Object(b.b)("p",null,"The DataSource uses a DataConnector which instantiates a WebSocket connection to make a permanent connection to the server.\nThe data is in the form of an ",Object(b.b)("strong",{parentName:"p"},"arrayBuffer")," as defined into the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://html.spec.whatwg.org/multipage/web-sockets.html#network"}),"WebSocket Specification"),". "),Object(b.b)("p",null,"The DataSource parses the binary array to read the original content such as Text, Json, other binary data(video frames) etc."),Object(b.b)("p",null,"The data is then parsed and processed into the Toolkit ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/datasynchronizer/index"}),"to be synchronized")," or/and displayed\ninto a ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"../../views/index"}),"View"),"."),Object(b.b)("h2",{id:"global-configuration"},"Global configuration"),Object(b.b)("p",null,"There are global properties common to every datasource owned by the DataSource Object."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Name"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Default"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"name"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the datasource name")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"properties"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the datasource properties")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"customUrlParams"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"custom URL params")))),Object(b.b)("p",null,"The ",Object(b.b)("strong",{parentName:"p"},"customUrlParams")," are properties that are automatically appended to the URL as they are provided."),Object(b.b)("p",null,"Example:"),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"\nconst dataSource = {\n    ...,\n    customUrlParams: {\n        'someParams': 'value1'\n    }   \n};\n")),Object(b.b)("p",null,"This will give the following result URL:"),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),"http://some-url?..&customUrlParams=value1\n")),Object(b.b)("h2",{id:"properties-configuration"},"Properties configuration"),Object(b.b)("p",null,"The general datasource properties allows to define the parameters of the data you want to fetch.\nMoreover, it is possible de get more control on the reconnection process and/or the synchronization algorithm when it is\nassociated with a DataSynchronizer."),Object(b.b)("p",null,Object(b.b)("em",{parentName:"p"},"batchsize")," is useful if you want to process data in batches and display them all at once rather than displaying them one by one. For example, in the case of static data that one would like to display in a block."),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Name"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Default"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"),Object(b.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Mandatory"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"protocol"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"defines the protocol of the datasource"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"yes")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"endpointUrl"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the endpoint url"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"yes")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"service"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the service"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"yes")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"offeringID"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the offeringID"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"yes")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"observedProperty"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the observed property"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"yes")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"startTime"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the start time (ISO format)"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"yes")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"endTime"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the end time (ISO format)"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"yes")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"timeShift"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Boolean"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"fix some problem with some android devices with some timestamp shift to 16 sec"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"bufferingTime"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"defines the time during the data has to be buffered*"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"timeOut"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"defines the limit time before data has to be skipped*"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"replaySpeed"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the replay factor to speedUp or slow down the playback stream"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"responseFormat"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"String"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the response format (e.g video/mp4)"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"reconnectTimeout"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"10000ms"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the timeout before reconnecting"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"batchSize"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Number"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the number of data to fetch at the same time"),Object(b.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"-")))),Object(b.b)("h2",{id:"example"},"Example"),Object(b.b)("p",null,"Here a simple example demonstrating how to get some GPS data:"),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"import SweJson from 'osh/datareceiver/SweJson.js';\n\n// create data source for Android phone GPS\nlet gpsDataSource = new SweJson('android-GPS', {\n    protocol: 'ws',\n    service: 'SOS',\n    endpointUrl: 'sensiasoft.net:8181/sensorhub/sos',\n    offeringID: 'urn:android:device:060693280a28e015-sos',\n    observedProperty: 'http://sensorml.com/ont/swe/property/Location',\n    startTime: '2015-02-16T07:58:30Z',\n    endTime: '2015-02-16T08:09:00Z',\n    replaySpeed: 2\n});\n")),Object(b.b)("p",null,"*",Object(b.b)("em",{parentName:"p"},"Useful only when used with DataSynchronizer")),Object(b.b)("p",null,"To create a new datasource type, see the ",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/advanced/developers/datasourcesdev"}),"developer docs"),"."))}p.isMDXComponent=!0}}]);