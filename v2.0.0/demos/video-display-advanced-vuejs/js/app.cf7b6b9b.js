(function(e){function t(t){for(var i,o,s=t[0],c=t[1],l=t[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},n={app:0},r=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="http://opensensorhub.github.io/osh-js/v2.0.0/demos/video-display-advanced-vuejs/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("85ec"),n=a.n(i);n.a},1801:function(e,t,a){},3023:function(e,t,a){},3467:function(e,t,a){},"398d":function(e,t,a){},"49a9":function(e,t,a){"use strict";var i=a("d04f"),n=a.n(i);n.a},"4b1f":function(e,t,a){"use strict";var i=a("398d"),n=a.n(i);n.a},5490:function(e,t,a){"use strict";var i=a("a6b6"),n=a.n(i);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire",dark:""}},[a("v-navigation-drawer",{attrs:{app:"",width:"220",clipped:"",dark:""},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}},[a("v-container",[a("v-treeview",{attrs:{items:e.items,"selection-type":e.selectionType,"selected-color":"#ef7245",selectable:"","item-disabled":"locked",dark:"","return-object":"","open-all":""},on:{input:e.onSelect},model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}}),a("v-spacer",{staticStyle:{height:"15px"}}),a("v-divider",{staticClass:"mx-4",attrs:{dark:""}}),a("v-spacer",{staticStyle:{height:"15px"}}),e.selection.length?e._l(e.selection,(function(t){return a("div",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})):[e._v(" No nodes selected. ")]],2)],1),a("v-app-bar",{attrs:{app:"","clipped-left":"",dense:"",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.left=!e.left}}}),a("v-spacer"),a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.right=!e.right}}})],1),a("v-content",{attrs:{app:""}},[a("div",{staticStyle:{display:"flex","flex-flow":"column wrap","align-items":"stretch",height:"100%"}},[a("Map",{staticStyle:{"flex-grow":"1"},attrs:{"location-data-source":e.locationDataSource,"heading-data-source":e.headingDataSource}}),a("time-line",{staticClass:"range"})],1)]),a("v-navigation-drawer",{attrs:{app:"",right:"",dark:"",width:"340"},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}},[a("v-container",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"25"}},e._l(e.selection,(function(t){return a("v-container",{key:t.dataSource.id},["chart-vcard"==t.type?a("chart-v-card",{attrs:{"data-source":t.dataSource}}):e._e(),"mjpeg-vcard"==t.type?a("mjpeg-video-v-card",{attrs:{"data-source":t.dataSource}}):e._e()],1)})),1)],1)],1)],1),a("v-footer",{attrs:{app:""}},[a("span",[a("img",{staticStyle:{height:"30px"},attrs:{src:"images/logo.png"}})]),a("span",[e._v("OpenSensorHub Â© 2020")])])],1)},r=[],o=(a("4de4"),a("caad"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map",attrs:{id:"map"}})}),s=[],c=(a("a4d3"),a("e01a"),a("99af"),a("d81d"),a("b0c0"),a("96cf"),a("1da1")),l=a("d4ec"),u=a("bee2"),d=a("45eb"),h=a("7e84"),f=a("262e"),p=a("2caf"),v=(a("4160"),a("c975"),a("159b"),a("ace4"),a("d3b7"),a("ac1f"),a("25f0"),a("8a79"),a("5319"),a("53ca"));Math.pow(2,53);function m(e){return"undefined"!==typeof e&&null!==e}function y(e){return m(e)&&null!==e}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"letiable";if(!m(e))throw t+" must be defined";return e}function S(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"letiable";if(b(e,a),Object(v["a"])(e)!==t)throw a+" must be of type "+t;return e}function T(e,t){return S(e,"string",t)}function g(e,t){return S(e,"number",t)}function O(e,t){if(g(e,t),e<=0)throw t+" must be a positive number"}function I(e,t){return S(e,"object",t)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"letiable";if(b(e,t),!Array.isArray(e))throw t+" must be an array";return e}function w(e,t){return S(e,"function",t)}function D(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,a="x"===e?t:3&t|8;return a.toString(16)}))}function E(){return m(Worker)}var A=function(){function e(){Object(l["a"])(this,e),this.eventMap={}}return Object(u["a"])(e,[{key:"remove",value:function(e,t){e in this.eventMap&&(this.eventMap[e]=this.eventMap[e].filter((function(e){return e.id!==t})))}},{key:"observe",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"any";m(e)&&m(t)&&m(a)&&(e in this.eventMap||(this.eventMap[e]=[]),this.eventMap[e].push({fn:t,id:a}))}},{key:"fire",value:function(e,t){if(m(e)&&e in this.eventMap)for(var a=this.eventMap[e],i=0;i<a.length;i++)a[i].fn(t)}}]),e}(),j=A,R=new j,x=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,null,[{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";R.remove("osh:"+e,t)}},{key:"registerView",value:function(e){e.registerCallback()}},{key:"unregisterView",value:function(e){e.unregisterCallback()}},{key:"fire",value:function(e,t){t.name=e,R.fire("osh:"+e,t)}},{key:"observe",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"any";R.observe("osh:"+e,t,a)}},{key:"observeDiv",value:function(e,t,a){var i=document.getElementById(e);i.addEventListener(t,a)}},{key:"EVENT",get:function(){return{DATA:"data",SYNC_DATA:"syncData",SELECT_VIEW:"selectView",SHOW_VIEW:"showView",CONNECT_DATASOURCE:"connectDataSource",DISCONNECT_DATASOURCE:"disconnectDataSource",DATASOURCE_UPDATE_TIME:"updateDataSourceTime",CURRENT_MASTER_TIME:"currentMasterTime",UAV_TAKEOFF:"uav:takeoff",UAV_GOTO:"uav:goto",UAV_LOOKAT:"uav:lookat",UAV_LAND:"uav:land",UAV_ORBIT:"uav:orbit",LOADING_START:"loading:start",LOADING_STOP:"loading:stop",ADD_VIEW_ITEM:"addViewItem",RESIZE:"resize",PTZ_SEND_REQUEST:"ptzSendRequest"}}}]),e}(),M=x,C=(a("c8d2"),function(){function e(t,a,i){Object(l["a"])(this,e),this.stylers=[],this.viewItems=[],this.names={},this.stylerToObj={},this.stylerIdToStyler={},this.lastRec={},this.selectedDataSources=[],this.dataSources=[],this.id="view-"+D(),this.dataSourceId=-1,m(i)&&m(i.dataSourceId)&&(this.dataSourceId=i.dataSourceId),m(i)&&m(i.entityId)&&(this.entityId=i.entityId),this.css="",this.cssSelected="",m(i)&&m(i.css)&&(this.css=i.css),m(i)&&m(i.cssSelected)&&(this.cssSelected=i.cssSelected),this.init(t,a,i)}return Object(u["a"])(e,[{key:"init",value:function(e,t,a){this.elementDiv=document.createElement("div"),this.elementDiv.setAttribute("id",this.id),this.elementDiv.setAttribute("class",this.css+" osh-view"),this.divId=this.id;var i=document.getElementById(e);if(m(i)&&null!==i?(i.appendChild(this.elementDiv),this.container=i):(document.body.appendChild(this.elementDiv),this.hide(),this.container=document.body),this.beforeAddingItems(a),m(t))for(var n=0;n<t.length;n++)this.addViewItem(t[n]);m(a)&&m(a.show)&&(document.getElementById(this.divId).style.display=a.show?"block":"none"),this.handleEvents();var r=this;m(a)&&m(a.dataSourceId)&&this.registerCallback();var o=new MutationObserver((function(e){e.forEach((function(e){"style"===e.attributeName&&r.onResize()}))}));o.observe(this.elementDiv,{attributes:!0})}},{key:"registerCallback",value:function(){var e=this;M.observe(this.getEventName(),(function(t){t.reset?e.reset():e.setData(e.dataSourceId,t.data)}),this.divId)}},{key:"unregisterCallback",value:function(){M.remove(this.getEventName(),this.divId)}},{key:"getEventName",value:function(){return M.EVENT.DATA+"-"+this.dataSourceId}},{key:"hide",value:function(){this.elementDiv.style.display="none"}},{key:"onResize",value:function(){}},{key:"attachTo",value:function(e){m(this.elementDiv.parentNode)&&this.elementDiv.parentNode.removeChild(this.elementDiv),document.getElementById(e).appendChild(this.elementDiv),"none"===this.elementDiv.style.display&&(this.elementDiv.style.display="block"),this.onResize()}},{key:"beforeAddingItems",value:function(e){}},{key:"getId",value:function(){return this.id}},{key:"getDivId",value:function(){return this.divId}},{key:"setData",value:function(e,t){}},{key:"show",value:function(e){}},{key:"destroy",value:function(){this.unregisterCallback()}},{key:"addViewItem",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.viewItems.push(t),t.hasOwnProperty("styler")&&function(){var e=t.styler;a.stylers.push(e),t.hasOwnProperty("name")&&(a.names[e.getId()]=t.name),e.viewItem=t,e.init(a),a.stylerIdToStyler[e.id]=e;for(var i=e.getDataSourcesIds(),n=function(n){var r=i[n],o=a;M.observe(M.EVENT.DATA+"-"+r,(function(a){if(!a.reset){var i=!1;i=m(o.selectedEntity)?t.entityId===o.selectedEntity:o.selectedDataSources.indexOf(r)>-1,e.setData(r,a.data,o,{selected:i}),o.lastRec[r]=a.data}}),a.divId),M.observe(M.EVENT.SELECT_VIEW,(function(a){var i=!1;i=m(a.entityId)?t.entityId===a.entityId:a.dataSourcesIds.indexOf(r)>-1,r in o.lastRec&&e.setData(r,o.lastRec[r],o,{selected:i})}),a.divId)},r=0;r<i.length;r++)n(r)}();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeViewItem",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.viewItems.includes(t)){for(a in t.styler.dataSourceToStylerMap)M.remove(M.EVENT.DATA+"-"+a,this.divId);this.viewItems=this.viewItems.filter((function(e){return e!==t}))}case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleEvents",value:function(){var e=this;M.observe(M.EVENT.SELECT_VIEW,(function(t){return e.selectDataView(t.dataSourcesIds,t.entityId)})),M.observe(M.EVENT.SHOW_VIEW,(function(t){return e.show(t)})),M.observe(M.EVENT.ADD_VIEW_ITEM,(function(t){m(t.viewId)&&t.viewId===e.id&&e.addViewItem(t.viewItem)})),M.observe(M.EVENT.RESIZE+"-"+this.divId,(function(t){return e.onResize()}))}},{key:"selectDataView",value:function(e,t){if(m(this.dataSources)){this.selectedDataSources=e,this.selectedEntity=t;for(var a=0;a<this.dataSources.length;a++)this.setData(this.dataSources[a],this.lastRec[this.dataSources[a]])}}},{key:"getDataSourcesId",value:function(){var e=[];-1!==this.dataSourceId&&e.push(this.dataSourceId);for(var t=0;t<this.viewItems.length;t++){var a=this.viewItems[t];if(a.hasOwnProperty("styler")){var i=a.styler;e=e.concat(i.getDataSourcesIds())}}return e}},{key:"reset",value:function(){}}]),e}()),_=C,L=a("0ff8"),F=a.n(L),N=(a("af26"),function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e,i,n){var r;Object(l["a"])(this,a),r=t.call(this,e,i,n);var o=document.getElementById(r.divId).className;return document.getElementById(r.divId).setAttribute("class",o+" "+r.css),r}return Object(u["a"])(a,[{key:"beforeAddingItems",value:function(e){this.initMap(e)}},{key:"initMap",value:function(e){var t={location:new F.a.LatLng(0,0),zoom:3};this.first=!0,this.watch=!1;var a=this.getDefaultLayers(),i=a[0].layer,n={},r={};n[a[0].name]=a[0].layer,r[a[1].name]=a[1].layer,m(e)&&(m(e.initialView)&&(t={location:new F.a.LatLng(e.initialView.lat,e.initialView.lon),zoom:e.initialView.zoom}),m(e.autoZoomOnFirstMarker)&&(this.first=!1),m(e.autoZoomOnFirstMarker)&&(this.autoZoomOnFirstMarker=e.autoZoomOnFirstMarker),m(e.overlayLayers)&&(r=e.overlayLayers),m(e.baseLayers)&&(n=e.baseLayers),m(e.defaultLayer)&&(i=e.defaultLayer)),this.map=new F.a.Map(this.divId,{fullscreenControl:!0,layers:i}),F.a.control.layers(n,r).addTo(this.map),this.map.setView(t.location,t.zoom),this.markers={},this.polylines={}}},{key:"getDefaultLayers",value:function(e){var t=22;m(e)&&e.maxZoom&&(t=e.maxZoom);var a='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',i="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",n='<a href="http://www.esri.com/">Esri</a>',r="i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",o=F.a.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"&copy; "+n+", "+r,maxZoom:t,maxNativeZoom:19}),s=F.a.tileLayer(i,{id:"mapbox.streets",attribution:a,maxZoom:t});return[{name:"OSM Streets",layer:s},{name:"Esri Satellite",layer:o}]}},{key:"initLayers",value:function(){var e="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",t='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',a=new F.a.tileLayer(e,{minZoom:1,maxZoom:22,attribution:t});this.map.addLayer(a)}},{key:"addMarker",value:function(e){var t=null;if(null!==e.icon){var a=F.a.icon({iconAnchor:e.iconAnchor,iconUrl:e.icon});t=F.a.marker([e.lat,e.lon],{icon:a})}else t=F.a.marker([e.lat,e.lon]);null!==e.label&&t.bindTooltip(e.label,{permanent:!1,direction:"center",offset:F.a.point(e.labelOffset[0],e.labelOffset[1])});var i=e.hasOwnProperty("name")&&null!=e.name?e.name:"",n=e.hasOwnProperty("description")&&null!=e.description?e.description:"";(i.length>0||n.length>0)&&t.bindPopup(i+"<div>"+n+"</div>"),t.addTo(this.map),t.setRotationAngle(e.orientation);var r="view-marker-"+D();this.markers[r]=t,!0===this.first&&(this.map.setView(new F.a.LatLng(e.lat,e.lon),19),this.first=!1);var o=this;return t._icon.id=r,t.on("click",(function(){var e=[];for(var t in o.stylerToObj)if(o.stylerToObj[t]===r){var a=o.stylerIdToStyler[t];M.fire(M.EVENT.SELECT_VIEW,{dataSourcesIds:e.concat(a.getDataSourcesIds()),entityId:a.viewItem.entityId});break}})),r}},{key:"removeViewItem",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["a"])(Object(h["a"])(a.prototype),"removeViewItem",this).call(this,t);case 2:i=this.stylerToObj[t.styler.getId()],n=this.markers[i],this.map.removeLayer(n),delete this.stylerToObj[t.styler.getId()],delete this.markers[i];case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addPolyline",value:function(e){for(var t=[],a=0;a<e.locations.length;a++)t.push(new F.a.LatLng(e.locations[a].y,e.locations[a].x));var i=new F.a.Polyline(t,{color:e.color,weight:e.weight,opacity:e.opacity,smoothFactor:e.smoothFactor}).addTo(this.map),n="view-polyline-"+D();return this.polylines[n]=i,n}},{key:"updateMarker",value:function(e){var t=0;e.getId()in this.stylerToObj?t=this.stylerToObj[e.getId()]:(t=this.addMarker({lat:e.location.y,lon:e.location.x,orientation:e.orientation.heading,color:e.color,icon:e.icon,iconAnchor:e.iconAnchor,label:e.label,labelColor:e.labelColor,labelSize:e.labelSize,labelOffset:e.labelOffset,name:e.viewItem.name,description:e.viewItem.description}),this.stylerToObj[e.getId()]=t);var a=this.markers[t],i=e.location.x,n=e.location.y;if(!isNaN(i)&&!isNaN(n)){var r=new F.a.LatLng(n,i);if(a.setLatLng(r),this.autoZoomOnFirstMarker){var o=[r],s=F.a.latLngBounds(o);this.map.fitBounds(s,{maxZoom:17})}}if(m(e.orientation)&&a.setRotationAngle(e.orientation.heading),null!==e.icon&&a._icon.iconUrl!==e.icon){var c=F.a.icon({iconAnchor:e.iconAnchor,iconUrl:e.icon});a.setIcon(c)}}},{key:"updatePolyline",value:function(e){var t=0;if(e.getId()in this.stylerToObj?t=this.stylerToObj[e.getId()]:(t=this.addPolyline({color:e.color,weight:e.weight,locations:e.locations,maxPoints:e.maxPoints,opacity:e.opacity,smoothFactor:e.smoothFactor}),this.stylerToObj[e.getId()]=t),t in this.polylines){var a=this.polylines[t];this.map.removeLayer(a);for(var i=[],n=0;n<e.locations.length;n++)i.push(new F.a.LatLng(e.locations[n].y,e.locations[n].x));a=new F.a.Polyline(i,{color:e.color,weight:e.weight,opacity:e.opacity,smoothFactor:e.smoothFactor}).addTo(this.map),this.polylines[t]=a}}},{key:"attachTo",value:function(e){Object(d["a"])(Object(h["a"])(a.prototype),"attachTo",this).call(this,e),this.map.invalidateSize()}},{key:"onResize",value:function(){Object(d["a"])(Object(h["a"])(a.prototype),"onResize",this).call(this);var e=this;setTimeout((function(){e.map.invalidateSize()}),100)}},{key:"onChange",value:function(e){}}]),a}(_));F.a.Map=F.a.Map.extend({openPopup:function(e){return this._popup=e,this.addLayer(e).fire("popupopen",{popup:this._popup})}}),function(){var e=F.a.Marker.prototype._initIcon,t=F.a.Marker.prototype._setPos,a="msTransform"===F.a.DomUtil.TRANSFORM;F.a.Marker.addInitHook((function(){var e=this.options.icon.options.iconAnchor;e&&(e=e[0]+"px "+e[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||e||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0})),F.a.Marker.include({_initIcon:function(){e.call(this)},_setPos:function(e){t.call(this,e),this.options.rotationAngle&&(this._icon.style[F.a.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,a?this._icon.style[F.a.DomUtil.TRANSFORM]=" rotate("+this.options.rotationAngle+"deg)":this._icon.style[F.a.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(e){return this.options.rotationAngle=e,this.update(),this},setRotationOrigin:function(e){return this.options.rotationOrigin=e,this.update(),this}})}();var U=N,V=a("257e"),P=function(){function e(t){Object(l["a"])(this,e),this.properties=t,this.id="styler-"+D(),this.dataSourceToStylerMap={},this.initEvents()}return Object(u["a"])(e,[{key:"checkFn",value:function(e){var t=this.properties[e],a=y(t);return a&&(k(t.dataSourceIds,e+".dataSourceIds"),w(t.handler,e+".handler")),a}},{key:"initEvents",value:function(){var e=this;M.observe(M.EVENT.DATASOURCE_UPDATE_TIME,(function(t){return e.clear()}))}},{key:"clear",value:function(){}},{key:"getId",value:function(){return this.id}},{key:"select",value:function(e){}},{key:"addFn",value:function(e,t){for(var a=0;a<e.length;a++){var i=e[a];m(this.dataSourceToStylerMap[i])||(this.dataSourceToStylerMap[i]=[]),this.dataSourceToStylerMap[i].push(t)}}},{key:"setData",value:function(e,t,a,i){if(e in this.dataSourceToStylerMap){for(var n=this.dataSourceToStylerMap[e],r=0;r<n.length;r++)n[r](t.data,t.timeStamp,i);return!0}return!1}},{key:"getDataSourcesIds",value:function(){var e=[];for(var t in this.dataSourceToStylerMap)e.push(t);return e}},{key:"init",value:function(){}}]),e}(),z=P,Z=function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e){var i;Object(l["a"])(this,a),i=t.call(this,e),i.properties=e,i.location=null,i.orientation={heading:0},i.icon=null,i.iconAnchor=[16,16],i.iconSize=[16,16],i.label=null,i.labelColor="#000000",i.labelSize=16,i.labelOffset=[0,0],i.color=null,i.defaultToTerrainElevation=!1,i.options={},m(e.defaultToTerrainElevation)&&(i.defaultToTerrainElevation=e.defaultToTerrainElevation),y(e.location)&&(I(e.location,"location"),i.location=e.location),y(e.orientation)&&(I(e.orientation,"orientation"),i.orientation=e.orientation),y(e.icon)&&(T(e.icon,"icon"),i.icon=e.icon),y(e.iconAnchor)&&(k(e.iconAnchor,"iconAnchor"),i.iconAnchor=e.iconAnchor),y(e.iconSize)&&(k(e.iconSize,"iconSize"),i.iconSize=e.iconSize),y(e.label)&&(T(e.label,"label"),i.label=e.label),y(e.labelColor)&&(T(e.labelColor,"labelColor"),i.labelColor=e.labelColor),y(e.labelSize)&&(O(e.labelSize,"labelSize"),i.labelSize=e.labelSize),y(e.labelOffset)&&(k(e.labelOffset,"labelOffset"),i.labelOffset=e.labelOffset);var n=Object(V["a"])(i);if(i.checkFn("locationFunc")){var r=function(t,a,i){n.location=e.locationFunc.handler(t,a,i)};i.addFn(e.locationFunc.dataSourceIds,r)}if(i.checkFn("orientationFunc")){var o=function(t,a,i){n.orientation=e.orientationFunc.handler(t,a,i)};i.addFn(e.orientationFunc.dataSourceIds,o)}if(i.checkFn("iconFunc")){var s=function(t,a,i){n.icon=e.iconFunc.handler(t,a,i)};i.addFn(e.iconFunc.dataSourceIds,s)}if(i.checkFn("labelFunc")){var c=function(t,a,i){n.label=e.labelFunc.handler(t,a,i)};i.addFn(e.labelFunc.dataSourceIds,c)}if(i.checkFn("labelColorFunc")){var u=function(t,a,i){n.labelColor=e.labelColorFunc.handler(t,a,i)};i.addFn(e.labelColorFunc.dataSourceIds,u)}if(i.checkFn("labelSizeFunc")){var d=function(t,a,i){n.labelSize=e.labelSizeFunc.handler(t,a,i)};i.addFn(e.labelSizeFunc.dataSourceIds,d)}return i}return Object(u["a"])(a,[{key:"init",value:function(e){Object(d["a"])(Object(h["a"])(a.prototype),"init",this).call(this,e),m(e)&&null!==this.location&&e.updateMarker(this,0,{})}},{key:"setData",value:function(e,t,i,n){return!(!Object(d["a"])(Object(h["a"])(a.prototype),"setData",this).call(this,e,t,i,n)||!m(i)||null===this.location)&&(i.updateMarker(this,t.timeStamp,n),!0)}}]),a}(z),W=Z,B={name:"Map",components:{},mounted:function(){this.init()},props:["locationDataSource","headingDataSource"],methods:{init:function(){var e=new W({locationFunc:{dataSourceIds:[this.locationDataSource.getId()],handler:function(e){return{x:e.location.lon,y:e.location.lat,z:e.location.alt}}},orientationFunc:{dataSourceIds:[this.headingDataSource.getId()],handler:function(e){var t=e.orient.qx,a=e.orient.qy,i=e.orient.qz,n=e.orient.q0,r=0,o=0,s=-1,c=n*r+a*s-i*o,l=n*o+i*r-t*s,u=n*s+t*o-a*r,d=-t*r-a*o-i*s,h=c*n+d*-t+l*-i-u*-a,f=l*n+d*-a+u*-t-c*-i,p=90-180/Math.PI*Math.atan2(f,h);return{heading:p+70}}},icon:"./images/car-topview.png",iconAnchor:[16,32]});this.view=new U("map",[{styler:e,name:"Android Phone GPS"}],{watch:!0})}}},G=B,H=(a("5490"),a("2877")),q=Object(H["a"])(G,o,s,!1,null,null,null),Y=q.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{id:"timeline-container"}})},J=[],K=(a("1276"),a("3023"),a("e9fa")),Q=(a("0436"),a("5070")),X=function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e,i){var n;Object(l["a"])(this,a),n=t.call(this,e,[],i),n.slider=document.createElement("div");var r=document.createElement("div"),o=document.createElement("a");r.appendChild(o),n.slider.setAttribute("class","osh-rangeslider-slider"),r.setAttribute("class","osh-rangeslider-control");var s=Object(V["a"])(n);r.addEventListener("click",(function(e){r.className.indexOf("osh-rangeslider-control-select")>-1?(r.setAttribute("class","osh-rangeslider-control"),s.deactivate()):(r.setAttribute("class","osh-rangeslider-control-select"),s.activate())})),document.getElementById(n.divId).appendChild(n.slider),document.getElementById(n.divId).appendChild(r);var c=(new Date).getTime();return n.endTime=new Date("2055-01-01T00:00:00Z").getTime(),n.slider.setAttribute("disabled",!0),n.dataSourcesId=[],n.multi=!1,n.dataCount=0,n.refreshRate=10,m(i)&&(m(i.startTime)&&(c=new Date(i.startTime).getTime()),m(i.endTime)&&(n.endTime=new Date(i.endTime).getTime()),m(i.dataSourcesId)&&(n.dataSourcesId=i.dataSourcesId),m(i.refreshRate)&&(n.refreshRate=i.refreshRate)),K["create"](n.slider,{start:[c,n.endTime],range:{min:c,max:n.endTime},format:Q({decimals:0}),behaviour:"drag",connect:!0,tooltips:[Q({decimals:1,edit:function(e){var t=new Date(parseInt(e)).toISOString().replace(".000Z","Z");return t.split("T")[1].split("Z")[0].split(".")[0]}}),Q({decimals:1,edit:function(e){var t=new Date(parseInt(e)).toISOString().replace(".000Z","Z");return t.split("T")[1].split("Z")[0].split(".")[0]}})],pips:{mode:"positions",values:[5,25,50,75],density:1,format:Q({edit:function(e){return new Date(parseInt(e)).toISOString().replace(".000Z","Z").split("T")[1].split("Z")[0].split(".")[0]}})}}),n.slider.noUiSlider.on("slide",(function(e,t){s.update=!0})),n.slider.noUiSlider.on("end",(function(e,t){s.onChange(e[0],e[1])})),M.observe(M.EVENT.CURRENT_MASTER_TIME,(function(e){var t=!0;s.dataSourcesId.length>0&&s.dataSourcesId.indexOf(e.dataSourceId)<0&&(t=!1),t&&!s.lock&&++s.dataCount%s.refreshRate==0&&(s.slider.noUiSlider.set([e.timeStamp]),s.dataCount=0)})),n}return Object(u["a"])(a,[{key:"deactivate",value:function(){if(this.slider.setAttribute("disabled",!0),this.lock=!1,this.update){var e=this.slider.noUiSlider.get();M.fire(M.EVENT.DATASOURCE_UPDATE_TIME,{startTime:new Date(parseInt(e[0])).toISOString(),endTime:new Date(parseInt(e[1])).toISOString()})}this.update=!1}},{key:"activate",value:function(){this.slider.removeAttribute("disabled"),this.lock=!0}},{key:"setData",value:function(e,t){this.lock||++this.dataCount%this.refreshRate!==0||(this.slider.noUiSlider.set([t.timeStamp]),this.dataCount=0)}},{key:"onChange",value:function(e,t){}}]),a}(_),ee=X,te={name:"TimeLine",props:["dataSources"],mounted:function(){new ee("timeline-container",{startTime:"2015-02-16T07:58:35Z",endTime:"2015-02-16T08:09:00Z",refreshRate:1})}},ae=te,ie=(a("e5e0"),a("9fb2"),Object(H["a"])(ae,$,J,!1,null,"d15d1608",null)),ne=ie.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{attrs:{color:"#385F73",dark:""}},[a("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.title)+" ")]),a("v-container",{attrs:{id:e.id}})],1)],1)},oe=[],se=function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e){var i;Object(l["a"])(this,a),i=t.call(this,e),i.xLabel="",i.yLabel="",i.color="#000000",i.stroke=1,i.x=0,i.y=[];var n=Object(V["a"])(i);if(m(e.stroke)&&(i.stroke=e.stroke),m(e.color)&&(i.color=e.color),m(e.x)&&(i.x=e.x),m(e.y)&&(i.y=e.y),m(e.strokeFunc)){var r=function(t,a,i){n.stroke=e.strokeFunc.handler(t,a,i)};i.addFn(e.strokeFunc.dataSourceIds,r)}if(m(e.colorFunc)){var o=function(t,a,i){n.color=e.colorFunc.handler(t,a,i)};i.addFn(e.colorFunc.dataSourceIds,o)}if(m(e.valuesFunc)){var s=function(t,a,i){var r=e.valuesFunc.handler(t,a,i);n.x=r.x,n.y=r.y};i.addFn(e.valuesFunc.dataSourceIds,s)}return i}return Object(u["a"])(a,[{key:"setData",value:function(e,t,i,n){return!(!Object(d["a"])(Object(h["a"])(a.prototype),"setData",this).call(this,e,t,i,n)||!m(i))&&(i.updateCurve(this,t.timeStamp,n),!0)}}]),a}(z),ce=se,le=a("5530"),ue=a("705b"),de=a.n(ue),he=(a("dab4"),function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e,i,n){var r;Object(l["a"])(this,a),r=t.call(this,e,i,n);var o="Time",s="Values";r.datasetsOpts={},r.gridLinesOpts={},r.tickOpts={},r.scaleLabelOpts={},r.legendOpts={},r.options={},m(n)&&(n.hasOwnProperty("options")&&(r.options=n.options),n.hasOwnProperty("datasetsOpts")&&(r.datasetsOpts=n.datasetsOpts),n.hasOwnProperty("gridLinesOpts")&&(r.gridLinesOpts=n.gridLinesOpts),n.hasOwnProperty("scaleLabelOpts")&&(r.scaleLabelOpts=n.scaleLabelOpts),n.hasOwnProperty("tickOpts")&&(r.tickOpts=n.tickOpts),n.hasOwnProperty("legendOpts")&&(r.legendOpts=n.legendOpts),n.hasOwnProperty("maxPoints")&&(r.maxPoints=n.maxPoints));var c=document.getElementById(r.divId),u=document.createElement("canvas");u.setAttribute("id",D()),c.appendChild(u);var d=r.tickOpts||5,h=d.maxTicksLimit;return r.maxPoints=h,r.chart=new de.a(u,{labels:[],type:"line",data:{datasets:[]},options:Object(le["a"])({legend:Object(le["a"])({},r.legendOpts),animation:{duration:1e3},spanGaps:!0,scales:{yAxes:[{scaleLabel:Object(le["a"])({display:!0,labelString:s},r.scaleLabelOpts),ticks:Object(le["a"])({maxTicksLimit:5},r.tickOpts),gridLines:r.gridLinesOpts}],xAxes:[{scaleLabel:Object(le["a"])({display:!0,labelString:o},r.scaleLabelOpts),type:"time",time:{unit:"second"},ticks:Object(le["a"])({maxTicksLimit:5},r.tickOpts),gridLines:r.gridLinesOpts}]},responsive:!0,maintainAspectRatio:!0},r.options)}),r.datasets={},r}return Object(u["a"])(a,[{key:"updateCurve",value:function(e,t,a){var i=this.datasets[e.getId()];m(i)||(i={label:e.viewItem.name,fillColor:"rgba(220,220,0,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[]},i=Object(le["a"])(Object(le["a"])({},i),this.datasetsOpts),this.datasets[e.getId()]=i,this.chart.data.datasets.push(i)),i.data.length>=this.maxPoints&&(this.chart.options.scales.xAxes[0].ticks.min=this.chart.data.labels[2]),i.data.push({x:e.x,y:e.y}),this.chart.data.labels.push(e.x),this.chart.update(),i.data.length>this.maxPoints&&(this.chart.data.labels.shift(),i.data.shift())}}]),a}(_)),fe=he,pe={name:"VCardViewElement",props:["dataSource"],data:function(){return{title:"Weather",id:D()}},mounted:function(){var e=new ce({valuesFunc:{dataSourceIds:[this.dataSource.id],handler:function(e,t){return{x:t,y:e.windSpeed}}}});new fe(this.id,[{styler:e,name:"WindSpeed"}],{name:"WindSpeed/Pressure chart",yLabel:"Wind Speed (m/s)",xLabel:"Time",css:"chart-view",gridLinesOpts:{color:"#FFF"},tickOpts:{fontColor:"#FFF",maxTicksLimit:4},scaleLabelOpts:{fontColor:"#FFF",padding:1},datasetsOpts:{borderColor:"#a3a3a3",borderWidth:1},legendOpts:{labels:{fontColor:"white",fontSize:14}}})}},ve=pe,me=(a("a72e"),Object(H["a"])(ve,re,oe,!1,null,"5cb126aa",null)),ye=me.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{attrs:{color:"#385F73",dark:""}},[a("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.title)+" ")]),a("v-container",{attrs:{id:e.id}})],1)],1)},Se=[],Te=(a("3ca3"),a("ddb0"),a("2b3d"),function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e,i){var n;if(Object(l["a"])(this,a),n=t.call(this,e,[],i),n.timeStamp=null,m(i.showTime)&&i.showTime&&(n.timeStamp=document.createElement("div"),n.timeStamp.setAttribute("class","video-time"),document.getElementById(n.divId).appendChild(n.timeStamp)),n.imgTag=document.createElement("img"),n.imgTag.setAttribute("class","video-mjpeg"),n.rotation=0,"undefined"!=typeof i&&"undefined"!=typeof i.rotation){n.rotation=i.rotation*Math.PI/180,n.canvas=document.createElement("canvas"),n.canvas.width=640,n.canvas.height=480;var r=n.canvas.getContext("2d");r.translate(0,480),r.rotate(n.rotation),document.getElementById(n.divId).appendChild(n.canvas)}else document.getElementById(n.divId).appendChild(n.imgTag);var o=Object(V["a"])(n);return M.observeDiv(n.divId,"click",(function(e){M.fire(M.EVENT.SELECT_VIEW,{dataSourcesIds:[o.dataSourceId],entityId:o.entityId})})),n}return Object(u["a"])(a,[{key:"setData",value:function(e,t){var a=this.imgTag.src;this.imgTag.src=t.data,null!==this.timeStamp&&(this.timeStamp.innerHTML=new Date(t.timeStamp).toISOString()),window.URL.revokeObjectURL(a)}},{key:"selectDataView",value:function(e,t){e.indexOf(this.dataSourceId)>-1||m(this.entityId)&&this.entityId===t?document.getElementById(this.divId).setAttribute("class",this.css+" "+this.cssSelected):document.getElementById(this.divId).setAttribute("class",this.css)}},{key:"reset",value:function(){this.imgTag.src=""}}]),a}(_)),ge=Te,Oe={name:"MjpegVideoVCard",props:["dataSource"],data:function(){return{title:"Android Mjpeg Video",id:D()}},mounted:function(){new ge(this.id,{dataSourceId:this.dataSource.id,css:"video-mjpeg",name:"Android Video",keepRatio:!0,showTime:!0})}},Ie=Oe,ke=(a("9e51"),a("4b1f"),Object(H["a"])(Ie,be,Se,!1,null,"43253d1c",null)),we=ke.exports,De=(a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("2ca0"),function(){function e(t){Object(l["a"])(this,e),this.url=t,this.id="DataConnector-"+D(),this.reconnectTimeout=12e4}return Object(u["a"])(e,[{key:"setUrl",value:function(e){this.url=e}},{key:"getId",value:function(){return this.id}},{key:"getUrl",value:function(){return this.url}},{key:"setReconnectTimeout",value:function(e){this.reconnectTimeout=e}},{key:"onReconnect",value:function(){}}]),e}()),Ee=De,Ae=function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e){var i;return Object(l["a"])(this,a),i=t.call(this,e),i.blobURL=URL.createObjectURL(new Blob(["(",function(){var e=null;function t(t){e=new WebSocket(t),e.binaryType="arraybuffer",e.onmessage=function(e){e.data.byteLength>0&&self.postMessage(e.data,[e.data])},e.onerror=function(e){console.error("WebSocket WebWorker stream error: "+e),a()}}function a(){e.readyState===WebSocket.OPEN&&e.close()}self.onmessage=function(e){"close"===e.data?a():t(e.data)}}.toString(),")()"],{type:"application/javascript"})),i.interval=-1,i.lastTimestamp=-1,i}return Object(u["a"])(a,[{key:"connect",value:function(){if(!this.init){if(this.init=!0,E()){var e=this.getUrl();this.worker=new Worker(this.blobURL),this.worker.postMessage(e),this.worker.onmessage=function(e){this.lastTimestamp=Date.now(),this.onMessage(e.data)}.bind(this),this.worker.onerror=function(e){console.error("WebSocket stream error: "+e),this.worker.close(),this.init=!1}.bind(this)}else this.ws=new WebSocket(this.getUrl()),this.ws.binaryType="arraybuffer",this.ws.onmessage=function(e){this.lastTimestamp=Date.now(),e.data.byteLength>0&&this.onMessage(e.data)}.bind(this),this.ws.onerror=function(e){console.error("WebSocket stream error: "+e),this.ws.close(),this.init=!1,this.lastTimestamp=-1}.bind(this);-1===this.interval&&(this.interval=window.setInterval(function(){var e=Date.now(),t=e-this.lastTimestamp;(-1===this.lastTimestamp||t>=this.reconnectTimeout)&&(console.warn("trying to reconnect.."),this.reconnect())}.bind(this),this.reconnectTimeout))}}},{key:"disconnect",value:function(){this.fullDisconnect(!0)}},{key:"fullDisconnect",value:function(e){null!=this.worker?(this.worker.postMessage("close"),this.worker.terminate(),this.init=!1):null!=this.ws&&(this.ws.close(),this.init=!1),e&&window.clearInterval(this.interval)}},{key:"reconnect",value:function(){this.onReconnect(),this.init&&this.fullDisconnect(!1),this.connect()}},{key:"onMessage",value:function(e){}},{key:"close",value:function(){this.disconnect()}}]),a}(Ee),je=Ae,Re=function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e,i){var n;return Object(l["a"])(this,a),n=t.call(this,e),n.method="POST",n.responseType="arraybuffer",m(i)&&(i.method&&(n.method=i.method),i.responseType&&(n.responseType=i.responseType)),n}return Object(u["a"])(a,[{key:"sendRequest",value:function(e,t){var a=this,i=new XMLHttpRequest;i.timeout=6e4,null===e?(m(t)?i.open("GET",this.getUrl()+"?"+t,!0):i.open("GET",this.getUrl(),!0),i.responseType=this.responseType,i.onload=function(e){i.response&&a.onMessage(i.response)},i.ontimeout=function(e){console.log("Timeout")},i.send(null)):(i.open("POST",this.getUrl(),!0),i.setRequestHeader("Content-Type","text/xml"),i.send(e),i.onreadystatechange=function(){i.readyState<4||4===i.readyState&&(200===i.status&&i.status<300?a.onSuccess(i.responseText):a.onError(""))})}},{key:"onError",value:function(e){}},{key:"onSuccess",value:function(e){}},{key:"connect",value:function(){this.sendRequest(null)}}]),a}(Ee),xe=Re,Me=function(){function e(t,a){Object(l["a"])(this,e),this.id="DataSource-"+D(),this.name=t,this.properties=a,this.timeShift=0,this.connected=!1,this.initDataSource(a),this.lastTimeStamp=Date.now(),this.lastStartTime="now"}return Object(u["a"])(e,[{key:"initDataSource",value:function(e){var t=this;m(e.timeShift)&&(this.timeShift=e.timeShift),m(e.syncMasterTime)?this.syncMasterTime=e.syncMasterTime:this.syncMasterTime=!1,m(e.bufferingTime)&&(this.bufferingTime=e.bufferingTime),m(e.timeOut)&&(this.timeOut=e.timeOut),m(e.connect)||(e.connect=!0),e.protocol.startsWith("ws")?(this.connector=new je(this.buildUrl(e)),this.connector.onMessage=this.onMessage.bind(this)):e.protocol.startsWith("http")&&(this.connector=new xe(this.buildUrl(e)),this.connector.responseType="arraybuffer",this.connector.onMessage=this.onMessage.bind(this)),this.connector.onReconnect=function(){"now"!==t.lastStartTime&&(e.startTime=new Date(t.lastTimeStamp).toISOString(),t.connector.setUrl(t.buildUrl(e)))}}},{key:"disconnect",value:function(){this.connector.disconnect(),this.connected=!1,M.fire(M.EVENT.DATA+"-"+this.id,{dataSourceId:this.id,reset:!0})}},{key:"connect",value:function(){this.connector.connect(),this.connected=!0}},{key:"onMessage",value:function(e){this.onData({timeStamp:this.parseTimeStamp(e)+this.timeShift,data:this.parseData(e)})}},{key:"parseTimeStamp",value:function(e){return(new Date).getTime()}},{key:"parseData",value:function(e){return e}},{key:"onData",value:function(e){M.fire(M.EVENT.DATA+"-"+this.id,{data:e})}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"buildUrl",value:function(e){var t="";t+=e.protocol+"://",t+=e.endpointUrl+"?",t+="service="+e.service+"&",t+="version=2.0&",t+="request=GetResult&",t+="offering="+e.offeringID+"&",e.foiURN&&""!==e.foiURN&&(t+="featureOfInterest="+e.foiURN+"&"),t+="observedProperty="+e.observedProperty+"&",this.lastStartTime=e.startTime;var a=e.endTime;return t+="temporalFilter=phenomenonTime,"+this.lastStartTime+"/"+a+"&",e.replaySpeed&&(t+="replaySpeed="+e.replaySpeed),e.responseFormat&&(t+="&responseFormat="+e.responseFormat),t}},{key:"setReconnectTimeout",value:function(e){return this.connector.setReconnectTimeout(e)}}]),e}(),Ce=Me,_e=function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(){return Object(l["a"])(this,a),t.apply(this,arguments)}return Object(u["a"])(a,[{key:"parseTimeStamp",value:function(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return this.lastTimeStamp=new Date(JSON.parse(t)["time"]).getTime(),this.lastTimeStamp}},{key:"parseData",value:function(e){var t=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),a={};for(var i in t)"time"!==i&&(a[i]=t[i]);return a}},{key:"buildUrl",value:function(e){var t="";t+=e.protocol+"://",t+=e.endpointUrl+"?",t+="service="+e.service+"&",t+="version=2.0&",t+="request=GetResult&",t+="offering="+e.offeringID+"&",e.foiURN&&""!==e.foiURN&&(t+="featureOfInterest="+e.foiURN+"&"),t+="observedProperty="+e.observedProperty+"&";var a=e.startTime,i=e.endTime;return"now"!==a&&0!==this.timeShift&&"urn:android:device:060693280a28e015-sos"!==e.offeringID&&(a=new Date(Date.parse(a)-this.timeShift).toISOString(),i=new Date(Date.parse(i)-this.timeShift).toISOString()),t+="temporalFilter=phenomenonTime,"+a+"/"+i+"&",e.replaySpeed&&(t+="replaySpeed="+e.replaySpeed),t+="&responseFormat=application/json",t}}]),a}(Ce),Le=_e,Fe=(a("fb6a"),function(e){Object(f["a"])(a,e);var t=Object(p["a"])(a);function a(e,i){var n;return Object(l["a"])(this,a),n=t.call(this,e,i),n.setReconnectTimeout(5e3),n}return Object(u["a"])(a,[{key:"parseTimeStamp",value:function(e){return this.lastTimeStamp=1e3*new DataView(e).getFloat64(0,!1),this.lastTimeStamp}},{key:"parseData",value:function(e){var t=new Blob([e]),a=window.URL.createObjectURL(t.slice(12));return window.URL.revokeObjectURL(t),a}}]),a}(Ce)),Ne=Fe,Ue=3e3,Ve=Math.pow(2,53)+1,Pe={CANCEL:"cancel",START:"start",STOP:"stop",NOT_START_YET:"notStartYet"},ze=function(){function e(t){Object(l["a"])(this,e),this.buffers={},this.replayFactor=1,m(t)&&m(t.replayFactor)&&(this.replayFactor=t.replayFactor),this.stop=!1,this.isStarted=!1,this.bufferingState=!1}return Object(u["a"])(e,[{key:"startObservers",value:function(){this.observeId=D(),this.boundHandlerMethod=this.push.bind(this),M.observe(M.EVENT.DATA,this.boundHandlerMethod,this.observeId)}},{key:"stopObservers",value:function(){(m(this.observeId)||null!==this.observeId)&&(M.observe(M.EVENT.DATA,this.boundHandlerMethod,this.observeId),this.observeId="undefined")}},{key:"start",value:function(){this.isStarted=!0,this.stop=!1,this.startObservers(),this.startRealTime=(new Date).getTime(),this.processSyncData()}},{key:"stop",value:function(){this.stopObservers(),this.stop=!0}},{key:"cancelAll",value:function(){for(var e in this.buffers)this.cancelDataSource(e)}},{key:"cancelDataSource",value:function(e){this.buffers[e].buffer=[],this.buffers[e].status=Pe.CANCEL}},{key:"startDataSource",value:function(e){this.buffers[e].status=Pe.NOT_START_YET,this.buffers[e].lastRecordTime=Date.now()}},{key:"startAll",value:function(){for(var e in this.buffers)this.startDataSource(e)}},{key:"addDataSource",value:function(e,t){this.buffers[e]={buffer:[],syncMasterTime:!1,bufferingTime:Ue,timeOut:3e3,lastRecordTime:Date.now(),status:Pe.NOT_START_YET,name:"undefined"},m(t)&&(m(t.syncMasterTime)&&(this.buffers[e].syncMasterTime=t.syncMasterTime),m(t.bufferingTime)&&(this.buffers[e].bufferingTime=t.bufferingTime),m(t.timeOut)&&(this.buffers[e].timeOut=t.timeOut),m(t.name)&&(this.buffers[e].name=t.name))}},{key:"addEntity",value:function(e,t){if(m(e.dataSources))for(var a=0;a<e.dataSources.length;a++)this.addDataSource(e.dataSources[a],t)}},{key:"push",value:function(e){var t=e.dataSourceId,a=this.buffers[t],i=a.syncMasterTime;i&&e.data.timeStamp<this.currentTime||a.status!==Pe.CANCEL&&(a.status===Pe.NOT_START_YET&&(a.startRelativeTime=e.data.timeStamp,a.startRelativeRealTime=(new Date).getTime(),a.status=Pe.START),a.buffer.push(e.data),a.lastRecordTime=Date.now(),i||this.dispatchData(t,a.buffer.shift()))}},{key:"processSyncData",value:function(){var e=this;if(!this.bufferingState){var t=null,a=null,i=Ve,n=this;for(var r in this.buffers){var o=this.buffers[r];if((o.status===Pe.START||o.status===Pe.NOT_START_YET)&&o.syncMasterTime)if(0===o.buffer.length){var s=o.timeOut-(Date.now()-o.lastRecordTime);if(s>0)return void window.setTimeout((function(){return e.processSyncData()}),s/10);console.log("Timeout of data source "+r)}else o.buffer[0].timeStamp<i&&(t=o,a=r,i=o.buffer[0].timeStamp)}null!==t?(this.currentTime=i,this.processData(t,a,(function(){n.processSyncData()}))):window.setTimeout((function(){n.processSyncData()}),1e3)}}},{key:"processData",value:function(e,t,a){var i=e.startRelativeTime,n=(new Date).getTime()-e.startRelativeRealTime,r=e.buffer.shift(),o=(r.timeStamp-i)/this.replayFactor-n;if(e.startRelativeTime=r.timeStamp,e.startRelativeRealTime=(new Date).getTime(),o>0){var s=this;window.setTimeout((function(){s.dispatchData(t,r),m(a)&&a()}),o)}else this.dispatchData(t,r),m(a)&&a()}},{key:"dispatchData",value:function(e,t){var a=this.buffers[e];a.status!==Pe.CANCEL&&(a.syncMasterTime&&M.fire(M.EVENT.CURRENT_MASTER_TIME,{timeStamp:t.timeStamp,dataSourceId:e}),M.fire(M.EVENT.DATA+"-"+e,{data:t}))}},{key:"buffering",value:function(e,t){M.fire(M.EVENT.LOADING_START,{name:e}),this.bufferingState=!0;var a=this;window.setTimeout((function(){a.bufferingState=!1,M.fire(M.EVENT.LOADING_STOP),a.processSyncData()}),t)}}]),e}(),Ze=ze,We=function(){function e(t){var a=this;Object(l["a"])(this,e),this.options=t,this.initBuffer(),this.dataSourcesIdToDataSources={};var i=this;M.observe(M.EVENT.CONNECT_DATASOURCE,(function(e){i.buffer.isStarted||i.buffer.start();for(var t=e.dataSourcesId,a=0;a<t.length;a++){var n=t[a];n in i.dataSourcesIdToDataSources&&(i.dataSourcesIdToDataSources[n].syncMasterTime&&m(i.buffer.currentTime)&&i.updateDataSourceTime(n,new Date(i.buffer.currentTime).toISOString()),i.dataSourcesIdToDataSources[n].connect(),i.buffer.startDataSource(n))}})),M.observe(M.EVENT.DISCONNECT_DATASOURCE,(function(e){for(var t=e.dataSourcesId,a=0;a<t.length;a++){var n=t[a];n in i.dataSourcesIdToDataSources&&(i.dataSourcesIdToDataSources[n].disconnect(),i.buffer.cancelDataSource(n))}})),M.observe(M.EVENT.DATASOURCE_UPDATE_TIME,(function(e){var t=[];for(var n in i.dataSourcesIdToDataSources){var r=i.dataSourcesIdToDataSources[n];r.syncMasterTime&&r.connected&&(r.disconnect(),i.buffer.cancelDataSource(n),t.push(n))}i.buffer.currentTime=Date.parse(e.startTime);for(var o=0;o<t.length;o++){var s=t[o],c=a.dataSourcesIdToDataSources[s];i.updateDataSourceTime(s,e.startTime,e.endTime),c.connect(),i.buffer.startDataSource(s)}}))}return Object(u["a"])(e,[{key:"updateDataSourceTime",value:function(e,t,a){var i=this.dataSourcesIdToDataSources[e],n=i.properties,r=i.options;m(t)&&(n.startTime=t),m(a)&&(n.endTime=a),i.initDataSource(n,r)}},{key:"initBuffer",value:function(){this.buffer=new Ze(this.options)}},{key:"addEntity",value:function(e,t){if(m(e.dataSources))for(var a=0;a<e.dataSources.length;a++)this.addDataSource(e.dataSources[a],t)}},{key:"addDataSource",value:function(e,t){this.dataSourcesIdToDataSources[e.id]=e,this.buffer.addDataSource(e.id,{name:e.name,syncMasterTime:e.syncMasterTime,bufferingTime:e.bufferingTime,timeOut:e.timeOut});var a=this;e.onData=function(t){return a.buffer.push({dataSourceId:e.getId(),data:t})}}},{key:"connectAll",value:function(){for(var e in this.buffer.start(),this.dataSourcesIdToDataSources){var t=this.dataSourcesIdToDataSources[e];t.properties.connect&&t.connect()}}},{key:"connect",value:function(e){for(var t in this.buffer.isStarted||this.buffer.start(),this.dataSourcesIdToDataSources){var a=this.dataSourcesIdToDataSources[t];a.id===e&&a.connect()}}},{key:"disconnect",value:function(e){for(var t in this.dataSourcesIdToDataSources){var a=this.dataSourcesIdToDataSources[t];a.id===e&&a.disconnect()}}}]),e}(),Be=We,Ge={components:{Map:Y,MjpegVideoVCard:we,ChartVCard:ye,TimeLine:ne},data:function(){return{mini:!0,left:null,right:null,selectionType:"leaf",selection:[],selectionIds:[],dataSources:{},items:[],locationDataSource:new Le("android-GPS",{protocol:"ws",service:"SOS",endpointUrl:"sensiasoft.net:8181/sensorhub/sos",offeringID:"urn:android:device:060693280a28e015-sos",observedProperty:"http://sensorml.com/ont/swe/property/Location",startTime:"2015-02-16T07:58:32Z",endTime:"2015-02-16T08:09:00Z",syncMasterTime:!0,bufferingTime:0,timeShift:-16e3,replaySpeed:2}),headingDataSource:new Le("android-Att",{protocol:"ws",service:"SOS",endpointUrl:"sensiasoft.net:8181/sensorhub/sos",offeringID:"urn:android:device:060693280a28e015-sos",observedProperty:"http://sensorml.com/ont/swe/property/OrientationQuaternion",startTime:"2015-02-16T07:58:35Z",endTime:"2015-02-16T08:09:00Z",syncMasterTime:!0,bufferingTime:0,replaySpeed:2}),videoDataSource:new Ne("android-Video",{protocol:"ws",service:"SOS",endpointUrl:"sensiasoft.net:8181/sensorhub/sos",offeringID:"urn:android:device:060693280a28e015-sos",observedProperty:"http://sensorml.com/ont/swe/property/VideoFrame",startTime:"2015-02-16T07:58:35Z",endTime:"2015-02-16T08:09:00Z",syncMasterTime:!0,bufferingTime:0,replaySpeed:2}),weatherDataSource:new Le("weather",{protocol:"ws",service:"SOS",endpointUrl:"sensiasoft.net:8181/sensorhub/sos",offeringID:"urn:mysos:offering03",observedProperty:"http://sensorml.com/ont/swe/property/Weather",startTime:"now",endTime:"2055-01-01Z",syncMasterTime:!1,bufferingTime:0}),dataProviderController:new Be({replayFactor:2})}},computed:{},mounted:function(){this.items.push({id:1,name:"Android Phone",locked:!1,children:[{id:2,name:"GPS",dataSource:this.locationDataSource,type:"center",locked:!0},{id:3,name:"Video",type:"mjpeg-vcard",dataSource:this.videoDataSource,locked:!0},{id:4,name:"Heading",dataSource:this.headingDataSource,type:"center",locked:!0}]}),this.items.push({id:5,name:"Weather",type:"chart-vcard",dataSource:this.weatherDataSource,locked:!1}),this.dataSources["2"]=this.locationDataSource,this.dataSources["3"]=this.videoDataSource,this.dataSources["4"]=this.headingDataSource,this.dataSources["5"]=this.weatherDataSource;var e={id:"entity-"+D(),name:"Android Phone",dataSources:[this.locationDataSource,this.videoDataSource,this.headingDataSource]};this.dataProviderController.addEntity(e),this.dataProviderController.addDataSource(this.weatherDataSource,{})},methods:{onSelect:function(e){var t=this,a=[];if(Array.isArray(e))for(var i=0;i<e.length;i++)a.push(e[i].dataSource.id);else a.push(e.dataSource.id);M.fire(M.EVENT.CONNECT_DATASOURCE,{dataSourcesId:a.filter((function(e){return!t.selectionIds.includes(e)}))}),M.fire(M.EVENT.DISCONNECT_DATASOURCE,{dataSourcesId:this.selectionIds.filter((function(e){return!a.includes(e)}))}),this.selectionIds=a}},created:function(){this.$vuetify.theme.dark=!0}},He=Ge,qe=(a("034f"),a("49a9"),Object(H["a"])(He,n,r,!1,null,"cda6c662",null)),Ye=qe.exports,$e=a("ce5b"),Je=a.n($e);a("bf40");i["default"].use(Je.a),i["default"].config.productionTip=!1,new i["default"]({vuetify:new Je.a({theme:{dark:!0}}),data:function(){return{drawer:null,drawerRight:null,right:!1,left:!1}},render:function(e){return e(Ye)}}).$mount("#app")},7124:function(e,t,a){},"85ec":function(e,t,a){},"9a97":function(e,t,a){},"9e51":function(e,t,a){"use strict";var i=a("1801"),n=a.n(i);n.a},"9fb2":function(e,t,a){"use strict";var i=a("3467"),n=a.n(i);n.a},a6b6:function(e,t,a){},a72e:function(e,t,a){"use strict";var i=a("9a97"),n=a.n(i);n.a},c8d2:function(e,t,a){},d04f:function(e,t,a){},e5e0:function(e,t,a){"use strict";var i=a("7124"),n=a.n(i);n.a}});
//# sourceMappingURL=app.cf7b6b9b.js.map