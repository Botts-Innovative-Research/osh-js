!function(Q){var I={};function B(F){if(I[F])return I[F].exports;var g=I[F]={i:F,l:!1,exports:{}};return Q[F].call(g.exports,g,g.exports,B),g.l=!0,g.exports}B.m=Q,B.c=I,B.d=function(Q,I,F){B.o(Q,I)||Object.defineProperty(Q,I,{enumerable:!0,get:F})},B.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},B.t=function(Q,I){if(1&I&&(Q=B(Q)),8&I)return Q;if(4&I&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var F=Object.create(null);if(B.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:Q}),2&I&&"string"!=typeof Q)for(var g in Q)B.d(F,g,function(I){return Q[I]}.bind(null,g));return F},B.n=function(Q){var I=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(I,"a",I),I},B.o=function(Q,I){return Object.prototype.hasOwnProperty.call(Q,I)},B.p="",B(B.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/utils/Utils.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/** * @module Utils */\n\n/** Maximum value of a long */\nconst MAX_LONG = Math.pow(2, 53) + 1;\n/**\n * Global helper method to test if a letiable or object attribute is defined\n */\n\nfunction isDefined(v) {\n  return typeof v !== 'undefined' && v !== null;\n}\n/**\n Global helper method to test if a letiable or object attribute has a value,\n that is it is defined and non null\n */\n\nfunction hasValue(v) {\n  return isDefined(v) && v !== null;\n}\n/**\n Global helper method to test if a letiable or object attribute is of a particular type\n */\n\nfunction hasType(v, expectedType) {\n  let hasVal = hasValue(v);\n  return hasVal && typeof v === expectedType;\n}\n/**\n Global helper method to test if a letiable or object attribute is an object\n */\n\nfunction isObject(v, letName) {\n  return hasType(v, 'object', letName);\n}\n/**\n Global helper method to test if a letiable or object attribute is an array\n */\n\nfunction isArray(v) {\n  return isDefined(v) && Array.isArray(v);\n}\n/**\n Global helper method to test if a letiable or object attribute is a function\n */\n\nfunction isFunction(v, letName) {\n  return hasType(v, 'function', letName);\n}\n/**\n Assert that a letiable or object attribute is defined\n **/\n\nfunction assertDefined(v, letName = 'letiable') {\n  if (!isDefined(v)) {\n    throw letName + \" must be defined\";\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\n\nfunction assertType(v, expectedType, letName = 'letiable') {\n  assertDefined(v, letName);\n\n  if (typeof v !== expectedType) {\n    throw letName + \" must be of type \" + expectedType;\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is a string\n **/\n\nfunction assertBoolean(v, letName) {\n  return assertType(v, 'boolean', letName);\n}\n/**\n Assert that a letiable or object attribute is a string\n **/\n\nfunction assertString(v, letName) {\n  return assertType(v, 'string', letName);\n}\n/**\n Assert that a letiable or object attribute is a number\n **/\n\nfunction assertNumber(v, letName) {\n  return assertType(v, 'number', letName);\n}\n/**\n Assert that a letiable or object attribute is a number\n **/\n\nfunction assertPositive(v, letName) {\n  assertNumber(v, letName);\n\n  if (v <= 0) {\n    throw letName + \" must be a positive number\";\n  }\n}\n/**\n Assert that a letiable or object attribute is an object\n **/\n\nfunction assertObject(v, letName) {\n  return assertType(v, 'object', letName);\n}\n/**\n Assert that a letiable or object attribute is an object\n **/\n\nfunction assertArray(v, letName = 'letiable') {\n  assertDefined(v, letName);\n\n  if (!Array.isArray(v)) {\n    throw letName + \" must be an array\";\n  }\n\n  return v;\n}\n/**\n Assert that a letiable or object attribute is a function\n **/\n\nfunction assertFunction(v, letName) {\n  return assertType(v, 'function', letName);\n}\n/**\n Assert that a letiable or object attribute is defined and non-null\n **/\n\nfunction assertHasValue(v, letName = 'letiable') {\n  assertDefined(v, letName);\n\n  if (!hasValue(v)) {\n    throw letName + \" must not be null\";\n  }\n\n  return v;\n}\n/**\n *\n * @return {String}\n */\n\nfunction randomUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    let r = Math.random() * 16 | 0,\n        v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n/**\n * This function stamps/embeds a UUID into an object and returns the UUID generated for it\n * @return {String}\n */\n\nfunction stampUUID(obj) {\n  obj._osh_id = obj._osh_id || randomUUID();\n  return obj._osh_id;\n} //buffer is an ArrayBuffer object, the offset if specified in bytes, and the type is a string\n//corresponding to an OGC data type.\n//See http://def.seegrid.csiro.au/sissvoc/ogc-def/resource?uri=http://www.opengis.net/def/dataType/OGC/0/\n\n/**\n *\n * @param buffer\n * @param offset\n * @param type\n * @return {*}\n */\n\nfunction ParseBytes(buffer, offset, type) {\n  let view = new DataView(buffer); //Note: There exist types not listed in the map below that have OGC definitions, but no appropriate\n  //methods or corresponding types available for parsing in javascript. They are float128, float16, signedLong,\n  //and unsignedLong\n\n  let typeMap = {\n    double: function (offset) {\n      return {\n        val: view.getFloat64(offset),\n        bytes: 8\n      };\n    },\n    float64: function (offset) {\n      return {\n        val: view.getFloat64(offset),\n        bytes: 8\n      };\n    },\n    float32: function (offset) {\n      return {\n        val: view.getFloat32(offset),\n        bytes: 4\n      };\n    },\n    signedByte: function (offset) {\n      return {\n        val: view.getInt8(offset),\n        bytes: 1\n      };\n    },\n    signedInt: function (offset) {\n      return {\n        val: view.getInt32(offset),\n        bytes: 4\n      };\n    },\n    signedShort: function (offset) {\n      return {\n        val: view.getInt16(offset),\n        bytes: 2\n      };\n    },\n    unsignedByte: function (offset) {\n      return {\n        val: view.getUint8(offset),\n        bytes: 1\n      };\n    },\n    unsignedInt: function (offset) {\n      return {\n        val: view.getUint32(offset),\n        bytes: 4\n      };\n    },\n    unsignedShort: function (offset) {\n      return {\n        val: view.getUint16(offset),\n        bytes: 2\n      };\n    } //TODO: string-utf-8:\n\n  };\n  return typeMap[type](offset);\n} //This function recursivley iterates over the resultStructure to fill in\n//values read from data which should be an ArrayBuffer containing the payload from a websocket\n\n/**\n *\n * @param struct\n * @param data\n * @param offsetBytes\n * @return {*}\n */\n\nfunction ReadData(struct, data, offsetBytes) {\n  let offset = offsetBytes;\n\n  for (let i = 0; i < struct.fields.length; i++) {\n    let currFieldStruct = struct.fields[i];\n\n    if (isDefined(currFieldStruct.type) && currFieldStruct.type !== null) {\n      let ret = ParseBytes(data, offset, currFieldStruct.type);\n      currFieldStruct.val = ret.val;\n      offset += ret.bytes;\n    } else if (isDefined(currFieldStruct.count) && currFieldStruct.count !== null) {\n      //check if count is a reference to another letiable\n      if (isNaN(currFieldStruct.count)) {\n        let id = currFieldStruct.count;\n        let fieldName = struct.id2FieldMap[id];\n        currFieldStruct.count = struct.findFieldByName(fieldName).val;\n      }\n\n      for (let c = 0; c < currFieldStruct.count; c++) {\n        for (let j = 0; j < currFieldStruct.fields.length; j++) {\n          let field = JSON.parse(JSON.stringify(currFieldStruct.fields[j]));\n          offset = ReadData(field, data, offset);\n          currFieldStruct.val.push(field);\n        }\n      }\n    }\n  }\n\n  return offset;\n}\n/**\n *\n * @param resultStructure\n * @return {{}}\n */\n\nfunction GetResultObject(resultStructure) {\n  //TODO: handle cases for nested arrays / matrix data types\n  let result = {};\n\n  for (let i = 0; i < resultStructure.fields.length; i++) {\n    if (isDefined(resultStructure.fields[i].count)) {\n      result[resultStructure.fields[i].name] = [];\n\n      for (let c = 0; c < resultStructure.fields[i].count; c++) {\n        let item = {};\n\n        for (let k = 0; k < resultStructure.fields[i].val[c].fields.length; k++) {\n          item[resultStructure.fields[i].val[c].fields[k].name] = resultStructure.fields[i].val[c].fields[k].val;\n        }\n\n        result[resultStructure.fields[i].name].push(item);\n      }\n    } else {\n      result[resultStructure.fields[i].name] = resultStructure.fields[i].val;\n    }\n  }\n\n  return result;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isOpera() {\n  return !!window.opr && !!opr.addons || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isFirefox() {\n  return typeof InstallTrigger !== 'undefined';\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isSafari() {\n  return Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n}\n/**\n *\n * @return {boolean}\n */\n\nfunction isChrome() {\n  return !!window.chrome && !!window.chrome.webstore;\n}\n/**\n *\n * @return {*|boolean}\n */\n\nfunction isBlink() {\n  return (isChrome || isOpera) && !!window.CSS;\n}\n/**\n *\n * @param a\n * @param b\n * @return {boolean}\n */\n\nfunction isArrayIntersect(a, b) {\n  return a.filter(function (element) {\n    return b.indexOf(element) > -1;\n  }).length > 0;\n}\n/**\n *\n * @param o\n * @return {boolean}\n */\n\nfunction isElement(o) {\n  return typeof HTMLElement === \"object\" ? o instanceof HTMLElement : //DOM2\n  o && typeof o === \"object\" && o !== null && o.nodeType === 1 && typeof o.nodeName === \"string\";\n}\n/**\n *\n * @return {*}\n */\n\nfunction isWebWorker() {\n  return isDefined(Worker);\n}\n/**\n *\n * @param div\n */\n\nfunction takeScreenShot(div) {}\n/**\n * Remove a css class from a the div given as argument.\n * @param div the div to remove the class from\n * @param css the css class to remove\n */\n\nfunction removeCss(div, css) {\n  let divCss = div.className;\n  css = divCss.replace(css, \"\");\n  div.className = css;\n}\n/**\n * Add a css class to a the div given as argument.\n * @param div the div to add the class to\n * @param css the css class to add\n */\n\nfunction addCss(div, css) {\n  div.setAttribute(\"class\", div.className + \" \" + css);\n}\n/**\n * Removes the last character of a {string} object.\n * @param {string} value - The input {string}\n * @return {string} The value without the last character\n */\n\nfunction removeLastCharIfExist(value) {\n  if (!isDefined(undefined) || value === null || value.length === 0 || !value.endsWith(\"/\")) {\n    return value;\n  }\n\n  return value.substring(0, value.length - 1);\n}\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/datareceiver/parsers/DataSourceParser.js\n\n\nclass DataSourceParser_DataSourceParser {\n  /**\n   * Builds the full url.\n   * @private\n   * @param {Object} properties\n   * @param {String} properties.protocol the connector protocol\n   * @param {String} properties.endpointUrl the endpoint url\n   * @param {String} properties.service the service\n   * @param {String} properties.offeringID the offeringID\n   * @param {String} properties.observedProperty the observed property\n   * @param {String} properties.startTime the start time (ISO format)\n   * @param {String} properties.endTime the end time (ISO format)\n   * @param {Number} properties.replaySpeed the replay factor\n   * @param {Number} properties.responseFormat the response format (e.g video/mp4, application/json, video/H264)\n   * @param {Date} properties.lastTimeStamp - the last timestamp to start at this time (ISO String)\n   * @param {Number} properties.video_bitrate - define a custom bitrate (in b/s)\n   * @param {Number} properties.video_scale - define a custom scale, 0.0 < value < 1.0\n   * @param {Number} properties.video_width - define a custom width\n   * @param {Number} properties.video_height - define a custom height\n   * @return {String} the full url\n   */\n  buildUrl(properties) {\n    let url = \"\"; // adds protocol\n\n    url += properties.protocol + \"://\"; // adds endpoint url\n\n    url += properties.endpointUrl + \"?\"; // adds version\n\n    url += \"version=2.0&\"; // adds request\n\n    url += \"request=GetResult&\";\n    const skipTerms = new Set(['lastTimeStamp', 'endTime', 'reconnectTimeout', 'timeShift', 'protocol', 'endpointUrl', 'bufferingTime']);\n\n    for (let key in properties) {\n      // skip this keys\n      if (skipTerms.has(key)) {\n        continue;\n      }\n\n      if (key === 'offeringID') {\n        // adds offering\n        url += \"offering=\" + properties.offeringID + \"&\";\n      } else if (key === 'foiURN') {\n        // adds feature of interest urn\n        if (properties.foiURN && properties.foiURN !== '') {\n          url += 'featureOfInterest=' + properties.foiURN + '&';\n        }\n      }\n\n      if (key === 'startTime') {\n        // adds temporalFilter\n        const stTime = isDefined(properties.lastTimeStamp) ? properties.lastTimeStamp : properties.startTime;\n        this.lastStartTime = properties.startTime;\n        let endTime = properties.endTime;\n        url += \"temporalFilter=phenomenonTime,\" + stTime + \"/\" + endTime + \"&\";\n      } else {\n        url += key + '=' + properties[key] + '&';\n      }\n    }\n\n    if (url.endsWith('&')) {\n      url = url.slice(0, -1);\n    }\n\n    return url;\n  }\n\n}\n\n/* harmony default export */ var parsers_DataSourceParser = (DataSourceParser_DataSourceParser);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/datareceiver/parsers/Video.parser.js\n\n\nclass Video_parser_VideoParser extends parsers_DataSourceParser {\n  /**\n   * Extracts timestamp from the message. The timestamp is corresponding to the first 64bits of the binary message.\n   * @param {ArrayBuffer} data - the data to parse\n   * @return {Number} the extracted timestamp\n   */\n  parseTimeStamp(data) {\n    // read double time stamp as big endian\n    return new DataView(data).getFloat64(0, false) * 1000;\n  }\n  /**\n   * Extract data from the message. The H264 NAL unit starts at offset 12 after 8-bytes time stamp and 4-bytes frame length.\n   * @param {ArrayBuffer} data - the data to parse\n   * @return {Uint8Array} the parsed data\n   */\n\n\n  parseData(data) {\n    return {\n      // H264 NAL unit starts at offset 12 after 8-bytes time stamp and 4-bytes frame length\n      frameData: new Uint8Array(data, 12, data.byteLength - 12),\n      roll: 0\n    };\n  }\n\n}\n\n/* harmony default export */ var Video_parser = (Video_parser_VideoParser);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/dataconnector/DataConnector.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n/**\n * The DataConnector is the abstract class used to create different connectors.\n */\n\nclass DataConnector_DataConnector {\n  /**\n   * @param {String} url - The full url used to connect to the data stream\n   */\n  constructor(url) {\n    this.url = url;\n    this.id = \"DataConnector-\" + randomUUID();\n    this.reconnectTimeout = 1000 * 60 * 2; //2 min\n  }\n  /**\n   * Sets the url\n   * @param url\n   */\n\n\n  setUrl(url) {\n    this.url = url;\n  }\n  /**\n   * The data connector default id.\n   * @return {String}\n   */\n\n\n  getId() {\n    return this.id;\n  }\n  /**\n   * The stream url.\n   * @return {String}\n   */\n\n\n  getUrl() {\n    return this.url;\n  }\n  /**\n   * Sets the reconnection timeout\n   * @param {Number} timeout - delay in milliseconds before reconnecting dataSource\n   */\n\n\n  setReconnectTimeout(timeout) {\n    this.reconnectTimeout = timeout;\n  }\n\n  onReconnect() {\n    return true;\n  }\n\n  disconnect() {}\n\n}\n\n/* harmony default export */ var dataconnector_DataConnector = (DataConnector_DataConnector);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/dataconnector/WebSocketConnector.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * Defines the WebSocketConnector to connect to a remote server by creating a WebSocket channel.\n * @extends DataConnector\n * @example\n * import WebSocketConnector from 'osh/dataconnector/WebSocketConnector.js';\n *\n * let url = ...;\n * let connector = new WebSocketConnector(url);\n *\n * // connect\n * connector.connect();\n *\n * // disconnect\n * connector.disconnect();\n *\n * // close\n * connector.close();\n *\n */\n\nclass WebSocketConnector_WebSocketConnector extends dataconnector_DataConnector {\n  /**\n   *\n   * @param properties -\n   */\n  constructor(properties) {\n    super(properties);\n    this.interval = -1;\n    this.lastReceiveTime = 0;\n  }\n  /**\n   * Connect to the webSocket. If the system supports WebWorker, it will automatically creates one otherwise use\n   * the main thread.\n   */\n\n\n  connect() {\n    if (!this.init) {\n      //creates Web Socket\n      this.ws = new WebSocket(this.getUrl());\n      this.ws.binaryType = 'arraybuffer';\n\n      this.ws.onmessage = function (event) {\n        this.lastReceiveTime = Date.now(); //callback data on message received\n\n        if (event.data.byteLength > 0) {\n          this.onMessage(event.data);\n        }\n      }.bind(this); // closes socket if any errors occur\n\n\n      this.ws.onerror = function (event) {\n        console.warn('WebSocket stream error: ', event);\n        this.init = false;\n        this.ws.close();\n        this.lastReceiveTime = -1;\n      }.bind(this);\n\n      this.ws.onclose = event => {\n        if (this.init) {\n          console.info('Closing gracefully..');\n        }\n\n        this.fullDisconnect(false);\n      }; //init the reconnect handler\n\n\n      if (this.interval === -1) {\n        this.interval = setInterval(function () {\n          let delta = Date.now() - this.lastReceiveTime; // -1 means the WS went in error\n\n          if (this.lastReceiveTime === -1 || delta >= this.reconnectTimeout) {\n            this.reconnect();\n          }\n        }.bind(this), this.reconnectTimeout);\n      }\n\n      this.init = true;\n    }\n  }\n  /**\n   * Disconnects the websocket.\n   */\n\n\n  disconnect() {\n    this.fullDisconnect(true);\n  }\n  /**\n   * Fully disconnect the websocket connection by sending a close message to the webWorker.\n   * @param {Boolean} removeInterval  - force removing the interval\n   */\n\n\n  fullDisconnect(removeInterval) {\n    if (this.ws != null && this.ws.readyState !== WebSocket.CLOSED) {\n      this.ws.close();\n    }\n\n    this.init = false;\n\n    if (removeInterval) {\n      clearInterval(this.interval);\n    }\n  }\n  /**\n   * Try to reconnect if the connexion if closed\n   */\n\n\n  reconnect() {\n    if (this.onReconnect()) {\n      console.warn(`trying to reconnect after ${this.reconnectTimeout} ..`, this.url);\n\n      if (this.init) {\n        console.warn('disconnecting ', this.url);\n        this.fullDisconnect(false);\n      }\n\n      this.connect();\n    }\n  }\n  /**\n   * The onMessage method used by the websocket to callback the data\n   * @param data the callback data\n   * @event\n   */\n\n\n  onMessage(data) {}\n  /**\n   * Closes the webSocket.\n   */\n\n\n  close() {\n    this.disconnect();\n  }\n\n}\n\n/* harmony default export */ var dataconnector_WebSocketConnector = (WebSocketConnector_WebSocketConnector);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/dataconnector/Ajax.js\n/***************************** BEGIN LICENSE BLOCK ***************************\n\n The contents of this file are subject to the Mozilla Public License, v. 2.0.\n If a copy of the MPL was not distributed with this file, You can obtain one\n at http://mozilla.org/MPL/2.0/.\n\n Software distributed under the License is distributed on an \"AS IS\" basis,\n WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n for the specific language governing rights and limitations under the License.\n\n Copyright (C) 2015-2020 Mathieu Dhainaut. All Rights Reserved.\n\n Author: Mathieu Dhainaut <mathieu.dhainaut@gmail.com>\n\n ******************************* END LICENSE BLOCK ***************************/\n\n\n/**\n * Defines the AjaxConnector to connect to a remote server by making AjaxRequest.\n * @extends DataConnector\n * @example\n * import Ajax from 'osh/dataconnector/Ajax.js';\n *\n * let request = ...;\n * let connector = new Ajax(url);\n *\n * // handle onSuccess\n * connector.onSuccess = function(event) {\n *  // does something\n * }\n *\n * connector.onError = function(event) {\n *  // does something\n * }\n *\n * // send request\n * connector.sendRequest(request);\n *\n */\n\nclass Ajax_Ajax extends dataconnector_DataConnector {\n  /**\n   * Creates Ajax.\n   * @param {String} url -\n   * @param {Object} properties -\n   * @param {String} properties.method -\n   * @param {String} properties.responseType -\n   */\n  constructor(url, properties) {\n    super(url);\n    this.method = \"POST\";\n    this.responseType = \"arraybuffer\";\n\n    if (isDefined(properties)) {\n      if (properties.method) {\n        this.method = properties.method;\n      }\n\n      if (properties.responseType) {\n        this.responseType = properties.responseType;\n      }\n    }\n  }\n  /**\n   * Sends the request to the defined server.\n   * @param {String} request - The Http request\n   * @param {String} extraUrl - get query parameters\n   */\n\n\n  sendRequest(request, extraUrl) {\n    let self = this;\n    let xmlhttp = new XMLHttpRequest();\n    xmlhttp.timeout = 60000;\n\n    if (request === null) {\n      if (isDefined(extraUrl)) {\n        xmlhttp.open(\"GET\", this.getUrl() + \"?\" + extraUrl, true);\n      } else {\n        xmlhttp.open(\"GET\", this.getUrl(), true);\n      }\n\n      xmlhttp.responseType = this.responseType;\n\n      xmlhttp.onload = oEvent => {\n        if (xmlhttp.response) {\n          self.onMessage(xmlhttp.response);\n        }\n      };\n\n      xmlhttp.ontimeout = e => {\n        console.log(\"Timeout\");\n      };\n\n      xmlhttp.send(null);\n    } else {\n      xmlhttp.open(\"POST\", this.getUrl(), true);\n      xmlhttp.setRequestHeader('Content-Type', 'text/xml');\n      xmlhttp.send(request);\n\n      xmlhttp.onreadystatechange = () => {\n        if (xmlhttp.readyState < 4) {// while waiting response from server\n        } else if (xmlhttp.readyState === 4) {\n          // 4 = Response from server has been completely loaded.\n          if (xmlhttp.status === 200 && xmlhttp.status < 300) {\n            // http status between 200 to 299 are all successful\n            self.onSuccess(xmlhttp.responseText);\n          } else {\n            self.onError(\"\");\n          }\n        }\n      };\n    }\n  }\n  /**\n   * This is the callback method in case of getting error connection.\n   * @param event The error details\n   * @event\n   */\n\n\n  onError(event) {}\n  /**\n   * This is the callback method in case of getting success connection.\n   * @param event\n   * @event\n   */\n\n\n  onSuccess(event) {}\n  /**\n   * Sends the request\n   * @private\n   */\n\n\n  connect() {\n    this.sendRequest(null);\n  }\n\n}\n\n/* harmony default export */ var dataconnector_Ajax = (Ajax_Ajax);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/dataconnector/TopicConnector.js\n\n\nclass TopicConnector_TopicConnector extends dataconnector_DataConnector {\n  /**\n   *\n   * @param properties -\n   */\n  constructor(properties) {\n    super(properties);\n    this.lastReceiveTime = -1;\n    this.interval = -1;\n    this.broadcastChannel = null;\n  }\n  /**\n   * Connect to the broadcastChannel.\n   */\n\n\n  connect() {\n    if (this.broadcastChannel === null) {\n      //creates broadcastChannel\n      this.broadcastChannel = new BroadcastChannel(this.getUrl());\n\n      this.broadcastChannel.onmessage = event => {\n        this.lastReceiveTime = Date.now(); //callback data on message received\n\n        this.onMessage(event.data.data);\n      }; // closes socket if any errors occur\n\n\n      this.broadcastChannel.onerror = event => {\n        console.error('BroadcastChannel stream error: ' + event);\n        this.broadcastChannel.close();\n        this.init = false;\n        this.lastReceiveTime = -1;\n      }; //init the reconnect handler\n\n\n      if (this.interval === -1) {\n        this.interval = setInterval(function () {\n          let delta = Date.now() - this.lastReceiveTime; // -1 means the WS went in error\n\n          if (this.lastReceiveTime === -1 || delta >= this.reconnectTimeout) {\n            console.warn(`trying to reconnect after ${this.reconnectTimeout} ..`);\n            this.reconnect();\n          }\n        }.bind(this), this.reconnectTimeout);\n      }\n    }\n  }\n  /**\n   * Disconnects the websocket.\n   */\n\n\n  disconnect() {\n    this.fullDisconnect(true);\n  }\n  /**\n   * Fully disconnect the websocket connection by sending a close message to the webWorker.\n   * @param {Boolean} removeInterval  - force removing the interval\n   */\n\n\n  fullDisconnect(removeInterval) {\n    if (this.broadcastChannel != null) {\n      this.broadcastChannel.close();\n      this.broadcastChannel = null;\n    }\n\n    if (removeInterval) {\n      clearInterval(this.interval);\n    }\n  }\n  /**\n   * Try to reconnect if the connexion if closed\n   */\n\n\n  reconnect() {\n    this.onReconnect();\n\n    if (this.init) {\n      this.fullDisconnect(false);\n    }\n\n    this.connect();\n  }\n  /**\n   * The onMessage method used by the websocket to callback the data\n   * @param data the callback data\n   * @event\n   */\n\n\n  onMessage(data) {}\n  /**\n   * Closes the webSocket.\n   */\n\n\n  close() {\n    this.disconnect();\n  }\n\n}\n\n/* harmony default export */ var dataconnector_TopicConnector = (TopicConnector_TopicConnector);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/datareceiver/workers/DataSourceHandler.js\n\n\n\n\n\nclass DataSourceHandler_DataSourceHandler {\n  constructor(parser) {\n    this.parser = parser;\n    this.connector = null;\n    this.lastTimeStamp = null;\n    this.lastStartTime = 'now';\n    this.timeShift = 0;\n    this.reconnectTimeout = 1000 * 10; // 10 secs\n\n    this.connected = false;\n  }\n\n  createConnector(propertiesStr, topic, dataSourceId) {\n    this.dataSourceId = dataSourceId; // check for existing connector\n\n    if (this.connector !== null) {\n      this.connector.disconnect();\n      this.connector = null;\n    }\n\n    this.broadcastChannel = new BroadcastChannel(topic);\n    const properties = JSON.parse(propertiesStr);\n\n    if (isDefined(properties.timeShift)) {\n      this.timeShift = properties.timeShift;\n    }\n\n    if (isDefined(properties.bufferingTime)) {\n      this.bufferingTime = properties.bufferingTime;\n    }\n\n    if (isDefined(properties.timeOut)) {\n      this.timeOut = properties.timeOut;\n    }\n\n    if (isDefined(properties.reconnectTimeout)) {\n      this.reconnectTimeout = properties.reconnectTimeout;\n    }\n\n    this.properties = properties;\n    this.createDataConnector(this.properties);\n  }\n  /**\n   * @private\n   */\n\n\n  createDataConnector(properties) {\n    const url = this.parser.buildUrl({ ...properties,\n      timeShift: this.timeShift\n    }); // checks if type is WebSocketConnector\n\n    if (properties.protocol.startsWith('ws')) {\n      this.connector = new dataconnector_WebSocketConnector(url); // connects the callback\n\n      this.connector.onMessage = this.onMessage.bind(this); // set the reconnectTimeout\n\n      this.connector.setReconnectTimeout(this.reconnectTimeout);\n    } else if (properties.protocol.startsWith('http')) {\n      this.connector = new dataconnector_Ajax(url);\n      this.connector.responseType = 'arraybuffer'; // connects the callback\n\n      this.connector.onMessage = this.onMessage.bind(this); // set the reconnectTimeout\n\n      this.connector.setReconnectTimeout(this.reconnectTimeout);\n    } else if (properties.protocol.startsWith('topic')) {\n      this.connector = new dataconnector_TopicConnector(url); // connects the callback\n\n      this.connector.onMessage = this.onMessage.bind(this); // set the reconnectTimeout\n\n      this.connector.setReconnectTimeout(this.reconnectTimeout);\n    }\n\n    const lastStartTimeCst = this.parser.lastStartTime;\n\n    if (this.connector !== null) {\n      this.connector.onReconnect = () => {\n        // if not real time, preserve last timestamp to reconnect at the last time received\n        // for that, we update the URL with the new last time received\n        if (lastStartTimeCst !== 'now') {\n          this.connector.setUrl(this.parser.buildUrl({\n            lastTimeStamp: new Date(this.lastTimeStamp).toISOString(),\n            ...this.properties\n          }));\n        }\n\n        return true;\n      };\n    }\n  }\n  /**\n   * Sets the current topic to listen\n   * @param {String} topic - the topic to listen\n   */\n\n\n  setTopic(topic) {\n    if (this.broadcastChannel !== null) {\n      this.broadcastChannel.close();\n    }\n\n    this.broadcastChannel = new BroadcastChannel(topic);\n    this.topic = topic;\n  }\n\n  connect() {\n    if (this.connector !== null) {\n      this.connector.connect();\n      this.connected = true;\n    }\n  }\n\n  disconnect() {\n    if (this.connector !== null) {\n      this.connector.disconnect();\n      this.connected = false;\n    }\n  }\n\n  onMessage(event) {\n    const obj = {\n      dataSourceId: this.dataSourceId,\n      timeStamp: this.parser.parseTimeStamp(event) + this.timeShift,\n      data: this.parser.parseData(event)\n    };\n    this.lastTimeStamp = obj.timeStamp;\n    this.broadcastChannel.postMessage(obj);\n  }\n\n  getLastTimeStamp() {\n    return this.lastTimeStamp;\n  }\n\n  updateUrl(properties) {\n    const isConnected = this.connected;\n\n    if (isConnected) {\n      this.disconnect();\n    }\n\n    let lastTimestamp = new Date(this.lastTimeStamp).toISOString();\n\n    if (properties.hasOwnProperty('startTime')) {\n      lastTimestamp = properties.startTime;\n    } else if (this.properties.startTime === 'now') {\n      //handle RealTime\n      lastTimestamp = 'now';\n    }\n\n    this.createDataConnector({ ...this.properties,\n      ...properties,\n      lastTimeStamp: lastTimestamp\n    });\n\n    if (isConnected) {\n      this.connect();\n    }\n  }\n\n  handleMessage(message, worker) {\n    if (message.message === 'init') {\n      this.createConnector(message.properties, message.topic, message.id);\n    } else if (message.message === 'connect') {\n      this.connect();\n    } else if (message.message === 'disconnect') {\n      this.disconnect();\n    } else if (message.message === 'topic') {\n      this.setTopic(message.topic);\n    } else if (message.message === 'last-timestamp') {\n      const lastTimeStamp = this.getLastTimeStamp();\n      worker.postMessage({\n        message: 'last-timestamp',\n        data: lastTimeStamp\n      });\n    } else if (message.message === 'update-url') {\n      this.updateUrl(message.data);\n    }\n  }\n\n}\n\n/* harmony default export */ var workers_DataSourceHandler = (DataSourceHandler_DataSourceHandler);\n// CONCATENATED MODULE: /home/nevro/Progs/progs-local/git-repo/OSH/osh-js/source/osh/datareceiver/workers/Video.worker.js\n\n\n\nconst dataSourceHandler = new workers_DataSourceHandler(new Video_parser());\n\nself.onmessage = (event) => {\n    dataSourceHandler.handleMessage(event.data, self);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2Uvb3NoL3V0aWxzL1V0aWxzLmpzPzI0M2EiLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL29zaC9kYXRhcmVjZWl2ZXIvcGFyc2Vycy9EYXRhU291cmNlUGFyc2VyLmpzPzYwZmYiLCJ3ZWJwYWNrOi8vLy9ob21lL25ldnJvL1Byb2dzL3Byb2dzLWxvY2FsL2dpdC1yZXBvL09TSC9vc2gtanMvc291cmNlL29zaC9kYXRhcmVjZWl2ZXIvcGFyc2Vycy9WaWRlby5wYXJzZXIuanM/MjhkMSIsIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2Uvb3NoL2RhdGFjb25uZWN0b3IvRGF0YUNvbm5lY3Rvci5qcz9jODM2Iiwid2VicGFjazovLy8vaG9tZS9uZXZyby9Qcm9ncy9wcm9ncy1sb2NhbC9naXQtcmVwby9PU0gvb3NoLWpzL3NvdXJjZS9vc2gvZGF0YWNvbm5lY3Rvci9XZWJTb2NrZXRDb25uZWN0b3IuanM/MDU1YiIsIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2Uvb3NoL2RhdGFjb25uZWN0b3IvQWpheC5qcz8xZmFkIiwid2VicGFjazovLy8vaG9tZS9uZXZyby9Qcm9ncy9wcm9ncy1sb2NhbC9naXQtcmVwby9PU0gvb3NoLWpzL3NvdXJjZS9vc2gvZGF0YWNvbm5lY3Rvci9Ub3BpY0Nvbm5lY3Rvci5qcz80ODFlIiwid2VicGFjazovLy8vaG9tZS9uZXZyby9Qcm9ncy9wcm9ncy1sb2NhbC9naXQtcmVwby9PU0gvb3NoLWpzL3NvdXJjZS9vc2gvZGF0YXJlY2VpdmVyL3dvcmtlcnMvRGF0YVNvdXJjZUhhbmRsZXIuanM/YzRiMiIsIndlYnBhY2s6Ly8vL2hvbWUvbmV2cm8vUHJvZ3MvcHJvZ3MtbG9jYWwvZ2l0LXJlcG8vT1NIL29zaC1qcy9zb3VyY2Uvb3NoL2RhdGFyZWNlaXZlci93b3JrZXJzL1ZpZGVvLndvcmtlci5qcz8zZTljIl0sIm5hbWVzIjpbIk1BWF9MT05HIiwiTWF0aCIsInBvdyIsImlzRGVmaW5lZCIsInYiLCJoYXNWYWx1ZSIsImhhc1R5cGUiLCJleHBlY3RlZFR5cGUiLCJoYXNWYWwiLCJpc09iamVjdCIsImxldE5hbWUiLCJpc0FycmF5IiwiQXJyYXkiLCJpc0Z1bmN0aW9uIiwiYXNzZXJ0RGVmaW5lZCIsImFzc2VydFR5cGUiLCJhc3NlcnRCb29sZWFuIiwiYXNzZXJ0U3RyaW5nIiwiYXNzZXJ0TnVtYmVyIiwiYXNzZXJ0UG9zaXRpdmUiLCJhc3NlcnRPYmplY3QiLCJhc3NlcnRBcnJheSIsImFzc2VydEZ1bmN0aW9uIiwiYXNzZXJ0SGFzVmFsdWUiLCJyYW5kb21VVUlEIiwicmVwbGFjZSIsImMiLCJyIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdGFtcFVVSUQiLCJvYmoiLCJfb3NoX2lkIiwiUGFyc2VCeXRlcyIsImJ1ZmZlciIsIm9mZnNldCIsInR5cGUiLCJ2aWV3IiwiRGF0YVZpZXciLCJ0eXBlTWFwIiwiZG91YmxlIiwidmFsIiwiZ2V0RmxvYXQ2NCIsImJ5dGVzIiwiZmxvYXQ2NCIsImZsb2F0MzIiLCJnZXRGbG9hdDMyIiwic2lnbmVkQnl0ZSIsImdldEludDgiLCJzaWduZWRJbnQiLCJnZXRJbnQzMiIsInNpZ25lZFNob3J0IiwiZ2V0SW50MTYiLCJ1bnNpZ25lZEJ5dGUiLCJnZXRVaW50OCIsInVuc2lnbmVkSW50IiwiZ2V0VWludDMyIiwidW5zaWduZWRTaG9ydCIsImdldFVpbnQxNiIsIlJlYWREYXRhIiwic3RydWN0IiwiZGF0YSIsIm9mZnNldEJ5dGVzIiwiaSIsImZpZWxkcyIsImxlbmd0aCIsImN1cnJGaWVsZFN0cnVjdCIsInJldCIsImNvdW50IiwiaXNOYU4iLCJpZCIsImZpZWxkTmFtZSIsImlkMkZpZWxkTWFwIiwiZmluZEZpZWxkQnlOYW1lIiwiaiIsImZpZWxkIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwicHVzaCIsIkdldFJlc3VsdE9iamVjdCIsInJlc3VsdFN0cnVjdHVyZSIsInJlc3VsdCIsIm5hbWUiLCJpdGVtIiwiayIsImlzT3BlcmEiLCJ3aW5kb3ciLCJvcHIiLCJhZGRvbnMiLCJvcGVyYSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJpc0ZpcmVmb3giLCJJbnN0YWxsVHJpZ2dlciIsImlzU2FmYXJpIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiY2FsbCIsIkhUTUxFbGVtZW50IiwiaXNDaHJvbWUiLCJjaHJvbWUiLCJ3ZWJzdG9yZSIsImlzQmxpbmsiLCJDU1MiLCJpc0FycmF5SW50ZXJzZWN0IiwiYSIsImIiLCJmaWx0ZXIiLCJlbGVtZW50IiwiaXNFbGVtZW50IiwibyIsIm5vZGVUeXBlIiwibm9kZU5hbWUiLCJpc1dlYldvcmtlciIsIldvcmtlciIsInRha2VTY3JlZW5TaG90IiwiZGl2IiwicmVtb3ZlQ3NzIiwiY3NzIiwiZGl2Q3NzIiwiY2xhc3NOYW1lIiwiYWRkQ3NzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlTGFzdENoYXJJZkV4aXN0IiwidmFsdWUiLCJ1bmRlZmluZWQiLCJlbmRzV2l0aCIsInN1YnN0cmluZyIsIkRhdGFTb3VyY2VQYXJzZXIiLCJidWlsZFVybCIsInByb3BlcnRpZXMiLCJ1cmwiLCJwcm90b2NvbCIsImVuZHBvaW50VXJsIiwic2tpcFRlcm1zIiwiU2V0Iiwia2V5IiwiaGFzIiwib2ZmZXJpbmdJRCIsImZvaVVSTiIsInN0VGltZSIsImxhc3RUaW1lU3RhbXAiLCJzdGFydFRpbWUiLCJsYXN0U3RhcnRUaW1lIiwiZW5kVGltZSIsInNsaWNlIiwiVmlkZW9QYXJzZXIiLCJwYXJzZVRpbWVTdGFtcCIsInBhcnNlRGF0YSIsImZyYW1lRGF0YSIsIlVpbnQ4QXJyYXkiLCJieXRlTGVuZ3RoIiwicm9sbCIsIkRhdGFDb25uZWN0b3IiLCJjb25zdHJ1Y3RvciIsInJlY29ubmVjdFRpbWVvdXQiLCJzZXRVcmwiLCJnZXRJZCIsImdldFVybCIsInNldFJlY29ubmVjdFRpbWVvdXQiLCJ0aW1lb3V0Iiwib25SZWNvbm5lY3QiLCJkaXNjb25uZWN0IiwiV2ViU29ja2V0Q29ubmVjdG9yIiwiaW50ZXJ2YWwiLCJsYXN0UmVjZWl2ZVRpbWUiLCJjb25uZWN0IiwiaW5pdCIsIndzIiwiV2ViU29ja2V0IiwiYmluYXJ5VHlwZSIsIm9ubWVzc2FnZSIsImV2ZW50IiwiRGF0ZSIsIm5vdyIsIm9uTWVzc2FnZSIsImJpbmQiLCJvbmVycm9yIiwiY29uc29sZSIsIndhcm4iLCJjbG9zZSIsIm9uY2xvc2UiLCJpbmZvIiwiZnVsbERpc2Nvbm5lY3QiLCJzZXRJbnRlcnZhbCIsImRlbHRhIiwicmVjb25uZWN0IiwicmVtb3ZlSW50ZXJ2YWwiLCJyZWFkeVN0YXRlIiwiQ0xPU0VEIiwiY2xlYXJJbnRlcnZhbCIsIkFqYXgiLCJtZXRob2QiLCJyZXNwb25zZVR5cGUiLCJzZW5kUmVxdWVzdCIsInJlcXVlc3QiLCJleHRyYVVybCIsInNlbGYiLCJ4bWxodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwib0V2ZW50IiwicmVzcG9uc2UiLCJvbnRpbWVvdXQiLCJlIiwibG9nIiwic2VuZCIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJvblN1Y2Nlc3MiLCJyZXNwb25zZVRleHQiLCJvbkVycm9yIiwiVG9waWNDb25uZWN0b3IiLCJicm9hZGNhc3RDaGFubmVsIiwiQnJvYWRjYXN0Q2hhbm5lbCIsImVycm9yIiwiRGF0YVNvdXJjZUhhbmRsZXIiLCJwYXJzZXIiLCJjb25uZWN0b3IiLCJ0aW1lU2hpZnQiLCJjb25uZWN0ZWQiLCJjcmVhdGVDb25uZWN0b3IiLCJwcm9wZXJ0aWVzU3RyIiwidG9waWMiLCJkYXRhU291cmNlSWQiLCJidWZmZXJpbmdUaW1lIiwidGltZU91dCIsImNyZWF0ZURhdGFDb25uZWN0b3IiLCJzdGFydHNXaXRoIiwibGFzdFN0YXJ0VGltZUNzdCIsInRvSVNPU3RyaW5nIiwic2V0VG9waWMiLCJ0aW1lU3RhbXAiLCJwb3N0TWVzc2FnZSIsImdldExhc3RUaW1lU3RhbXAiLCJ1cGRhdGVVcmwiLCJpc0Nvbm5lY3RlZCIsImxhc3RUaW1lc3RhbXAiLCJoYXNPd25Qcm9wZXJ0eSIsImhhbmRsZU1lc3NhZ2UiLCJtZXNzYWdlIiwid29ya2VyIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7O0FBRUE7QUFDTyxNQUFNQSxRQUFRLEdBQUdDLElBQUksQ0FBQ0MsR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFaLElBQWtCLENBQW5DO0FBRVA7Ozs7QUFHTyxTQUFTQyxTQUFULENBQW1CQyxDQUFuQixFQUFzQjtBQUN6QixTQUFPLE9BQVFBLENBQVIsS0FBZSxXQUFmLElBQThCQSxDQUFDLEtBQUssSUFBM0M7QUFDSDtBQUdEOzs7OztBQUlPLFNBQVNDLFFBQVQsQ0FBa0JELENBQWxCLEVBQXFCO0FBQ3hCLFNBQU9ELFNBQVMsQ0FBQ0MsQ0FBRCxDQUFULElBQWdCQSxDQUFDLEtBQUssSUFBN0I7QUFDSDtBQUVEOzs7O0FBR08sU0FBU0UsT0FBVCxDQUFpQkYsQ0FBakIsRUFBb0JHLFlBQXBCLEVBQWtDO0FBQ3JDLE1BQUlDLE1BQU0sR0FBR0gsUUFBUSxDQUFDRCxDQUFELENBQXJCO0FBQ0EsU0FBT0ksTUFBTSxJQUFJLE9BQVFKLENBQVIsS0FBZUcsWUFBaEM7QUFDSDtBQUVEOzs7O0FBR08sU0FBU0UsUUFBVCxDQUFrQkwsQ0FBbEIsRUFBcUJNLE9BQXJCLEVBQThCO0FBQ2pDLFNBQU9KLE9BQU8sQ0FBQ0YsQ0FBRCxFQUFJLFFBQUosRUFBY00sT0FBZCxDQUFkO0FBQ0g7QUFFRDs7OztBQUdPLFNBQVNDLE9BQVQsQ0FBaUJQLENBQWpCLEVBQW9CO0FBQ3ZCLFNBQU9ELFNBQVMsQ0FBQ0MsQ0FBRCxDQUFULElBQWdC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S0FBb0IsTUFBdkIsRUFBK0I7QUFDM0IsV0FBS25CLGVBQUwsQ0FBcUJtQixPQUFPLENBQUNoSCxVQUE3QixFQUF5Q2dILE9BQU8sQ0FBQ2pCLEtBQWpELEVBQXdEaUIsT0FBTyxDQUFDOUssRUFBaEU7QUFDSCxLQUZELE1BRU8sSUFBSThLLE9BQU8sQ0FBQ0EsT0FBUixLQUFvQixTQUF4QixFQUFtQztBQUN0QyxXQUFLNUUsT0FBTDtBQUNILEtBRk0sTUFFQSxJQUFJNEUsT0FBTyxDQUFDQSxPQUFSLEtBQW9CLFlBQXhCLEVBQXNDO0FBQ3pDLFdBQUtoRixVQUFMO0FBQ0gsS0FGTSxNQUVBLElBQUlnRixPQUFPLENBQUNBLE9BQVIsS0FBb0IsT0FBeEIsRUFBaUM7QUFDcEMsV0FBS1QsUUFBTCxDQUFjUyxPQUFPLENBQUNqQixLQUF0QjtBQUNILEtBRk0sTUFFQSxJQUFJaUIsT0FBTyxDQUFDQSxPQUFSLEtBQW9CLGdCQUF4QixFQUEwQztBQUM3QyxZQUFNckcsYUFBYSxHQUFHLEtBQUsrRixnQkFBTCxFQUF0QjtBQUNBTyxZQUFNLENBQUNSLFdBQVAsQ0FBbUI7QUFDZk8sZUFBTyxFQUFFLGdCQURNO0FBRWZ2TCxZQUFJLEVBQUVrRjtBQUZTLE9BQW5CO0FBSUgsS0FOTSxNQU1DLElBQUlxRyxPQUFPLENBQUNBLE9BQVIsS0FBb0IsWUFBeEIsRUFBc0M7QUFDMUMsV0FBS0wsU0FBTCxDQUFlSyxPQUFPLENBQUN2TCxJQUF2QjtBQUNIO0FBQ0o7O0FBN0ttQjs7QUErS1QrSixpR0FBZixFOztBQ3BMcUQ7QUFDRTs7QUFFdkQsOEJBQThCLHlCQUFpQixLQUFLLFlBQVc7O0FBRS9EO0FBQ0E7QUFDQSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKiogKiBAbW9kdWxlIFV0aWxzICovXG5cbi8qKiBNYXhpbXVtIHZhbHVlIG9mIGEgbG9uZyAqL1xuZXhwb3J0IGNvbnN0IE1BWF9MT05HID0gTWF0aC5wb3coMiwgNTMpICsgMTtcblxuLyoqXG4gKiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBkZWZpbmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RlZmluZWQodikge1xuICAgIHJldHVybiB0eXBlb2YgKHYpICE9PSAndW5kZWZpbmVkJyAmJiB2ICE9PSBudWxsO1xufVxuXG5cbi8qKlxuIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRlc3QgaWYgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGhhcyBhIHZhbHVlLFxuIHRoYXQgaXMgaXQgaXMgZGVmaW5lZCBhbmQgbm9uIG51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1ZhbHVlKHYpIHtcbiAgICByZXR1cm4gaXNEZWZpbmVkKHYpICYmIHYgIT09IG51bGw7XG59XG5cbi8qKlxuIEdsb2JhbCBoZWxwZXIgbWV0aG9kIHRvIHRlc3QgaWYgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIG9mIGEgcGFydGljdWxhciB0eXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNUeXBlKHYsIGV4cGVjdGVkVHlwZSkge1xuICAgIGxldCBoYXNWYWwgPSBoYXNWYWx1ZSh2KTtcbiAgICByZXR1cm4gaGFzVmFsICYmIHR5cGVvZiAodikgPT09IGV4cGVjdGVkVHlwZTtcbn1cblxuLyoqXG4gR2xvYmFsIGhlbHBlciBtZXRob2QgdG8gdGVzdCBpZiBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYW4gb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGhhc1R5cGUodiwgJ29iamVjdCcsIGxldE5hbWUpO1xufVxuXG4vKipcbiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhbiBhcnJheVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2KSB7XG4gICAgcmV0dXJuIGlzRGVmaW5lZCh2KSAmJiBBcnJheS5pc0FycmF5KHYpO1xufVxuXG4vKipcbiBHbG9iYWwgaGVscGVyIG1ldGhvZCB0byB0ZXN0IGlmIGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhIGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gaGFzVHlwZSh2LCAnZnVuY3Rpb24nLCBsZXROYW1lKTtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGRlZmluZWRcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnREZWZpbmVkKHYsIGxldE5hbWUgPSAnbGV0aWFibGUnKSB7XG4gICAgaWYgKCFpc0RlZmluZWQodikpIHtcbiAgICAgICAgdGhyb3cgbGV0TmFtZSArIFwiIG11c3QgYmUgZGVmaW5lZFwiO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGRlZmluZWQgYW5kIG5vbi1udWxsXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHlwZSh2LCBleHBlY3RlZFR5cGUsIGxldE5hbWUgPSAnbGV0aWFibGUnKSB7XG4gICAgYXNzZXJ0RGVmaW5lZCh2LCBsZXROYW1lKTtcbiAgICBpZiAodHlwZW9mICh2KSAhPT0gZXhwZWN0ZWRUeXBlKSB7XG4gICAgICAgIHRocm93IGxldE5hbWUgKyBcIiBtdXN0IGJlIG9mIHR5cGUgXCIgKyBleHBlY3RlZFR5cGU7XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYSBzdHJpbmdcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRCb29sZWFuKHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gYXNzZXJ0VHlwZSh2LCAnYm9vbGVhbicsIGxldE5hbWUpO1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYSBzdHJpbmdcbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRTdHJpbmcodiwgbGV0TmFtZSkge1xuICAgIHJldHVybiBhc3NlcnRUeXBlKHYsICdzdHJpbmcnLCBsZXROYW1lKTtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGEgbnVtYmVyXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TnVtYmVyKHYsIGxldE5hbWUpIHtcbiAgICByZXR1cm4gYXNzZXJ0VHlwZSh2LCAnbnVtYmVyJywgbGV0TmFtZSk7XG59XG5cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBhIG51bWJlclxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFBvc2l0aXZlKHYsIGxldE5hbWUpIHtcbiAgICBhc3NlcnROdW1iZXIodiwgbGV0TmFtZSk7XG4gICAgaWYgKHYgPD0gMCkge1xuICAgICAgICB0aHJvdyBsZXROYW1lICsgXCIgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiO1xuICAgIH1cbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGFuIG9iamVjdFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE9iamVjdCh2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGFzc2VydFR5cGUodiwgJ29iamVjdCcsIGxldE5hbWUpO1xufVxuXG4vKipcbiBBc3NlcnQgdGhhdCBhIGxldGlhYmxlIG9yIG9iamVjdCBhdHRyaWJ1dGUgaXMgYW4gb2JqZWN0XG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0QXJyYXkodiwgbGV0TmFtZSA9ICdsZXRpYWJsZScpIHtcbiAgICBhc3NlcnREZWZpbmVkKHYsIGxldE5hbWUpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICB0aHJvdyBsZXROYW1lICsgXCIgbXVzdCBiZSBhbiBhcnJheVwiO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cblxuLyoqXG4gQXNzZXJ0IHRoYXQgYSBsZXRpYWJsZSBvciBvYmplY3QgYXR0cmlidXRlIGlzIGEgZnVuY3Rpb25cbiAqKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRGdW5jdGlvbih2LCBsZXROYW1lKSB7XG4gICAgcmV0dXJuIGFzc2VydFR5cGUodiwgJ2Z1bmN0aW9uJywgbGV0TmFtZSk7XG59XG5cbi8qKlxuIEFzc2VydCB0aGF0IGEgbGV0aWFibGUgb3Igb2JqZWN0IGF0dHJpYnV0ZSBpcyBkZWZpbmVkIGFuZCBub24tbnVsbFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEhhc1ZhbHVlKHYsIGxldE5hbWUgPSAnbGV0aWFibGUnKSB7XG4gICAgYXNzZXJ0RGVmaW5lZCh2LCBsZXROYW1lKTtcbiAgICBpZiAoIWhhc1ZhbHVlKHYpKSB7XG4gICAgICAgIHRocm93IGxldE5hbWUgKyBcIiBtdXN0IG5vdCBiZSBudWxsXCI7XG4gICAgfVxuICAgIHJldHVybiB2O1xufVxuXG4vKipcbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21VVUlEKCkge1xuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIGxldCByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHN0YW1wcy9lbWJlZHMgYSBVVUlEIGludG8gYW4gb2JqZWN0IGFuZCByZXR1cm5zIHRoZSBVVUlEIGdlbmVyYXRlZCBmb3IgaXRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YW1wVVVJRChvYmopIHtcbiAgICBvYmouX29zaF9pZCA9IG9iai5fb3NoX2lkIHx8IHJhbmRvbVVVSUQoKTtcbiAgICByZXR1cm4gb2JqLl9vc2hfaWQ7XG59XG5cbi8vYnVmZmVyIGlzIGFuIEFycmF5QnVmZmVyIG9iamVjdCwgdGhlIG9mZnNldCBpZiBzcGVjaWZpZWQgaW4gYnl0ZXMsIGFuZCB0aGUgdHlwZSBpcyBhIHN0cmluZ1xuLy9jb3JyZXNwb25kaW5nIHRvIGFuIE9HQyBkYXRhIHR5cGUuXG4vL1NlZSBodHRwOi8vZGVmLnNlZWdyaWQuY3Npcm8uYXUvc2lzc3ZvYy9vZ2MtZGVmL3Jlc291cmNlP3VyaT1odHRwOi8vd3d3Lm9wZW5naXMubmV0L2RlZi9kYXRhVHlwZS9PR0MvMC9cbi8qKlxuICpcbiAqIEBwYXJhbSBidWZmZXJcbiAqIEBwYXJhbSBvZmZzZXRcbiAqIEBwYXJhbSB0eXBlXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gUGFyc2VCeXRlcyhidWZmZXIsIG9mZnNldCwgdHlwZSkge1xuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG5cbiAgICAvL05vdGU6IFRoZXJlIGV4aXN0IHR5cGVzIG5vdCBsaXN0ZWQgaW4gdGhlIG1hcCBiZWxvdyB0aGF0IGhhdmUgT0dDIGRlZmluaXRpb25zLCBidXQgbm8gYXBwcm9wcmlhdGVcbiAgICAvL21ldGhvZHMgb3IgY29ycmVzcG9uZGluZyB0eXBlcyBhdmFpbGFibGUgZm9yIHBhcnNpbmcgaW4gamF2YXNjcmlwdC4gVGhleSBhcmUgZmxvYXQxMjgsIGZsb2F0MTYsIHNpZ25lZExvbmcsXG4gICAgLy9hbmQgdW5zaWduZWRMb25nXG4gICAgbGV0IHR5cGVNYXAgPSB7XG4gICAgICAgIGRvdWJsZTogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0RmxvYXQ2NChvZmZzZXQpLCBieXRlczogOH07XG4gICAgICAgIH0sXG4gICAgICAgIGZsb2F0NjQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldEZsb2F0NjQob2Zmc2V0KSwgYnl0ZXM6IDh9O1xuICAgICAgICB9LFxuICAgICAgICBmbG9hdDMyOiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbDogdmlldy5nZXRGbG9hdDMyKG9mZnNldCksIGJ5dGVzOiA0fTtcbiAgICAgICAgfSxcbiAgICAgICAgc2lnbmVkQnl0ZTogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0SW50OChvZmZzZXQpLCBieXRlczogMX07XG4gICAgICAgIH0sXG4gICAgICAgIHNpZ25lZEludDogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0SW50MzIob2Zmc2V0KSwgYnl0ZXM6IDR9O1xuICAgICAgICB9LFxuICAgICAgICBzaWduZWRTaG9ydDogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWw6IHZpZXcuZ2V0SW50MTYob2Zmc2V0KSwgYnl0ZXM6IDJ9O1xuICAgICAgICB9LFxuICAgICAgICB1bnNpZ25lZEJ5dGU6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldFVpbnQ4KG9mZnNldCksIGJ5dGVzOiAxfTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5zaWduZWRJbnQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldFVpbnQzMihvZmZzZXQpLCBieXRlczogNH07XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2lnbmVkU2hvcnQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsOiB2aWV3LmdldFVpbnQxNihvZmZzZXQpLCBieXRlczogMn07XG4gICAgICAgIH0sXG4gICAgICAgIC8vVE9ETzogc3RyaW5nLXV0Zi04OlxuICAgIH07XG4gICAgcmV0dXJuIHR5cGVNYXBbdHlwZV0ob2Zmc2V0KTtcbn1cblxuLy9UaGlzIGZ1bmN0aW9uIHJlY3Vyc2l2bGV5IGl0ZXJhdGVzIG92ZXIgdGhlIHJlc3VsdFN0cnVjdHVyZSB0byBmaWxsIGluXG4vL3ZhbHVlcyByZWFkIGZyb20gZGF0YSB3aGljaCBzaG91bGQgYmUgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgcGF5bG9hZCBmcm9tIGEgd2Vic29ja2V0XG4vKipcbiAqXG4gKiBAcGFyYW0gc3RydWN0XG4gKiBAcGFyYW0gZGF0YVxuICogQHBhcmFtIG9mZnNldEJ5dGVzXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gUmVhZERhdGEoc3RydWN0LCBkYXRhLCBvZmZzZXRCeXRlcykge1xuICAgIGxldCBvZmZzZXQgPSBvZmZzZXRCeXRlcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cnVjdC5maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGN1cnJGaWVsZFN0cnVjdCA9IHN0cnVjdC5maWVsZHNbaV07XG4gICAgICAgIGlmIChpc0RlZmluZWQoY3VyckZpZWxkU3RydWN0LnR5cGUpICYmIGN1cnJGaWVsZFN0cnVjdC50eXBlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgcmV0ID0gUGFyc2VCeXRlcyhkYXRhLCBvZmZzZXQsIGN1cnJGaWVsZFN0cnVjdC50eXBlKTtcbiAgICAgICAgICAgIGN1cnJGaWVsZFN0cnVjdC52YWwgPSByZXQudmFsO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHJldC5ieXRlcztcbiAgICAgICAgfSBlbHNlIGlmIChpc0RlZmluZWQoY3VyckZpZWxkU3RydWN0LmNvdW50KSAmJiBjdXJyRmllbGRTdHJ1Y3QuY291bnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vY2hlY2sgaWYgY291bnQgaXMgYSByZWZlcmVuY2UgdG8gYW5vdGhlciBsZXRpYWJsZVxuICAgICAgICAgICAgaWYgKGlzTmFOKGN1cnJGaWVsZFN0cnVjdC5jb3VudCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSBjdXJyRmllbGRTdHJ1Y3QuY291bnQ7XG4gICAgICAgICAgICAgICAgbGV0IGZpZWxkTmFtZSA9IHN0cnVjdC5pZDJGaWVsZE1hcFtpZF07XG4gICAgICAgICAgICAgICAgY3VyckZpZWxkU3RydWN0LmNvdW50ID0gc3RydWN0LmZpbmRGaWVsZEJ5TmFtZShmaWVsZE5hbWUpLnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY3VyckZpZWxkU3RydWN0LmNvdW50OyBjKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGN1cnJGaWVsZFN0cnVjdC5maWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjdXJyRmllbGRTdHJ1Y3QuZmllbGRzW2pdKSk7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IFJlYWREYXRhKGZpZWxkLCBkYXRhLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyRmllbGRTdHJ1Y3QudmFsLnB1c2goZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcmVzdWx0U3RydWN0dXJlXG4gKiBAcmV0dXJuIHt7fX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEdldFJlc3VsdE9iamVjdChyZXN1bHRTdHJ1Y3R1cmUpIHtcbiAgICAvL1RPRE86IGhhbmRsZSBjYXNlcyBmb3IgbmVzdGVkIGFycmF5cyAvIG1hdHJpeCBkYXRhIHR5cGVzXG4gICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0U3RydWN0dXJlLmZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNEZWZpbmVkKHJlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0uY291bnQpKSB7XG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS5uYW1lXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCByZXN1bHRTdHJ1Y3R1cmUuZmllbGRzW2ldLmNvdW50OyBjKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWxbY10uZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1bcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWxbY10uZmllbGRzW2tdLm5hbWVdID0gcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWxbY10uZmllbGRzW2tdLnZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdFN0cnVjdHVyZS5maWVsZHNbaV0ubmFtZV0ucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRTdHJ1Y3R1cmUuZmllbGRzW2ldLm5hbWVdID0gcmVzdWx0U3RydWN0dXJlLmZpZWxkc1tpXS52YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT3BlcmEoKSB7XG4gICAgcmV0dXJuICghIXdpbmRvdy5vcHIgJiYgISFvcHIuYWRkb25zKSB8fCAhIXdpbmRvdy5vcGVyYSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJyBPUFIvJykgPj0gMDtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRmlyZWZveCgpIHtcbiAgICByZXR1cm4gdHlwZW9mIEluc3RhbGxUcmlnZ2VyICE9PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2FmYXJpKCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93LkhUTUxFbGVtZW50KS5pbmRleE9mKCdDb25zdHJ1Y3RvcicpID4gMDtcbn1cblxuLyoqXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hyb21lKCkge1xuICAgIHJldHVybiAhIXdpbmRvdy5jaHJvbWUgJiYgISF3aW5kb3cuY2hyb21lLndlYnN0b3JlO1xufVxuXG4vKipcbiAqXG4gKiBAcmV0dXJuIHsqfGJvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0JsaW5rKCkge1xuICAgIHJldHVybiAoaXNDaHJvbWUgfHwgaXNPcGVyYSkgJiYgISF3aW5kb3cuQ1NTO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gYVxuICogQHBhcmFtIGJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5SW50ZXJzZWN0KGEsIGIpIHtcbiAgICByZXR1cm4gYS5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGIuaW5kZXhPZihlbGVtZW50KSA+IC0xO1xuICAgIH0pLmxlbmd0aCA+IDA7XG59XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIG9cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VsZW1lbnQobykge1xuICAgIHJldHVybiAoXG4gICAgICB0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwib2JqZWN0XCIgPyBvIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgOiAvL0RPTTJcbiAgICAgICAgbyAmJiB0eXBlb2YgbyA9PT0gXCJvYmplY3RcIiAmJiBvICE9PSBudWxsICYmIG8ubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIG8ubm9kZU5hbWUgPT09IFwic3RyaW5nXCJcbiAgICApO1xufVxuXG4vKipcbiAqXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNXZWJXb3JrZXIoKSB7XG4gICAgcmV0dXJuIGlzRGVmaW5lZChXb3JrZXIpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gZGl2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWtlU2NyZWVuU2hvdChkaXYpIHtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYSBjc3MgY2xhc3MgZnJvbSBhIHRoZSBkaXYgZ2l2ZW4gYXMgYXJndW1lbnQuXG4gKiBAcGFyYW0gZGl2IHRoZSBkaXYgdG8gcmVtb3ZlIHRoZSBjbGFzcyBmcm9tXG4gKiBAcGFyYW0gY3NzIHRoZSBjc3MgY2xhc3MgdG8gcmVtb3ZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDc3MoZGl2LCBjc3MpIHtcbiAgICBsZXQgZGl2Q3NzID0gZGl2LmNsYXNzTmFtZTtcbiAgICBjc3MgPSBkaXZDc3MucmVwbGFjZShjc3MsIFwiXCIpO1xuICAgIGRpdi5jbGFzc05hbWUgPSBjc3M7XG59XG5cblxuLyoqXG4gKiBBZGQgYSBjc3MgY2xhc3MgdG8gYSB0aGUgZGl2IGdpdmVuIGFzIGFyZ3VtZW50LlxuICogQHBhcmFtIGRpdiB0aGUgZGl2IHRvIGFkZCB0aGUgY2xhc3MgdG9cbiAqIEBwYXJhbSBjc3MgdGhlIGNzcyBjbGFzcyB0byBhZGRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENzcyhkaXYsIGNzcykge1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBkaXYuY2xhc3NOYW1lICsgXCIgXCIgKyBjc3MpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxhc3QgY2hhcmFjdGVyIG9mIGEge3N0cmluZ30gb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGlucHV0IHtzdHJpbmd9XG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB2YWx1ZSB3aXRob3V0IHRoZSBsYXN0IGNoYXJhY3RlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTGFzdENoYXJJZkV4aXN0KHZhbHVlKSB7XG4gICAgaWYgKCFpc0RlZmluZWQodW5kZWZpbmVkKSB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZS5sZW5ndGggPT09IDAgfHwgIXZhbHVlLmVuZHNXaXRoKFwiL1wiKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5sZW5ndGggLSAxKTtcbn1cblxuIiwiaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gXCIuLi8uLi91dGlscy9VdGlsc1wiO1xuXG5jbGFzcyBEYXRhU291cmNlUGFyc2VyIHtcbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGZ1bGwgdXJsLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5wcm90b2NvbCB0aGUgY29ubmVjdG9yIHByb3RvY29sXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuZW5kcG9pbnRVcmwgdGhlIGVuZHBvaW50IHVybFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLnNlcnZpY2UgdGhlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5vZmZlcmluZ0lEIHRoZSBvZmZlcmluZ0lEXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMub2JzZXJ2ZWRQcm9wZXJ0eSB0aGUgb2JzZXJ2ZWQgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydGllcy5zdGFydFRpbWUgdGhlIHN0YXJ0IHRpbWUgKElTTyBmb3JtYXQpXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMuZW5kVGltZSB0aGUgZW5kIHRpbWUgKElTTyBmb3JtYXQpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb3BlcnRpZXMucmVwbGF5U3BlZWQgdGhlIHJlcGxheSBmYWN0b3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy5yZXNwb25zZUZvcm1hdCB0aGUgcmVzcG9uc2UgZm9ybWF0IChlLmcgdmlkZW8vbXA0LCBhcHBsaWNhdGlvbi9qc29uLCB2aWRlby9IMjY0KVxuICAgICAqIEBwYXJhbSB7RGF0ZX0gcHJvcGVydGllcy5sYXN0VGltZVN0YW1wIC0gdGhlIGxhc3QgdGltZXN0YW1wIHRvIHN0YXJ0IGF0IHRoaXMgdGltZSAoSVNPIFN0cmluZylcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy52aWRlb19iaXRyYXRlIC0gZGVmaW5lIGEgY3VzdG9tIGJpdHJhdGUgKGluIGIvcylcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy52aWRlb19zY2FsZSAtIGRlZmluZSBhIGN1c3RvbSBzY2FsZSwgMC4wIDwgdmFsdWUgPCAxLjBcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvcGVydGllcy52aWRlb193aWR0aCAtIGRlZmluZSBhIGN1c3RvbSB3aWR0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9wZXJ0aWVzLnZpZGVvX2hlaWdodCAtIGRlZmluZSBhIGN1c3RvbSBoZWlnaHRcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBmdWxsIHVybFxuICAgICAqL1xuICAgIGJ1aWxkVXJsKHByb3BlcnRpZXMpIHtcbiAgICAgICAgbGV0IHVybCA9IFwiXCI7XG5cbiAgICAgICAgLy8gYWRkcyBwcm90b2NvbFxuICAgICAgICB1cmwgKz0gcHJvcGVydGllcy5wcm90b2NvbCArIFwiOi8vXCI7XG5cbiAgICAgICAgLy8gYWRkcyBlbmRwb2ludCB1cmxcbiAgICAgICAgdXJsICs9IHByb3BlcnRpZXMuZW5kcG9pbnRVcmwgKyBcIj9cIjtcblxuICAgICAgICAvLyBhZGRzIHZlcnNpb25cbiAgICAgICAgdXJsICs9IFwidmVyc2lvbj0yLjAmXCI7XG5cbiAgICAgICAgLy8gYWRkcyByZXF1ZXN0XG4gICAgICAgIHVybCArPSBcInJlcXVlc3Q9R2V0UmVzdWx0JlwiO1xuXG4gICAgICAgIGNvbnN0IHNraXBUZXJtcyA9IG5ldyBTZXQoWydsYXN0VGltZVN0YW1wJywnZW5kVGltZScsICdyZWNvbm5lY3RUaW1lb3V0JywgJ3RpbWVTaGlmdCcsICdwcm90b2NvbCcsXG4gICAgICAgICAgICAnZW5kcG9pbnRVcmwnLCAnYnVmZmVyaW5nVGltZSddKTtcblxuICAgICAgICBmb3IobGV0IGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAvLyBza2lwIHRoaXMga2V5c1xuICAgICAgICAgICAgaWYoc2tpcFRlcm1zLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGtleSA9PT0gJ29mZmVyaW5nSUQnKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkcyBvZmZlcmluZ1xuICAgICAgICAgICAgICAgIHVybCArPSBcIm9mZmVyaW5nPVwiICsgcHJvcGVydGllcy5vZmZlcmluZ0lEICsgXCImXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYoa2V5ID09PSAnZm9pVVJOJykge1xuICAgICAgICAgICAgICAgIC8vIGFkZHMgZmVhdHVyZSBvZiBpbnRlcmVzdCB1cm5cbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5mb2lVUk4gJiYgcHJvcGVydGllcy5mb2lVUk4gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCArPSAnZmVhdHVyZU9mSW50ZXJlc3Q9JyArIHByb3BlcnRpZXMuZm9pVVJOICsgJyYnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoa2V5ID09PSAnc3RhcnRUaW1lJykge1xuICAgICAgICAgICAgICAgIC8vIGFkZHMgdGVtcG9yYWxGaWx0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBzdFRpbWUgPSAoaXNEZWZpbmVkKHByb3BlcnRpZXMubGFzdFRpbWVTdGFtcCkpID8gcHJvcGVydGllcy5sYXN0VGltZVN0YW1wIDogIHByb3BlcnRpZXMuc3RhcnRUaW1lO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFN0YXJ0VGltZSA9IHByb3BlcnRpZXMuc3RhcnRUaW1lO1xuICAgICAgICAgICAgICAgIGxldCBlbmRUaW1lID0gcHJvcGVydGllcy5lbmRUaW1lO1xuICAgICAgICAgICAgICAgIHVybCArPSBcInRlbXBvcmFsRmlsdGVyPXBoZW5vbWVub25UaW1lLFwiICsgc3RUaW1lKyBcIi9cIiArIGVuZFRpbWUgKyBcIiZcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdXJsICs9IGtleSsnPScrcHJvcGVydGllc1trZXldKycmJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZih1cmwuZW5kc1dpdGgoJyYnKSkge1xuICAgICAgICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YVNvdXJjZVBhcnNlcjtcbiIsImltcG9ydCBEYXRhU291cmNlUGFyc2VyIGZyb20gXCIuL0RhdGFTb3VyY2VQYXJzZXIuanNcIjtcblxuY2xhc3MgVmlkZW9QYXJzZXIgZXh0ZW5kcyBEYXRhU291cmNlUGFyc2VyIHtcblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3RzIHRpbWVzdGFtcCBmcm9tIHRoZSBtZXNzYWdlLiBUaGUgdGltZXN0YW1wIGlzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGZpcnN0IDY0Yml0cyBvZiB0aGUgYmluYXJ5IG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gZGF0YSAtIHRoZSBkYXRhIHRvIHBhcnNlXG4gICAgICogQHJldHVybiB7TnVtYmVyfSB0aGUgZXh0cmFjdGVkIHRpbWVzdGFtcFxuICAgICAqL1xuICAgIHBhcnNlVGltZVN0YW1wKGRhdGEpIHtcbiAgICAgICAgLy8gcmVhZCBkb3VibGUgdGltZSBzdGFtcCBhcyBiaWcgZW5kaWFuXG4gICAgICAgIHJldHVybiBuZXcgRGF0YVZpZXcoZGF0YSkuZ2V0RmxvYXQ2NCgwLCBmYWxzZSkgKiAxMDAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3QgZGF0YSBmcm9tIHRoZSBtZXNzYWdlLiBUaGUgSDI2NCBOQUwgdW5pdCBzdGFydHMgYXQgb2Zmc2V0IDEyIGFmdGVyIDgtYnl0ZXMgdGltZSBzdGFtcCBhbmQgNC1ieXRlcyBmcmFtZSBsZW5ndGguXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gZGF0YSAtIHRoZSBkYXRhIHRvIHBhcnNlXG4gICAgICogQHJldHVybiB7VWludDhBcnJheX0gdGhlIHBhcnNlZCBkYXRhXG4gICAgICovXG4gICAgcGFyc2VEYXRhKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIEgyNjQgTkFMIHVuaXQgc3RhcnRzIGF0IG9mZnNldCAxMiBhZnRlciA4LWJ5dGVzIHRpbWUgc3RhbXAgYW5kIDQtYnl0ZXMgZnJhbWUgbGVuZ3RoXG4gICAgICAgICAgICBmcmFtZURhdGE6IG5ldyBVaW50OEFycmF5KGRhdGEsIDEyLCBkYXRhLmJ5dGVMZW5ndGggLSAxMiksXG4gICAgICAgICAgICByb2xsOiAwXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0ICBWaWRlb1BhcnNlcjtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBCRUdJTiBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBhcmUgc3ViamVjdCB0byB0aGUgTW96aWxsYSBQdWJsaWMgTGljZW5zZSwgdi4gMi4wLlxuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZVxuIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cblxuIFNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcyxcbiBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2VcbiBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyByaWdodHMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4gQ29weXJpZ2h0IChDKSAyMDE1LTIwMjAgTWF0aGlldSBEaGFpbmF1dC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuIEF1dGhvcjogTWF0aGlldSBEaGFpbmF1dCA8bWF0aGlldS5kaGFpbmF1dEBnbWFpbC5jb20+XG5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVORCBMSUNFTlNFIEJMT0NLICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtyYW5kb21VVUlEfSBmcm9tICcuLi91dGlscy9VdGlscy5qcyc7XG5cbi8qKlxuICogVGhlIERhdGFDb25uZWN0b3IgaXMgdGhlIGFic3RyYWN0IGNsYXNzIHVzZWQgdG8gY3JlYXRlIGRpZmZlcmVudCBjb25uZWN0b3JzLlxuICovXG5jbGFzcyBEYXRhQ29ubmVjdG9yIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIC0gVGhlIGZ1bGwgdXJsIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgZGF0YSBzdHJlYW1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih1cmwpIHtcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgICAgIHRoaXMuaWQgPSBcIkRhdGFDb25uZWN0b3ItXCIgKyByYW5kb21VVUlEKCk7XG4gICAgICAgIHRoaXMucmVjb25uZWN0VGltZW91dCA9IDEwMDAgKiA2MCAqIDI7IC8vMiBtaW5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB1cmxcbiAgICAgKiBAcGFyYW0gdXJsXG4gICAgICovXG4gICAgc2V0VXJsKHVybCkge1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGF0YSBjb25uZWN0b3IgZGVmYXVsdCBpZC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBzdHJlYW0gdXJsLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRVcmwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVybDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSByZWNvbm5lY3Rpb24gdGltZW91dFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0IC0gZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSByZWNvbm5lY3RpbmcgZGF0YVNvdXJjZVxuICAgICAqL1xuICAgIHNldFJlY29ubmVjdFRpbWVvdXQodGltZW91dCkge1xuICAgICAgICB0aGlzLnJlY29ubmVjdFRpbWVvdXQgPSB0aW1lb3V0O1xuICAgIH1cblxuICAgIG9uUmVjb25uZWN0KCl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGRpc2Nvbm5lY3QoKSB7fVxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhQ29ubmVjdG9yO1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgRGF0YUNvbm5lY3RvciBmcm9tICcuL0RhdGFDb25uZWN0b3IuanMnO1xuaW1wb3J0IHtpc1dlYldvcmtlcn0gZnJvbSAnLi4vdXRpbHMvVXRpbHMuanMnO1xuXG4vKipcbiAqIERlZmluZXMgdGhlIFdlYlNvY2tldENvbm5lY3RvciB0byBjb25uZWN0IHRvIGEgcmVtb3RlIHNlcnZlciBieSBjcmVhdGluZyBhIFdlYlNvY2tldCBjaGFubmVsLlxuICogQGV4dGVuZHMgRGF0YUNvbm5lY3RvclxuICogQGV4YW1wbGVcbiAqIGltcG9ydCBXZWJTb2NrZXRDb25uZWN0b3IgZnJvbSAnb3NoL2RhdGFjb25uZWN0b3IvV2ViU29ja2V0Q29ubmVjdG9yLmpzJztcbiAqXG4gKiBsZXQgdXJsID0gLi4uO1xuICogbGV0IGNvbm5lY3RvciA9IG5ldyBXZWJTb2NrZXRDb25uZWN0b3IodXJsKTtcbiAqXG4gKiAvLyBjb25uZWN0XG4gKiBjb25uZWN0b3IuY29ubmVjdCgpO1xuICpcbiAqIC8vIGRpc2Nvbm5lY3RcbiAqIGNvbm5lY3Rvci5kaXNjb25uZWN0KCk7XG4gKlxuICogLy8gY2xvc2VcbiAqIGNvbm5lY3Rvci5jbG9zZSgpO1xuICpcbiAqL1xuXG5jbGFzcyBXZWJTb2NrZXRDb25uZWN0b3IgZXh0ZW5kcyBEYXRhQ29ubmVjdG9yIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzIC1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyKHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLmludGVydmFsID0gLTE7XG4gICAgICAgIHRoaXMubGFzdFJlY2VpdmVUaW1lID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSB3ZWJTb2NrZXQuIElmIHRoZSBzeXN0ZW0gc3VwcG9ydHMgV2ViV29ya2VyLCBpdCB3aWxsIGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBvbmUgb3RoZXJ3aXNlIHVzZVxuICAgICAqIHRoZSBtYWluIHRocmVhZC5cbiAgICAgKi9cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5pdCkge1xuICAgICAgICAgICAgLy9jcmVhdGVzIFdlYiBTb2NrZXRcbiAgICAgICAgICAgIHRoaXMud3MgPSBuZXcgV2ViU29ja2V0KHRoaXMuZ2V0VXJsKCkpO1xuICAgICAgICAgICAgdGhpcy53cy5iaW5hcnlUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgICAgIHRoaXMud3Mub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVjZWl2ZVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIC8vY2FsbGJhY2sgZGF0YSBvbiBtZXNzYWdlIHJlY2VpdmVkXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuYnl0ZUxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBjbG9zZXMgc29ja2V0IGlmIGFueSBlcnJvcnMgb2NjdXJcbiAgICAgICAgICAgIHRoaXMud3Mub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignV2ViU29ja2V0IHN0cmVhbSBlcnJvcjogJyxldmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy53cy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFJlY2VpdmVUaW1lID0gLTE7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAgICAgICAgIHRoaXMud3Mub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuaW5pdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ0Nsb3NpbmcgZ3JhY2VmdWxseS4uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZnVsbERpc2Nvbm5lY3QoZmFsc2UpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy9pbml0IHRoZSByZWNvbm5lY3QgaGFuZGxlclxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWwgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbHRhID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdFJlY2VpdmVUaW1lO1xuICAgICAgICAgICAgICAgICAgICAvLyAtMSBtZWFucyB0aGUgV1Mgd2VudCBpbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0UmVjZWl2ZVRpbWUgPT09IC0xIHx8IChkZWx0YSA+PSB0aGlzLnJlY29ubmVjdFRpbWVvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLnJlY29ubmVjdFRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIHRoZSB3ZWJzb2NrZXQuXG4gICAgICovXG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5mdWxsRGlzY29ubmVjdCh0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdWxseSBkaXNjb25uZWN0IHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBieSBzZW5kaW5nIGEgY2xvc2UgbWVzc2FnZSB0byB0aGUgd2ViV29ya2VyLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlSW50ZXJ2YWwgIC0gZm9yY2UgcmVtb3ZpbmcgdGhlIGludGVydmFsXG4gICAgICovXG4gICAgZnVsbERpc2Nvbm5lY3QocmVtb3ZlSW50ZXJ2YWwpIHtcbiAgICAgICBpZiAodGhpcy53cyAhPSBudWxsICYmIHRoaXMud3MucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0LkNMT1NFRCkge1xuICAgICAgICAgICB0aGlzLndzLmNsb3NlKCk7XG4gICAgICAgfVxuICAgICAgICB0aGlzLmluaXQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHJlbW92ZUludGVydmFsKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ5IHRvIHJlY29ubmVjdCBpZiB0aGUgY29ubmV4aW9uIGlmIGNsb3NlZFxuICAgICAqL1xuICAgIHJlY29ubmVjdCgpIHtcbiAgICAgICAgaWYodGhpcy5vblJlY29ubmVjdCgpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHRyeWluZyB0byByZWNvbm5lY3QgYWZ0ZXIgJHt0aGlzLnJlY29ubmVjdFRpbWVvdXR9IC4uYCx0aGlzLnVybCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pbml0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdkaXNjb25uZWN0aW5nICcsdGhpcy51cmwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZnVsbERpc2Nvbm5lY3QoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb25NZXNzYWdlIG1ldGhvZCB1c2VkIGJ5IHRoZSB3ZWJzb2NrZXQgdG8gY2FsbGJhY2sgdGhlIGRhdGFcbiAgICAgKiBAcGFyYW0gZGF0YSB0aGUgY2FsbGJhY2sgZGF0YVxuICAgICAqIEBldmVudFxuICAgICAqL1xuICAgIG9uTWVzc2FnZShkYXRhKSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSB3ZWJTb2NrZXQuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2ViU29ja2V0Q29ubmVjdG9yO1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEJFR0lOIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuXG4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMgZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lXG4gYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuXG4gU29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIGJhc2lzLFxuIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZVxuIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbiBDb3B5cmlnaHQgKEMpIDIwMTUtMjAyMCBNYXRoaWV1IERoYWluYXV0LiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG4gQXV0aG9yOiBNYXRoaWV1IERoYWluYXV0IDxtYXRoaWV1LmRoYWluYXV0QGdtYWlsLmNvbT5cblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRU5EIExJQ0VOU0UgQkxPQ0sgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgRGF0YUNvbm5lY3RvciBmcm9tICcuL0RhdGFDb25uZWN0b3IuanMnO1xuaW1wb3J0IHtpc0RlZmluZWR9IGZyb20gJy4uL3V0aWxzL1V0aWxzLmpzJztcblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBBamF4Q29ubmVjdG9yIHRvIGNvbm5lY3QgdG8gYSByZW1vdGUgc2VydmVyIGJ5IG1ha2luZyBBamF4UmVxdWVzdC5cbiAqIEBleHRlbmRzIERhdGFDb25uZWN0b3JcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgQWpheCBmcm9tICdvc2gvZGF0YWNvbm5lY3Rvci9BamF4LmpzJztcbiAqXG4gKiBsZXQgcmVxdWVzdCA9IC4uLjtcbiAqIGxldCBjb25uZWN0b3IgPSBuZXcgQWpheCh1cmwpO1xuICpcbiAqIC8vIGhhbmRsZSBvblN1Y2Nlc3NcbiAqIGNvbm5lY3Rvci5vblN1Y2Nlc3MgPSBmdW5jdGlvbihldmVudCkge1xuICogIC8vIGRvZXMgc29tZXRoaW5nXG4gKiB9XG4gKlxuICogY29ubmVjdG9yLm9uRXJyb3IgPSBmdW5jdGlvbihldmVudCkge1xuICogIC8vIGRvZXMgc29tZXRoaW5nXG4gKiB9XG4gKlxuICogLy8gc2VuZCByZXF1ZXN0XG4gKiBjb25uZWN0b3Iuc2VuZFJlcXVlc3QocmVxdWVzdCk7XG4gKlxuICovXG5jbGFzcyBBamF4IGV4dGVuZHMgRGF0YUNvbm5lY3RvciB7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIEFqYXguXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCAtXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgLVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0aWVzLm1ldGhvZCAtXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnRpZXMucmVzcG9uc2VUeXBlIC1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih1cmwsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIodXJsKTtcblxuICAgICAgICB0aGlzLm1ldGhvZCA9IFwiUE9TVFwiO1xuICAgICAgICB0aGlzLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcblxuICAgICAgICBpZiAoaXNEZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy5tZXRob2QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGhvZCA9IHByb3BlcnRpZXMubWV0aG9kO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy5yZXNwb25zZVR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlVHlwZSA9IHByb3BlcnRpZXMucmVzcG9uc2VUeXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VuZHMgdGhlIHJlcXVlc3QgdG8gdGhlIGRlZmluZWQgc2VydmVyLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0IC0gVGhlIEh0dHAgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBleHRyYVVybCAtIGdldCBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgICovXG4gICAgc2VuZFJlcXVlc3QocmVxdWVzdCwgZXh0cmFVcmwpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICBsZXQgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4bWxodHRwLnRpbWVvdXQgPSA2MDAwMDtcbiAgICAgICAgaWYgKHJlcXVlc3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQoZXh0cmFVcmwpKSB7XG4gICAgICAgICAgICAgICAgeG1saHR0cC5vcGVuKFwiR0VUXCIsIHRoaXMuZ2V0VXJsKCkgKyBcIj9cIiArIGV4dHJhVXJsLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgeG1saHR0cC5vcGVuKFwiR0VUXCIsIHRoaXMuZ2V0VXJsKCksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeG1saHR0cC5yZXNwb25zZVR5cGUgPSB0aGlzLnJlc3BvbnNlVHlwZTtcbiAgICAgICAgICAgIHhtbGh0dHAub25sb2FkID0gKG9FdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh4bWxodHRwLnJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25NZXNzYWdlKHhtbGh0dHAucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4bWxodHRwLm9udGltZW91dCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUaW1lb3V0XCIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeG1saHR0cC5zZW5kKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeG1saHR0cC5vcGVuKFwiUE9TVFwiLCB0aGlzLmdldFVybCgpLCB0cnVlKTtcbiAgICAgICAgICAgIHhtbGh0dHAuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ3RleHQveG1sJyk7XG5cbiAgICAgICAgICAgIHhtbGh0dHAuc2VuZChyZXF1ZXN0KTtcblxuICAgICAgICAgICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA8IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hpbGUgd2FpdGluZyByZXNwb25zZSBmcm9tIHNlcnZlclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09PSA0KSB7ICAgICAgICAgICAgICAgIC8vIDQgPSBSZXNwb25zZSBmcm9tIHNlcnZlciBoYXMgYmVlbiBjb21wbGV0ZWx5IGxvYWRlZC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHhtbGh0dHAuc3RhdHVzID09PSAyMDAgJiYgeG1saHR0cC5zdGF0dXMgPCAzMDApIHsgLy8gaHR0cCBzdGF0dXMgYmV0d2VlbiAyMDAgdG8gMjk5IGFyZSBhbGwgc3VjY2Vzc2Z1bFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblN1Y2Nlc3MoeG1saHR0cC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkVycm9yKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIGNhbGxiYWNrIG1ldGhvZCBpbiBjYXNlIG9mIGdldHRpbmcgZXJyb3IgY29ubmVjdGlvbi5cbiAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIGVycm9yIGRldGFpbHNcbiAgICAgKiBAZXZlbnRcbiAgICAgKi9cbiAgICBvbkVycm9yKGV2ZW50KSB7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHRoZSBjYWxsYmFjayBtZXRob2QgaW4gY2FzZSBvZiBnZXR0aW5nIHN1Y2Nlc3MgY29ubmVjdGlvbi5cbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAZXZlbnRcbiAgICAgKi9cbiAgICBvblN1Y2Nlc3MoZXZlbnQpIHtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbmRzIHRoZSByZXF1ZXN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjb25uZWN0KCkge1xuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KG51bGwpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFqYXg7XG4iLCJpbXBvcnQgRGF0YUNvbm5lY3RvciBmcm9tIFwiLi9EYXRhQ29ubmVjdG9yXCI7XG5cbmNsYXNzIFRvcGljQ29ubmVjdG9yIGV4dGVuZHMgRGF0YUNvbm5lY3RvciB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvcGVydGllcyAtXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihwcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy5sYXN0UmVjZWl2ZVRpbWUgPSAtMTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IC0xO1xuICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIGJyb2FkY2FzdENoYW5uZWwuXG4gICAgICovXG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYnJvYWRjYXN0Q2hhbm5lbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy9jcmVhdGVzIGJyb2FkY2FzdENoYW5uZWxcbiAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKHRoaXMuZ2V0VXJsKCkpO1xuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9ICAoZXZlbnQpICA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVjZWl2ZVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIC8vY2FsbGJhY2sgZGF0YSBvbiBtZXNzYWdlIHJlY2VpdmVkXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2UoZXZlbnQuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIGNsb3NlcyBzb2NrZXQgaWYgYW55IGVycm9ycyBvY2N1clxuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLm9uZXJyb3IgPSAgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQnJvYWRjYXN0Q2hhbm5lbCBzdHJlYW0gZXJyb3I6ICcgKyBldmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVjZWl2ZVRpbWUgPSAtMTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vaW5pdCB0aGUgcmVjb25uZWN0IGhhbmRsZXJcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVydmFsID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWx0YSA9IERhdGUubm93KCkgLSB0aGlzLmxhc3RSZWNlaXZlVGltZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gLTEgbWVhbnMgdGhlIFdTIHdlbnQgaW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdFJlY2VpdmVUaW1lID09PSAtMSB8fCAoZGVsdGEgPj0gdGhpcy5yZWNvbm5lY3RUaW1lb3V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGB0cnlpbmcgdG8gcmVjb25uZWN0IGFmdGVyICR7dGhpcy5yZWNvbm5lY3RUaW1lb3V0fSAuLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgdGhpcy5yZWNvbm5lY3RUaW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIHRoZSB3ZWJzb2NrZXQuXG4gICAgICovXG4gICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5mdWxsRGlzY29ubmVjdCh0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdWxseSBkaXNjb25uZWN0IHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBieSBzZW5kaW5nIGEgY2xvc2UgbWVzc2FnZSB0byB0aGUgd2ViV29ya2VyLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlSW50ZXJ2YWwgIC0gZm9yY2UgcmVtb3ZpbmcgdGhlIGludGVydmFsXG4gICAgICovXG4gICAgZnVsbERpc2Nvbm5lY3QocmVtb3ZlSW50ZXJ2YWwpIHtcbiAgICAgICAgaWYgKHRoaXMuYnJvYWRjYXN0Q2hhbm5lbCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92ZUludGVydmFsKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJ5IHRvIHJlY29ubmVjdCBpZiB0aGUgY29ubmV4aW9uIGlmIGNsb3NlZFxuICAgICAqL1xuICAgIHJlY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5vblJlY29ubmVjdCgpO1xuICAgICAgICBpZiAodGhpcy5pbml0KSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxEaXNjb25uZWN0KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbm5lY3QoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvbk1lc3NhZ2UgbWV0aG9kIHVzZWQgYnkgdGhlIHdlYnNvY2tldCB0byBjYWxsYmFjayB0aGUgZGF0YVxuICAgICAqIEBwYXJhbSBkYXRhIHRoZSBjYWxsYmFjayBkYXRhXG4gICAgICogQGV2ZW50XG4gICAgICovXG4gICAgb25NZXNzYWdlKGRhdGEpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIHdlYlNvY2tldC5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb3BpY0Nvbm5lY3RvcjtcbiIsImltcG9ydCBXZWJTb2NrZXRDb25uZWN0b3IgZnJvbSBcIi4uLy4uL2RhdGFjb25uZWN0b3IvV2ViU29ja2V0Q29ubmVjdG9yXCI7XG5pbXBvcnQgQWpheCBmcm9tIFwiLi4vLi4vZGF0YWNvbm5lY3Rvci9BamF4XCI7XG5pbXBvcnQge2lzRGVmaW5lZH0gZnJvbSBcIi4uLy4uL3V0aWxzL1V0aWxzXCI7XG5pbXBvcnQgVG9waWNDb25uZWN0b3IgZnJvbSBcIi4uLy4uL2RhdGFjb25uZWN0b3IvVG9waWNDb25uZWN0b3JcIjtcblxuY2xhc3MgRGF0YVNvdXJjZUhhbmRsZXIge1xuXG4gICAgY29uc3RydWN0b3IocGFyc2VyKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLmNvbm5lY3RvciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5sYXN0VGltZVN0YW1wID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0U3RhcnRUaW1lID0gJ25vdyc7XG4gICAgICAgIHRoaXMudGltZVNoaWZ0ID0gMDtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lb3V0ID0gMTAwMCAqIDEwOyAvLyAxMCBzZWNzXG4gICAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlQ29ubmVjdG9yKHByb3BlcnRpZXNTdHIsIHRvcGljLCBkYXRhU291cmNlSWQpIHtcbiAgICAgICAgdGhpcy5kYXRhU291cmNlSWQgPSBkYXRhU291cmNlSWQ7XG4gICAgICAgIC8vIGNoZWNrIGZvciBleGlzdGluZyBjb25uZWN0b3JcbiAgICAgICAgaWYodGhpcy5jb25uZWN0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbCh0b3BpYyk7XG5cbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IEpTT04ucGFyc2UocHJvcGVydGllc1N0cik7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLnRpbWVTaGlmdCkpIHtcbiAgICAgICAgICAgIHRoaXMudGltZVNoaWZ0ID0gcHJvcGVydGllcy50aW1lU2hpZnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNEZWZpbmVkKHByb3BlcnRpZXMuYnVmZmVyaW5nVGltZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyaW5nVGltZSA9IHByb3BlcnRpZXMuYnVmZmVyaW5nVGltZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0RlZmluZWQocHJvcGVydGllcy50aW1lT3V0KSkge1xuICAgICAgICAgICAgdGhpcy50aW1lT3V0ID0gcHJvcGVydGllcy50aW1lT3V0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChwcm9wZXJ0aWVzLnJlY29ubmVjdFRpbWVvdXQpKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdFRpbWVvdXQgPSBwcm9wZXJ0aWVzLnJlY29ubmVjdFRpbWVvdXQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgICAgICB0aGlzLmNyZWF0ZURhdGFDb25uZWN0b3IodGhpcy5wcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGNyZWF0ZURhdGFDb25uZWN0b3IocHJvcGVydGllcykge1xuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnBhcnNlci5idWlsZFVybCh7XG4gICAgICAgICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgdGltZVNoaWZ0OiB0aGlzLnRpbWVTaGlmdFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gY2hlY2tzIGlmIHR5cGUgaXMgV2ViU29ja2V0Q29ubmVjdG9yXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLnByb3RvY29sLnN0YXJ0c1dpdGgoJ3dzJykpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yID0gbmV3IFdlYlNvY2tldENvbm5lY3Rvcih1cmwpO1xuICAgICAgICAgICAgLy8gY29ubmVjdHMgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rvci5vbk1lc3NhZ2UgPSB0aGlzLm9uTWVzc2FnZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgLy8gc2V0IHRoZSByZWNvbm5lY3RUaW1lb3V0XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rvci5zZXRSZWNvbm5lY3RUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZW91dCk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcGVydGllcy5wcm90b2NvbC5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yID0gbmV3IEFqYXgodXJsKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICAgICAgICAvLyBjb25uZWN0cyB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yLm9uTWVzc2FnZSA9IHRoaXMub25NZXNzYWdlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAvLyBzZXQgdGhlIHJlY29ubmVjdFRpbWVvdXRcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yLnNldFJlY29ubmVjdFRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lb3V0KTtcbiAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLnByb3RvY29sLnN0YXJ0c1dpdGgoJ3RvcGljJykpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yID0gbmV3IFRvcGljQ29ubmVjdG9yKHVybCk7XG4gICAgICAgICAgICAvLyBjb25uZWN0cyB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yLm9uTWVzc2FnZSA9IHRoaXMub25NZXNzYWdlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAvLyBzZXQgdGhlIHJlY29ubmVjdFRpbWVvdXRcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yLnNldFJlY29ubmVjdFRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lb3V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxhc3RTdGFydFRpbWVDc3QgID0gdGhpcy5wYXJzZXIubGFzdFN0YXJ0VGltZTtcbiAgICAgICAgaWYodGhpcy5jb25uZWN0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yLm9uUmVjb25uZWN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGlmIG5vdCByZWFsIHRpbWUsIHByZXNlcnZlIGxhc3QgdGltZXN0YW1wIHRvIHJlY29ubmVjdCBhdCB0aGUgbGFzdCB0aW1lIHJlY2VpdmVkXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoYXQsIHdlIHVwZGF0ZSB0aGUgVVJMIHdpdGggdGhlIG5ldyBsYXN0IHRpbWUgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICBpZiAobGFzdFN0YXJ0VGltZUNzdCAhPT0gJ25vdycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0b3Iuc2V0VXJsKHRoaXMucGFyc2VyLmJ1aWxkVXJsKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUaW1lU3RhbXA6IG5ldyBEYXRlKHRoaXMubGFzdFRpbWVTdGFtcCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IHRvcGljIHRvIGxpc3RlblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b3BpYyAtIHRoZSB0b3BpYyB0byBsaXN0ZW5cbiAgICAgKi9cbiAgICBzZXRUb3BpYyh0b3BpYykge1xuICAgICAgICBpZih0aGlzLmJyb2FkY2FzdENoYW5uZWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKHRvcGljKTtcbiAgICAgICAgdGhpcy50b3BpYyA9IHRvcGljO1xuICAgIH1cblxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIGlmKHRoaXMuY29ubmVjdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rvci5jb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICBpZih0aGlzLmNvbm5lY3RvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3IuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTWVzc2FnZShldmVudCkge1xuICAgICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgICAgICBkYXRhU291cmNlSWQ6IHRoaXMuZGF0YVNvdXJjZUlkLFxuICAgICAgICAgICAgdGltZVN0YW1wOiB0aGlzLnBhcnNlci5wYXJzZVRpbWVTdGFtcChldmVudCkgKyB0aGlzLnRpbWVTaGlmdCxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMucGFyc2VyLnBhcnNlRGF0YShldmVudClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sYXN0VGltZVN0YW1wID0gb2JqLnRpbWVTdGFtcDtcbiAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKG9iaik7XG4gICAgfVxuXG4gICAgZ2V0TGFzdFRpbWVTdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdFRpbWVTdGFtcDtcbiAgICB9XG5cbiAgICB1cGRhdGVVcmwocHJvcGVydGllcykge1xuICAgICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IHRoaXMuY29ubmVjdGVkO1xuICAgICAgICBpZihpc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxhc3RUaW1lc3RhbXAgPSAgbmV3IERhdGUodGhpcy5sYXN0VGltZVN0YW1wKS50b0lTT1N0cmluZygpO1xuXG4gICAgICAgIGlmKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoJ3N0YXJ0VGltZScpKSB7XG4gICAgICAgICAgICBsYXN0VGltZXN0YW1wID0gcHJvcGVydGllcy5zdGFydFRpbWU7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLnByb3BlcnRpZXMuc3RhcnRUaW1lID09PSAnbm93Jyl7XG4gICAgICAgICAgICAvL2hhbmRsZSBSZWFsVGltZVxuICAgICAgICAgICAgbGFzdFRpbWVzdGFtcCA9ICdub3cnO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jcmVhdGVEYXRhQ29ubmVjdG9yKHtcbiAgICAgICAgICAgIC4uLnRoaXMucHJvcGVydGllcyxcbiAgICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgICBsYXN0VGltZVN0YW1wOiBsYXN0VGltZXN0YW1wXG4gICAgICAgIH0pO1xuICAgICAgICBpZihpc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVNZXNzYWdlKG1lc3NhZ2UsIHdvcmtlcikge1xuICAgICAgICBpZihtZXNzYWdlLm1lc3NhZ2UgPT09ICdpbml0Jykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb25uZWN0b3IobWVzc2FnZS5wcm9wZXJ0aWVzLCBtZXNzYWdlLnRvcGljLCBtZXNzYWdlLmlkKTtcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2UgPT09ICdjb25uZWN0Jykge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5tZXNzYWdlID09PSAnZGlzY29ubmVjdCcpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZSA9PT0gJ3RvcGljJykge1xuICAgICAgICAgICAgdGhpcy5zZXRUb3BpYyhtZXNzYWdlLnRvcGljKTtcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2UgPT09ICdsYXN0LXRpbWVzdGFtcCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RUaW1lU3RhbXAgPSB0aGlzLmdldExhc3RUaW1lU3RhbXAoKTtcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2xhc3QtdGltZXN0YW1wJyxcbiAgICAgICAgICAgICAgICBkYXRhOiBsYXN0VGltZVN0YW1wXG4gICAgICAgICAgICB9KVxuICAgICAgICB9ICBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2UgPT09ICd1cGRhdGUtdXJsJykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVVcmwobWVzc2FnZS5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IERhdGFTb3VyY2VIYW5kbGVyO1xuXG4iLCJpbXBvcnQgVmlkZW9QYXJzZXIgZnJvbSAnLi4vcGFyc2Vycy9WaWRlby5wYXJzZXIuanMnO1xuaW1wb3J0IERhdGFTb3VyY2VIYW5kbGVyIGZyb20gJy4vRGF0YVNvdXJjZUhhbmRsZXIuanMnO1xuXG5jb25zdCBkYXRhU291cmNlSGFuZGxlciA9IG5ldyBEYXRhU291cmNlSGFuZGxlcihuZXcgVmlkZW9QYXJzZXIoKSk7XG5cbnNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgZGF0YVNvdXJjZUhhbmRsZXIuaGFuZGxlTWVzc2FnZShldmVudC5kYXRhLCBzZWxmKTtcbn1cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);