(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{182:function(t,e,n){"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"d",(function(){return c}));var r="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},o="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function s(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,r=Math.abs(t[n][n]),o=n+1;o<e;o++){var s=Math.abs(t[o][n]);s>r&&(r=s,i=o)}if(0===r)return null;var a=t[i];t[i]=t[n],t[n]=a;for(var u=n+1;u<e;u++)for(var c=-t[u][n]/t[n][n],l=n;l<e+1;l++)n==l?t[u][l]=0:t[u][l]+=c*t[n][l]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*h[p]}return h}function a(t){return 180*t/Math.PI}function u(t){return t*Math.PI/180}function c(t,e){var n=t%e;return n*e<0?n+e:n}},183:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return f})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return _})),n.d(e,"m",(function(){return y})),n.d(e,"n",(function(){return v})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return b})),n.d(e,"q",(function(){return O})),n.d(e,"r",(function(){return T})),n.d(e,"s",(function(){return x})),n.d(e,"t",(function(){return j})),n.d(e,"a",(function(){return E}));var i=n(378),r=n(246);function o(t){for(var e=a(),n=0,i=t.length;n<i;++n)p(e,t[n]);return e}function s(t,e){return function(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}(t,e[0],e[1])}function a(){return[1/0,1/0,-1/0,-1/0]}function u(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function c(t){return u(1/0,1/0,-1/0,-1/0,t)}function l(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function h(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function p(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function f(t,e){var n;return(n=e(g(t)))||(n=e(_(t)))||(n=e(T(t)))?n:(n=e(O(t)))||!1}function d(t){var e=0;return function(t){return t[2]<t[0]||t[3]<t[1]}(t)||(e=x(t)*m(t)),e}function g(t){return[t[0],t[1]]}function _(t){return[t[2],t[1]]}function y(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function v(t,e){var n;return e===i.a.BOTTOM_LEFT?n=g(t):e===i.a.BOTTOM_RIGHT?n=_(t):e===i.a.TOP_LEFT?n=O(t):e===i.a.TOP_RIGHT?n=T(t):Object(r.a)(!1,13),n}function m(t){return t[3]-t[1]}function b(t,e,n){var i=n||[1/0,1/0,-1/0,-1/0];return j(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):c(i),i}function O(t){return[t[0],t[3]]}function T(t){return[t[2],t[3]]}function x(t){return t[2]-t[0]}function j(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function E(t,e,n,i){var r=[];if(i>1)for(var o=t[2]-t[0],s=t[3]-t[1],a=0;a<i;++a)r.push(t[0]+o*a/i,t[1],t[2],t[1]+s*a/i,t[2]-o*a/i,t[3],t[0],t[3]-s*a/i);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var c=[],l=[],h=(a=0,r.length);a<h;a+=2)c.push(r[a]),l.push(r[a+1]);return function(t,e,n){return u(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(c,l,n)}},241:function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},243:function(t,e,n){"use strict";n.d(e,"a",(function(){return r.a})),n.d(e,"d",(function(){return S})),n.d(e,"e",(function(){return F})),n.d(e,"b",(function(){return I})),n.d(e,"f",(function(){return L})),n.d(e,"g",(function(){return G})),n.d(e,"c",(function(){return U}));var i,r=n(255),o=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||r.a[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),s=n(182),a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=6378137,c=Math.PI*u,l=[-c,-c,c,c],h=[-180,-85,180,85],p=function(t){function e(e){return t.call(this,{code:e,units:r.b.METERS,extent:l,global:!0,worldExtent:h,getPointResolution:function(t,e){return t/Object(s.b)(e[1]/u)}})||this}return a(e,t),e}(o),f=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("urn:ogc:def:crs:EPSG:6.18:3:3857"),new p("urn:ogc:def:crs:EPSG::3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];function d(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var s=c,a=0;a<i;a+=r){o[a]=s*t[a]/180;var l=u*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));l>s?l=s:l<-s&&(l=-s),o[a+1]=l}return o}function g(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var s=0;s<i;s+=r)o[s]=180*t[s]/c,o[s+1]=360*Math.atan(Math.exp(t[s+1]/u))/Math.PI-90;return o}var _=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),y=[-180,-90,180,90],v=6378137*Math.PI/180,m=function(t){function e(e,n){return t.call(this,{code:e,units:r.b.DEGREES,extent:y,axisOrientation:n,global:!0,metersPerUnit:v,worldExtent:y})||this}return _(e,t),e}(o),b=[new m("CRS:84"),new m("EPSG:4326","neu"),new m("urn:ogc:def:crs:EPSG::4326","neu"),new m("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new m("urn:ogc:def:crs:OGC:1.3:CRS84"),new m("urn:ogc:def:crs:OGC:2:84"),new m("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m("urn:x-ogc:def:crs:EPSG:4326","neu")],O={};n(179);var T={};function x(t,e,n){var i=t.getCode(),r=e.getCode();i in T||(T[i]={}),T[i][r]=n}var j=n(183),E=6371008.8;function P(t,e,n){var i=n||E,r=Object(s.g)(t[1]),o=Object(s.g)(e[1]),a=(o-r)/2,u=Object(s.g)(e[0]-t[0])/2,c=Math.sin(a)*Math.sin(a)+Math.sin(u)*Math.sin(u)*Math.cos(r)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function w(t,e,n){var i;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];i=e}else i=t.slice();return i}function R(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t}function C(t){!function(t,e){O[t]=e}(t.getCode(),t),x(t,t,w)}function S(t){return"string"==typeof t?O[t]||null:t||null}function F(t,e,n,i){var o,s=(t=S(t)).getPointResolutionFunc();if(s)o=s(e,n),i&&i!==t.getUnits()&&(a=t.getMetersPerUnit())&&(o=o*a/r.a[i]);else if(t.getUnits()==r.b.DEGREES&&!i||i==r.b.DEGREES)o=e;else{var a,u=A(t,S("EPSG:4326")),c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];o=(P((c=u(c,c,2)).slice(0,2),c.slice(2,4))+P(c.slice(4,6),c.slice(6,8)))/2,void 0!==(a=i?r.a[i]:t.getMetersPerUnit())&&(o/=a)}return o}function M(t){!function(t){t.forEach(C)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&x(e,t,w)}))}))}function I(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||A(t,e)===w)&&n}function A(t,e){var n=function(t,e){var n;return t in T&&e in T[t]&&(n=T[t][e]),n}(t.getCode(),e.getCode());return n||(n=R),n}function L(t,e){return A(S(t),S(e))}function G(t,e,n){return L(e,n)(t,void 0,t.length)}function D(t,e,n,i){var r=L(e,n);return Object(j.a)(t,r,void 0,i)}var z,X,Z,Y=null;function U(t,e){return Y?D(t,Y,e):t}M(f),M(b),z=f,X=d,Z=g,b.forEach((function(t){z.forEach((function(e){x(t,e,X),x(e,t,Z)}))}))},246:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i,r=n(176),o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=this,i="Assertion failed. See https://openlayers.org/en/"+("latest"===r.a?r.a:"v"+r.a.split("-")[0])+"/doc/errors/#"+e+" for details.";return(n=t.call(this,i)||this).code=e,n.name="AssertionError",n.message=i,n}return o(e,t),e}(Error);function a(t,e){if(!t)throw new s(e)}},255:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},r={};r[i.DEGREES]=2*Math.PI*6370997/360,r[i.FEET]=.3048,r[i.METERS]=1,r[i.USFEET]=1200/3937,e.b=i},325:function(t,e,n){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},378:function(t,e,n){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},379:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=function(){function t(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function r(t,e,n,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=r,o):new i(t,e,n,r)}e.b=i},380:function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},457:function(t,e,n){"use strict";var i=n(195),r=n(293),o=n(241),s=n(176);function a(t){return Math.pow(t,3)}var u,c=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e,n,i){var r=t.call(this)||this,o=i||{};return r.tileCoord=e,r.state=n,r.interimTile=null,r.hifi=!0,r.key="",r.transition_=void 0===o.transition?250:o.transition,r.transitionStarts_={},r}return c(e,t),e.prototype.changed=function(){this.dispatchEvent(i.a.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==o.a.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==o.a.LOADED){t.interimTile=null;break}t.getState()==o.a.LOADING?e=t:t.getState()==o.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==o.a.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){Object(s.b)()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var i=e-n+1e3/60;return i>=this.transition_?1:a(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(r.a),h=n(262),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),f=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=i,o.resolution=n,o.state=r,o}return p(e,t),e.prototype.changed=function(){this.dispatchEvent(i.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(s.b)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(s.b)()},e}(r.a),d=n(380),g=n(311),_=n(183),y=n(263),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function m(t,e,n){var r=t;if(r.src&&g.a){var o=r.decode(),s=!0;return o.then((function(){s&&e()})).catch((function(t){s&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){s=!1}}var a=[Object(y.b)(r,i.a.LOAD,e),Object(y.b)(r,i.a.ERROR,n)];return function(){a.forEach(y.c)}}!function(t){function e(e,n,i,r,o,s){var a=t.call(this,e,n,i,d.a.IDLE)||this;return a.src_=r,a.image_=new Image,null!==o&&(a.image_.crossOrigin=o),a.unlisten_=null,a.state=d.a.IDLE,a.imageLoadFunction_=s,a}v(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=d.a.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(_.o)(this.extent)/this.image_.height),this.state=d.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=d.a.IDLE&&this.state!=d.a.ERROR||(this.state=d.a.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=m(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(f);var b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var O,T=function(t){function e(e,n,i,r,o,s){var a=t.call(this,e,n,s)||this;return a.crossOrigin_=r,a.src_=i,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.tileLoadFunction_=o,a}return b(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=o.a.ERROR,this.unlistenImage_(),this.image_=((t=Object(h.a)(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=o.a.LOADED:this.state=o.a.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==o.a.ERROR&&(this.state=o.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=m(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(l),x=n(243),j=n(182),E=function(){function t(t,e,n,i,r,o){this.sourceProj_=t,this.targetProj_=e;var s={},a=Object(x.f)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Object(_.s)(i)==Object(_.s)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(_.s)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(_.s)(this.targetProj_.getExtent()):null;var u=Object(_.q)(n),c=Object(_.r)(n),l=Object(_.l)(n),h=Object(_.k)(n),p=this.transformInv_(u),f=this.transformInv_(c),d=this.transformInv_(l),g=this.transformInv_(h),y=10+(o?Math.max(0,Math.ceil(Object(j.c)(Object(_.j)(n)/(o*o*256*256)))):0);if(this.addQuad_(u,c,l,h,p,f,d,g,y),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach((function(t,e,n){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,i,r,o,s,a,u){var c=Object(_.b)([r,o,s,a]),l=this.sourceWorldWidth_?Object(_.s)(c)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&l>.5&&l<1,f=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var d=Object(_.b)([t,e,n,i]);f=Object(_.s)(d)/this.targetWorldWidth_>.25||f}!p&&this.sourceProj_.isGlobal()&&l&&(f=l>.25||f)}if(!(!f&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3]))||Object(_.t)(c,this.maxSourceExtent_)){var g=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(u>0)f=!0;else if(1!=(g=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=g&&4!=g&&8!=g)return;if(u>0){if(!f){var y=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(y),m=void 0;if(p)m=(Object(j.d)(r[0],h)+Object(j.d)(s[0],h))/2-Object(j.d)(v[0],h);else m=(r[0]+s[0])/2-v[0];var b=(r[1]+s[1])/2-v[1];f=m*m+b*b>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var O=[(e[0]+n[0])/2,(e[1]+n[1])/2],T=this.transformInv_(O),x=[(i[0]+t[0])/2,(i[1]+t[1])/2],E=this.transformInv_(x);this.addQuad_(t,e,O,x,r,o,T,E,u-1),this.addQuad_(x,O,n,i,E,T,s,a,u-1)}else{var P=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(P),R=[(n[0]+i[0])/2,(n[1]+i[1])/2],C=this.transformInv_(R);this.addQuad_(t,P,R,i,r,w,C,a,u-1),this.addQuad_(P,e,n,R,w,o,s,C,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&g)&&this.addTriangle_(t,n,i,r,s,a),0==(14&g)&&this.addTriangle_(t,n,e,r,s,o),g&&(0==(13&g)&&this.addTriangle_(e,i,t,o,a,r),0==(7&g)&&this.addTriangle_(e,i,n,o,a,s))}},t.prototype.calculateSourceExtent=function(){var t=Object(_.d)();return this.triangles_.forEach((function(e,n,i){var r=e.source;Object(_.h)(t,r[0]),Object(_.h)(t,r[1]),Object(_.h)(t,r[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),P={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},w=n(179);function R(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function C(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function S(t,e,n,i){var r=Object(x.g)(n,e,t),o=Object(x.e)(e,i,n),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var u=t.getExtent();if(!u||Object(_.c)(u,r)){var c=Object(x.e)(t,o,r)/o;isFinite(c)&&c>0&&(o/=c)}return o}function F(t,e,n,i,r,o,s,a,u,c,l,p){var f=Object(h.a)(Math.round(n*t),Math.round(n*e));if(Object(w.a)(f,p),0===u.length)return f.canvas;function d(t){return Math.round(t*n)/n}f.scale(n,n),f.globalCompositeOperation="lighter";var g=Object(_.d)();u.forEach((function(t,e,n){Object(_.g)(g,t.extent)}));var y=Object(_.s)(g),v=Object(_.o)(g),m=Object(h.a)(Math.round(n*y/i),Math.round(n*v/i));Object(w.a)(m,p);var b=n/i;u.forEach((function(t,e,n){var i=t.extent[0]-g[0],r=-(t.extent[3]-g[3]),o=Object(_.s)(t.extent),s=Object(_.o)(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,i*b,r*b,o*b,s*b)}));var T=Object(_.q)(s);return a.getTriangles().forEach((function(t,e,r){var s=t.source,a=t.target,u=s[0][0],c=s[0][1],l=s[1][0],h=s[1][1],_=s[2][0],y=s[2][1],v=d((a[0][0]-T[0])/o),b=d(-(a[0][1]-T[1])/o),x=d((a[1][0]-T[0])/o),E=d(-(a[1][1]-T[1])/o),w=d((a[2][0]-T[0])/o),S=d(-(a[2][1]-T[1])/o),F=u,M=c;u=0,c=0;var I=[[l-=F,h-=M,0,0,x-v],[_-=F,y-=M,0,0,w-v],[0,0,l,h,E-b],[0,0,_,y,S-b]],A=Object(j.e)(I);if(A){if(f.save(),f.beginPath(),function(){if(void 0===O){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",R(t,4,5,4,0),R(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;O=C(e,0)||C(e,4)||C(e,8)}return O}()||p===P){f.moveTo(x,E);for(var L=v-x,G=b-E,D=0;D<4;D++)f.lineTo(x+d((D+1)*L/4),E+d(D*G/3)),3!=D&&f.lineTo(x+d((D+1)*L/4),E+d((D+1)*G/3));f.lineTo(w,S)}else f.moveTo(x,E),f.lineTo(v,b),f.lineTo(w,S);f.clip(),f.transform(A[0],A[2],A[1],A[3],v,b),f.translate(g[0]-F,g[3]-M),f.scale(i/n,-i/n),f.drawImage(m.canvas,0,0),f.restore()}})),l&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach((function(t,e,n){var i=t.target,r=(i[0][0]-T[0])/o,s=-(i[0][1]-T[1])/o,a=(i[1][0]-T[0])/o,u=-(i[1][1]-T[1])/o,c=(i[2][0]-T[0])/o,l=-(i[2][1]-T[1])/o;f.beginPath(),f.moveTo(a,u),f.lineTo(r,s),f.lineTo(c,l),f.closePath(),f.stroke()})),f.restore()),f.canvas}var M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),I=function(t){function e(e,n,i,r,s,a,u,c,l,h,p,f){var d=t.call(this,s,o.a.IDLE)||this;d.renderEdges_=void 0!==p&&p,d.contextOptions_=f,d.pixelRatio_=u,d.gutter_=c,d.canvas_=null,d.sourceTileGrid_=n,d.targetTileGrid_=r,d.wrappedTileCoord_=a||s,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var g=r.getTileCoordExtent(d.wrappedTileCoord_),y=d.targetTileGrid_.getExtent(),v=d.sourceTileGrid_.getExtent(),m=y?Object(_.p)(g,y):g;if(0===Object(_.j)(m))return d.state=o.a.EMPTY,d;var b=e.getExtent();b&&(v=v?Object(_.p)(v,b):b);var O=r.getResolution(d.wrappedTileCoord_[0]),T=function(t,e,n,i){var r=Object(_.m)(n),o=S(t,e,r,i);return(!isFinite(o)||o<=0)&&Object(_.i)(n,(function(n){return o=S(t,e,n,i),isFinite(o)&&o>0})),o}(e,i,m,O);if(!isFinite(T)||T<=0)return d.state=o.a.EMPTY,d;var x=void 0!==h?h:.5;if(d.triangulation_=new E(e,i,m,v,T*x,O),0===d.triangulation_.getTriangles().length)return d.state=o.a.EMPTY,d;d.sourceZ_=n.getZForResolution(T);var P=d.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(P[1]=Object(j.a)(P[1],v[1],v[3]),P[3]=Object(j.a)(P[3],v[1],v[3])):P=Object(_.p)(P,v)),Object(_.j)(P)){for(var w=n.getTileRangeForExtentAndZ(P,d.sourceZ_),R=w.minX;R<=w.maxX;R++)for(var C=w.minY;C<=w.maxY;C++){var F=l(d.sourceZ_,R,C,u);F&&d.sourceTiles_.push(F)}0===d.sourceTiles_.length&&(d.state=o.a.EMPTY)}else d.state=o.a.EMPTY;return d}return M(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==o.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=o.a.ERROR;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=F(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=o.a.LOADED}this.changed()},e.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,r){var s=e.getState();if(s==o.a.IDLE||s==o.a.LOADING){t++;var a=Object(y.a)(e,i.a.CHANGE,(function(n){var i=e.getState();i!=o.a.LOADED&&i!=o.a.ERROR&&i!=o.a.EMPTY||(Object(y.c)(a),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(a)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,n){t.getState()==o.a.IDLE&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(y.c),this.sourcesListenerKeys_=null},e}(l),A=n(246),L=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return Object(A.a)(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Object(A.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Object(A.a)(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function G(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function D(t,e,n){return t+"/"+e+"/"+n}function z(t){return D(t[0],t[1],t[2])}var X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(z(e.tileCoord)),e.release())}.bind(this))}},e}(L),Y="tileloadstart",U="tileloadend",W="tileloaderror",k=n(287),K=n(271),N=n(325),q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function H(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Q=function(t){function e(e){var n=t.call(this)||this;return n.projection_=Object(x.d)(e.projection),n.attributions_=H(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:N.a.READY,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n}return q(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(s.b)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=H(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(K.a),V=n(378),B=n(379),J=n(312);function $(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var tt=[0,0,0],et=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(A.a)(Object(J.b)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(A.a)(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=Object(_.q)(r)),Object(A.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(A.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Object(A.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new B.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):r&&this.calculateTileRanges_(r)}return t.prototype.forEachTileCoord=function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),r=i.minX,o=i.maxX;r<=o;++r)for(var s=i.minY,a=i.maxY;s<=a;++s)n([e,r,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,i){var r,o,s,a=null,u=t[0]-1;for(2===this.zoomFactor_?(o=t[1],s=t[2]):a=this.getTileCoordExtent(t,i);u>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),s=Math.floor(s/2),r=Object(B.a)(o,o,s,s,n)):r=this.getTileRangeForExtentAndZ(a,u,n),e(u,r))return!0;--u}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],r=2*t[2];return Object(B.a)(i,i+1,r,r+1,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t),r=this.getResolution(t),o=$(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*r,a=i[0]+(e.maxX+1)*o[0]*r,u=i[1]+e.minY*o[1]*r,c=i[1]+(e.maxY+1)*o[1]*r;return Object(_.e)(s,u,a,c,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=tt;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),Object(B.a)(r,i[1],o,i[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=$(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=$(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]-(t[2]+1)*r[1]*i,a=o+r[0]*i,u=s+r[1]*i;return Object(_.e)(o,s,a,u,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,r){var o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),u=$(this.getTileSize(o),this.tmpSize_),c=i?.5:0,l=i?.5:0,h=Math.floor((t-a[0])/n+c),p=Math.floor((a[1]-e)/n+l),f=s*h/u[0],d=s*p/u[1];return i?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),G(o,f,d,r)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,r){var o=this.getOrigin(n),s=this.getResolution(n),a=$(this.getTileSize(n),this.tmpSize_),u=i?.5:0,c=i?.5:0,l=Math.floor((t-o[0])/s+u),h=Math.floor((o[1]-e)/s+c),p=l/a[0],f=h/a[1];return i?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),G(n,p,f,r)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){var n=Object(J.c)(this.resolutions_,t,e||0);return Object(j.a)(n,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n},t}(),nt=n(255);function it(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){var r=void 0!==i?i:V.a.TOP_LEFT,o=rt(t,e,n);return new et({extent:t,origin:Object(_.n)(t,r),resolutions:o,tileSize:n})}(ot(t),e,n,i)}(t),t.setDefaultTileGrid(e)),e}function rt(t,e,n,i){for(var r=void 0!==e?e:42,o=Object(_.o)(t),s=Object(_.s)(t),a=$(void 0!==n?n:256),u=i>0?i:Math.max(s/a[0],o/a[1]),c=r+1,l=new Array(c),h=0;h<c;++h)l[h]=u/Math.pow(2,h);return l}function ot(t){var e=(t=Object(x.d)(t)).getExtent();if(!e){var n=180*x.a[nt.b.DEGREES]/t.getMetersPerUnit();e=Object(_.e)(-n,-n,n,n)}return e}var st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),at=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var i=e.tileGrid;return i&&$(i.getTileSize(i.getMinZoom()),[256,256]),n.tileCache=new Z(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return st(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var s,a,u,c=!0,l=n.minX;l<=n.maxX;++l)for(var h=n.minY;h<=n.maxY;++h)a=D(e,l,h),u=!1,r.containsKey(a)&&(u=(s=r.get(a)).getState()===o.a.LOADED)&&(u=!1!==i(s)),u||(c=!1);return c},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,i,r){return Object(s.b)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:it(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(x.b)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var i,r,o,s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),u=$(s.getTileSize(t),this.tmpSize);return 1==a?u:(i=u,r=a,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=i[0]*r+.5|0,o[1]=i[1]*r+.5|0,o)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var i=e[0],r=t.getTileCoordCenter(e),o=ot(n);if(Object(_.c)(o,r))return e;var s=Object(_.s)(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,i)}(i,t,n)),function(t,e){var n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,n):e.getFullTileRange(n))||o.containsXY(i,r)}(t,i)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,i){},e}(Q),ut=function(t){function e(e,n){var i=t.call(this,e)||this;return i.tile=n,i}return st(e,t),e}(k.a),ct=at;function lt(t,e){var n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,u){return s?t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(r,s[2].toString()).replace(o,(function(){var t=s[0],n=e.getFullTileRange(t);return Object(A.a)(n,55),(n.getHeight()-s[2]-1).toString()})):void 0}}function ht(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=lt(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(e){var r=function(t){return(t[1]<<t[0])+t[2]}(e),o=Object(j.d)(r,t.length);return t[o](e,n,i)}}}(i)}var pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ft=function(t){function e(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===e.prototype.tileUrlFunction,i.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(i.tileUrlFunction=n.tileUrlFunction.bind(i)),i.urls=null,n.urls?i.setUrls(n.urls):n.url&&i.setUrl(n.url),i.tileLoadingKeys_={},i}return pt(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,i=Object(s.c)(n),r=n.getState();r==o.a.LOADING?(this.tileLoadingKeys_[i]=!0,e=Y):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=r==o.a.ERROR?W:r==o.a.LOADED?U:void 0),null!=e&&this.dispatchEvent(new ut(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var i=n[1].charCodeAt(0),r=n[2].charCodeAt(0),o=void 0;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(ht(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var i=D(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(ct),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function gt(t,e){t.getImage().src=e}var _t=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:gt,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:T,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.contextOptions_=!1===e.imageSmoothing?P:void 0,n.renderReprojectionEdges_=!1,n}return dt(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[i];r.expireCache(r==n?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Object(x.b)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Object(x.b)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Object(x.b)(e,t)){var n=Object(s.c)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=it(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Object(x.b)(e,t))return this.tileCache;var n=Object(s.c)(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,r,s,a){var u=[t,e,n],c=this.getTileCoordForTileUrlFunction(u,s),l=c?this.tileUrlFunction(c,r,s):void 0,h=new this.tileClass(u,void 0!==l?o.a.IDLE:o.a.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(i.a.CHANGE,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,e,n,i,r){var o=this.getProjection();if(o&&r&&!Object(x.b)(o,r)){var s=this.getTileCacheForProjection(r),a=[t,e,n],u=void 0,c=z(a);s.containsKey(c)&&(u=s.get(c));var l=this.getKey();if(u&&u.key==l)return u;var h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(a,r),d=new I(o,h,r,p,a,f,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return d.key=l,u?(d.interimTile=u,d.refreshInterimChain(),s.replace(c,d)):s.set(c,d),d}return this.getTileInternal(t,e,n,i,o||r)},e.prototype.getTileInternal=function(t,e,n,i,r){var s=null,a=D(t,e,n),u=this.getKey();if(this.tileCache.containsKey(a)){if((s=this.tileCache.get(a)).key!=u){var c=s;s=this.createTile_(t,e,n,i,r,u),c.getState()==o.a.IDLE?s.interimTile=c.interimTile:s.interimTile=c,s.refreshInterimChain(),this.tileCache.replace(a,s)}}else s=this.createTile_(t,e,n,i,r,u),this.tileCache.set(a,s);return s},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Object(x.d)(t);if(n){var i=Object(s.c)(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}},e}(ft),yt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vt=function(t){function e(e){var n=e||{},i=void 0!==n.projection?n.projection:"EPSG:3857",r=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Object(x.d)("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:rt(n,e.maxZoom,e.tileSize,e.maxResolution)};return new et(i)}({extent:ot(i),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return yt(e,t),e}(_t);e.a=vt},458:function(t,e,n){"use strict";var i,r=n(271),o="opacity",s="visible",a="extent",u="zIndex",c="maxResolution",l="minResolution",h="maxZoom",p="minZoom",f="source",d=n(176),g=n(246),_=n(179),y=n(182),v=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(e){var n=t.call(this)||this,i=Object(_.a)({},e);return i[o]=void 0!==e.opacity?e.opacity:1,Object(g.a)("number"==typeof i[o],64),i[s]=void 0===e.visible||e.visible,i[u]=e.zIndex,i[c]=void 0!==e.maxResolution?e.maxResolution:1/0,i[l]=void 0!==e.minResolution?e.minResolution:0,i[p]=void 0!==e.minZoom?e.minZoom:-1/0,i[h]=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==i.className?e.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return v(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Object(y.a)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n?n:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return Object(d.b)()},e.prototype.getLayerStatesArray=function(t){return Object(d.b)()},e.prototype.getExtent=function(){return this.get(a)},e.prototype.getMaxResolution=function(){return this.get(c)},e.prototype.getMinResolution=function(){return this.get(l)},e.prototype.getMinZoom=function(){return this.get(p)},e.prototype.getMaxZoom=function(){return this.get(h)},e.prototype.getOpacity=function(){return this.get(o)},e.prototype.getSourceState=function(){return Object(d.b)()},e.prototype.getVisible=function(){return this.get(s)},e.prototype.getZIndex=function(){return this.get(u)},e.prototype.setExtent=function(t){this.set(a,t)},e.prototype.setMaxResolution=function(t){this.set(c,t)},e.prototype.setMinResolution=function(t){this.set(l,t)},e.prototype.setMaxZoom=function(t){this.set(h,t)},e.prototype.setMinZoom=function(t){this.set(p,t)},e.prototype.setOpacity=function(t){Object(g.a)("number"==typeof t,64),this.set(o,t)},e.prototype.setVisible=function(t){this.set(s,t)},e.prototype.setZIndex=function(t){this.set(u,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(r.a),b=n(195),O="prerender",T="postrender",x="precompose",j=n(325),E=n(263),P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var w=function(t){function e(e){var n=this,i=Object(_.a)({},e);delete i.source,(n=t.call(this,i)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addEventListener(Object(r.b)(f),n.handleSourcePropertyChange_);var o=e.source?e.source:null;return n.setSource(o),n}return P(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(f)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():j.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(E.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(E.a)(t,b.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(E.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(E.c)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(E.a)(t,x,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Object(g.a)(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=Object(E.a)(this,b.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(f,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(m),R="preload",C="useInterimTilesOnError",S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),F=function(t){function e(e){var n=this,i=e||{},r=Object(_.a)({},i);return delete r.preload,delete r.useInterimTilesOnError,(n=t.call(this,r)||this).setPreload(void 0!==i.preload?i.preload:0),n.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),n}return S(e,t),e.prototype.getPreload=function(){return this.get(R)},e.prototype.setPreload=function(t){this.set(R,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(C)},e.prototype.setUseInterimTilesOnError=function(t){this.set(C,t)},e}(w),M=n(380),I=n(313),A=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),L=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n}return A(e,t),e.prototype.getFeatures=function(t){return Object(d.b)()},e.prototype.prepareFrame=function(t){return Object(d.b)()},e.prototype.renderFrame=function(t,e){return Object(d.b)()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(i,r){var o=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){},e.prototype.getDataAtPixel=function(t,e,n){return Object(d.b)()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===M.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=M.a.LOADED&&e!=M.a.ERROR&&t.addEventListener(b.a.CHANGE,this.boundHandleImageChange_),e==M.a.IDLE&&(t.load(),e=t.getState()),e==M.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==j.a.READY&&t.changed()},e}(I.default),G=n(287),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),z=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=i,o.context=r,o}return D(e,t),e}(G.a);new Array(6);function X(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Z(t,e,n,i,r,o,s,a){var u=Math.sin(o),c=Math.cos(o);return t[0]=i*c,t[1]=r*u,t[2]=-i*u,t[3]=r*c,t[4]=s*i*c-a*i*u+e,t[5]=s*r*u+a*r*c+n,t}function Y(t,e){var n,i=(n=e)[0]*n[3]-n[1]*n[2];Object(g.a)(0!==i,32);var r=e[0],o=e[1],s=e[2],a=e[3],u=e[4],c=e[5];return t[0]=a/i,t[1]=-o/i,t[2]=-s/i,t[3]=r/i,t[4]=(s*c-a*u)/i,t[5]=-(r*c-o*u)/i,t}function U(t){return"matrix("+t.join(", ")+")"}var W=n(262),k=n(183),K=n(293),N=n(311),q=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),H=["style","variant","weight","size","lineHeight","family"],Q=function(t){var e=t.match(q);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,r=H.length;i<r;++i){var o=e[i+1];void 0!==o&&(n[H[i]]=o)}return n.families=n.family.split(/,\s?/),n},V=new r.a;(new K.a).setSize=function(){console.warn("labelCache is deprecated.")};var B,J,$,tt=null,et={};(function(){var t,e,n="32px ",i=["monospace","serif"],r=i.length,o="wmytzilWMYTZIL@#/&?$%10\uf013";function s(t,s,a){for(var u=!0,c=0;c<r;++c){var l=i[c];if(e=it(t+" "+s+" "+n+l,o),a!=l){var h=it(t+" "+s+" "+n+a+","+l,o);u=u&&h!=e}}return!!u}function a(){for(var e=!0,n=V.getKeys(),i=0,r=n.length;i<r;++i){var o=n[i];V.get(o)<100&&(s.apply(this,o.split("\n"))?(Object(_.b)(et),tt=null,B=void 0,V.set(o,100)):(V.set(o,V.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}})(),$=et;function nt(t,e){return tt||(tt=Object(W.a)(1,1)),t!=B&&(tt.font=t,B=tt.font),tt.measureText(e)}function it(t,e){return nt(t,e).width}function rt(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))}var ot=null;var st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),at=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return st(e,t),e.prototype.useContainer=function(t,e,n){var i,r,o=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===o&&((a=t.firstElementChild)instanceof HTMLCanvasElement&&(r=a.getContext("2d")));if(!r||0!==r.canvas.width&&r.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=r,this.containerReused=!0),!this.container){(i=document.createElement("div")).className=o;var s=i.style;s.position="absolute",s.width="100%",s.height="100%";var a=(r=Object(W.a)()).canvas;i.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=i,this.context=r}},e.prototype.clip=function(t,e,n){var i=e.pixelRatio,r=e.size[0]*i/2,o=e.size[1]*i/2,s=e.viewState.rotation,a=Object(k.q)(n),u=Object(k.r)(n),c=Object(k.l)(n),l=Object(k.k)(n);X(e.coordinateToPixelTransform,a),X(e.coordinateToPixelTransform,u),X(e.coordinateToPixelTransform,c),X(e.coordinateToPixelTransform,l),t.save(),rt(t,-s,r,o),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(c[0]*i,c[1]*i),t.lineTo(l[0]*i,l[1]*i),t.clip(),rt(t,s,r,o)},e.prototype.clipUnrotated=function(t,e,n){var i=Object(k.q)(n),r=Object(k.r)(n),o=Object(k.l)(n),s=Object(k.k)(n);X(e.coordinateToPixelTransform,i),X(e.coordinateToPixelTransform,r),X(e.coordinateToPixelTransform,o),X(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;X(a,i),X(a,r),X(a,o),X(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var i=this.getLayer();if(i.hasListener(t)){var r=new z(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(O,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(T,t,e)},e.prototype.getRenderTransform=function(t,e,n,i,r,o,s){var a=r/2,u=o/2,c=i/e,l=-c,h=-t[0]+s,p=-t[1];return Z(this.tempTransform,a,u,c,l,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var i,r=X(this.inversePixelTransform,t.slice()),o=this.context;try{var s=Math.round(r[0]),a=Math.round(r[1]),u=document.createElement("canvas"),c=u.getContext("2d");u.width=1,u.height=1,c.clearRect(0,0,1,1),c.drawImage(o.canvas,s,a,1,1,0,0,1,1),i=c.getImageData(0,0,1,1).data}catch(l){return"SecurityError"===l.name?new Uint8Array:i}return 0===i[3]?null:i},e}(L),ut=n(379),ct=n(241),lt=n(243),ht=n(312),pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ft=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=Object(k.d)(),n.tmpTileRange_=new ut.b(0,0,0,0),n}return pt(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==ct.a.LOADED||n==ct.a.EMPTY||n==ct.a.ERROR&&!i},e.prototype.getTile=function(t,e,n,i){var r=i.pixelRatio,o=i.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,n,r,o);return a.getState()==ct.a.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(ct.a.LOADED)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,n,i){return!!this.isDrawableTile(i)&&t.prototype.loadedTileCallback.call(this,e,n,i)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,o=i.resolution,s=i.center,a=i.rotation,u=t.pixelRatio,c=this.getLayer(),l=c.getSource(),h=l.getRevision(),p=l.getTileGridForProjection(r),f=p.getZForResolution(o,l.zDirection),g=p.getResolution(f),y=t.extent,v=n.extent&&Object(lt.c)(n.extent,r);v&&(y=Object(k.p)(y,Object(lt.c)(n.extent,r)));var m=l.getTilePixelRatio(u),b=Math.round(t.size[0]*m),O=Math.round(t.size[1]*m);if(a){var T=Math.round(Math.sqrt(b*b+O*O));b=T,O=T}var x=g*b/2/m,j=g*O/2/m,E=[s[0]-x,s[1]-j,s[0]+x,s[1]+j],P=p.getTileRangeForExtentAndZ(y,f),w={};w[f]={};var R=this.createLoadedTileFinder(l,r,w),C=this.tmpExtent,S=this.tmpTileRange_;this.newTiles_=!1;for(var F=P.minX;F<=P.maxX;++F)for(var M=P.minY;M<=P.maxY;++M){var I=this.getTile(f,F,M,t);if(this.isDrawableTile(I)){var A=Object(d.c)(this);if(I.getState()==ct.a.LOADED){w[f][I.tileCoord.toString()]=I;var L=I.inTransition(A);this.newTiles_||!L&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(A,t.time))continue}var G=p.getTileCoordChildTileRange(I.tileCoord,S,C),D=!1;G&&(D=R(f+1,G)),D||p.forEachTileCoordParentTileRange(I.tileCoord,R,S,C)}var z=g/o;Z(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,a,-b/2,-O/2);var K,q=(K=this.pixelTransform,N.b?U(K):(ot||(ot=Object(W.a)(1,1).canvas),ot.style.transform=U(K),ot.style.transform));this.useContainer(e,q,n.opacity);var H=this.context,Q=H.canvas;Y(this.inversePixelTransform,this.pixelTransform),Z(this.tempTransform,b/2,O/2,z,z,0,-b/2,-O/2),Q.width!=b||Q.height!=O?(Q.width=b,Q.height=O):this.containerReused||H.clearRect(0,0,b,O),v&&this.clipUnrotated(H,t,v),Object(_.a)(H,l.getContextOptions()),this.preRender(H,t),this.renderedTiles.length=0;var V,B,J,$=Object.keys(w).map(Number);$.sort(ht.d),1!==n.opacity||this.containerReused&&!l.getOpaque(t.viewState.projection)?(V=[],B=[]):$=$.reverse();for(var tt=$.length-1;tt>=0;--tt){var et=$[tt],nt=l.getTilePixelSize(et,u,r),it=p.getResolution(et)/g,rt=nt[0]*it*z,st=nt[1]*it*z,at=p.getTileCoordForCoordAndZ(Object(k.q)(E),et),ut=p.getTileCoordExtent(at),pt=X(this.tempTransform,[m*(ut[0]-E[0])/g,m*(E[3]-ut[3])/g]),ft=m*l.getGutterForProjection(r),dt=w[et];for(var gt in dt){var _t=(I=dt[gt]).tileCoord,yt=pt[0]-(at[1]-_t[1])*rt,vt=Math.round(yt+rt),mt=pt[1]-(at[2]-_t[2])*st,bt=Math.round(mt+st),Ot=vt-(F=Math.round(yt)),Tt=bt-(M=Math.round(mt)),xt=f===et;if(!(L=xt&&1!==I.getAlpha(Object(d.c)(this),t.time)))if(V){H.save(),J=[F,M,F+Ot,M,F+Ot,M+Tt,F,M+Tt];for(var jt=0,Et=V.length;jt<Et;++jt)if(f!==et&&et<B[jt]){var Pt=V[jt];H.beginPath(),H.moveTo(J[0],J[1]),H.lineTo(J[2],J[3]),H.lineTo(J[4],J[5]),H.lineTo(J[6],J[7]),H.moveTo(Pt[6],Pt[7]),H.lineTo(Pt[4],Pt[5]),H.lineTo(Pt[2],Pt[3]),H.lineTo(Pt[0],Pt[1]),H.clip()}V.push(J),B.push(et)}else H.clearRect(F,M,Ot,Tt);this.drawTileImage(I,t,F,M,Ot,Tt,ft,xt,n.opacity),V&&!L&&H.restore(),this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,l,I)}}return this.renderedRevision=h,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Object(k.f)(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,l,p,u,r,y,f,c.getPreload()),this.scheduleExpireCache(t,l),this.postRender(H,t),n.extent&&H.restore(),q!==Q.style.transform&&(Q.style.transform=q),this.container},e.prototype.drawTileImage=function(t,e,n,i,r,o,s,a,u){var c=this.getTileImage(t);if(c){var l=Object(d.c)(this),h=a?t.getAlpha(l,e.time):1,p=u*h,f=p!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(c,s,s,c.width-2*s,c.height-2*s,n,i,r,o),f&&this.context.restore(),1!==h?e.animate=!0:a&&t.endTransition(l)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var i=Object(d.c)(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var i=Object(d.c)(e);i in t||(t[i]={}),t[i][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,i,r,o,s,a,u){var c=Object(d.c)(e);c in t.wantedTiles||(t.wantedTiles[c]={});var l,h,p,f,g,_,y=t.wantedTiles[c],v=t.tileQueue,m=0;for(_=n.getMinZoom();_<=s;++_)for(h=n.getTileRangeForExtentAndZ(o,_,h),p=n.getResolution(_),f=h.minX;f<=h.maxX;++f)for(g=h.minY;g<=h.maxY;++g)s-_<=a?(++m,(l=e.getTile(_,f,g,i,r)).getState()==ct.a.IDLE&&(y[l.getKey()]=!0,v.isKeyQueued(l.getKey())||v.enqueue([l,c,n.getTileCoordCenter(l.tileCoord),p])),void 0!==u&&u(l)):e.useTile(_,f,g,r);e.updateCacheSize(m,r)},e}(at);ft.prototype.getLayer;var dt=ft,gt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_t=function(t){function e(e){return t.call(this,e)||this}return gt(e,t),e.prototype.createRenderer=function(){return new dt(this)},e}(F);e.a=_t}}]);